"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["742"],{57391:function(e,t,n){n.d(t,{Vt:()=>x,f9:()=>C,gn:()=>v,jc:()=>h,kx:()=>k,ng:()=>w});var i,r=n(7409),o=n(99282),s=n(16584),a=n(6400),l=n(98661),d=n(30396),u=n(78718),m=n.n(u),_=n(35702),p=n(48980),c=n(8589);let f={variantOverrides:{},experimentFeatures:{},experimentExposures:{}};function v(){return"undefined"!=typeof window&&(0,r._)({variantOverrides:{},experimentFeatures:{},experimentExposures:{}},m()(window._preloads,["variantOverrides","experimentFeatures","experimentExposures","pubIdOverride"]))||f}let y=v(),g="undefined"!=typeof window?null===(i=window._preloads)||void 0===i?void 0:i.siteConfigs:{},w=(e,t)=>{let n=t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n},i=e=>{if(!e)return null;let i=n(e);if((0,c.Dh)(i))return{intendedVariant:i,shouldLog:!1};if(t.variantOverrides&&e in t.variantOverrides)return{intendedVariant:t.variantOverrides[e],shouldLog:!1};let r=t.experimentExposures||{};if(r[e])return{intendedVariant:r[e],shouldLog:!1};let o=t.experimentFeatures||{};return o[e]?{intendedVariant:o[e],shouldLog:!0}:null},r=async(e,t,n)=>{if("undefined"!=typeof window){window._preloads.experimentExposures=window._preloads.experimentExposures||{};let i=window._preloads.experimentExposures;i[e]=t;try{await (0,p.rd)("/api/v1/experiment_exposure",{json:{experiment_name:e,variant_name:t,ignore_downsampling:!!n},method:"post"})}catch(t){delete i[e]}}};return{getExperimentVariant:e=>{let t=i(e);return t?t.intendedVariant:null},exposeExperiment:async function(e){let{ignoreDownsampling:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{intendedVariant:n,shouldLog:o}=i(e)||{};return!!o&&(await r(e,n,!!t),!0)},getExposedVariant:e=>{if(!e)return null;let i=n(e);if((0,c.Dh)(i))return i;if(t.variantOverrides&&e in t.variantOverrides)return t.variantOverrides[e];let r=t.experimentExposures||{};return r[e]?r[e]:null},refreshExperimentVariants:async function(){let e,{ignoreDownsampling:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(e=new URLSearchParams({ignore_downsampling:"true"}));let n=await (0,p.rd)("/api/v1/experiment_features",{method:"get",query:e});(null==n?void 0:n.features)&&(0,_.a)({experimentFeatures:n.features})}}},k=(0,a.createContext)(w(g,y));function x(e){let{siteConfigs:t={},experimentInfo:n,children:i}=e,r=n||y,o=(0,d.Ye)(()=>w(t,r),[t,...Object.values(r)]);return(0,s.tZ)(k.Provider,{value:o,children:i})}function h(){return(0,d.qp)(k)}k.displayName="ExperimentsContext";let C=e=>{let t=(0,l.forwardRef)((t,n)=>{let i=h();return(0,s.tZ)(e,(0,o._)((0,r._)({},i,t),{ref:n}))});return t.displayName="withExperimentsContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},37168:function(e,t,n){n.d(t,{WH:()=>v,ZN:()=>y,hO:()=>g});var i,r,o=n(7409),s=n(99282),a=n(16584),l=n(6400),d=n(98661),u=n(30396),m=n(57391),_=n(40647);let p=(0,m.gn)(),c="undefined"!=typeof window&&null!==(r=null===(i=window._preloads)||void 0===i?void 0:i.siteConfigs)&&void 0!==r?r:{},f=(e,t)=>(0,o._)({},(0,m.ng)(e,t),(0,_.Xz)(e)),v=(0,l.createContext)(f(c,p));function y(e){let{siteConfigs:t={},experimentInfo:n,children:i}=e,r=n||p,o=(0,u.Ye)(()=>f(t,r),[t,r]);return(0,a.tZ)(v.Provider,{value:o,children:i})}v.displayName="ExperimentsAndSiteConfigContext";let g=e=>{let t=(0,d.forwardRef)((t,n)=>{let i=(0,u.qp)(v);return(0,a.tZ)(e,(0,s._)((0,o._)({},i,t),{ref:n}))});return t.displayName="withExperimentsAndSiteConfigContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},56629:function(e,t,n){if(n.d(t,{Iz:()=>v,So:()=>y,us:()=>f,vz:()=>c}),!/^(1588|1691|2536|4457|6673|7778)$/.test(n.j))var i,r,o=n(7409);if(!/^(1588|1691|2536|3270|4457|6673|7778)$/.test(n.j))var s=n(99282);var a=n(16584),l=n(6400),d=n(98661),u=n(30396),m=n(48980);let _="undefined"!=typeof window&&null!==(r=null===(i=window._preloads)||void 0===i?void 0:i.publicationSettings)&&void 0!==r?r:{};function p(e){return t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}let c=(0,l.createContext)({getSettingFor:p(_),changeSetting:()=>Promise.resolve(void 0),preloadedPubSettings:_});c.displayName="PublicationSettingsContext";let f=e=>{let t=(0,d.forwardRef)((t,n)=>{let i=y();return(0,a.tZ)(e,(0,s._)((0,o._)({},i,t),{ref:n}))});return t.displayName="withPubSettingsContext(".concat(e.displayName||e.name||"Anonymous",")"),t};function v(e){let{settings:t={},children:n}=e,[i,r]=(0,u.eJ)(t),s=async e=>{r((0,o._)({},i,e));try{await (0,m.rd)("/api/v1/publication_settings",{method:"PUT",json:e})}catch(e){console.error(e)}},l=(0,u.Ye)(()=>({getSettingFor:p(i),changeSetting:s,preloadedPubSettings:i}),[i]);return(0,a.tZ)(c.Provider,{value:l,children:n})}function y(){return(0,u.qp)(c)}},40647:function(e,t,n){n.d(t,{QA:()=>m,Xz:()=>u,vC:()=>_,xR:()=>c,xY:()=>p});var i,r,o=n(7409),s=n(99282),a=n(16584),l=n(98661);let d="undefined"!=typeof window&&null!==(r=null===(i=window._preloads)||void 0===i?void 0:i.siteConfigs)&&void 0!==r?r:{},u=e=>({allConfigs:e,getConfigFor:t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}),m=(0,l.createContext)(u(d));function _(e){let{siteConfigs:t={},children:n}=e,i=(0,l.useMemo)(()=>u(t),[t]);return(0,a.tZ)(m.Provider,{value:i,children:n})}m.displayName="SiteConfigsContext";let p=e=>{let t=(0,l.forwardRef)((t,n)=>{let i=c();return(0,a.tZ)(e,(0,s._)((0,o._)({},i,t),{ref:n}))});return t.displayName="withSiteConfigContext(".concat(e.displayName||e.name||"Anonymous",")"),t};function c(){return(0,l.useContext)(m)}},60807:function(e,t,n){n.d(t,{Fl:()=>y,SE:()=>g,St:()=>c,aF:()=>v,dr:()=>f});var i,r,o,s,a=n(7409),l=n(99282),d=n(16584),u=n(98661),m=n(48980);let _="undefined"!=typeof window&&null!==(o=null===(i=window._preloads)||void 0===i?void 0:i.user)&&void 0!==o?o:null,p="undefined"!=typeof window&&null!==(s=null===(r=window._preloads)||void 0===r?void 0:r.userSettings)&&void 0!==s?s:{},c=(0,u.createContext)({user:_,setUser:()=>void 0,userSettings:p,changeSetting:()=>Promise.resolve()});function f(e){let{defaultValue:t,userSettings:n,children:i}=e,[r,o]=(0,u.useState)(t||_),[s,f]=(0,u.useState)(null!=n?n:p),v=async(e,t,n,i)=>{if(!r&&!(null==i?void 0:i.token))return;let o=s[e];f((0,l._)((0,a._)({},s),{[e]:t}));try{await (0,m.rd)("/api/v1/user-setting",{method:"PUT",json:{type:e,value_bool:"bool"!==n&&(n||"boolean"!=typeof t)?void 0:t,value_datetime:"datetime"!==n&&(n||"string"!=typeof t)?void 0:t,value_text:"text"===n?t:void 0,token:null==i?void 0:i.token}})}catch(t){if(t instanceof m.kp)alert(t.getMessage()),f(t=>(0,l._)((0,a._)({},t),{[e]:o}));else throw t}},y=(0,u.useMemo)(()=>({user:r,setUser:o,userSettings:s,changeSetting:v}),[r,s]);return(0,d.tZ)(c.Provider,{value:y,children:i})}function v(){return(0,u.useContext)(c).user}function y(){return(0,u.useContext)(c).userSettings}function g(){return(0,u.useContext)(c)}c.displayName="UserContext"},35500:function(e,t,n){n.d(t,{bq:()=>s,dD:()=>o}),n(16584),n(43924),n(63651),n(84864);var i,r,o=((i={}).ARR10K="arr10k",i.ARR1K="arr1k",i),s=((r={}).List1K="list1k",r.List100="list100",r)},12444:function(e,t,n){n.d(t,{O:()=>i});let i={community_comment_like:"community_comment_like",community_post_like:"community_post_like",community_post_reply:"community_post_reply",community_comment_quote_reply:"community_comment_quote_reply",community_comment_reply:"community_comment_reply",community_comment_mention:"community_comment_mention",comment_like:"comment_like",comment_reply:"comment_reply",free_subscription:"free_subscription",post_like:"post_like",post_reply:"post_reply",post_mention:"post_mention",restack:"restack",restack_quote:"restack_quote",follow:"follow",user_first_note:"user_first_note",comment_mention:"comment_mention",new_profile:"new_profile",new_note:"new_note",note_like:"note_like",note_reply:"note_reply",naked_restack_reaction:"naked_restack_reaction",comment_arr:"comment_arr",referred_free_subscription:"referred_free_subscription",arr_1k_milestone:"arr_1k_milestone",arr_10k_milestone:"arr_10k_milestone",list_100_milestone:"list_100_milestone",list_1k_milestone:"list_1k_milestone",viral_post:"viral_post",paid_subscription:"paid_subscription",pledged_subscription:"pledged_subscription",share_handle:"share_handle",paywall_unlock:"paywall_unlock",publication_recommendation:"publication_recommendation",live_stream:"live_stream",live_stream_invite:"live_stream_invite",live_stream_scheduled:"live_stream_scheduled",live_stream_scheduled_invite:"live_stream_scheduled_invite",live_stream_host_reminder:"live_stream_host_reminder",mentioning_comment_like:"mentioning_comment_like",mentioning_comment_reply:"mentioning_comment_reply",mentioning_comment_restack:"mentioning_comment_restack",post_shareable_assets_ready:"post_shareable_assets_ready",viral_gift_granted:"viral_gift_granted",leaderboard_update:"leaderboard_update",media_clip_like:"media_clip_like"}},42886:function(e,t,n){n.d(t,{D2:()=>a,QP:()=>o,qX:()=>s});var i,r,o=((i={}).ForYou="for-you",i.ForYouExperimental="for-you-experimental",i.ForYouRanking="for-you-ranking",i.Subscribed="subscribed",i.Media="media",i.Writers="writers-v2",i.FeaturedContentPreview="featured-content-preview",i.TopLikeLastWeek="top-like-last-week",i.TopLikeLastDay="top-like-last-day",i.TopImpressionLastWeek="top-impression-last-week",i.TopImpressionLastDay="top-impression-last-day",i.TestQuotes="test-quotes",i.Activity="activity",i.MediaNotes="media-notes",i.SearchNotes="search-notes",i.SeachNotesLatest="search-notes-latest",i.SearchNotesTop="search-notes-top",i.SearchTop="search-top",i.DemoFeed="demo-feed",i.DemoFeedCustom="demo-feed-custom",i.Tiktokers="featured-tiktokers",i.Video="video",i.WelcomeVideo="welcome-videos",i.NewBestsellers="bestseller",i.MediaLongform="media-longform",i.ForYouDPNRanking="for-you-dpn-ranking",i),s=((r={}).Base="base",r.Secondary="secondary",r.Topic="topic",r.Category="category",r);function a(e,t){var n,i;return"post"===e.type&&!!e.mediaClip||"comment"===e.type&&!!(null===(n=e.comment.attachments)||void 0===n?void 0:n.some(e=>"post"===e.type&&e.mediaClip))||(t&&"attachments"in t?!!(null===(i=t.attachments)||void 0===i?void 0:i.some(e=>"post"===e.type&&e.mediaClip)):!!(t&&"mediaClip"in t&&t.mediaClip))}},20591:function(){}}]);