"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6651"],{59570:function(e,t,i){i.d(t,{Z:()=>n});let n={hasModal:"hasModal-wSdbP6",navItem:"navItem-j5ttIV",badge:"badge-KxcQNG",navIcon:"navIcon-upCa3a",dot:"dot-jeK4Sn",avatarActive:"avatarActive-OlonWd",cta:"cta-sYbRC5",topNavContainer:"topNavContainer-G4_DdD",topNav:"topNav-x_3DWw",searchInputContainer:"searchInputContainer-fDD3oJ",kbd:"kbd-XAODB6",searchInput:"searchInput-t7Tuoo",sideNav:"sideNav-O74Ik5",profileSideNavContainer:"profileSideNavContainer-ENky5u",mobileNavContainer:"mobileNavContainer-adr1V0",mobileNav:"mobileNav-hYkAiz",profileMenu:"profileMenu-DRpsi9",startCta:"startCta-nEqwUG",navCta:"navCta-p1_yS3",activeAvatar:"activeAvatar-G7ALgV",floatingCta:"floatingCta-lejCBE",login:"login-dMZCvs",isLocked:"isLocked-CLLGBu",menuIcon:"menuIcon-_7fcyS",qrContainer:"qrContainer-zEiGvo",qrCode:"qrCode-YKWDm8",modalViewer:"modalViewer-EReBU2",active:"active-xQbwWj","mobile-nav-on-island":"mobile-nav-on-island-S4KUYS",mobileNavOnIsland:"mobile-nav-on-island-S4KUYS","reader2-mobile-nav-icon":"reader2-mobile-nav-icon-bEBtRd",reader2MobileNavIcon:"reader2-mobile-nav-icon-bEBtRd",logo:"logo-owrxa8"}},81352:function(e,t,i){i.d(t,{Z:()=>n});let n={activeLike:"activeLike-n4wXdc",activeSave:"activeSave-UgcaYI",actionMenu:"actionMenu-PHX5iz",relative:"relative-IkyQqe"}},78691:function(e,t,i){i.d(t,{Z:()=>n});let n={viewer:"viewer-ecNuD7",nav:"nav-XSY6_G",navArrows:"navArrows-yQyPsn",bottomNav:"bottomNav-cjoblk",isReading:"isReading-OrZu1k",viewerContainer:"viewerContainer-hf71i1",viewerOffset:"viewerOffset-T8duEs",actionIcon:"actionIcon-uFP5Oe",content:"content-cFaSRD",navArrow:"navArrow-xdopTu",post:"post-XKrpvd",ufi:"ufi-l5oCA2",logoContainer:"logoContainer-m31AvM",ufiButton:"ufiButton-nSWhO0",likeButton:"likeButton-cDwe1L",isLiked:"isLiked-xJDjjp",commentButton:"commentButton-sQzbUO",restackButton:"restackButton-sMOIvG",isRestacked:"isRestacked-EvdZvU",shareButton:"shareButton-oCXda_",shortcutTooltip:"shortcutTooltip-pU9wZf",close:"close-zwyGNy",referringPubContainer:"referringPubContainer-BWGotX",referringPubTextContainer:"referringPubTextContainer-tL5sbE"}},78489:function(e,t,i){i.d(t,{Z:()=>n});let n={jumpButton:"jumpButton-AIaH5l",hidden:"hidden-jcjp2w"}},79948:function(e,t,i){i.d(t,{Z:()=>n});let n={heart:"heart-v8Jdcb"}},59065:function(e,t,i){i.d(t,{Z:()=>n});let n={fillIcon:"fillIcon-CcS0fl",twitterVerifiedIcon:"twitterVerifiedIcon-v59YgL",profileRow:"profileRow-pxzPMX",profileImage:"profileImage-HkuUYh",socialLinkIcon:"socialLinkIcon-yTx6z2",stat:"stat-fGDQWV",readsRow:"readsRow-sdX9cR",page:"page-tdumDw",grid:"grid-bCt58x",pubMain:"pubMain-P7p9KT",pub:"pub-WKvJgt","reader2-mobile-nav-icon":"reader2-mobile-nav-icon-B_bswu",reader2MobileNavIcon:"reader2-mobile-nav-icon-B_bswu"}},43894:function(e,t,i){i.d(t,{Z:()=>n});let n={themedHeader:"themedHeader-lLmwEa",themedHeaderOverlay:"themedHeaderOverlay-nTCb4C",blurImage:"blurImage-QrU1gn"}},56199:function(e,t,i){i.d(t,{Z:()=>n});let n={modalContainer:"modalContainer-mJcb4X",fullWidth:"fullWidth-G75cMo",previewImage:"previewImage-PB2ITv"}},77747:function(e,t,i){i.d(t,{I:()=>S,Jg:()=>k,aQ:()=>M,oQ:()=>T});var n=i(16584),r=i(6400),l=i(30396),o=i(94184),a=i.n(o),s=i(20160),d=i(93228),c=i(5772),u=i(60807),p=i(48980),h=i(7882),m=i(80026),v=i(32700),f=i(21685),b=i(98248),g=i(40225),Z=i(63474),y=i(58175),_=i(55533),C=i(23710);let w=(0,r.createContext)({isLoading:!1,emojis:{suggestedReactionTypes:[],categories:[],reactionTypes:{}}});function S(e){let{children:t}=e,{user:i}=(0,u.SE)(),{result:r,isLoading:l}=(0,h.ib)({pathname:"/api/v1/threads/reactions",method:"GET",cacheTtl:6e5,auto:!!i});return(0,n.tZ)(w.Provider,{value:{emojis:r,isLoading:l},children:t})}function k(e){let{context:t,reactions:i,currentReaction:r,onReactionClick:o,isReadOnly:d,showCounts:c=!0,maxReactions:u,direction:p}=e,h=i&&Object.keys(i).some(e=>i[e]>0),b=(0,l.sO)(null),[g,Z]=(0,l.eJ)(!1),{emojis:_,isLoading:S}=(0,l.qp)(w),k=(0,l.Ye)(()=>i&&(null==_?void 0:_.reactionTypes)?Object.entries(i).sort((e,t)=>{let[i,n]=e,[r,l]=t;return n===l?i.localeCompare(r):l-n}).filter(e=>{let[t,i]=e;return i>0&&_.reactionTypes[t]}).slice(0,3):[],[i,_]);return(null==_?void 0:_.reactionTypes)?(0,n.tZ)(s.W,{children:(0,n.BX)(m.gq,{onClick:z,className:a()(C.Z.reactionsContainer,{[C.Z.show]:h||g,[C.Z.outgoing]:"outgoing"===p}),children:[k.map(e=>{let[i,l]=e,s=_.reactionTypes[i],d=i===r||s===r,u=(0,n.BX)(m.gq,{className:a()(C.Z.reaction,{[C.Z.selected]:c&&d}),shadow:"sm",bg:"primary",gap:4,alignItems:"center",justifyContent:"center",paddingX:6,onClick:()=>s&&o&&o(i,s),children:[(0,n.tZ)(y.xv.B4,{font:"emoji",children:s}),c&&(0,n.tZ)(y.xv.Meta,{fontWeight:"bold",color:d?"white":"primary",children:l})]},i);return["feed-recommended","direct-message"].includes(t.type)?u:(0,n.tZ)(v.z,{layerClassName:C.Z.nameCard,content:(0,n.tZ)(I,{context:t,reaction:i}),layerOptions:{placement:"bottom-center"},children:u},i)}),!d&&(!u||!r)&&(0,n.tZ)(f.J,{content:e=>{let{closePopover:t}=e;return(0,n.tZ)(B,{emojis:_,isLoading:S,currentReaction:r,onPick:(e,i)=>{o&&o(e,i),t()},inputRef:b})},autofocus:!0,inputRef:b,preferPlacement:"bottom-center",hideOnScroll:!0,layerClassName:C.Z.emojiPopover,onOpen:()=>Z(!0),onClose:()=>Z(!1),children:(0,n.tZ)(x,{})})]})}):null}function x(){return(0,n.tZ)(m.hs,{className:C.Z.addReactButton,shadow:"sm",bg:"primary",paddingX:4,alignItems:"center",children:(0,n.tZ)(d.Z,{className:C.Z.addReactIcon})})}function B(e){var t;let{emojis:r,isLoading:o,currentReaction:a,onPick:d,inputRef:u}=e,p=(0,l.Ye)(()=>(null==r?void 0:r.reactionTypes)&&!o?Object.keys(r.reactionTypes):[],[null==r?void 0:r.reactionTypes,o]),{result:v,isLoading:f}=(0,h.Wf)(()=>i.e("7710").then(i.t.bind(i,54833,19)),[],{auto:!0}),Z=(0,l.I4)(e=>[e,...(null==v?void 0:v[e])||[]],[v]),{filteredItems:y,setQuery:C,hasFiltered:w,query:S}=(0,c.R)({items:p,getKeys:Z,deps:[p,Z]});return(0,n.tZ)(s.W,{children:(0,n.BX)(m.tu,{sizing:"border-box",gap:12,padding:4,minWidth:320,height:400,onClick:z,children:[(0,n.tZ)(g.M,{ref:u,onChange:C}),o||f?(0,n.tZ)(m.tu,{flex:"grow",justifyContent:"center",alignItems:"center",children:(0,n.tZ)(b.$j,{})}):(0,n.BX)(n.HY,{children:[w&&(y&&y.length>0?(0,n.tZ)(N,{reactions:y,currentReaction:a,onPick:d,emojiMap:r.reactionTypes,title:null}):(0,n.tZ)(_.vJ,{title:"No results for ".concat(S),body:"Try another search"})),!w&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(N,{reactions:r.suggestedReactionTypes,currentReaction:a,onPick:d,emojiMap:r.reactionTypes,title:"Suggested"}),null===(t=r.categories)||void 0===t?void 0:t.map(e=>(0,n.tZ)(N,{reactions:e.reactionTypes,currentReaction:a,onPick:d,emojiMap:r.reactionTypes,title:e.title},e.title))]})]})]})})}function I(e){var t;let{reaction:i,context:r}=e,l=["posts","feed-subscribed"].includes(r.type)?"/api/v1/community/posts/".concat(r.id,"/reactions"):"/api/v1/community/comments/".concat(r.id,"/reactions"),{result:o,isLoading:a}=(0,h.ib)({pathname:l,method:"GET",auto:!0});if(a)return(0,n.tZ)(b.$j,{});let s=(null!==(t=null==o?void 0:o.reactions.filter(e=>e.reaction===i))&&void 0!==t?t:[]).map(e=>e.user.name),d=s.slice(0,6),c=Math.max(0,s.length-6);return(0,n.BX)(m.tu,{gap:2,position:"relative",onClick:z,overflowY:"auto",children:[d.map(e=>(0,n.tZ)(X,{text:e})),c>0&&(0,n.tZ)(X,{text:"+ ".concat(c," ").concat(1===c?"other":"others")})]})}function N(e){let{reactions:t,currentReaction:i,onPick:r,emojiMap:l,title:o}=e;return(0,n.BX)(m.tu,{gap:4,children:[o&&(0,n.tZ)(y.xv.B4,{color:"secondary",children:o}),(0,n.tZ)(m.xu,{className:C.Z.emojiGrid,gap:2,alignItems:"center",justifyContent:"center",children:null==t?void 0:t.map(e=>(0,n.tZ)(P,{onClick:()=>r(e,l[e]),className:a()(C.Z.emojiBox,{[C.Z.selected]:e===i}),children:(0,n.tZ)(L,{children:l[e]})},e))})]})}function X(e){let{text:t}=e;return(0,n.tZ)(y.xv,{size:12,color:"primary",weight:"medium",font:"text",children:t})}let P=(0,Z.zo)({bg:"primary",alignItems:"center",justifyContent:"center",radius:"sm",width:32,height:32,cursor:"pointer"},Z.X2),L=(0,Z.zo)({fontSize:20,lineHeight:20,color:"primary",fontWeight:"medium",font:"emoji"}),z=e=>{e.stopPropagation(),e.preventDefault()};async function T(e,t,i){try{return await (0,p.rd)("/api/v1/community/".concat(i,"/").concat(t,"/reaction"),{method:"POST",json:{reaction:e}})}catch(e){return e}}async function M(e,t,i){try{return await (0,p.rd)("/api/v1/community/".concat(i,"/").concat(t,"/reaction"),{method:"DELETE",query:{reaction:e}})}catch(e){return e}}},51455:function(e,t,i){i.d(t,{I:()=>w});var n=i(7409),r=i(99282),l=i(58865),o=i(16584),a=i(30396),s=i(45609),d=i(98661),c=i(20160),u=i(95441),p=i(98914),h=i(15771),m=i(19081),v=i(98248),f=i(51776),b=i(70379),g=i(60836),Z=i(63651),y=i(64473);function _(){let e=(0,l._)([""," by ",""]);return _=function(){return e},e}let C=e=>{let{width:t,height:i}=e,n="undefined"!=typeof window?window.innerHeight:1/0,r=1;return n<700?r=.7:n<800?r=.75:n<900&&(r=.8),{width:t*r,height:i*r,scaler:r}};function w(e){let{onClose:t,post:i,pub:l,comment:w}=e,{iString:S,iTemplate:k,language:x}=(0,u.M1)(),[B,I]=(0,a.eJ)({width:400,height:400}),[N,X]=(0,a.eJ)(!1),P=(0,a.sO)(null),{popToast:L}=(0,b.pm)(),z=(e,t)=>'<div class="substack-post-embed"><p lang="'.concat(x,'">').concat(k(_(),t.title,e.author_name),"</p><p>").concat(t.subtitle,'</p><a data-post-link href="').concat((0,g.Mo)(e,t.slug),'">').concat(S("Read on Substack"),'</a></div><script async src="').concat((0,Z.ZJn)(),'/embedjs/embed.js" charset="utf-8"><\/script>'),T=e=>'<div class="substack-post-embed"><p lang="'.concat(x,'">').concat("".concat(e.body||""),"</p>").concat(e.name?"<p> - ".concat(e.name,"</p>"):e.handle?"<p> - @".concat(e.handle,"</p>"):"",'<a data-comment-link href="').concat((0,Z.Sgq)(e),'">').concat(S("Read on Substack"),'</a></div><script async src="').concat((0,Z.ZJn)(),'/embedjs/embed.js" charset="utf-8"><\/script>');(0,d.useEffect)(()=>{if(!w&&!i)return;let e=e=>{e.data.iframeHeight&&(I({width:500,height:e.data.iframeHeight}),X(!0))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[w,i]);let{width:M,height:E,scaler:O}=C(B);return(0,o.tZ)(c.W,{children:(0,o.BX)(m.tu,{padding:20,gap:20,bg:"primary",children:[(0,o.tZ)("div",{style:{width:M,height:E,display:N?"block":"none",opacity:N?"visible":"hidden",alignSelf:"center"},children:(0,o.tZ)("iframe",{ref:P,style:{transform:"scale(".concat(O,")"),width:B.width,height:B.height},className:y.Z.iframe,src:w?(0,Z.QXp)(w,{isPreview:!0}):l&&i?(0,g.Tg)(l,i.slug,{isPreview:!0}):"",onLoad:()=>{X(!0)}})}),!N&&(0,o.tZ)(m.gq,{flex:"grow",minHeight:220,bg:"secondary",radius:"md",justifyContent:"center",alignItems:"center",border:"detail",children:(0,o.tZ)(v.$j,{})}),(0,o.BX)(m.gq,{gap:12,flex:"grow",children:[(0,o.tZ)(f.oi,{className:y.Z.codeInput,style:{width:M},value:l&&i?z(l,i):w?T(w):"",disabled:!0}),(0,o.tZ)(h.zx,{priority:"primary",onClick:()=>{(0,p.vQ)(l&&i?z(l,i):w?T(w):""),t&&t(),L(e=>(0,o.tZ)(b.FN,(0,r._)((0,n._)({},e),{text:S("Copied to clipboard"),Icon:s.Z})))},children:S("Copy code")})]})]})})}},33112:function(e,t,i){i.d(t,{F:()=>Z});var n=i(7409),r=i(98848),l=i(16584),o=i(94184),a=i.n(o),s=i(71375),d=i(49770),c=i(95441),u=i(94874),p=i(17540),h=i(15771),m=i(19081),v=i(6490),f=i(58175),b=i(12461),g=i(37430);function Z(e){var{isOpen:t,onClose:i}=e,o=(0,r._)(e,["isOpen","onClose"]);return(0,l.tZ)(v.u_,{isOpen:!!t,onClose:i,width:500,children:(0,l.tZ)(y,(0,n._)({onClose:i},o))})}function y(e){let{faces:t,modalLabel:i,onClose:n,totalCount:r}=e,{iPlural:o}=(0,c.M1)(),a=(r||0)-t.length;return(0,l.BX)(l.HY,{children:[(0,l.BX)(m.hs,{alignItems:"center",justifyContent:"space-between",paddingX:16,paddingY:12,borderBottom:"detail",flex:"grow",children:[(0,l.tZ)(f.xv.H3,{children:i}),n&&(0,l.tZ)(h.hU,{priority:"tertiary",onClick:n,children:(0,l.tZ)(s.Z,{size:20})})]}),(0,l.tZ)(m.tu,{overflowY:"auto",className:g.Z.column,children:(0,l.BX)(m.tu,{gap:4,padding:8,children:[t.map(e=>(0,l.tZ)(_,{face:e},e.id)),a>0&&(0,l.BX)(m.hs,{gap:16,alignItems:"center",padding:8,children:[(0,l.tZ)(m.hs,{className:g.Z.avatarOther,alignItems:"center",justifyContent:"center",children:(0,l.tZ)(d.Z,{className:g.Z.avatarOtherIcon,size:20})}),(0,l.BX)(f.xv.B4,{color:"secondary",children:["+",o("%1 other reader","%1 other readers",a)]})]})]})})]})}function _(e){let{face:t}=e,{id:i,name:n,primary_publication:r,className:o,noLink:s}=t;return(0,l.tZ)(m.hs,{flex:"grow",children:s?(0,l.BX)(m.hs,{gap:12,padding:8,radius:"md",className:g.Z.row,alignItems:"center",flex:"grow",children:[(0,l.tZ)(p.w,{pub:r||void 0,children:(0,l.tZ)(u.xV,{user:t,size:40,className:o})}),(0,l.tZ)(m.tu,{minWidth:0,flex:"grow",children:(0,l.tZ)(f.xv.B3,{decoration:"hover-underline",weight:"semibold",className:(g.Z.link,a()({"no-name":!(n||"").trim().length})),children:n})})]}):(0,l.tZ)(b.$,{person:t},i)},i)}},64729:function(e,t,i){i.d(t,{i:()=>l});var n=i(16584),r=i(4615);let l=e=>{let{children:t,disable:i}=e;return i?(0,n.tZ)(n.HY,{children:t}):(0,n.tZ)(r.f6,{theme:"light-theme",children:t})}},79237:function(e,t,i){i.d(t,{J:()=>y});var n=i(58865),r=i(16584),l=i(30396),o=i(95441),a=i(60807),s=i(68833),d=i(48980),c=i(62981),u=i(94874),p=i(15771),h=i(19081),m=i(6490),v=i(43570),f=i(92039),b=i(63651),g=i(47929);function Z(){let e=(0,n._)([""," invited you to join a live video"]);return Z=function(){return e},e}function y(e){let{liveStreamInvite:t,invitingUser:i}=e,n=(0,a.aF)(),[y,_]=(0,l.eJ)(t),[C,w]=(0,l.eJ)(i),{iString:S,iTemplate:k}=(0,o.M1)(),[x,B]=(0,l.eJ)(!1),I=(0,f.rG)(),N=!1;"undefined"!=typeof window&&y&&(N=new URL(window.location.href).pathname==="/live-stream/".concat(y.live_stream_id));let[X,P]=(0,c.Z)(y?"live-stream-join-modal-".concat(y.id,"-").concat(+!!N):void 0);(0,l.d4)(()=>{if(null==n?void 0:n.id)return null==I?void 0:I.listen({["user:".concat(n.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:invited"&&(B(!0),(0,d.rd)("/api/v1/live_stream/invite/".concat(i.message.invite_id)).then(e=>{_(e.invite),w(e.activeLiveStream.user)}))}})},[I,null==n?void 0:n.id]),(0,l.d4)(()=>{y&&(null==C?void 0:C.name)&&!X&&(B(!0),(0,s.j)(s.FP.LIVE_STREAM_JOIN_MODAL_SEEN,{live_stream_invite_id:y.id,inviting_user_id:C.id,aggro_version:N}),P())},[y,C,X]);let L=(0,l.I4)(async()=>{try{await (0,d.rd)("/api/v1/live_stream/".concat(null==y?void 0:y.live_stream_id,"/invite/").concat(null==y?void 0:y.id,"/decline"),{method:"PUT"}),B(!1)}catch(e){alert((0,d.i)(e))}},[y]);return y&&(null==C?void 0:C.name)?(0,r.tZ)(m.u_,{isOpen:x,onClose:()=>B(!1),disableCloseOnBackdropClick:N,children:(0,r.BX)(h.tu,{gap:32*!N,children:[(0,r.tZ)(m.xB,{showClose:!0,onClose:()=>B(!1),icon:(0,r.BX)(h.hs,{position:"relative",children:[(0,r.tZ)(u.On,{className:"liveStreamAvatar-pa3eKG",size:72,user:C}),(0,r.tZ)(h.hs,{className:"liveBox-CSADGk",justifyContent:"center",children:(0,r.tZ)(v.Vp,{className:"liveTag-lDNHQP",theme:"error",priority:"primary",children:S("LIVE")})})]}),title:N?S("You must download the Substack app to join the live video as a co-host"):k(Z(),C.name),description:S(N?"The Substack app is available on iPhone and Android":"To join this live video, you must download the Substack iPhone or Android app."),alignItems:"center"}),(0,r.tZ)(m.mz,{primaryButton:N?void 0:(0,r.tZ)(p.zx,{priority:"primary",href:(0,b.h4i)({tab:"activity",redirect:"app-store",utm_campaign:g.VX.liveStreamInvite,utm_source:g.b3.liveStreamJoinModal}),children:S("Accept in the mobile app")}),secondaryButton:N?void 0:(0,r.tZ)(p.zx,{priority:"secondary",onClick:L,children:S("Decline")}),direction:"column"})]})}):null}},30979:function(e,t,i){i.d(t,{D:()=>s});var n=i(16584),r=i(94184),l=i.n(r),o=i(19081),a=i(45985);function s(e){let{className:t}=e;return(0,n.tZ)(o.hs,{alignItems:"center",justifyContent:"center",radius:"full",className:l()(a.Z.dotContainer,t),children:(0,n.tZ)("div",{className:a.Z.dot})})}},61594:function(e,t,i){i.d(t,{u:()=>b});var n=i(7409),r=i(99282),l=i(16584),o=i(31131),a=i(99869),s=i(79138),d=i(37632),c=i(4473),u=i(39535),p=i(75697),h=i(95441),m=i(15771),v=i(44424),f=i(70379);let b=e=>{let{menuPlacement:t,shareName:i,shareUrl:b,trackParams:g,trigger:Z,utmCampaign:y}=e,{iString:_}=(0,h.M1)(),C=(0,f.pm)();return(0,l.BX)(v.v2,{trigger:null!=Z?Z:(0,l.tZ)(m.hU,{priority:"quaternary",children:(0,l.tZ)(o.Z,{size:20})}),layerOptions:{placement:null!=t?t:"top-end"},ariaLabel:_("View share options"),children:[(0,l.tZ)(v.sN,{leading:(0,l.tZ)(a.Z,{}),onClick:()=>{(0,p.Ui)({shareUrl:b,utm_campaign:y,skipToast:!0,trackParams:g}),C.popToast(e=>(0,l.tZ)(f.FN,(0,r._)((0,n._)({},e),{text:_("Copied link to clipboard")})))},children:_("Copy link")}),(0,l.BX)(v.xw,{children:[(0,l.tZ)(v.sN,{leading:(0,l.tZ)(c.Z,{}),onClick:()=>{(0,p.BZ)({shareUrl:b,utm_campaign:y,trackParams:g})},children:_("Share to Notes")}),(0,l.tZ)(v.sN,{leading:(0,l.tZ)(s.Z,{}),onClick:()=>{(0,p.Po)({shareUrl:b,utm_campaign:y,trackParams:g})},children:_("Share to Facebook")}),(0,l.tZ)(v.sN,{leading:(0,l.tZ)(d.Z,{}),onClick:()=>{(0,p.lc)({shareUrl:b,utm_campaign:y,trackParams:g})},children:_("Share to Linkedin")}),(0,l.tZ)(v.sN,{leading:(0,l.tZ)(u.Z,{}),onClick:()=>{(0,p.Wn)({shareUrl:b,shareName:i,utm_campaign:y,trackParams:g})},children:_("Share to X")})]})]})}},77228:function(e,t,i){i.d(t,{V:()=>w,A:()=>k});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(75697),s=i(71094),d=i(95441),c=i(77906),u=i(72572),p=i(98170),h=i(60225),m=i(30396),v=i(68833),f=i(59176),b=i(98914),g=i(47929);let Z=e=>{var{isOpen:t,onClose:i,shareUrl:r,post:o,pub:s,profile:d,comments:c,commentId:u,medium:p,utm_campaign:h}=e,Z=(0,l._)(e,["isOpen","onClose","shareUrl","post","pub","profile","comments","commentId","medium","utm_campaign"]);let[y,_]=(0,m.eJ)(null);return(0,m.d4)(()=>{t&&(async()=>{let e={title:(0,a.B8)({post:o,pub:s,profile:d}),url:r||(0,a.O1)("direct",(0,n._)({medium:p,post:o,pub:s,profile:d,comments:c,commentId:u,utm_campaign:h},Z))};if((0,b.K1)()&&navigator.share&&navigator.canShare&&navigator.canShare(e))try{return await navigator.share(e),(0,v.j)(v.FP.NATIVE_SHARE_SUCCESS,{medium:p||"web",post_id:o?o.id:null,utm_campaign:y||h||"default"}),(0,f.ex)("".concat(null==s?void 0:s.subdomain," shared"),!0),i(),!0}catch(e){if("AbortError"===e.name)return i(),!0;(0,v.j)(v.FP.NATIVE_SHARE_FAILED,{errorName:e.name,errorMessage:e.message})}return!1})().then(e=>{e||(0,v.j)(v.FP.SHARE_DIALOG_OPENED,{medium:p||"web",post_id:o?o.id:null,utm_campaign:y||h||g.VX.default})})},[t]),{handleClose:()=>{_(null),i()},internalUtmCampaign:y,setInternalUtmCampaign:_}};var y=i(19081),_=i(6490),C=i(63474);let w=e=>{var{isOpen:t,onClose:i,shareUrl:d,post:c,pub:u,profile:p,comments:h,commentId:m,medium:v="web",utm_campaign:f}=e,b=(0,l._)(e,["isOpen","onClose","shareUrl","post","pub","profile","comments","commentId","medium","utm_campaign"]);let{handleClose:g,internalUtmCampaign:C}=Z((0,n._)({isOpen:t,onClose:i,shareUrl:d,post:c,pub:u,profile:p,comments:h,commentId:m,medium:v,utm_campaign:f},b)),w=h&&m&&h.find(e=>e.id===m),x=w?"comment":u&&!c?"publication":c?"post":p?"profile":void 0;return(0,o.BX)(_.u_,{isOpen:t,onClose:g,children:[(0,o.tZ)(S,{type:x,onClose:g}),(0,o.tZ)(_.fe,{children:(0,o.BX)(y.sg,{gap:20,children:[(0,o.tZ)(k,{type:x,pub:u,post:c,profile:p,comment:w,shareUrl:d}),(0,o.tZ)(s.k,(0,r._)((0,n._)({utm_campaign:null!=C?C:f,medium:v,post:c,pub:u},b),{shareName:(0,a.B8)({post:c,pub:u,profile:p}),shareUrl:null!=d?d:(0,a.O1)(null,{medium:v,post:c,pub:u,profile:p,comments:h,commentId:m,utm_campaign:f})}))]})})]})};function S(e){let{type:t,onClose:i}=e,{iString:n}=(0,d.M1)();return(0,o.tZ)(_.xB,{title:n(t?"Share this ".concat(t):"Share"),onClose:i,showClose:!0})}let k=e=>{let{type:t,pub:i,post:n,profile:r,comment:l,shareUrl:a}=e;return(0,o.BX)(x,{shareUrl:a,children:["comment"==t&&l&&(0,o.tZ)(c.UK,{comment:l,readOnly:!0}),"post"==t&&n&&i&&(0,o.tZ)(p.tg,{post:n,publication:i,readOnly:!0}),"publication"==t&&i&&(0,o.tZ)(h.U,{publication:i,readOnly:!0}),"profile"==t&&r&&(0,o.tZ)(u.N,{url:a,readOnly:!0,title:r.name,host:"substack.com",image:r.photo_url}),void 0==t&&(0,o.tZ)(u.N,{url:a,readOnly:!0})]})},x=e=>{let{shareUrl:t,children:i}=e,{handleCopyLink:n}=(0,a.Uo)();return(0,o.tZ)(C.A0,{onClick:()=>n({shareUrl:null!=t?t:"#"}),href:null!=t?t:"#",children:i})}},71094:function(e,t,i){i.d(t,{k:()=>x});var n=i(7409),r=i(16584),l=i(25380),o=i(85200),a=i(59154),s=i(79138),d=i(90443),c=i(37632),u=i(18573),p=i(82653),h=i(77559),m=i(82695),v=i(4473),f=i(39535),b=i(75697),g=i(95441),Z=i(68833),y=i(19081),_=i(44424),C=i(31065),w=i(47929);let S={size:20,stroke:"var(--color-fg-primary)"},k={size:64};function x(e){let{iString:t}=(0,g.M1)(),{handleCopyLink:i,justCopied:x}=(0,b.Uo)();return(0,r.BX)(y.gq,{justifyContent:"space-between",children:[(0,r.tZ)(C.X,(0,n._)({onClick:()=>i((0,n._)({},e)),icon:x?(0,r.tZ)(l.Z,(0,n._)({},S)):(0,r.tZ)(u.Z,(0,n._)({},S)),label:t(x?"Copied":"Copy link")},k)),(0,r.tZ)(C.X,(0,n._)({onClick:()=>(0,b.Po)((0,n._)({},e)),icon:(0,r.tZ)(s.Z,(0,n._)({},S)),label:t("Facebook")},k)),(0,r.tZ)(C.X,(0,n._)({onClick:()=>(0,b.WZ)((0,n._)({},e)),icon:(0,r.tZ)(p.Z,(0,n._)({},S)),label:t("Email")},k)),(0,r.tZ)(C.X,(0,n._)({onClick:()=>(0,b.BZ)((0,n._)({},e)),icon:(0,r.tZ)(v.Z,(0,n._)({},S)),label:t("Notes")},k)),(0,r.BX)(_.v2,{trigger:(0,r.tZ)(C.X,(0,n._)({label:t("More"),icon:(0,r.tZ)(o.Z,(0,n._)({},S))},k)),onOpen:()=>{(0,Z.j)(Z.FP.SHARE_DIALOG_MORE_OPTION_CLICKED,{medium:e.medium||"web",post_id:e.post?e.post.id:null,utm_campaign:e.utm_campaign||w.VX.default})},children:[(0,r.tZ)(_.sN,{onClick:()=>(0,b.bI)((0,n._)({},e)),leading:(0,r.tZ)(a.Z,{}),children:t("Bluesky")}),(0,r.tZ)(_.sN,{onClick:()=>(0,b.Wn)((0,n._)({},e)),leading:(0,r.tZ)(f.Z,{}),children:t("X (Twitter)")}),(0,r.tZ)(_.sN,{onClick:()=>(0,b.lc)((0,n._)({},e)),leading:(0,r.tZ)(c.Z,{}),children:t("LinkedIn")}),(0,r.tZ)(_.sN,{onClick:()=>(0,b.sn)((0,n._)({},e)),leading:(0,r.tZ)(m.Z,{}),children:t("Reddit")}),(0,r.tZ)(_.sN,{onClick:()=>(0,b.Vn)((0,n._)({},e)),leading:(0,r.tZ)(h.Z,{}),children:t("Pinterest")}),(0,r.tZ)(_.sN,{onClick:()=>(0,b.b6)((0,n._)({},e)),leading:(0,r.tZ)(d.Z,{}),children:t("Hacker News")})]})]})}},60129:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,color:i="var(--color-utility-white)",className:s}=e,d=(0,l._)(e,["size","color","className"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},d),{name:"EyeIconFilled",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:s,children:(0,o.tZ)("path",{d:"M11.869 18.1925C17.6987 18.1925 21.7307 13.4687 21.7307 11.9962C21.7307 10.5163 17.6914 5.7998 11.869 5.7998C6.11209 5.7998 2 10.5163 2 11.9962C2 13.4687 6.11209 18.1925 11.869 18.1925ZM11.869 16.0566C9.59825 16.0566 7.79331 14.2123 7.79331 11.9962C7.79331 9.72174 9.59825 7.93573 11.869 7.93573C14.1179 7.93573 15.9374 9.72174 15.9374 11.9962C15.9374 14.2123 14.1179 16.0566 11.869 16.0566ZM11.869 13.4614C12.6769 13.4614 13.3464 12.7981 13.3464 11.9962C13.3464 11.187 12.6769 10.5236 11.869 10.5236C11.0538 10.5236 10.3843 11.187 10.3843 11.9962C10.3843 12.7981 11.0538 13.4614 11.869 13.4614Z"})}))}},41069:function(e,t,i){i.d(t,{x:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.BX)("g",{children:[(0,n.tZ)("path",{style:{backdropFilter:"blur(5px)"},d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:"white","fill-opacity":"0.9"}),(0,n.tZ)("path",{opacity:"0.7",d:"M20 17.8685C20 17.0698 20.8901 16.5934 21.5547 17.0365L30.7519 23.168C31.3457 23.5638 31.3457 24.4362 30.7519 24.8321L21.5547 30.9635C20.8901 31.4066 20 30.9302 20 30.1315V17.8685Z",fill:"black",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round"})]})})}},22259:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),r=i(99282),l=i(16584),o=i(64515);let a=e=>(0,l.tZ)(o.l,(0,r._)((0,n._)({},e),{name:"LucideTabActivityFilled",svgParams:{height:e.height||32,width:e.width||32,stroke:"none",strokeWidth:0,fill:e.fill||"var(--color-fg-primary)"},children:(0,l.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.6354 5.39295C15.3726 4.86902 17.2257 4.86902 18.9629 5.39295L18.965 5.39358C19.9065 5.6798 21.9952 6.71781 23.1135 8.75755C23.8119 10.0313 24.0354 11.5182 24.1434 12.743C24.1795 13.1521 24.2046 13.5635 24.227 13.9305C24.2379 14.109 24.2481 14.2769 24.2587 14.429C24.2939 14.9361 24.3328 15.2684 24.3886 15.4718C24.5224 15.9599 24.7588 16.4033 25.0855 16.9664C25.1203 17.0264 25.1562 17.0878 25.1929 17.1506C25.4885 17.6566 25.8379 18.2549 26.1303 18.9658C26.2816 19.3338 26.4002 19.666 26.4927 19.9715C26.7681 20.8818 26.4813 21.7367 25.9336 22.3253C25.4017 22.8969 24.6191 23.2341 23.7991 23.2341H8.79915C7.97918 23.2341 7.19663 22.8969 6.66473 22.3253C6.11704 21.7367 5.83022 20.8818 6.10562 19.9715C6.19807 19.666 6.31673 19.3338 6.46804 18.9658C6.76035 18.2549 7.10985 17.6566 7.40542 17.1506C7.44211 17.0878 7.47796 17.0264 7.51277 16.9664C7.8395 16.4033 8.07592 15.9599 8.20973 15.4718C8.26548 15.2684 8.30441 14.9361 8.33962 14.429C8.35018 14.2769 8.36043 14.109 8.37132 13.9305C8.39372 13.5635 8.41883 13.1521 8.45491 12.743C8.56293 11.5182 8.78643 10.0313 9.48479 8.75755C10.6031 6.71781 12.6918 5.6798 13.6333 5.39359L13.6354 5.39295ZM13.4047 24.5528C13.6517 24.0588 14.2524 23.8586 14.7463 24.1056C15.7238 24.5943 16.8744 24.5943 17.8519 24.1056C18.3459 23.8586 18.9466 24.0588 19.1936 24.5528C19.4406 25.0468 19.2403 25.6474 18.7464 25.8944C17.2058 26.6647 15.3925 26.6647 13.8519 25.8944C13.3579 25.6474 13.1577 25.0468 13.4047 24.5528Z"})}))},46411:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),r=i(99282),l=i(16584),o=i(64515);let a=e=>(0,l.tZ)(o.l,(0,r._)((0,n._)({},e),{name:"LucideTabChatFilled",svgParams:{height:e.height||32,width:e.width||32,stroke:"none",strokeWidth:0,fill:e.fill||"var(--color-fg-primary)"},children:(0,l.tZ)("path",{d:"M8.40825 6.34908C12.0215 5.10592 18.2609 4.07567 24.5673 6.33189C26.1123 6.88465 26.9999 8.37804 26.9999 9.91221V18.6258C26.9999 20.1327 26.1383 21.619 24.5904 22.1515C22.257 22.9541 18.8542 23.6605 15.0513 23.4681C13.6701 25.5308 10.9829 26.5001 8.49994 26.5001C8.09548 26.5001 7.73084 26.2564 7.57606 25.8828C7.42128 25.5091 7.50683 25.079 7.79283 24.793C8.10239 24.4834 8.3763 23.9026 8.52252 23.2262C8.59245 22.9028 8.62494 22.5937 8.62494 22.336C8.62494 22.302 8.62437 22.2699 8.62335 22.2398L8.55226 22.213L8.46911 22.1818L8.44202 22.1717L8.43379 22.1687L8.43112 22.1677C6.8857 21.6147 5.99994 20.1215 5.99994 18.5879V9.87431C5.99994 8.36797 6.85998 6.88177 8.40825 6.34908Z"})}))},85626:function(e,t,i){i.d(t,{Z:()=>r});var n=i(16584);let r=e=>{let{size:t=24,stroke:i="currentColor",strokeWidth:r=2}=e;return(0,n.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:r,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.tZ)("path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"}),(0,n.tZ)("path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7",fill:i,stroke:"none"}),(0,n.tZ)("path",{d:"M21 12v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",fill:i,stroke:"none"})]})}},60982:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),r=i(99282),l=i(16584),o=i(64515);let a=e=>(0,l.tZ)(o.l,(0,r._)((0,n._)({},e),{name:"LucideTabHomeFilled",svgParams:{height:e.height||32,width:e.width||32,stroke:"none",strokeWidth:0,fill:e.fill||"var(--color-fg-primary)"},children:(0,l.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.315 5.49313C16.5616 4.83562 15.4384 4.83562 14.685 5.49313L6.02743 13.0485C5.37462 13.6183 5 14.4424 5 15.3089L5 23.6727C5 25.8819 6.79086 27.6727 9 27.6727L23 27.6727C25.2091 27.6727 27 25.8819 27 23.6727V15.3089C27 14.4424 26.6254 13.6183 25.9726 13.0485L17.315 5.49313ZM14.4472 21.7783C13.9532 21.5313 13.3525 21.7315 13.1055 22.2255C12.8586 22.7195 13.0588 23.3201 13.5528 23.5671C15.0933 24.3374 16.9067 24.3374 18.4472 23.5671C18.9412 23.3201 19.1414 22.7195 18.8944 22.2255C18.6474 21.7315 18.0468 21.5313 17.5528 21.7783C16.5753 22.267 15.4247 22.267 14.4472 21.7783Z",strokeLinecap:"round",strokeLinejoin:"round"})}))},890:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),r=i(99282),l=i(16584),o=i(64515);let a=e=>(0,l.tZ)(o.l,(0,r._)((0,n._)({},e),{name:"LucideTabInboxFilled",svgParams:{height:e.height||34,width:e.width||34,stroke:"none",strokeWidth:0,fill:e.fill||"var(--color-fg-primary)"},children:(0,l.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6,8C6,6.343 7.343,5 9,5H13C14.657,5 16,6.343 16,8V12C16,13.657 14.657,15 13,15H9C7.343,15 6,13.657 6,12V8ZM18,8C18,6.343 19.343,5 21,5H25C26.657,5 28,6.343 28,8V12C28,13.657 26.657,15 25,15H21C19.343,15 18,13.657 18,12V8ZM6,20C6,18.343 7.343,17 9,17H13C14.657,17 16,18.343 16,20V24C16,25.657 14.657,27 13,27H9C7.343,27 6,25.657 6,24V20ZM18,20C18,18.343 19.343,17 21,17H25C26.657,17 28,18.343 28,20V24C28,25.657 26.657,27 25,27H21C19.343,27 18,25.657 18,24V20Z"})}))},21465:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=20,stroke:i="var(--color-fg-primary)",strokeWidth:s=1.5}=e,d=(0,l._)(e,["size","stroke","strokeWidth"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},d),{name:"NoteCommentIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,stroke:i,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",children:(0,o.tZ)("path",{d:"M18.7502 11V7.50097C18.7502 4.73917 16.5131 2.50033 13.7513 2.50042L6.25021 2.50044C3.48848 2.5004 1.25017 4.73875 1.2502 7.50048L1.25021 10.9971C1.2502 13.749 3.47395 15.9836 6.22586 15.9971L6.82888 16V19.0182L12.1067 16H13.7502C16.5116 16 18.7502 13.7614 18.7502 11Z"})}))}},66289:function(e,t,i){i.d(t,{Z:()=>o});var n=i(7409),r=i(99282),l=i(16584);function o(e){return(0,l.tZ)("svg",(0,r._)((0,n._)({width:"22",height:"24",viewBox:"0 0 20 20",overflow:"visible",fill:"none",stroke:"var(--color-fg-secondary)"},e),{children:(0,l.BX)("g",{transform:"translate(0, -2)",children:[(0,l.tZ)("path",{d:"M16.6667 16.0265C16.0821 17.2172 15.1835 18.2187 14.0715 18.9188C12.9594 19.6189 11.6779 19.9901 10.3704 19.9906C9.27691 19.9935 8.19824 19.7334 7.22222 19.2315L2.5 20.834L4.07407 16.0265C3.58108 15.0329 3.32561 13.9347 3.32846 12.8215C3.32897 11.4904 3.69349 10.1857 4.3812 9.05361C5.06891 7.92149 6.05265 7.00665 7.22222 6.41156C7.72153 6.15481 8.2477 5.96134 8.78897 5.83398",strokeWidth:"2",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.tZ)("path",{d:"M19.4444 6.11133H13.8893C13.2757 6.11133 12.7782 6.60879 12.7782 7.22244V11.1113C12.7782 11.725 13.2757 12.2224 13.8893 12.2224H19.4444C20.0581 12.2224 20.5555 11.725 20.5555 11.1113V7.22244C20.5555 6.60879 20.0581 6.11133 19.4444 6.11133Z"}),(0,l.tZ)("path",{d:"M13.8893 6.11133H19.4444M13.8893 6.11133C13.2757 6.11133 12.7782 6.60879 12.7782 7.22244V11.1113C12.7782 11.725 13.2757 12.2224 13.8893 12.2224H19.4444C20.0581 12.2224 20.5555 11.725 20.5555 11.1113V7.22244C20.5555 6.60879 20.0581 6.11133 19.4444 6.11133M13.8893 6.11133L13.8889 3.88911C13.8889 3.15239 14.1815 2.44586 14.7025 1.92492C15.2234 1.40399 15.9299 1.11133 16.6667 1.11133C17.4034 1.11133 18.1099 1.40399 18.6308 1.92492C19.1518 2.44586 19.4444 3.15239 19.4444 3.88911V6.11133",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})]})}))}},26582:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=20,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"PlayIconLockFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:(0,o.tZ)("path",{stroke:"none",fillRule:"evenodd",clipRule:"evenodd",d:"M4.04688 18.5527C4.4375 18.5527 4.76953 18.3965 5.16016 18.1719L6.2041 17.5685V14.633V13.4815C6.2041 12.4757 6.61309 11.9682 7.46663 11.9001C7.46663 10 9.07077 8.01343 11.4472 8.01343C13.8237 8.01343 15.4278 10 15.4278 11.901C15.5875 11.9144 15.7314 11.9429 15.86 11.9869L16.5469 11.5898C17.3574 11.1113 17.6406 10.7988 17.6406 10.2812C17.6406 9.76367 17.3574 9.45117 16.5469 8.98242L5.16016 2.39062C4.76953 2.16602 4.4375 2.01953 4.04688 2.01953C3.32422 2.01953 2.875 2.56641 2.875 3.41602V17.1465C2.875 17.9961 3.32422 18.5527 4.04688 18.5527ZM10.1094 12.9648H12.7852V11.8418C12.7852 10.8262 12.2871 10.2793 11.4473 10.2793C10.6074 10.2793 10.1094 10.8262 10.1094 11.8418V12.9648ZM14.0645 12.9707V11.9492C14.0645 10.1816 13.0098 9 11.4473 9C9.8848 9 8.8301 10.1816 8.8301 11.9492V12.97C8.2689 13.0149 8 13.3485 8 14.0098V17.8086C8 18.5215 8.3125 18.8535 8.9668 18.8535H13.918C14.582 18.8535 14.8945 18.5215 14.8945 17.8086V14.0098C14.8945 13.3515 14.6281 13.0179 14.0645 12.9707Z"})}))}},4168:function(e,t,i){i(16584),i(64515)},85941:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"BookIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,stroke:"none",children:(0,o.tZ)("path",{stroke:"none",d:"M4.89796 2C2.98742 2 0.998702 2.88986 0.104212 4.43402C0.00868433 4.6085 0 4.72192 0 5.0447V17.3544C0 17.7557 0.251846 18 0.686062 18C0.894487 18 1.09423 17.9389 1.25054 17.7906C2.34477 16.8484 3.79506 16.3598 5.24534 16.3598C6.6001 16.3598 7.85933 16.8396 8.77987 17.6335C8.87539 17.7121 8.98827 17.7557 9.08378 17.7557C9.27488 17.7557 9.43122 17.6161 9.43122 17.3893V4.48636C9.43122 4.25954 9.41379 4.20719 9.24883 3.97164C8.39776 2.74155 6.73036 2 4.89796 2ZM15.102 2C13.2697 2 11.6023 2.74155 10.7512 3.97164C10.5862 4.20719 10.5689 4.25954 10.5689 4.48636V17.3893C10.5689 17.6161 10.7251 17.7557 10.9162 17.7557C11.0117 17.7557 11.1333 17.7121 11.2202 17.6335C12.1407 16.8396 13.4 16.3598 14.7547 16.3598C16.205 16.3598 17.6552 16.8484 18.7495 17.7906C18.9058 17.9389 19.1056 18 19.314 18C19.7482 18 20 17.7557 20 17.3544V5.0447C20 4.72192 19.9914 4.59978 19.8958 4.43402C19.0013 2.88986 17.0127 2 15.102 2Z"})}))}},29751:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=20,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.BX)(a.l,(0,r._)((0,n._)({},s),{name:"UnmuteIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:[(0,o.tZ)("path",{d:"M15.6392 17.817C15.4994 18.3172 15.0563 18.6519 14.476 18.6519C13.9832 18.6519 13.5654 18.451 13.0726 17.9858L8.50884 13.714C8.43385 13.6506 8.34814 13.6188 8.24102 13.6188H5.16636C3.72009 13.6188 2.92733 12.8364 2.92733 11.3032V7.36982C2.92733 6.68171 3.08924 6.14262 3.40172 5.75997L15.6392 17.817ZM15.6866 1.24768V12.0678L8.49264 4.97165C8.49818 4.96785 8.50353 4.96352 8.50884 4.95903L13.0726 0.729582C13.619 0.21147 13.9618 0 14.4546 0C15.183 0 15.6866 0.560404 15.6866 1.24768Z",stroke:"none"}),(0,o.tZ)("path",{d:"M19.3824 19.7621C19.7037 20.0793 20.2286 20.0793 20.5501 19.7621C20.8607 19.4343 20.8715 18.9267 20.5501 18.6096L2.19856 0.50751C1.87716 0.1903 1.34151 0.1903 1.02012 0.50751C0.70944 0.814142 0.70944 1.3534 1.02012 1.66003L19.3824 19.7621Z",stroke:"none"})]}))}},29176:function(e,t,i){i.d(t,{f:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,n.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 20.1456C2.33682 19.7895 2.25 19.3992 2.25 19V18V14V12C2.25 9.41414 3.27723 6.93419 5.10571 5.10571C6.93419 3.27723 9.41414 2.25 12 2.25C14.5859 2.25 17.0658 3.27723 18.8943 5.10571C20.7228 6.93419 21.75 9.41414 21.75 12V14V18V19C21.75 19.3992 21.6632 19.7895 21.5 20.1456V20.3889C21.4583 20.3889 21.4169 20.3875 21.3759 20.3848C21.2578 20.5874 21.1133 20.7758 20.9445 20.9445C20.4288 21.4603 19.7293 21.75 19 21.75H18C17.2707 21.75 16.5712 21.4603 16.0555 20.9445C15.5397 20.4288 15.25 19.7293 15.25 19V16C15.25 15.2707 15.5397 14.5712 16.0555 14.0555C16.5712 13.5397 17.2707 13.25 18 13.25H19.6528V12.2083C19.6528 10.1787 18.8465 8.23218 17.4113 6.797C15.9762 5.36183 14.0296 4.55556 12 4.55556C9.97036 4.55556 8.02384 5.36183 6.58867 6.797C5.15349 8.23218 4.34722 10.1787 4.34722 12.2083V13.25H6C6.72935 13.25 7.42882 13.5397 7.94454 14.0555C8.46027 14.5712 8.75 15.2707 8.75 16V19C8.75 19.7293 8.46027 20.4288 7.94454 20.9445C7.42882 21.4603 6.72935 21.75 6 21.75H5C4.27065 21.75 3.57118 21.4603 3.05546 20.9445C2.88674 20.7758 2.74221 20.5874 2.6241 20.3848C2.58309 20.3875 2.5417 20.3889 2.5 20.3889V20.1456Z"})})}},72241:function(e,t,i){i.d(t,{HA:()=>o});var n=i(7409),r=i(99282),l=i(16584);function o(e){return(0,l.tZ)("svg",(0,r._)((0,n._)({width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,l.tZ)("path",{d:"M5.67709 10C6.02484 10 6.28151 9.73617 6.28151 9.37872V7.91489H6.37259C7.82981 7.91489 8.69917 8.39574 9.30773 9.54894C9.48574 9.88085 9.69273 9.97021 9.93698 9.97021C10.2682 9.97021 10.5 9.64255 10.5 9.00426C10.5 5.94894 9.16283 4.10638 6.37259 4.10638H6.28151V2.64255C6.28151 2.28511 6.02484 2 5.66881 2C5.43698 2 5.27139 2.09787 5.01886 2.33617L1.73183 5.4766C1.56624 5.6383 1.5 5.82553 1.5 6C1.5 6.16596 1.57038 6.36596 1.73183 6.5234L5.01886 9.68511C5.24655 9.90213 5.43698 10 5.67709 10Z"})}))}i(64515)},31548:function(e,t,i){i.d(t,{o:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.7848 3.78723C4.2873 3.28318 4.96884 3 5.67949 3H18.3205C19.0312 3 19.7127 3.28318 20.2152 3.78723C20.7177 4.29129 21 4.97494 21 5.68778V14.4027C21 15.1155 20.7177 15.7992 20.2152 16.3032C19.7127 16.8073 19.0312 17.0905 18.3205 17.0905H7.9309L4.2475 20.7853C4.0385 20.9949 3.72419 21.0576 3.45112 20.9442C3.17805 20.8307 3 20.5634 3 20.2669V5.68778C3 4.97494 3.2823 4.29129 3.7848 3.78723Z"})})}},13774:function(e,t,i){i.d(t,{O:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,n.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83333 5C1.26853 5 0 6.11207 0 7.48387V16.5161C0 17.8879 1.26853 19 2.83333 19H14.1667C15.7315 19 17 17.8879 17 16.5161V7.48387C17 6.11207 15.7315 5 14.1667 5H2.83333ZM18 14.7264L21.6962 17.5549C22.0546 17.8238 22.4334 18 22.8123 18C23.529 18 24 17.527 24 16.8037V7.19629C24 6.47295 23.529 6 22.8123 6C22.4334 6 22.0546 6.1762 21.6962 6.44513L18 9.25502V14.7264Z"})})}},10878:function(e,t,i){i.d(t,{M:()=>C,u:()=>S});var n=i(58865),r=i(16584),l=i(30396),o=i(7073),a=i(18693),s=i(95441),d=i(98914),c=i(15771),u=i(19081),p=i(38023),h=i(6490),m=i(15562),v=i(65523),f=i(17688),b=i(58175),g=i(70379),Z=i(84610);function y(){let e=(0,n._)(["Your report and profile will be shared with the admins of ","."]);return y=function(){return e},e}let _=["hate","private_information","plagiarism","impersonation","illegal_activity","spam","pornography","other"],C=["impersonation","spam","pornography","other"],w=e=>{let{category:t,language:i="en"}=e;return(0,Z.H)({category:t,language:i})};function S(e){var t,i;let{isOpen:n,pub:Z,onClose:C,onSubmit:S=()=>Promise.resolve(),canReportToAdmins:x=!1,reasons:B=_}=e,[I,N]=(0,l.eJ)(null),{iString:X,iTemplate:P,language:L}=(0,s.M1)(),[z,T]=(0,l.eJ)(null),[M,E]=(0,l.eJ)(!1),[O,j]=(0,l.eJ)(!1),[F,A]=(0,l.eJ)(!x),{popToast:H}=(0,g.pm)();if((0,l.d4)(()=>{n&&A(!x)},[n,x,B]),(0,l.d4)(()=>{F?j(!!I):j(!!z)},[F,I,z,B]),x&&!Z)return console.error("Must supply pub if reporting to pub admins is possible"),null;let U=F?"Report to Substack":"Report to the ".concat(I18N.p(null!==(t=null==Z?void 0:Z.name)&&void 0!==t?t:"")," admins");return(0,r.BX)(r.HY,{children:[(0,r.BX)(h.u_,{isOpen:n,onClose:C,disableCloseOnBackdropClick:M||F,children:[(0,r.tZ)(h.xB,{title:U,icon:(0,r.tZ)(v.AM,{bg:"accent-red",icon:(0,r.tZ)(o.Z,{color:"var(--color-semantic-error-fg-primary)"})}),description:(0,r.tZ)(k,{reportingToSubstack:F,pub:null!=Z?Z:null,onReportToSubstackClicked:()=>{A(!0)}}),showClose:!0,onClose:C}),(0,r.tZ)(h.fe,{children:(0,r.BX)(u.tu,{gap:20,children:[F&&(0,r.tZ)(r.HY,{children:(0,r.BX)(u.tu,{gap:8,children:[(0,r.tZ)(b.xv.B4,{weight:"bold",translated:!0,children:"Reason"}),(0,r.BX)(f.i,{value:null!=I?I:void 0,onChange:e=>{N(e.target.value)},children:[(0,r.tZ)(f.d,{children:X("Select a reason")}),B.map(e=>(0,r.tZ)("option",{value:e,children:w({category:e,language:L})},e))]})]})}),(0,r.BX)(u.tu,{gap:8,children:[(0,r.BX)(u.gq,{justifyContent:"space-between",children:[F?(0,r.tZ)(b.xv.B4,{weight:"bold",translated:!0,children:"Additional details"}):(0,r.tZ)(b.xv.B4,{weight:"bold",translated:!0,children:"Reason"}),F&&(0,r.tZ)(b.xv.B4,{color:"secondary",translated:!0,children:"Optional"})]}),(0,r.tZ)(p.g,{onChange:e=>{T(e.currentTarget.value||null)},placeholder:X("Describe why you're reporting this...")})]})]})}),(0,r.tZ)(h.mz,{alignButtons:"stretch",primaryButton:(0,r.tZ)(c.zx,{disabled:!O,priority:"destructive",onClick:()=>{E(!0)},children:X("Submit")})})]}),(0,r.tZ)(m.W,{isOpen:M,onClose:()=>{E(!1)},title:X("Submit report?"),description:F?X("Reported content will be reviewed and removed if it violates our Content Guidelines."):P(y(),null!==(i=null==Z?void 0:Z.name)&&void 0!==i?i:"this publication"),primaryButton:(0,r.tZ)(c.zx,{priority:"destructive",onClick:async()=>{E(!1);try{await S({reportCategory:F?I:null,details:z,reportedToSubstack:F})}catch(i){console.error("could not submit report",i);let e=(0,d.zx)(i),t=e&&e.startsWith("Something went wrong")?e:"Something went wrong: ".concat(e);H(()=>(0,r.tZ)(g.FN,{text:t}));return}H(()=>(0,r.tZ)(g.FN,{text:"Your report was submitted",Icon:a.Z}))},children:X("Submit report")}),secondaryButton:(0,r.tZ)(c.zx,{priority:"secondary",onClick:()=>{E(!1)},children:X("Cancel")})})]})}function k(e){var t;let{reportingToSubstack:i,pub:n,onReportToSubstackClicked:l}=e;return i?(0,r.BX)(b.xv,{translated:!0,children:["Report content that violates Substack's"," ",(0,r.tZ)(b.hh,{color:"highlight",href:"https://substack.com/content",target:"_blank",rel:"noreferrer",children:"Content Guidelines"})," ","below. Your report is only viewed by our staff. Find additional reporting options and information in our"," ",(0,r.tZ)(b.hh,{color:"highlight",href:"https://support.substack.com/hc/en-us/articles/23248646000532",target:"_blank",rel:"noreferrer",children:"Standards and Enforcement Help Center"}),"."]}):(0,r.BX)(b.xv,{translated:!0,children:[(0,r.BX)(b.xv.B3,{color:"secondary",translated:!0,children:["Your report and profile will be shared with the admins of ",(0,r.tZ)("strong",{children:I18N.p(null!==(t=null==n?void 0:n.name)&&void 0!==t?t:"")}),", since at Substack we believe publication owners are best able to moderate their communities."]}),(0,r.BX)(b.xv.B3,{translated:!0,color:"secondary",children:["If you believe something violates Substack's"," ",(0,r.tZ)(b.hh,{color:"highlight",href:"https://substack.com/content",target:"_blank",rel:"noreferrer",children:"Content Guidelines"}),", you can"," ",(0,r.tZ)(b.hh,{color:"highlight",onClick:()=>{l()},children:"report it to Substack"})," ","instead."]})]})}},79094:function(e,t,i){i.d(t,{T:()=>d,U:()=>s});var n=i(16584),r=i(6400),l=i(30396),o=i(10878);let a=(0,r.createContext)(()=>void 0);function s(e){let{children:t}=e,[i,r]=(0,l.eJ)(null),s=()=>r(null);return(0,n.BX)(a.Provider,{value:r,children:[t,(0,n.tZ)(o.u,{isOpen:!!i,onClose:s,pub:null==i?void 0:i.pub,canReportToAdmins:null==i?void 0:i.canReportToAdmins,onSubmit:async function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(),null==i?void 0:i.onSubmit(...t)}})]})}function d(){return(0,l.qp)(a)}},99259:function(e,t,i){i.d(t,{M$:()=>u,Nj:()=>c});var n=i(16584),r=i(6400),l=i(30396),o=i(14293),a=i.n(o);function s(){return!!("undefined"==typeof window||a()(window.location)||a()(window.location.hostname))||window.location.hostname.startsWith("substack.com")||window.location.hostname.startsWith("substack.info")}let d=(0,r.createContext)({isOnDestination:s()});function c(e){let{children:t}=e,i=(0,l.Ye)(()=>({isOnDestination:s()}),[]);return(0,n.tZ)(d.Provider,{value:i,children:t})}function u(){return(0,l.qp)(d)}d.displayName="IsDestinationContext"},93155:function(e,t,i){i.d(t,{DY:()=>s,dd:()=>d});var n=i(16584),r=i(6400),l=i(30396),o=i(10704);let a=(0,r.createContext)({openModal:()=>{},closeModal:()=>{}});function s(e){let{children:t}=e,[i,r]=(0,l.eJ)(!1),[s,d]=(0,l.eJ)({width:540,children:null}),c=()=>{r(!1)};return(0,n.BX)(a.Provider,{value:{openModal:e=>{d(e),r(!0)},closeModal:c},children:[(0,n.tZ)(o.u_,{isOpen:i,onClose:c,width:s.width,overflow:"hidden",children:s?s.children:null}),t]})}function d(){return(0,l.qp)(a)}a.displayName="ModalContext"},98170:function(e,t,i){i.d(t,{$l:()=>O,FK:()=>M,Q9:()=>F,UO:()=>R,s_:()=>U,tg:()=>z,vE:()=>V});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(30396),s=i(94184),d=i.n(s),c=i(13808),u=i(20160),p=i(20888),h=i(95441),m=i(60807),v=i(27625),f=i(13748),b=i(3411),g=i(93252),Z=i(80878),y=i(15771),_=i(19081),C=i(38841),w=i(58175),S=i(2009),k=i(88817),x=i(65575),B=i(64172),I=i(9459),N=i(91432),X=i(60308),P=i(63651),L=i(5749);function z(e){var t,i;let{post:n,publication:r,compact:l,readOnly:a,onClick:s,onSavePostClick:d,item:c,clipInfo:u}=e,{isHidden:p,onShow:h}=(0,v.Sl)(!!(r.explicit||n.explicit||n.cover_image_is_explicit||(null===(t=n.videoUpload)||void 0===t?void 0:t.explicit))),{isPaid:m,isFreeSubscribed:f}=(0,B.Y0)(r.id),b=null!==(i=n.coverImagePalette)&&void 0!==i?i:null,g=n.podcastUpload&&!n.videoUpload;return(0,o.BX)(T,{readOnly:a,onClick:s,publication:r,post:n,compact:l,palette:b,children:[(0,o.tZ)(E,{item:c,post:n,publication:r,clipInfo:u,isHidden:p,isFreeSubscribed:f,isPaid:m,compact:l,readOnly:a}),!g&&(0,o.tZ)(F,{post:n,publication:r,palette:b,readOnly:a,onSavePostClick:d,compact:l}),p&&(0,o.tZ)(v.cD,{onShow:h,itemName:"post"})]})}let T=e=>{let{readOnly:t,onClick:i,publication:n,post:r,compact:l,palette:a,children:s}=e,c=R(a),p=!l&&c,h=V({post:r,publication:n,readOnly:t,onClick:i});return(0,o.tZ)(u.W,{children:(0,o.tZ)(_.tu,{as:t?"div":"a",className:d()(L.Z.postAttachment,t&&L.Z.readOnly),position:"relative",bg:"primary",radius:"md",minWidth:0,onClick:h,href:t?void 0:(0,P.uRy)(n,r,{feedViewer:!1}),target:(0,g.P)()?"_blank":void 0,style:p?c:void 0,draggable:!1,showFocus:!0,children:s})})};function M(e){let{post:t,compact:i,readOnly:n}=e;return n||i||!t.videoUpload?n||!t.podcastUpload||t.videoUpload?!i&&t.cover_image?{type:"cover",coverImage:t.cover_image}:null:{type:"audio"}:{type:"video",videoUpload:t.videoUpload}}function E(e){var t,i,r,l;let s=M(e),{item:c,post:u,publication:h,clipInfo:m,isHidden:v,isFreeSubscribed:f,isPaid:b}=e,g=(0,a.sO)(null),Z=null!==(t=u.coverImagePalette)&&void 0!==t?t:null;if((null==s?void 0:s.type)==="video")return(0,o.tZ)(j,{palette:Z,children:(0,o.tZ)(I.L,(0,n._)({clipInfo:m,disableAutoPlay:v,isFreeSubscribed:f,isLiveStream:!!s.videoUpload.live_stream_id&&!m,isSubscribed:b,mediaUpload:s.videoUpload,post:u,pub:h,startMuted:!0,videoPlayerRef:g,videoType:m?"clip":"feed"},O({post:u,item:c,clipInfo:m})))});if((null==s?void 0:s.type)==="audio"){let e=(i=u,r=h,i.section_id&&r.sections&&null!==(l=r.sections.find(e=>e.id===i.section_id))&&void 0!==l?l:null);return(0,o.tZ)(N.lU,{isFreeSubscribed:f,isSubscribed:b,post:u,pub:h,section:e,variant:"notes-embed",trackingProps:O({post:u,item:c})})}return(null==s?void 0:s.type)==="cover"?(0,o.tZ)(j,{palette:Z,borderBottom:"detail",children:(0,o.tZ)(p.e,{className:d()(L.Z.postImage,Z&&L.Z.vibrantPostImage),imageProps:{smartCrop:!0,aspect:"1.91:1"},src:s.coverImage,maxWidth:520,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1})}):null}function O(e){let{post:t,item:i,clipInfo:n}=e;return{entityKey:String(t.id),entityType:"post",primaryEntityKey:null==i?void 0:i.entity_key,primaryEntityType:null==i?void 0:i.type,surface:"feed",contentType:n?"clip":"post",feedItemTrackingParameters:null==i?void 0:i.trackingParameters}}function j(e){var{children:t,palette:i,className:a}=e,s=(0,l._)(e,["children","palette","className"]);return(0,o.tZ)(_.tu,(0,r._)((0,n._)({},s),{className:d()(i?L.Z.vibrantHeader:void 0,a),children:t}))}function F(e){let{post:t,publication:i,palette:n,readOnly:r,onSavePostClick:l,compact:a}=e,s=!a&&n;return(0,o.BX)(_.hs,{gap:12,padding:12,alignItems:"center",children:[(0,o.tZ)(A,{publication:i,post:t,palette:s?n:null,readOnly:r}),!r&&(0,o.tZ)(U,{post:t,palette:s?n:null,onSavePostClick:l})]})}function A(e){let{publication:t,post:i,palette:n,readOnly:r}=e;return(0,o.BX)(_.tu,{gap:2,flex:"grow",minWidth:0,children:[(0,o.BX)(_.hs,{gap:8,paddingBottom:4,alignItems:"center",children:[(0,o.tZ)(C.wk,{pub:t,size:18,radius:"xs"}),(0,o.tZ)(w.xv.B4,{color:n?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,flex:"grow",children:(0,o.tZ)(H,{publication:t,readOnly:r})})]}),(0,o.tZ)(w.xv.B3,{clamp:2,color:n?"vibrance-primary":"primary",weight:"medium",children:i.title})]})}function H(e){let{publication:t,readOnly:i}=e;return i?(0,o.tZ)(o.HY,{children:t.name}):(0,g.P)()?(0,o.tZ)(x.EU,{target:"_blank",href:(0,X.TJI)(t),draggable:!1,children:t.name}):(0,o.tZ)(x.zr,{href:(0,X.TJI)(t),draggable:!1,children:t.name})}function U(e){let{post:t,palette:i,onSavePostClick:n,className:r}=e,{iString:l}=(0,h.M1)(),a=(0,m.aF)(),{requireLogin:s}=(0,k.SJ)(),u=()=>null==s?void 0:s({redirectOverride:(0,P.uRy)(null,t,{urlParams:{triggerSave:!0}})}),{handleClick:p,isSaved:v}=function(e,t){let i=(0,f.v)(e);return{handleClick:n=>{n.preventDefault(),n.stopPropagation(),i(),t&&t(e.is_saved?"unsave":"save"),e.is_saved=!e.is_saved},isSaved:e.is_saved}}(t,n),b=d()(L.Z.saveButton,v&&L.Z.saved,i&&L.Z.vibrant,r),g=i?y.GI:y.hU;return(0,o.tZ)(g,{className:b,priority:"tertiary",size:"sm",onClick:e=>{a?p(e):(e.preventDefault(),u())},"aria-label":l("Save"),children:(0,o.tZ)(c.Z,{size:18})})}function R(e,t){return e?(0,n._)({},(0,b.mX)({palette:e,colorKey:t,defaultColor:"var(--color-dark-bg-primary)"})):void 0}function V(e){let{post:t,publication:i,readOnly:n,onClick:r}=e;return e=>{null==r||r(),!n&&S.L&&(0,Z.Q)(e,(0,P.uRy)(i,t,{noBase:!0,feedViewer:!0}))}}},12337:function(e,t,i){i.d(t,{O:()=>g});var n=i(7409),r=i(16584),l=i(30396),o=i(93974),a=i(77747),s=i(42375),d=i(47395),c=i(25991),u=i(85527),p=i(16451),h=i(80878),m=i(19081),v=i(15503),f=i(91400),b=i(63651);function g(e){let{item:t,author:i}=e,n=(0,s.rI)(),o=(0,l.qp)(u.q),a=()=>(0,v.rw)(t,n,"profile",{tabId:o}),g=(0,f.XA)(),y=g?(0,b._5K)({postId:t.community_post.id,utm_source:n}):(0,b.xC8)({pubId:t.community_post.publication_id,postId:t.community_post.id,noBase:!0,params:{backAction:b.DsN}});return(0,r.BX)(m.tu,{paddingY:16,paddingX:{mobile:16,desktop:0},gap:8,cursor:"pointer",onClick:e=>{e.defaultPrevented||((0,v.rw)(t,n,"item",{tabId:o}),(0,h.Q)(e,y,{native:g}))},children:[(0,r.tZ)(d.L,{context:t.context,onClick:()=>(0,v.rw)(t,n,"context",{tabId:o}),utm_content:t.entity_key}),(0,r.BX)(m.hs,{gap:12,children:[(0,r.tZ)(p.Fb,{user:i,onClick:a,utm_content:t.entity_key}),(0,r.BX)(m.tu,{gap:8,flex:"grow",children:[(0,r.tZ)(c.Ev,{author:i,onClick:a,utm_content:t.entity_key,publication:t.publication,item:t,timestamp:t.community_post.created_at,hideSubscribeCta:!0}),(0,r.tZ)(Z,{communityPost:t.community_post,pub:t.publication,author:i,feedSurface:n,userPubRole:t.user_pub_role,contextType:t.context.type,useClientSideRouting:!g})]})]})]})}function Z(e){var t,i;let{communityPost:s,feedSurface:d,author:c,pub:u,userPubRole:p,contextType:h,useClientSideRouting:v}=e,[f,g]=(0,l.eJ)({reactions:null!==(t=s.reactions)&&void 0!==t?t:{},currentReaction:null!==(i=s.reaction)&&void 0!==i?i:void 0}),Z=async e=>{var t,i;let{id:r,reaction:l}=e,o=l===f.currentReaction,s=(0,n._)({},f.reactions);if(s[l]=(null!==(t=f.reactions[l])&&void 0!==t?t:0)+(o?-1:1),o){let e=await (0,a.aQ)(l,r,"posts");!o&&f.currentReaction&&(s[f.currentReaction]=(null!==(i=s[f.currentReaction])&&void 0!==i?i:0)-1),e instanceof Error||g({currentReaction:void 0,reactions:s})}else await (0,a.oQ)(l,r,"posts") instanceof Error||g({reactions:s,currentReaction:l})};return(0,r.BX)(m.tu,{gap:2,alignItems:"start",children:[(0,r.tZ)(o.qp,{communityPost:s,hideReply:!1,userBlockStatus:null,isFounding:null==p?void 0:p.is_founding,isPaid:(null==p?void 0:p.membership_state)==="subscribed",isReadOnly:!0,useClientSideRouting:v,utmSource:d,pub:u,truncate:!0,surface:d,author:c,reactionsContext:{type:"chat_subscribed"===h?"feed-subscribed":"feed-recommended",id:s.id},reaction:f.currentReaction,reactions:f.reactions,handleReactionClick:Z,backAction:b.DsN,outline:"detail"}),(0,r.tZ)(o.mZ,{direction:"incoming",commenters:s.recent_commenters,count:s.comment_count,hasUnread:!!(s.most_recent_comment_created_at&&s.user_last_viewed_timestamp&&s.user_last_viewed_timestamp<s.most_recent_comment_created_at),outline:"detail"})]})}},80143:function(e,t,i){i.d(t,{Q:()=>a,Y:()=>s});var n=i(16584),r=i(98661),l=i(30396);let o=(0,r.createContext)({});function a(e){let{entityKey:t,children:i}=e;return(0,n.tZ)(o.Provider,{value:{entityKey:t},children:i})}function s(){return(0,l.qp)(o).entityKey}},62110:function(e,t,i){i.d(t,{_:()=>b});var n=i(16584),r=i(30396),l=i(74945),o=i(64729),a=i(95441),s=i(42375),d=i(98170),c=i(85527),u=i(15771),p=i(19081),h=i(6490),m=i(58175),v=i(15503),f=i(5749);function b(e){let{item:t,pub:i,post:o}=e,[s,d]=(0,r.eJ)(!1),{iString:c}=(0,a.M1)();return(0,n.BX)(n.HY,{children:[(0,n.tZ)(u.hU,{priority:"quaternary",size:"sm",className:f.Z.moreButton,onClick:()=>d(!0),children:(0,n.tZ)(l.Z,{size:16})}),(0,n.BX)(h.u_,{isOpen:s,onClose:()=>d(!1),width:440,children:[(0,n.tZ)(h.xB,{icon:(0,n.tZ)(l.Z,{size:20}),title:c("Auto-generated clip"),showClose:!0,onClose:()=>d(!1)}),(0,n.tZ)(h.fe,{children:(0,n.tZ)(p.tu,{gap:16,children:(0,n.tZ)(m.xv.B3,{children:c("Substack automatically selected this clip for you from the full video below.")})})}),(0,n.tZ)(h.mz,{primaryButton:(0,n.tZ)(g,{item:t,pub:i,post:o,onClose:()=>d(!1)}),secondaryButton:(0,n.tZ)(u.zx,{priority:"secondary",onClick:()=>d(!1),children:c("Done")})})]})]})}let g=e=>{let{item:t,pub:i,post:l,onClose:p}=e,{iString:h}=(0,a.M1)(),m=(0,d.vE)({post:l,publication:i}),f=(0,s.rI)(),b=(0,r.qp)(c.q);return(0,n.tZ)(o.i,{children:(0,n.tZ)(u.zx,{priority:"primary",onClick:e=>{(0,v.rw)(t,f,"watch_full_episode",{tabId:b}),m(e),p()},children:h("View Full Episode")})})}},13748:function(e,t,i){i.d(t,{U:()=>ei,v:()=>er});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(30396),s=i(27194),d=i(99869),c=i(71212),u=i(48916),p=i(68494),h=i(77600),m=i(59543),v=i(67659),f=i(23260),b=i(78796),g=i(7073),Z=i(85200),y=i(18794),_=i(13808),C=i(51455),w=i(94442),S=i(79094),k=i(19548),x=i(35543),B=i(95441),I=i(93155),N=i(40647),X=i(60807),P=i(42375),L=i(25991),z=i(85527),T=i(48980),M=i(7882),E=i(98914),O=i(15771),j=i(19081),F=i(44424),A=i(15562),H=i(78096),U=i(70379),R=i(46585),V=i(15503),D=i(27744),Y=i(2009),W=i(88817),J=i(75419),q=i(98012),G=i(31377),K=i(42886),Q=i(33884),$=i(63651),ee=i(84864),et=i(5749);function ei(e){var t,i,l,y,_;let{publication:w,post:W,comment:ei,item:er,allowHide:el=!1}=e,eo=(0,U.pm)(),{getConfigFor:ea}=(0,N.xR)(),es=(0,P.rI)(),ed=(0,z.F)(),ec=(0,D.I0)(),eu=(0,D.kc)(),{iString:ep}=(0,B.M1)(),[eh,em]=(0,a.eJ)(!1),[ev,ef]=(0,a.eJ)(!1),eb=(0,X.aF)(),eg=(0,S.T)(),{openModal:eZ,closeModal:ey}=(0,I.dd)(),e_=null!==(y=null==ei?void 0:null===(t=ei.ancestor_path)||void 0===t?void 0:t.split(".").filter(Boolean).map(Number).map(e=>eu.comments.get(e)))&&void 0!==y?y:[],eC=ei?(0,G.getCommentAuthor)(ei):w&&W?(0,G.getPostAuthor)(w,W):{id:0,name:"void"},ew=er&&"entity_key"in er?er.entity_key:void 0,eS=(0,k.CH)(eC,{surface:es,noteId:ew,onClick(e){er&&(0,V.rw)(er,es,e,{tabId:ed})}}),ek=(0,x.oh)(eC,es,ew),ex=(0,M.ib)({pathname:"/api/v1/comment/".concat(null!==(_=null==ei?void 0:ei.id)&&void 0!==_?_:0),method:"DELETE",json:{publication_id:null==w?void 0:w.id}}),eB=async()=>{if(!ei||(em(!1),ex.isLoading))return;let e=await ex.refetch();if(e instanceof Error){alert((0,E.zx)(e));return}eo.popToast(e=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},e),{text:ep("Note deleted"),Icon:s.Z}))),ec({type:"comment_delete",payload:{publication:null!=w?w:void 0,post:null!=W?W:void 0,comment:ei}})},eI=(0,J.i3)(),eN=async()=>{ei&&eI.open({editComment:ei,tabId:ed,surface:es})},eX=er&&(0,K.D2)(er)&&"post"===er.type&&er.mediaClip,eP=async(e,t)=>{await (0,T.rd)("/api/v1/comment/".concat(e.id,"/juice"),{method:"POST",json:{times_to_show:t}}),eo.popToast(e=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},e),{text:ep("Juiced"),Icon:u.Z}))),ef(!1)},eL=async(e,t)=>{let i;if(!e.comment&&!e.post)return;let l="post"===e.type?e.post.id:e.comment.id;switch(t){case"1hour":i=1;break;case"8hours":i=8;break;case"24hours":i=24}let a=i?{expires_at:(0,q.Z)().add(i,"hour").toISOString()}:{};await (0,T.rd)("/api/v1/notification_settings/".concat(e.type,"/").concat(l,"/mute"),{method:"POST",json:a}),ec({type:"item_pause_notifications",payload:{entityKey:e.entity_key}}),eo.popToast(e=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},e),{text:ep("Paused"),Icon:p.Z})))},ez=async e=>{if(!e.comment&&!e.post)return;let t="post"===e.type?e.post.id:e.comment.id;await (0,T.rd)("/api/v1/notification_settings/".concat(e.type,"/").concat(t,"/mute"),{method:"DELETE"}),ec({type:"item_unpause_notifications",payload:{entityKey:e.entity_key}}),eo.popToast(e=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},e),{text:ep("Unpaused"),Icon:p.Z})))},eT=async()=>{try{if(!ei){eo.popToast(e=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},e),{text:ep("Error starting workflow: comment not found")})));return}let{workflowId:e}=await (0,T.rd)("/api/v1/comment/".concat(ei.id,"/workflow"),{method:"POST",json:{}});eo.popToast(t=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},t),{text:"Workflow started with id ".concat(e)})))}catch(e){eo.popToast(t=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},t),{text:"Error starting workflow: ".concat(e)})))}},eM=!!W&&er&&"context"in er&&L.nH.includes(er.context.type),eE=el&&er&&"entity_key"in er&&eb&&eb.id!==eC.id,eO=eb&&eb.id===eC.id&&(null==er?void 0:er.type)&&["comment","post"].includes(er.type),ej=[(0,o.tZ)(F.sN,{leading:(0,o.tZ)(d.Z,{}),onClick:()=>{let e=ei?(0,$.Sgq)(ei):W?(0,$.mx9)(w,W,{mediaClip:eX||void 0}):null;(0,E.vQ)(e),eo.popToast(e=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},e),{text:ep("Copied link to clipboard"),Icon:d.Z})))},children:ep("Copy link")}),!ei&&W&&(0,o.tZ)(en,{post:W}),...ek,(0,o.tZ)(F.sN,{leading:(0,o.tZ)(h.Z,{}),onClick:()=>{eZ({children:(0,o.tZ)(C.I,{comment:ei||void 0,onClose:ey}),width:540})},children:ep("Embed")}),ei?(0,o.tZ)(F.sN,{leading:(0,o.tZ)(c.Z,{}),onClick:()=>{eo.popToast(e=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},e),{text:ep("Downloading image..."),Icon:c.Z})))},href:(0,Q.IY)(ei.id),target:"_blank",download:!0,children:ep("Save as image")}):null].filter(Boolean),eF=[(0,ee.canEditComment)(eb,ei)&&(0,o.tZ)(F.sN,{leading:(0,o.tZ)(m.Z,{}),onClick:eN,children:ep("Edit")}),ei&&((null==eb?void 0:eb.is_global_admin)||(null==eb?void 0:eb.id)===ei.user_id||ea("show_note_stats_for_all_notes"))?(0,o.tZ)(F.sN,{leading:(0,o.tZ)(v.Z,{}),href:(0,Q.wn)(ei,{noBase:Y.L}),native:!0,children:ep("View stats")}):null].filter(Boolean),eA=(null==er?void 0:er.type)&&["comment","post"].includes(er.type)&&eu.mutedFeedItems.has(er.entity_key),eH=[eE&&(0,o.tZ)(F.sN,{leading:(0,o.tZ)(f.Z,{}),onClick:async()=>{try{ec({type:"item_hide",payload:{entityKey:er.entity_key}}),await (0,T.rd)("/api/v1/note/".concat(er.entity_key,"/hide"),{method:"POST",json:{tabId:ed,surface:es}})}catch(e){eo.popToast(t=>(0,o.tZ)(U.FN,(0,r._)((0,n._)({},t),{text:(0,E.zx)(e)})))}},children:(eb.is_admin||eb.is_contributor)&&"post-page-restacks-list"===es?ep("Hide note from post"):ep("Hide note")}),eO&&(eA?(0,o.tZ)(R.WS,{onClick:()=>ez(er),customLabel:ep("Unpause notifications")}):(0,o.tZ)(R.KV,{onMute:e=>eL(er,e),customLabel:ep("Pause notifications")})),(null==eb?void 0:eb.is_global_admin)&&ei&&(null===(l=ei.attachments)||void 0===l?void 0:null===(i=l[0])||void 0===i?void 0:i.type)==="video"?(0,o.tZ)(F.sN,{leading:(0,o.tZ)(b.Z,{}),priority:"secondary",onClick:eT,children:ep("Run workflow")}):null].filter(Boolean),eU=[...eS,ei&&(0,ee.canReportComment)(eb,ei)?(0,o.tZ)(F.sN,{leading:(0,o.tZ)(g.Z,{}),priority:"destructive",onClick:()=>{let e=!!ei.publication_id;eg({pub:null!=w?w:void 0,canReportToAdmins:e,onSubmit:async t=>{let{reportCategory:i,details:r,reportedToSubstack:l}=t;await (0,T.rd)("/api/v1/comment/".concat(ei.id,"/report"),{method:"POST",json:(0,n._)({details:r,reportCategory:i,reportedToSubstack:l},e?{publication_id:ei.publication_id}:{})})}})},children:ep("Report")}):eM?(0,o.tZ)(F.sN,{leading:(0,o.tZ)(g.Z,{}),priority:"destructive",onClick:()=>{eg({pub:null!=w?w:void 0,canReportToAdmins:!1,onSubmit:async e=>{let{reportCategory:t,details:i}=e;await (0,T.rd)("/api/v1/publications/".concat(null==w?void 0:w.id,"/posts/").concat(W.id,"/report"),{method:"POST",json:{details:i,reportCategory:t}})}})},children:ep("Report")}):null,(0,ee.canDeleteComment)(eb,ei,{pub:null!=w?w:void 0,post:null!=W?W:void 0,parentComments:e_})&&(0,o.tZ)(F.sN,{leading:(0,o.tZ)(s.Z,{}),priority:"destructive",onClick:()=>em(!0),children:ep("Delete")}),(null==eb?void 0:eb.is_global_admin)&&ei?(0,o.tZ)(F.sN,{leading:(0,o.tZ)(u.Z,{}),priority:"destructive",onClick:async()=>{ef(!0)},children:ep("Juice")}):null].filter(Boolean),eR=[0!==ej.length&&ej,0!==eF.length&&(0,o.tZ)(F.xw,{children:eF}),0!==eH.length&&(0,o.tZ)(F.xw,{children:eH}),0!==eU.length&&(0,o.tZ)(F.xw,{children:eU})];return 0===eR.length?null:(0,o.BX)(o.HY,{children:[(0,o.tZ)(F.v2,{trigger:(0,o.tZ)(j.hs,{className:et.Z.moreButtonContainer,children:(0,o.tZ)(O.hU,{priority:"quaternary",size:"sm",className:et.Z.moreButton,"aria-label":ep("More options"),children:(0,o.tZ)(Z.Z,{size:16})})}),maxHeight:350,onOpen:()=>{er&&(0,V.rw)(er,es,"menu",{tabId:ed})},children:eR}),(0,o.tZ)(A.W,{isOpen:eh,title:ep("Delete note"),description:ep("Are you sure you want to permanently delete this note? This action cannot be undone."),primaryButton:(0,o.tZ)(O.zx,{priority:"destructive",onClick:eB,children:ep("Delete")}),secondaryButton:(0,o.tZ)(O.zx,{priority:"secondary",onClick:()=>em(!1),children:ep("Cancel")}),onClose:()=>em(!1)}),(null==eb?void 0:eb.is_global_admin)&&(0,o.tZ)(A.W,{isOpen:ev,title:ep("Juice note"),description:ep("How many additional impressions would you like this note to receive? 100 impressions equals roughly 1-3 likes."),primaryButton:(0,o.BX)(H.dm,{priority:"secondary-outline",size:"md",children:[(0,o.tZ)(H.yo,{onClick:async()=>{await eP(ei,100)},children:"100"}),(0,o.tZ)(H.yo,{onClick:async()=>{await eP(ei,500)},children:"500"}),(0,o.tZ)(H.yo,{onClick:async()=>{await eP(ei,1e3)},children:"1000"})]}),secondaryButton:(0,o.tZ)(j.hs,{flex:"grow",children:(0,o.tZ)(O.zx,{priority:"secondary",onClick:()=>ef(!1),children:ep("Cancel")})}),onClose:()=>ef(!1)})]})}function en(e){var{post:t}=e,i=(0,l._)(e,["post"]);let a=(0,X.aF)(),{requireLogin:s}=(0,W.SJ)(),d=()=>null==s?void 0:s({redirectOverride:(0,$.uRy)(null,t,{urlParams:{triggerSave:!0}})}),c=er(t),{iString:u}=(0,B.M1)();return(0,o.tZ)(F.sN,(0,r._)((0,n._)({leading:t.is_saved?(0,o.tZ)(y.Z,{}):(0,o.tZ)(_.Z,{}),onClick:()=>a?c():d()},i),{children:u(t.is_saved?"Unsave":"Save")}))}function er(e){let t=(0,D.I0)(),i=(0,w.c1)();return()=>{let n=e.id,r=!e.is_saved;(0,w.TJ)(n,r,{surface:"reader"}),i(r),t({type:"post_save",payload:{postId:n,isSaved:r}})}}},12302:function(e,t,i){i.d(t,{Z:()=>v});var n=i(16584),r=i(35543),l=i(95441),o=i(16451),a=i(68833),s=i(80878),d=i(80026),c=i(63474),u=i(87989),p=i(65958),h=i(15503),m=i(63651);let v=e=>{let{item:t}=e,{iString:i}=(0,l.M1)();return(0,n.BX)(d.tu,{gap:8,paddingBottom:12,children:[(0,n.tZ)(d.sg,{children:t.results.map((e,i)=>(0,n.tZ)(f,{user:e,rank:i,item:t}))}),t.hasMore&&(0,n.tZ)(d.zx,{onClick:e=>(0,s.Q)(e,t.expansionUrl),priority:"secondary",children:i("See more people")})]})},f=e=>{var t;let{user:i,rank:s,item:v}=e,{isFollowing:f,toggle:b}=(0,r.Sv)(i,"top-search"),g=(0,p.s)({source:"top-search"}),Z=()=>{(0,h.rw)(v,"search","user-result"),(0,a.j)(a.FP.GLOBAL_SEARCH_RESULT_CLICKED,{search_key:"top-search",result_type:"user",rank:s})},{iString:y}=(0,l.M1)();return(0,n.BX)(d.X2,{padding:8,gap:12,justifyContent:"space-between",children:[(0,n.tZ)(d.X2,{gap:12,onClick:Z,children:(0,n.BX)(c.A0,{href:(0,m.NNq)(i,{utm_source:"top-search"}),children:[(0,n.tZ)(o.Fb,{user:i,onClick:Z}),(0,n.BX)(d.sg,{children:[(0,n.BX)(d.xv.B3,{weight:"semibold",children:[i.name,"\xa0",(0,n.tZ)(u.UserBadge,{tier:i.bestseller_tier,userId:i.id,inline:!0,size:"sm"})]}),(0,n.tZ)(d.xv.B4,{color:"secondary",children:"".concat(i.handle?"@".concat(i.handle,"  ∙ "):"").concat(i.primaryPublication?null===(t=i.primaryPublication)||void 0===t?void 0:t.name:"")}),i.bio?(0,n.tZ)(d.xv.B4,{clamp:1,children:i.bio}):null]})]})}),f?i.can_dm?(0,n.tZ)(d.zx,{priority:"tertiary",onClick:()=>{g.handleStart([i.id]),Z()},children:y("Message")}):null:(0,n.tZ)(d.zx,{onClick:e=>{e.preventDefault(),b(),Z()},children:y("Follow")})]})}},47395:function(e,t,i){i.d(t,{L:()=>B});var n=i(16584),r=i(30396),l=i(94184),o=i.n(l),a=i(33112),s=i(95441),d=i(53678),c=i(94874),u=i(19081),p=i(58175),h=i(28070),m=i(63623),v=i(8618),f=i(89337),b=i(76204),g=i(74655),Z=i(20817),y=i(76410),_=i(7617),C=i(10633),w=i(91400),S=i(63651),k=i(84864);let x="contextFacepileAvatar-QWZFqt";function B(e){let{context:t,onClick:i,utm_content:r}=e,l=I[t.type];return l?(0,n.tZ)(u.hs,{className:"contextRow-x_1iaF",children:(0,n.tZ)(p.xv.B4,{color:"secondary",style:{width:"100%"},children:(0,n.tZ)(l,{context:t,onClick:i,utm_content:r})})}):null}let I={post_like:function(e){let{context:t,onClick:i,utm_content:r}=e;return(0,n.tZ)(M,{context:t,type:"like",label:"Likes",verb:"liked",onClick:i,utm_content:r})},post_comment:N,post_restack:function(e){let{context:t,onClick:i,utm_content:r}=e;return(0,n.tZ)(M,{context:t,type:"restack",label:"Restacks",verb:"restacked",onClick:i,utm_content:r})},post_subscribed:function(){let{iString:e}=(0,s.M1)();return(0,n.tZ)(P,{type:"inbox",children:e("From your subscriptions")})},post_following:function(){let{iString:e}=(0,s.M1)();return(0,n.tZ)(P,{type:"follow",children:e("From your follows")})},comment:N,note_reply:N,note_recommend:function(e){let{context:t,onClick:i,utm_content:r}=e;return(0,n.tZ)(M,{context:t,type:"recommend",label:"Recommendations",verb:"recommends",onClick:i,utm_content:r})},comment_like:function(e){let{context:t,onClick:i,utm_content:r}=e;return(0,n.tZ)(M,{context:t,type:"like",label:"Likes",verb:"liked",onClick:i,utm_content:r})},comment_restack:function(e){let{context:t,onClick:i,utm_content:r}=e;return(0,n.tZ)(M,{context:t,type:"restack",label:"Restacks",verb:"restacked",onClick:i,utm_content:r})},chat_subscribed:function(e){let{context:t}=e;return(0,n.tZ)(P,{type:"chat",children:t.publication?(0,n.BX)(n.HY,{children:["From the"," ",(0,n.tZ)(d.hh,{href:(0,S.xC8)({pubId:t.publication.id}),children:t.publication.name})," ","chat"]}):"From your chats"})},chat_recommended:function(e){let{context:t}=e;return(0,n.tZ)(P,{type:"chat",children:t.publication?(0,n.BX)(n.HY,{children:["Recommended chat:"," ",(0,n.tZ)(d.hh,{href:(0,S.xC8)({pubId:t.publication.id}),children:t.publication.name})]}):"Recommended chat"})},latest_post:function(){let{iString:e}=(0,s.M1)();return(0,n.tZ)(P,{type:"latest_post",children:e("Latest post")})},from_archives:function(){let{iString:e}=(0,s.M1)();return(0,n.tZ)(P,{type:"from_archives",children:e("From the archives")})}};function N(e){let{context:t,onClick:i,utm_content:r}=e;return(0,n.tZ)(M,{context:t,type:"comment",label:"Replies",verb:"replied",onClick:i,utm_content:r})}let X={like:function(e){let{size:t,className:i}=e;return(0,n.tZ)(v.Z,{size:t,className:i})},comment:function(e){let{size:t,className:i}=e;return(0,n.tZ)(h.Z,{size:t,className:i})},recommend:function(e){let{size:t,className:i}=e;return(0,n.tZ)(m.Z,{size:t,className:i})},featured:function(e){let{size:t,className:i}=e;return(0,n.tZ)(m.Z,{size:t,className:i})},trending:function(e){let{size:t,className:i}=e;return(0,n.tZ)(f.Z,{size:t,className:i})},leaderboard:function(e){let{size:t,className:i}=e;return(0,n.tZ)(b.Z,{size:t,className:i})},restack:function(e){let{size:t,className:i}=e;return(0,n.tZ)(g.Z,{size:t,className:i})},inbox:function(e){let{size:t,className:i}=e;return(0,n.tZ)(Z.Z,{size:t,className:i})},follow:function(e){let{size:t,className:i}=e;return(0,n.tZ)(y.Z,{size:t,className:i})},chat:function(e){let{size:t,className:i}=e;return(0,n.tZ)(_.Z,{size:t,className:i})},latest_post:function(e){let{size:t,className:i}=e;return(0,n.tZ)(m.Z,{size:t,className:i})},from_archives:function(e){let{size:t,className:i}=e;return(0,n.tZ)(C.Z,{size:t,className:i})}};function P(e){let{type:t,children:i,photoUrls:r}=e;return(0,n.BX)(u.gq,{alignItems:"center",gap:4,position:"relative",flex:"grow",children:[(0,n.tZ)(u.hs,{width:20,height:20,alignItems:"center",justifyContent:"center",className:"contextIconContainer-jHpRsg",children:(0,n.tZ)(L,{type:t,photoUrls:null!=r?r:[]})}),i]})}function L(e){let{type:t,photoUrls:i}=e;return 1===i.length?(0,n.tZ)(c.qE,{photoUrl:i[0],size:22}):2===i.length?(0,n.tZ)(z,{photoUrls:i}):(0,n.tZ)(T,{type:t})}function z(e){let{photoUrls:t}=e;return(0,n.BX)(u.hs,{className:"contextFacepile-JxlURM",children:[(0,n.tZ)(c.qE,{photoUrl:t[0],size:22,className:o()(x,"last-TGVukC")}),(0,n.tZ)(c.qE,{photoUrl:t[1],size:22,className:x})]})}function T(e){let{type:t}=e,i=X[t];return(0,n.tZ)(i,{size:18})}function M(e){let t,{context:i,type:l,label:o,verb:s,utm_content:c,onClick:u}=e,h="notes_context",[m,v]=(0,r.eJ)(!1),f=(0,w.XA)(),b=i.users[0];if(!b)return null;let g=i.users.length-1;return 2===i.users.length?(t=i.users[1],g=0):!f&&i.users.length>2&&(t=i.users[1],g=i.users.length-2),(0,n.tZ)(P,{type:l,children:(0,n.BX)(p.xv,{as:"span",children:[(0,n.tZ)(d.Zg,{user:b,onClick:u,utm_source:h,utm_content:c,color:"secondary",useYou:!0}),t&&(0,n.BX)(n.HY,{children:[g>0?", ":" and ",(0,n.tZ)(d.Zg,{user:t,onClick:u,utm_source:h,utm_content:c,color:"secondary",useYou:!0})]}),g>0&&(0,n.BX)(n.HY,{children:[t?", and ":" and ",(0,n.tZ)(d.hh,{onClick:()=>{u(),v(!0)},children:(0,k.pluralize)(g," other")})]})," ".concat(s),(0,n.tZ)(a.F,{isOpen:m,modalLabel:o,faces:i.users,totalCount:i.users.length,onClose:()=>v(!1),utmSource:null})]})})}},81437:function(e,t,i){i.d(t,{n:()=>T});var n=i(7409),r=i(99282),l=i(58865),o=i(16584),a=i(30396),s=i(25380),d=i(24230),c=i(23260),u=i(37603),p=i(85200),h=i(19548),m=i(35543),v=i(95441),f=i(60807),b=i(42375),g=i(85527),Z=i(53678),y=i(6910),_=i(48980),C=i(98914),w=i(15771),S=i(19081),k=i(44424),x=i(58175),B=i(70379),I=i(15503),N=i(27744),X=i(5749);function P(){let e=(0,l._)(["Snoozed "," for 30 days"]);return P=function(){return e},e}function L(){let e=(0,l._)(["Snooze "," for 30 days"]);return L=function(){return e},e}function z(){let e=(0,l._)(["Unfollow ",""]);return z=function(){return e},e}function T(e){let{user:t,item:i,comment:n,children:r}=e,l=(0,h.gc)(null==t?void 0:t.id),s=(0,h.Yq)(),[d,c]=(0,a.eJ)(s),u=(0,N.de)(i);(0,a.d4)(()=>{l&&!s&&c(!1)},[l]);let p=n?"feed"!==n.type||n.ancestor_path?"reply":"note":"post";return l&&!d?(0,o.tZ)(M,{userBlockStatus:l,onShow:()=>c(!0),entityType:p}):u&&i&&"entity_key"in i?(0,o.tZ)(E,{user:t,entityKey:i.entity_key,item:i}):(0,o.tZ)(o.HY,{children:r})}function M(e){let{userBlockStatus:t,onShow:i,entityType:n}=e;return(0,o.BX)(S.gq,{radius:"md",border:"detail",bg:"secondary",justifyContent:"space-between",alignItems:"center",paddingX:16,paddingY:20,onClick:e=>{e.preventDefault(),i()},gap:12,className:X.Z.mutedItem,children:[(0,o.tZ)(S.hs,{flex:"grow",minWidth:0,children:(0,o.BX)(x.xv.B4,{color:"secondary",children:["This ",n," is from someone","muting"===t?" you’ve hidden.":"blocking"===t?" you’ve blocked.":" who has you blocked."]})}),"blocked"!==t&&(0,o.tZ)(x.xv.B4,{color:"secondary",weight:"semibold",children:(0,o.BX)(Z.hh,{onClick:()=>i(),children:["Show ",n]})})]})}function E(e){let{user:t,entityKey:i,item:l}=e,{iString:a,iTemplate:Z}=(0,v.M1)(),X=(0,g.F)(),T=(0,f.aF)(),M=(0,b.rI)(),{isFollowing:E,toggle:O}=(0,m.Sv)(t,"hidden-item"),j=(0,h.CH)(t,{surface:"hidden-item",onClick(e){l&&(0,I.rw)(l,M,e,{tabId:X})}}),F=(0,N.I0)(),A=()=>F({type:"item_dismiss",payload:{entityKey:i}}),H=(0,B.pm)(),U=e=>H.popToast(t=>(0,o.tZ)(B.FN,(0,r._)((0,n._)({},t),{text:(0,C.zx)(e)}))),R=async()=>{try{F({type:"item_unhide",payload:{entityKey:i}}),await (0,_.rd)("/api/v1/note/".concat(i,"/hide"),{method:"DELETE"})}catch(e){U(e)}},V=async()=>{try{A(),await (0,_.rd)("/api/v1/note/".concat(i,"/dislike"),{method:"POST",json:{tabId:X,surface:M}}),H.popToast(e=>(0,o.tZ)(B.FN,(0,r._)((0,n._)({},e),{Icon:s.Z,text:a("We'll show fewer notes like this")})))}catch(e){U(e)}},D=async()=>{try{A(),await (0,_.rd)("/api/v1/blocks/".concat(null==t?void 0:t.id),{method:"POST",json:{type:"mute",surface:"hidden-item",expiryDays:30}}),H.popToast(e=>{var i;return(0,o.tZ)(B.FN,(0,r._)((0,n._)({},e),{Icon:d.Z,text:Z(P(),null!==(i=null==t?void 0:t.name)&&void 0!==i?i:"")}))})}catch(e){U(e)}},Y=async()=>{A(),E&&await O()};return(0,o.BX)(S.tu,{gap:8,children:[(0,o.BX)(S.gq,{padding:8,children:[(0,o.BX)(S.tu,{flex:"grow",gap:4,children:[(0,o.BX)(S.gq,{alignItems:"center",gap:12,children:[(0,o.tZ)(S.hs,{width:24,height:24,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(c.Z,{size:20})}),(0,o.tZ)(x.xv.B3,{translated:!0,weight:"semibold",children:"Note hidden"})]}),("post-page-restacks-list"!==M||!((null==T?void 0:T.is_admin)||(null==T?void 0:T.is_contributor)))&&(0,o.tZ)(x.xv.B4,{translated:!0,color:"secondary",children:"We’ll use this feedback to improve your feed."})]}),(0,o.tZ)(w.zx,{priority:"secondary-outline",onClick:R,children:a("Undo")})]}),(0,o.tZ)(k.sN,{leading:(0,o.tZ)(u.Z,{}),onClick:V,children:a("Show fewer notes like this")}),(null==t?void 0:t.name)&&(0,o.tZ)(k.sN,{leading:(0,o.tZ)(d.Z,{}),onClick:D,children:Z(L(),t.name)}),E&&(0,o.tZ)(k.sN,{leading:(0,o.tZ)(y.m,{}),onClick:Y,children:(null==t?void 0:t.name)?Z(z(),t.name):a("Unfollow")}),j.length>0&&(0,o.tZ)(k.v2,{trigger:(0,o.tZ)(k.sN,{leading:(0,o.tZ)(p.Z,{}),children:a("More options")}),layerOptions:{placement:"bottom-start"},children:j})]})}},69821:function(e,t,i){i.d(t,{sZ:()=>_});var n=i(7409),r=i(99282),l=i(16584),o=i(99869),a=i(71212),s=i(67358),d=i(27027),c=i(55232),u=i(20068),p=i(68833),h=i(98914),m=i(15771),v=i(19081);i(6490);var f=i(58175),b=i(70379);i(38202);var g=i(60308);i(33884);var Z=i(63651),y=i(7083);function _(e){let{shareUrl:t,shareText:i,shareEventType:m,itemKey:f,shareSource:y,comment:_,onShare:x}=e,B=(0,b.pm)(),I=(e,t)=>{(0,p.j)(p.FP.SHARE_LINK_CLICKED,{name:e,type:m,item_entity_key:f,source:y});let i=t();i&&(i.startsWith("http")?window.open(i,"_blank"):document.location.href=i),null==x||x()};return(0,l.tZ)(v.tu,{flex:"grow",justifyContent:"center",children:(0,l.BX)(v.hs,{gap:8,children:[(0,l.BX)(C,{children:[(0,l.tZ)(S,{onClick:()=>{I("twitter",()=>(0,g.LaP)({url:t,text:i}))},children:(0,l.tZ)(u.Z,{height:48})}),(0,l.tZ)(w,{children:"Twitter"})]}),(0,l.BX)(C,{children:[(0,l.tZ)(S,{onClick:()=>{I("facebook",()=>(0,g.n1t)("https://www.facebook.com/sharer/sharer.php",{u:t}))},children:(0,l.tZ)(d.Z,{height:48})}),(0,l.tZ)(w,{children:"Facebook"})]}),(0,l.BX)(C,{children:[(0,l.tZ)(S,{onClick:()=>{I("linkedin",()=>(0,g.n1t)("https://www.linkedin.com/sharing/share-offsite/",{url:t}))},children:(0,l.tZ)(c.Z,{height:48})}),(0,l.tZ)(w,{children:"LinkedIn"})]}),(0,l.BX)(C,{children:[(0,l.tZ)(k,{onClick:()=>{I("copy",()=>{(0,h.vQ)(t)}),B.popToast(e=>(0,l.tZ)(b.FN,(0,r._)((0,n._)({},e),{text:"Copied link to clipboard",Icon:o.Z})))},children:(0,l.tZ)(o.Z,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,l.tZ)(w,{children:"Copy link"})]}),_?(0,l.BX)(C,{children:[(0,l.tZ)(k,{onClick:()=>{B.popToast(e=>(0,l.tZ)(b.FN,(0,r._)((0,n._)({},e),{text:"Downloading image...",Icon:a.Z})))},href:(0,Z.IYm)(_.id),target:"_blank",download:!0,children:(0,l.tZ)(a.Z,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,l.tZ)(w,{children:"Save image"})]}):(0,l.BX)(C,{children:[(0,l.tZ)(k,{onClick:()=>{I("email",()=>(0,g.n1t)("mailto:",{subject:i,body:t}))},children:(0,l.tZ)(s.Z,{size:20,style:{stroke:"var(--color-fg-primary)"}})}),(0,l.tZ)(w,{children:"Email"})]})]})})}function C(e){return(0,l.tZ)(v.tu,(0,n._)({gap:8,alignItems:"center",flex:"grow"},e))}function w(e){return(0,l.tZ)(f.xv.B5,(0,n._)({align:"center",color:"primary"},e))}function S(e){return(0,l.tZ)(m.kG,(0,n._)({resetCss:!0,className:y.Z.shareImageButton},e))}function k(e){return(0,l.tZ)(m.hU,(0,n._)({size:"lg",rounded:!0,priority:"tertiary"},e))}},883:function(e,t,i){i.d(t,{n:()=>d});var n=i(16584),r=i(81914),l=i(16451),o=i(19081),a=i(65575),s=i(91400);function d(){return(0,n.tZ)(o.tu,{className:"lotsOfNotes-hqdxZB",children:Array(8).fill(0).map(()=>(0,n.tZ)(c,{}))})}function c(){let e=(0,s.XA)();return(0,n.tZ)(r.O3,{children:(0,n.tZ)(l.oM,{children:(0,n.BX)(o.hs,{gap:12,children:[(0,n.tZ)(a.Vm,{type:"circle",size:e?36:40}),(0,n.BX)(o.tu,{gap:12,flex:"grow",children:[(0,n.tZ)(a.Vm,{height:20,width:100}),[,,,].fill(0).map(()=>(0,n.tZ)(a.Vm,{height:20,width:"".concat(30+70*Math.random(),"%")}))]})]})})})}},16451:function(e,t,i){i.d(t,{Fb:()=>I,Ku:()=>k,Zb:()=>x,oM:()=>_,sP:()=>B});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(94184),s=i.n(a),d=i(85685),c=i(80143),u=i(94874),p=i(19081),h=i(63474),m=i(58175),v=i(2009),f=i(50312),b=i(98012),g=i(63651),Z=i(47929),y=i(5749);function _(e){let t;var{showGutter:i=!1,hasAvatar:r=!0,hasContext:a=!1,onClick:d,className:u,entityKey:p}=e,h=(0,l._)(e,["showGutter","hasAvatar","hasContext","onClick","className","entityKey"]);let m=d?e=>{let i=window.getSelection();if(i&&!i.isCollapsed&&(null==i?void 0:i.toString())!==t)return;let{target:n}=e;!(n instanceof Element&&n.closest("button, a"))&&!e.defaultPrevented&&d(e)}:void 0;return(0,o.tZ)(c.Q,{entityKey:p,children:(0,o.tZ)("div",(0,n._)({className:s()(C,y.Z.feedUnit,i?y.Z.showThreadGutter:void 0,a?y.Z.hasContext:void 0,r?y.Z.hasAvatar:void 0,u),onPointerDown:()=>{var e;t=null===(e=window.getSelection())||void 0===e?void 0:e.toString()},onClick:m,onAuxClick:m},h))})}let C=s()((0,h.oB)({gap:12}),h.sg.styles),w=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),S=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"});function k(e){let t,{timestamp:i}=e,n=(0,b.Z)(),r=(0,b.Z)(i),l=n.diff(r,"day");return t=n.diff(r,"year")>=1?S.format(r.toDate()):l>7?w.format(r.toDate()):r.fromNowShort(),(0,o.tZ)(m.xv.B4,{as:"span",color:"secondary",children:i&&t})}function x(e){let{user:t,className:i,size:n=36}=e;return(0,o.tZ)(u.qE,{size:n,user:t,className:i})}function B(e){let{children:t}=e;return(0,o.tZ)(m.xv.B3,{className:y.Z.feedCommentBodyInner,color:"primary",children:t})}function I(e){let{user:t,onClick:i,utm_content:l}=e,a=(0,f.F)({href:(0,g.NNq)(t,{noBase:v.L,utm_source:Z.b3.substackFeedItem}),state:{showBack:!0},onClick:i,campaign:{content:l}});return(0,o.tZ)(p.hs,(0,r._)((0,n._)({as:"a",flex:"auto",alignSelf:"start",radius:"full",showFocus:!0,animate:!0,draggable:!1},a),{children:(0,o.tZ)(d.ProfileHoverCard,{subject:t,dontStopPropagation:!0,utmSource:"feed",children:(0,o.tZ)(x,{user:t})})}))}},6246:function(e,t,i){i.d(t,{T:()=>o,u:()=>r});let n=Intl.NumberFormat(void 0,{maximumSignificantDigits:4});function r(e){return n.format(e)}let l=new Intl.NumberFormat(void 0,{maximumSignificantDigits:3,notation:"compact"});function o(e){return l.format(e)}},95128:function(e,t,i){i.d(t,{w:()=>p});var n=i(16584),r=i(2564),l=i(68833),o=i(61254),a=i(19081),s=i(58175),d=i(93630),c=i(22838),u=i(63651);function p(e){let{item:t}=e,i=(0,u.k5c)({categoryId:"bestseller"===t.category.id?"bestseller":t.category.id,ranking:"trending",backAction:(0,u.mIK)({type:"bestseller"===t.category.id?c.qX.Secondary:c.qX.Category,id:t.category.id.toString()})});return 0===t.items.length?null:(0,n.BX)(a.tu,{children:[(0,n.tZ)(s.hh,{href:i,children:(0,n.BX)(a.hs,{alignItems:"center",gap:8,paddingBottom:16,paddingTop:24,children:[(0,n.BX)(s.xv.H3,{children:["Rising in ",t.category.name]}),(0,n.tZ)(r.Z,{})]})}),(0,n.tZ)(a.tu,{paddingY:8,children:(0,n.tZ)(d.l6,{items:t.items,surface:"feed",onClickItem:e=>{let{publication:t,rank:i}=e;(0,l.j)(l.FP.LEADERBOARD_ITEM_CLICKED,{publication_id:t.id,rank:i,surface:"feed"})}})}),(0,n.tZ)(o.iz,{paddingY:8})]})}},31465:function(e,t,i){i.d(t,{e:()=>m});var n=i(16584),r=i(20888),l=i(42375),o=i(87447),a=i(80878),s=i(15771),d=i(19081),c=i(58175),u=i(15503),p=i(91400),h=i(63651);function m(e){let{item:t}=e,i=(0,p.XA)(),m=(0,u.Gv)(t,{isModuleItem:!0}),v=(0,l.rI)();return(0,n.BX)(o.hr,{item:t,onFirstVisible:()=>(0,u.qG)("seen",t,v,{extraEventProps:{clicked_element:"row"}}),children:[(0,n.tZ)(c.xv.H2,{children:t.title}),(0,n.BX)(o.Mr,{cursor:"pointer",onClick:e=>{m("collection"),(0,a.Q)(e,(0,h.tsE)(t.id,{noBase:!0}))},children:[(0,n.tZ)(r.e,{src:t.image_url,maxWidth:560,imageProps:{height:i?194:260,smartCrop:!0},objectFit:"cover"}),(0,n.tZ)(d.tu,{padding:20,gap:16,children:(0,n.BX)(d.tu,{gap:6,children:[(0,n.tZ)(c.xv.H3,{children:t.card_title}),(0,n.tZ)(c.xv.B4,{color:"secondary",children:t.card_subtitle}),(0,n.tZ)(s.zx,{priority:"secondary-outline",children:t.button_title})]})})]})]})}},73730:function(e,t,i){i.d(t,{a:()=>X});var n=i(16584),r=i(25380),l=i(32224),o=i(95441),a=i(42375),s=i(87447),d=i(7409),c=i(30396),u=i(37603),p=i(85200),h=i(48980),m=i(71068),v=i(15771),f=i(19081),b=i(44424),g=i(78446);function Z(e){let{onUndo:t}=e;return(0,n.BX)(f.tu,{padding:16,alignItems:"center",color:"secondary",children:[(0,n.tZ)(m.xu,{children:"We’ll no longer suggest this publication."}),(0,n.tZ)(m.xu,{children:(0,n.tZ)(v.kG,{resetCss:!0,style:{textDecoration:"underline"},onClick:e=>{e.preventDefault(),t()},children:"Undo"})})]})}function y(e){return(0,n.tZ)(b.v2,(0,d._)({trigger:(0,n.tZ)(v.hU,{"aria-label":"more",priority:"tertiary",size:"sm",children:(0,n.tZ)(p.Z,{color:"var(--color-fg-secondary) !important",size:16})}),maxHeight:350,stopPropagation:!0},e))}var _=i(80878),C=i(38841),w=i(58175),S=i(15503),k=i(91400),x=i(64172),B=i(60308),I=i(63651),N=i(47929);function X(e){let{item:t}=e,{iString:i}=(0,o.M1)(),{publication:d}=t,p=d.logo_url,m={utm_source:N.b3.substack,utm_content:N.fZ.feedFeaturedPublication},X=(0,k.XA)(),{isSubscribed:P}=(0,x.Y0)(d.id),L=(0,S.Gv)(t,{isModuleItem:!0}),z=(0,a.rI)(),T=function(e){let{publication:t,onSelect:i}=e,r=(0,g.N4)(),[l,o]=(0,c.eJ)(!1),a=async()=>{!r.isConfirming&&await r.confirm()&&(o(!0),(0,h.rd)("/api/v1/reader/interest",{method:"POST",json:{type:"publication",publication_id:t.id,sentiment:"negative"}}),i("not_interested"))};return{handleUndo:()=>{o(!1),(0,h.rd)("/api/v1/reader/interest",{method:"DELETE",json:{type:"publication",publication_id:t.id}}),i("undo_not_interested")},notInterested:l,menu:(0,n.BX)(n.HY,{children:[(0,n.tZ)(y,{children:(0,n.tZ)(b.sN,{leading:(0,n.tZ)(u.Z,{}),onClick:a,children:"Not interested in publication"})}),(0,n.tZ)(g.sm,{modal:r,title:"Not interested?",body:"We’ll no longer suggest ".concat(t.name)})]})}}({publication:d,onSelect:L});return(0,n.BX)(s.hr,{item:t,onFirstVisible:()=>(0,S.qG)("seen",t,z),children:[(0,n.BX)(f.hs,{alignItems:"center",justifyContent:"space-between",children:[(0,n.tZ)(w.xv.H2,{children:t.title}),T.menu]}),(0,n.BX)(s.Mr,{cursor:T.notInterested?void 0:"pointer",onClick:T.notInterested?void 0:e=>{e.defaultPrevented||(L("publication"),(0,_.Q)(e,(0,B.TJI)(d,{params:m}),{newTab:!0,native:!0}))},children:[(0,n.tZ)(s.EB,{imageUrl:p,width:350,children:(0,n.tZ)(s.up,{justifyContent:"center",alignItems:"center",paddingY:32,children:(0,n.tZ)(C.wk,{pub:t.publication,size:X?72:128})})}),(0,n.BX)(f.tu,{padding:20,gap:20,alignItems:"center",children:[(0,n.BX)(f.tu,{gap:6,children:[(0,n.tZ)(w.xv.H3,{children:t.publication.name}),(0,n.tZ)(w.xv.B4,{children:t.card_subtitle}),(0,n.BX)(w.xv.Meta,{ellipsis:!0,children:["by ",t.publication.author_name]})]}),P?(0,n.tZ)(v.zx,{priority:"secondary-outline",leading:(0,n.tZ)(r.Z,{size:20}),children:i("Subscribed")}):(0,n.tZ)(v.zx,{leading:(0,n.tZ)(l.Z,{size:20}),priority:"secondary-accent",onClick:()=>{L("subscribe")},href:(0,I.W1P)(t.publication,{addBase:!0,params:m}),newTab:!0,children:i("Subscribe")})]}),T.notInterested&&(0,n.tZ)(f.hs,{justifyContent:"center",alignItems:"center",bg:"primary",style:{position:"absolute",inset:0},children:(0,n.tZ)(Z,{onUndo:T.handleUndo})})]})]})}},87447:function(e,t,i){i.d(t,{up:()=>N,hr:()=>w,rF:()=>_,O3:()=>C,EB:()=>I,Mr:()=>B});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(30396),s=i(94184),d=i.n(s),c=i(10968),u=i(42375),p=i(85527);i(53678);var h=i(98750),m=i(71068),v=i(19081);i(58175);var f=i(15503),b=i(91400),g=i(45563),Z=i(63651),y=i(5749);function _(e){let{item:t,children:i,onFirstVisible:l,className:s,ariaLabel:m}=e,v=(0,a.sO)(null),Z=(0,u.rI)(),_=(0,a.qp)(p.q),w=(0,b.XA)();return(0,h.MW)(v,()=>{let e;if("comment"===t.type){var i;let{isTruncated:l}=(0,g.X)(t.comment,{isMobile:w});if(e={isTruncated:l},v.current&&(null===(i=t.comment.attachments)||void 0===i?void 0:i.length)){let i=t.comment.attachments.filter(e=>"image"===e.type),l=i.length>2?(0,c.kw)(i,v.current.clientWidth):0;e=(0,r._)((0,n._)({},e),{isMediaTruncated:l>v.current.clientWidth})}}(0,f.zi)(t,Z,{tabId:_,extraEventProps:e}),l&&l()},e=>{(0,f.Eg)(t,Z,e,{tabId:_})}),(0,o.tZ)(C,{ref:v,className:d()("userSuggestions"!==t.type?y.Z.contain:void 0,s),role:"article","aria-label":m,children:i})}let C=(0,m.zo)({display:"flex",direction:"column",className:y.Z.feedItem,position:"relative"});function w(e){let{item:t,children:i,onFirstVisible:n}=e;return(0,o.tZ)(_,{item:t,onFirstVisible:n,children:(0,o.tZ)(k,{children:i})})}let S=(0,m.zo)({display:"flex",direction:"column",paddingX:{mobile:16,desktop:0}}),k=(0,m.zo)({paddingY:24,gap:16},S),x=(0,m.oB)({cursor:"pointer"}),B=(0,m.zo)({position:"relative",display:"flex",direction:"column",radius:"md",bg:"elevated",border:"detail",shadow:"md",overflow:"hidden"},e=>{var{className:t,cursor:i}=e,r=(0,l._)(e,["className","cursor"]);return(0,o.tZ)("div",(0,n._)({className:d()("pointer"===i&&x,t)},r))});function I(e){var{className:t,children:i,imageUrl:a,width:s,height:c}=e,u=(0,l._)(e,["className","children","imageUrl","width","height"]);let p=a&&(0,Z.zF4)(a,s,{height:c,gravity:"auto",format:"jpg"});return(0,o.tZ)(v.hs,(0,r._)((0,n._)({},u),{className:d()("blurBg-fkm1Tn",t),style:p?{backgroundImage:"url('".concat(p,"')"),backgroundColor:"transparent"}:void 0,children:i}))}let N=(0,m.E7)({className:"blurFg-BbZZn1",display:"flex",flex:"grow"})},68733:function(e,t,i){i.d(t,{Fm:()=>o,N1:()=>r,uk:()=>a,zN:()=>l});var n=i(30396);function r(e){let{fileType:t}=e;return t.startsWith("image/")}function l(e){let{fileType:t}=e;return t.startsWith("video/")}function o(e){let{onAddFiles:t,acceptFile:i}=e,r=(0,n.sO)(),l=(0,n.sO)(),[o,a]=(0,n.eJ)(!1),s=e=>Array.from(e.items).filter(e=>"file"===e.kind&&i({fileType:e.type})),d=e=>s(e).length>0,c=e=>{let{current:t}=l;t&&t===e.target&&(l.current=void 0,a(!1))};return{isDragging:o,props:{onDragEnter:e=>{let{current:t}=r,{target:i}=e;t&&i&&i instanceof HTMLElement&&(t===i||t.contains(i))&&e.dataTransfer&&(d(e.dataTransfer)||0===e.dataTransfer.items.length)&&(e.preventDefault(),l.current=i,a(!0))},onDragOver:e=>{l.current&&e.preventDefault()},onDragLeave:c,onDragEnd:c,onDrop:e=>{e instanceof DragEvent&&!e.defaultPrevented&&e.dataTransfer&&d(e.dataTransfer)&&0!==s(e.dataTransfer).length&&(e.preventDefault(),t(Array.from(e.dataTransfer.files)),a(!1),l.current=void 0)},ref:r}}}function a(e){let t=o(e),i=(0,n.sO)(!1);return(0,n.d4)(()=>{let{props:{onDragEnter:e,onDragOver:n,onDragLeave:r,onDragEnd:l,onDrop:o}}=t,a=document.body;t.props.ref.current=a;let s={dragenter:t=>{i.current||(i.current=!0,e(t))},dragover:n,dragleave:e=>{i.current&&(e.clientX<=0||e.clientX>=window.innerWidth||e.clientY<=0||e.clientY>=window.innerHeight)&&(i.current=!1,r(e))},dragend:e=>{i.current&&(i.current=!1,l(e))},drop:e=>{i.current&&(i.current=!1,o(e))}};for(let[e,t]of Object.entries(s))a.addEventListener(e,t);return()=>{for(let[e,t]of Object.entries(s))a.removeEventListener(e,t)}},[]),t}},76317:function(e,t,i){i.d(t,{d:()=>s,w:()=>d});var n=i(30396),r=i(68833),l=i(48980),o=i(98914),a=i(92039);let s=e=>{var t,i;let{liveStream:l,onGuestJoined:o,updateLiveStream:s}=e,d=(0,a.rG)(),[c,u]=(0,n.eJ)(!l||"idle"===l.liveStream.status||"cancelled"===l.liveStream.status),[p,h]=(0,n.eJ)(null!==(t=null==l?void 0:l.liveStreamGuests)&&void 0!==t?t:[]),[m,v]=(0,n.eJ)(null!==(i=null==l?void 0:l.liveStreamInformation.currentViewerCount)&&void 0!==i?i:0),f=(null==l?void 0:l.liveStream.status)==="scheduled";return(0,n.d4)(()=>{l&&(u("idle"===l.liveStream.status||"cancelled"===l.liveStream.status),h(l.liveStreamGuests),v(l.liveStreamInformation.currentViewerCount),o&&l.liveStreamGuests.forEach(e=>{o({message:{type:"live-stream:guest-joined",invited_user:e.user,invited_user_primary_publication:e.pub||void 0}})}))},[l]),(0,n.d4)(()=>{if(l)return null==d?void 0:d.listen({["live-stream:".concat(l.liveStream.id)]:e=>{var t,i,n,r,a;let{data:d}=e;if((null==d?void 0:null===(t=d.message)||void 0===t?void 0:t.type)==="live-stream:viewer-count-updated"&&v(d.message.current_viewer_count),(null==d?void 0:null===(i=d.message)||void 0===i?void 0:i.type)==="live-stream:ended"&&u(!0),(null==d?void 0:null===(n=d.message)||void 0===n?void 0:n.type)==="live-stream:started"&&(null==s||s(l.liveStream.id)),(null==d?void 0:null===(r=d.message)||void 0===r?void 0:r.type)==="live-stream:guest-joined"){let e=d.message;h(t=>[...t,{user:e.invited_user,pub:e.invited_user_primary_publication}]),o&&o({message:e})}if((null==d?void 0:null===(a=d.message)||void 0===a?void 0:a.type)==="live-stream:guest-left"){let e=d.message;h(t=>t.filter(t=>t.user.id!==e.invited_user.id))}}})},[null==l?void 0:l.liveStream.status,null==l?void 0:l.liveStream.id,o,d]),(0,n.d4)(()=>{l&&(0,r.j)(r.FP.LIVE_STREAM_JOINED,{live_stream_id:l.liveStream.id})},[null==l?void 0:l.liveStream.id]),(0,n.d4)(()=>{if(!l)return;let e=()=>{(0,r.j)(r.FP.LIVE_STREAM_LEFT,{live_stream_id:l.liveStream.id})};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[l,null==l?void 0:l.liveStream.id]),{guests:p,hasEnded:c,isScheduled:f,viewerCount:m}},d=e=>{let{inputRef:t,liveStream:i}=e,[r,a]=(0,n.eJ)(""),[s,d]=(0,n.eJ)(!1),c=async()=>{if(!s&&r){d(!0);try{await (0,l.rd)("/api/v1/live_stream/".concat(i.liveStream.id,"/message"),{method:"POST",json:{message_body:r.trim(),message_id:(0,o.EH)()}})}catch(e){alert((0,o.zx)(e))}a(""),d(!1),setTimeout(()=>{var e;null===(e=t.current)||void 0===e||e.focus()},0)}};return{message:r,setMessage:a,loading:s,sendMessage:c}}},12765:function(e,t,i){i.d(t,{L:()=>r});var n=i(30396);function r(e,t,i){let[r,l]=(0,n._Y)(e,t,i),o=(0,n.sO)(r);o.current=r;let a=(0,n.Ye)(()=>async e=>{if("function"==typeof e)return await e(a,()=>o.current);l(e)},[]);return[r,a]}},91246:function(e,t,i){i.d(t,{V:()=>v,u:()=>b});var n=i(7409),r=i(99282),l=i(16584),o=i(78493),a=i(28518),s=i(93920),d=i(55585),c=i(98661),u=i(19081),p=i(44424),h=i(42450);let m={padding:0,elementContext:"floating",altBoundary:!1,rootBoundary:"viewport"};function v(e){let{trigger:t,children:i,onOpen:n,onClose:r,disabled:o,stopPropagation:a,placement:s="bottom",matchReferenceWidth:c=!1}=e;return(0,l.tZ)(d.v,{children:e=>{let{open:d}=e;return(0,l.tZ)(f,{trigger:t,children:i,open:d,onOpen:n,onClose:r,disabled:o,stopPropagation:a,placement:s,matchReferenceWidth:c})}})}function f(e){let{trigger:t,children:i,open:v,disabled:f,onOpen:b,onClose:g,stopPropagation:Z,placement:y,matchReferenceWidth:_}=e,C=[(0,o.cv)(4),(0,o.RR)()];_&&C.push((0,o.dp)((0,r._)((0,n._)({},m),{apply(e){let{rects:t,elements:i}=e;Object.assign(i.floating.style,{minWidth:"".concat(t.reference.width,"px")})}})));let{refs:w,floatingStyles:S,context:k}=(0,a.YF)({placement:y,strategy:"fixed",open:v,whileElementsMounted:s.Me,middleware:C}),{getReferenceProps:x,getFloatingProps:B}=(0,a.NI)([(0,a.bQ)(k,{ancestorScroll:!0})]),{isMounted:I,styles:N}=(0,a.Y_)(k,{duration:250,initial:e=>{let{side:t}=e;return{opacity:0,transform:"translate".concat("bottom"===t||"top"===t?"Y":"X","(calc(").concat("bottom"===t||"right"===t?-1:1," * ").concat("var(--size-8)","))")}},open:{opacity:1,transform:"translate(0, 0)"},common:{transition:"var(--animate-hover)"}});return(0,c.useEffect)(()=>{v?null==b||b():null==g||g()},[v]),(0,l.BX)(u.sg,{onClick:e=>{Z&&e.stopPropagation()},children:[(0,l.tZ)(d.v.Button,(0,r._)((0,n._)({as:c.Fragment,ref:w.setReference},x()),{disabled:f,children:t})),(0,l.tZ)(a.ll,{children:I&&(0,l.tZ)(d.v.Items,(0,r._)((0,n._)({className:h.Z.floatingContainer,ref:w.setFloating,style:S,static:!0},B()),{children:(0,l.tZ)(p.ep,{style:N,children:i})}))})]})}function b(e){return(0,l.tZ)(d.v.Item,{children:(0,l.tZ)(p.sN,(0,n._)({},e))})}},96302:function(e,t,i){i.d(t,{ZP:()=>b,rs:()=>m});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(59278),s=i(94184),d=i.n(s);i(98661);var c=i(95441),u=i(71068);i(58175);var p=i(28657);let h=e=>{var{children:t,size:i}=e,s=(0,l._)(e,["children","size"]);let{iString:d}=(0,c.M1)();return(0,o.tZ)(a.r,(0,r._)((0,n._)({"aria-label":d("Toggle setting")},s),{onClick:e=>{e.stopPropagation()},children:t}))},m=e=>{var{checked:t,disabled:i,size:a="md",theme:s="accent",leading:c,trailing:u}=e,m=(0,l._)(e,["checked","disabled","size","theme","leading","trailing"]);return(0,o.BX)(f,{children:[c&&c,(0,o.tZ)(h,(0,r._)((0,n._)({checked:t,disabled:i,className:d()(p.Z.track,i?p.Z.disabled:p.Z.enabled,t?p.Z.checked:p.Z.unchecked,p.Z[a],p.Z["theme_".concat(s)])},m),{children:(0,o.tZ)(v,{className:d()(p.Z.nub,i?p.Z.disabled:p.Z.enabled,t?p.Z.checked:p.Z.unchecked,p.Z[a])})})),u&&u]})},v=e=>{let{className:t}=e;return(0,o.tZ)(u.xu,{"aria-hidden":"true",className:t})},f=(0,u.zo)({display:"flex",justifyContent:"center",alignItems:"center",gap:8}),b=m},95901:function(e,t,i){i.d(t,{P:()=>s});var n=i(7409),r=i(99282),l=i(16584),o=i(71375),a=i(15771);function s(e){return(0,l.tZ)(a.GI,(0,r._)((0,n._)({rounded:!0},e),{children:(0,l.tZ)(o.Z,{size:20})}))}},85566:function(e,t,i){i.d(t,{F:()=>o});var n=i(16584),r=i(80026),l=i(6490);function o(e){let{title:t,subtitle:i,children:o,onClose:a}=e;return(0,n.BX)(n.HY,{children:[(0,n.tZ)(l.xB,{title:t,description:i,showClose:!0,onClose:a}),(0,n.tZ)(l.fe,{children:(0,n.tZ)(r.sg,{gap:12,children:o})})]})}},40559:function(e,t,i){i.d(t,{N:()=>p});var n=i(16584),r=i(60807),l=i(69821),o=i(94874),a=i(15771),s=i(19081),d=i(6490),c=i(58175),u=i(63651);let p=e=>{let{isOpen:t,utmSource:i,onClose:p,setShared:h}=e,{user:m}=(0,r.SE)();if(!m)return(0,n.tZ)(n.HY,{});let v=(0,u.NNq)(m,{utm_source:i}),f="/img/profile_cards/card-bg-".concat(Math.ceil((null==m?void 0:m.id)?m.id%9+1:8*Math.random()),".png");return(0,n.BX)(d.u_,{isOpen:t,onClose:p,width:480,overflow:"hidden",children:[(0,n.tZ)(d.xB,{showClose:!0,onClose:p}),(0,n.BX)(s.tu,{paddingX:32,paddingTop:16,paddingBottom:24,gap:20,children:[(0,n.BX)(s.tu,{alignItems:"center",gap:8,children:[(0,n.tZ)(c.xv.H2,{weight:"semibold",children:"Invite your friends"}),(0,n.tZ)(c.xv.B3,{align:"center",color:"secondary",children:"Share your profile to help your friends and followers find you on Substack."})]}),(0,n.BX)(s.tu,{justifyContent:"center",alignItems:"center",border:"detail",radius:"md",shadow:"lg",className:"card-qnekae",children:[(0,n.tZ)(s.tu,{flex:"grow",className:"cardTop-yLKLMp",children:(0,n.tZ)("img",{className:"cardOverlay-BwDmPh",src:(0,u.zF4)(f,800)})}),(0,n.BX)(s.tu,{flex:"grow",alignSelf:"stretch",className:"cardBottom-eN66Vc",gap:16,paddingX:20,paddingBottom:20,paddingTop:0,children:[(0,n.BX)(s.hs,{justifyContent:"space-between",alignItems:"end",children:[(0,n.tZ)(o.qE,{user:m,size:112,className:"cardAvatar-lmAiQ1"}),(0,n.tZ)(a.zx,{priority:"secondary",rounded:!0,className:"fakeButton-UNdCaV",children:"Subscribe"})]}),(0,n.BX)(s.tu,{flex:"grow",gap:8,children:[(0,n.tZ)(c.xv.H2,{children:m.name}),(0,n.tZ)(c.xv.Meta,{className:"cardUrl-Ccl_69",size:12,color:"substack",children:v.replace(/^(http|https):\/\//,"").replace(/\?.*$/,"")}),m.bio&&(0,n.tZ)(c.xv.B4,{color:"secondary",children:m.bio})]})]})]}),(0,n.tZ)(c.xv.Meta,{align:"center",children:"Share via"}),(0,n.tZ)(l.sZ,{shareUrl:v,shareEventType:"profile",shareText:"Subscribe to me on Substack",itemKey:m.id,onShare:()=>{h&&h()}})]})]})}},50167:function(e,t,i){i.d(t,{QC:()=>g,_T:()=>b,hC:()=>Z});var n=i(7409),r=i(99282),l=i(16584),o=i(30396),a=i(56687),s=i(68843),d=i(95441),c=i(7882),u=i(98914),p=i(15771),h=i(91246),m=i(70379),v=i(60308);function f(e,t,i){let{popToast:a}=(0,m.pm)(),[s,d]=(0,o.eJ)(!1),[p,h]=(0,o.eJ)(void 0),{refetch:f,isLoading:b}=(0,c.ib)({pathname:"/api/v1/@".concat(null==e?void 0:e.handle,"/personal-initialize"),method:"post"}),g=!t&&e.isPersonalEligible,Z=(null==e?void 0:e.isPersonalEligible)||g?async()=>{let e=await f({query:{action:"post"}});e instanceof Error?(console.error(e),a(e=>(0,l.tZ)(m.FN,(0,r._)((0,n._)({},e),{text:"Something went wrong. Please try again."})))):(d(!0),"undefined"!=typeof window&&(window.location.href=e.redirectUrl))}:async()=>(0,u.uX)((0,v.DeU)(),{local_navigation:!1});return(0,o.d4)(()=>{"undefined"!=typeof window&&(null==t?void 0:t.publication)&&!g&&h((0,v.n1t)("".concat((0,v.SVA)({subdomain:t.publication.subdomain}),"/publish/post"),{back:window.location.href,type:null==i?void 0:i.type}))},[t,g]),{onClick:Z,href:p,isLoading:b,willRedirect:s}}function b(e){let{profile:t,publicationUser:i}=e,{iString:n}=(0,d.M1)(),{onClick:r,href:o,isLoading:s,willRedirect:c}=f(t,i);return(0,l.tZ)(h.u,{leading:(0,l.tZ)(a.Z,{}),disabled:s||c,onClick:r,href:o,children:n("Post")})}function g(e){let{profile:t,publicationUser:i}=e,{iString:n}=(0,d.M1)(),{onClick:r,href:o,isLoading:a,willRedirect:s}=f(t,i);return(0,l.tZ)(p.zx,{priority:"primary",href:o,onClick:r,disabled:a||s,localNavigation:!1,children:n("New post")})}function Z(e){let{profile:t,publicationUser:i}=e,{iString:n}=(0,d.M1)(),{onClick:r,href:o,isLoading:a,willRedirect:c}=f(t,i,{type:"podcast"});return(0,l.tZ)(h.u,{leading:(0,l.tZ)(s.Z,{}),disabled:a||c,onClick:r,href:o,children:n("Video")})}},33417:function(e,t,i){i.d(t,{S:()=>w});var n=i(16584),r=i(30396),l=i(23260),o=i(95441),a=i(99259),s=i(85095),d=i(6910),c=i(9682),u=i(63018),p=i(71068),h=i(19081),m=i(69891),v=i(3021),f=i(88817),b=i(65575),g=i(12461),Z=i(70293),y=i(91400),_=i(36186),C=i(84864);function w(e){let{id:t,subpath:i}=e,{subjectProfile:r}=(0,s.Un)({subjectId:t.startsWith("@")?t.replace("@",""):t});return r?(0,n.tZ)(S,{profile:r,subpath:i}):null}function S(e){var t;let{profile:i,subpath:l}=e,{iString:s}=(0,o.M1)(),d=i.name;(0,f.qr)(d||"",{backAction:(0,_.NN)(i),alwaysPinTitle:!0});let[u,p]=(0,c.tv)(),v=(0,y.XA)(),b=null===(t=l.match(/\/([^/]+)$/))||void 0===t?void 0:t[1],g=(0,r.sO)(null),Z=!i.primaryPublication,C=(0,a.M$)().isOnDestination,w=e=>{let t=history.state;p(C?(0,_.Fh)(i,e,{noBase:!0}):"/profile/".concat(e),!0),history.replaceState(t,"")};(0,r.d4)(()=>{Z&&"subscribers"===b&&w("followers")},[Z,b]);let S=[...Z?[]:[{value:"subscribers",label:"Subscribers"}],{value:"followers",label:"Followers"},{value:"following",label:"Following"}];return(0,n.BX)(h.tu,{flex:"grow",style:{maxWidth:568},minWidth:0,paddingX:20*!v,paddingTop:20,gap:20,children:[(0,n.tZ)(m.n,{value:b,tabs:S,onChange:w,style:{minHeight:48},ariaLabel:s("Select filter")}),(0,n.tZ)(h.tu,{gap:4,ref:g,paddingBottom:20,children:"subscribers"===b?(0,n.tZ)(k,{profile:i,bodyRef:g}):"followers"===b?(0,n.tZ)(x,{profile:i,bodyRef:g}):(0,n.tZ)(B,{profile:i,bodyRef:g})})]})}function k(e){let{profile:t,bodyRef:i}=e,{id:r}=t,{data:o,users:a,isLoading:s,error:d}=N(r,"subscribers",i);return(0,n.tZ)(n.HY,{children:d?"Error":s?Array(10).fill(null).map(()=>(0,n.tZ)(v._v,{})):o?0===a.length?(0,n.tZ)(I,{children:(0,n.tZ)(b._Y,{icon:(0,n.tZ)(l.Z,{}),title:"No subscribers yet"})}):a.map(e=>(0,n.tZ)(g.$,{person:e,surface:"profile_Subscribers"},e.id)):null})}function x(e){let{profile:t,bodyRef:i}=e,r=(0,C.guessFirstName)(t.name),{data:l,users:o,isLoading:a,error:s}=N(t.id,"followers",i);return(0,n.tZ)(n.HY,{children:s?"Error":a?Array(10).fill(null).map(()=>(0,n.tZ)(v._v,{})):l?o.length?o.map(e=>(0,n.tZ)(g.$,{person:e,surface:"profile_Followers"},e.id)):(0,n.tZ)(I,{children:(0,n.tZ)(b._Y,{icon:(0,n.tZ)(d.m,{}),title:"No followers yet",text:"Be the first to follow ".concat(r)})}):null})}function B(e){let{profile:t,bodyRef:i}=e,r=(0,C.guessFirstName)(t.name),{data:l,users:o,isLoading:a,error:s}=N(t.id,"following",i);return(0,n.tZ)(n.HY,{children:s?"Error":a?Array(10).fill(null).map(()=>(0,n.tZ)(v._v,{})):l?o.length?o.map(e=>(0,n.tZ)(g.$,{person:e,surface:"profile_Following"},e.id)):(0,n.tZ)(I,{children:(0,n.tZ)(b._Y,{icon:(0,n.tZ)(d.m,{}),title:"".concat(r," isn't following anyone yet")})}):null})}let I=(0,p.E7)({display:"flex",paddingY:48,justifyContent:"center",alignItems:"center",flex:"grow"});function N(e,t,i){var n;let[l,o]=(0,r.eJ)(20),{data:a,isLoading:s,error:d}=(0,u._I)("/api/v1/user/".concat(e,"/subscriber-lists"),{query:{lists:t},deps:[e,t]},{revalidateOnMount:!0}),c=null!==(n=null==a?void 0:a.subscriberLists.flatMap(e=>e.groups.flatMap(e=>e.users)))&&void 0!==n?n:[],p=c.length>l;return(0,Z.M)(()=>o(l+20),[l,p],{shouldCheck:p,threshold:640,bodyRef:i}),{data:a,isLoading:s,error:d,users:c.slice(0,l)}}},43681:function(e,t,i){i.d(t,{LM:()=>S,Wh:()=>B,gY:()=>x,kB:()=>I,oy:()=>k,wg:()=>X});var n=i(16584),r=i(39693),l=i.n(r),o=i(99869),a=i(77600),s=i(28596),d=i(51455),c=i(59154),u=i(79138),p=i(4473),h=i(39535),m=i(95441),v=i(93155),f=i(15771),b=i(61254),g=i(44424),Z=i(97434),y=i(40949),_=i(75419),C=i(60308),w=i(63651);let S=e=>{let{variant:t,url:i,onLinkClicked:r}=e,{iString:l}=(0,m.M1)(),o=()=>{window.open((0,w.n1t)("https://www.facebook.com/sharer/sharer.php",{u:i}),"_blank"),null==r||r("facebook")};return"icon"===t?(0,n.tZ)(f.hU,{priority:"secondary-outline",onClick:o,children:(0,n.tZ)(u.Z,{size:20})}):(0,n.tZ)(g.sN,{leading:(0,n.tZ)(u.Z,{}),onClick:o,children:l("Share to Facebook")})},k=e=>{let{variant:t,url:i,twitterText:r,onLinkClicked:l}=e,{iString:o}=(0,m.M1)(),a=()=>{window.open((0,C.LaP)({url:i,text:r||""}),"_blank"),null==l||l("twitter")};return"icon"===t?(0,n.tZ)(f.hU,{priority:"secondary-outline",onClick:a,children:(0,n.tZ)(h.Z,{size:20})}):(0,n.tZ)(g.sN,{leading:(0,n.tZ)(h.Z,{}),onClick:a,children:o("Share to X")})},x=e=>{let{variant:t,url:i,twitterText:r,onLinkClicked:l}=e,{iString:o}=(0,m.M1)(),a=()=>{window.open((0,C.xJ2)({text:r?"".concat(r,"\n").concat(i):null!=i?i:""}),"_blank"),null==l||l("bluesky")};return"icon"===t?(0,n.tZ)(f.hU,{priority:"secondary-outline",onClick:a,children:(0,n.tZ)(c.Z,{size:20})}):(0,n.tZ)(g.sN,{leading:(0,n.tZ)(c.Z,{}),onClick:a,children:o("Share to Bluesky")})},B=e=>{let{variant:t,url:i,onLinkClicked:r}=e,{iString:l}=(0,m.M1)(),a=(0,y.y)(),s=()=>{i&&(a(i),null==r||r("copy"))};return"icon"===t?(0,n.tZ)(f.hU,{priority:"secondary-outline",onClick:s,children:(0,n.tZ)(o.Z,{height:20})}):(0,n.tZ)(g.sN,{leading:(0,n.tZ)(o.Z,{}),onClick:s,children:l("Copy link")})},I=e=>{let{variant:t,url:i,onLinkClicked:r}=e,{iString:l}=(0,m.M1)(),o=(0,_.i3)(),a=()=>{o.open({restackUrl:i||""}),null==r||r("notes")};return"icon"===t?(0,n.tZ)(f.hU,{priority:"secondary-outline",onClick:a,children:(0,n.tZ)(p.Z,{size:20})}):(0,n.tZ)(g.sN,{leading:(0,n.tZ)(p.Z,{}),onClick:a,children:l("Share to Notes")})},N=e=>{let{onLinkClicked:t,comment:i}=e,{iString:r}=(0,m.M1)(),{openModal:l,closeModal:o}=(0,v.dd)();return i?(0,n.tZ)(g.sN,{leading:(0,n.tZ)(a.Z,{}),onClick:()=>{null==t||t("embed"),l({children:(0,n.tZ)(d.I,{comment:i||void 0,onClose:o}),width:540})},children:r("Embed note")}):null},X=e=>{let{url:t,onLinkClicked:i}=e,r=S(e),o=x(e),a=k(e),s=B(e),d=I(e),c=N(e);return l()([s,(0,n.tZ)(P,{url:t,onShare:()=>{null==i||i("chat")}}),c,(0,n.tZ)(b.iz,{paddingX:8}),d,r,o,a])};function P(e){let{url:t,onShare:i}=e,{iString:r}=(0,m.M1)(),l=(0,Z.B)();return(0,n.tZ)(g.sN,{leading:(0,n.tZ)(s.Z,{}),onClick:()=>{l.open({linkAttachmentUrl:t,source:"share_post"}),null==i||i()},children:r("Send as message")})}},26960:function(e,t,i){i.d(t,{L:()=>l});var n=i(16584),r=i(58175);let l=(e,t,i)=>{if(!e)return"";if(!t)return e;t.sort((e,t)=>t.length-e.length);let l=RegExp(o(t.join("|")),"ig"),a=e.split(l),s=[...e.matchAll(l)];return a.map((e,t)=>(0,n.BX)(n.HY,{children:[e,t!==a.length-1&&(0,n.BX)(r.xv,{as:"span",weight:i||"bold",fontStyle:"italic",children:[s[t]," "]})]}))},o=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},40949:function(e,t,i){i.d(t,{y:()=>d});var n=i(7409),r=i(99282),l=i(16584),o=i(99869),a=i(98914),s=i(70379);function d(){let e=(0,s.pm)();return t=>{(0,a.vQ)(t),e.popToast(e=>(0,l.tZ)(s.FN,(0,r._)((0,n._)({},e),{text:"Copied link to clipboard",Icon:o.Z})))}}},21972:function(e,t,i){i.d(t,{B:()=>o,I:()=>a});var n=i(94442),r=i(98914),l=i(27744);function o(e){let{tabId:t,restacking_user_id:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,l.I0)(),a=(0,n.sV)();return async(e,n,l)=>{o({type:"post_like",payload:{postId:e,isLiked:n}});try{return await a(e,n,{tabId:t,restacking_user_id:i,media_clip_id:l}),!0}catch(t){return o({type:"post_like",payload:{postId:e,isLiked:!n}}),alert((0,r.zx)(t)),!1}}}function a(e){var t;return null!==(t=e.reactions["❤"])&&void 0!==t?t:0}},49572:function(e,t,i){i.d(t,{A:()=>j});var n=i(7409),r=i(16584),l=i(98661),o=i(30396),a=i(99282),s=i(98848),d=i(64515);let c=e=>{var{strokeWidth:t=1.5}=e,i=(0,s._)(e,["strokeWidth"]);return(0,r.BX)(d.l,(0,a._)((0,n._)({},i),{strokeWidth:t,name:"SendIcon",svgParams:{height:20,width:20,viewBox:"0 0 20 20"},children:[(0,r.tZ)("path",{d:"M18.3332 1.66699L12.4998 18.3337L9.1665 10.8337L1.6665 7.50033L18.3332 1.66699Z",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.tZ)("path",{d:"M18.3332 1.66699L9.1665 10.8337",strokeLinecap:"round","stroke-linejoin":"round"})]}))};var u=i(95441),p=i(60807),h=i(76317),m=i(80026),v=i(51776),f=i(22347),b=i(61594),g=i(63651),Z=i(47929);let y=e=>{let{activeLiveStream:t}=e,i=(0,g.bHR)({liveStreamId:t.liveStream.id,utm_source:Z.b3.liveStreamShareButton}),n=t.liveStream.title;return(0,r.tZ)(b.u,{shareName:n,shareUrl:i,trackParams:{live_stream_id:t.liveStream.id},utmCampaign:Z.VX.liveStreamPermalink})};var _=i(58865),C=i(67358),w=i(42493),S=i(35702),k=i(48980),x=i(98914),B=i(1844),I=i(6490),N=i(65523),X=i(58175),P=i(57641),L=i(60308);function z(){let e=(0,_._)(["We've sent an email to ",". Click the magic link inside to continue."]);return z=function(){return e},e}let T=e=>{let{liveStream:t,isOpen:i,setIsOpen:n,subscriptions:l,setSubscriptions:a}=e,[s,d]=(0,o.eJ)(""),[c,u]=(0,o.eJ)(!1),[h,m]=(0,o.eJ)(!1),{user:v,setUser:f}=(0,p.SE)(),[b,g]=(0,o.eJ)(!1),Z=(0,o.I4)(async()=>{g(!0);try{let e=await (0,k.rd)("/api/v1/reader/signup/just_email",{method:"POST",json:{email:s}});if(e.userExists){m(!0);return}if(e.emailConfirmationRequired){u(!0);return}v||((0,S.a)({user:e.user}),f(e.user))}catch(e){alert((0,x.zx)(e))}finally{g(!1)}},[s,v,S.a,f]);return(0,r.tZ)(I.u_,{isOpen:i,onClose:()=>n(!1),children:c?(0,r.tZ)(E,{email:s,setEmailConfirmationRequired:u}):v?(0,r.tZ)(O,{user:v,liveStream:t,subscriptions:l,setEntryState:S.a,setUser:f,setSubscriptions:a,setIsOpen:n}):(0,r.tZ)(M,{email:s,setEmail:d,onSubmit:Z,isLoading:b,userExistsButIsNotLoggedIn:h,setIsOpen:n})})},M=e=>{let{email:t,setEmail:i,onSubmit:n,isLoading:l,userExistsButIsNotLoggedIn:o,setIsOpen:a}=e,{iString:s}=(0,u.M1)();return(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.xB,{title:s("Sign up to join the chat"),description:(0,r.BX)(r.HY,{children:[s("Already have an account? "),(0,r.tZ)(m.hh,{color:"substack",decoration:"hover-underline",href:(0,L.uXE)({redirect:document.location.href}),cursor:"pointer",children:s("Log in")})]}),showClose:!0,onClose:()=>a(!1),icon:(0,r.tZ)(N.ZN,{}),alignItems:"center"}),(0,r.tZ)(I.fe,{children:(0,r.BX)(m.sg,{gap:16,children:[(0,r.tZ)(v.oi,{flex:"grow",placeholder:s("Your email"),value:t,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n()}}),o&&(0,r.BX)(B.y,{align:"center",children:[s("This email is already registered with Substack. "),(0,r.tZ)(m.hh,{decoration:"underline",href:(0,L.uXE)({redirect:document.location.href}),children:s("Sign in")})]}),(0,r.tZ)(P.O,{includeCheckbox:!1,addSignupPreamble:!0,color:"secondary",textAlign:"center"})]})}),(0,r.tZ)(I.mz,{direction:"column",primaryButton:(0,r.tZ)(m.zx,{priority:"primary",type:"submit",loading:l,onClick:()=>{n()},children:s("Sign up")})})]})},E=e=>{let{email:t,setEmailConfirmationRequired:i}=e,{iString:n,iTemplate:l}=(0,u.M1)();return(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.xB,{title:n("Check your email to continue"),showClose:!1,icon:(0,r.tZ)(N.AM,{icon:(0,r.tZ)(C.Z,{size:20})}),alignItems:"center",description:l(z(),null!=t?t:"your email address")}),(0,r.tZ)(I.ex,{}),(0,r.tZ)(m.sg,{padding:16,borderTop:"detail",children:(0,r.tZ)(X.xv.B4,{as:"span",color:"secondary",align:"center",children:(0,r.BX)(r.HY,{children:[n("Didn't get the email? "),(0,r.tZ)(m.hh,{color:"substack",decoration:"hover-underline",onClick:e=>{e.preventDefault(),i(!1)},cursor:"pointer",children:n("Try again")})]})})})]})},O=e=>{let{user:t,liveStream:i,subscriptions:l,setEntryState:o,setUser:s,setSubscriptions:d,setIsOpen:c}=e;return(0,r.tZ)(m.xu,{padding:20,children:(0,r.tZ)(w._0,{className:"profileUpdater-bXuV5M",user:t,pub:i.pub,noSubscribeCta:Object.values(l).some(e=>{var t;return["free_signup","subscribed"].includes(null!==(t=null==e?void 0:e.membership_state)&&void 0!==t?t:"unsubscribed")}),onSuccess:e=>{let t=null==e?void 0:e.body;t&&(o({user:t}),s(t)),t.userDidSignUp&&d(e=>{var t,r,l,o;return(0,a._)((0,n._)({},e),{[null!==(l=null===(t=i.pub)||void 0===t?void 0:t.id)&&void 0!==l?l:0]:(0,a._)((0,n._)({},e[null!==(o=null===(r=i.pub)||void 0===r?void 0:r.id)&&void 0!==o?o:0]),{membership_state:"free_signup"})})}),c(!1)},complete:!0})})},j=e=>{let{liveStream:t,subscriptions:i,setSubscriptions:l}=e,a=(0,o.sO)(null),{message:s,setMessage:d,loading:c,sendMessage:u}=(0,h.w)({inputRef:a,liveStream:t}),[v,b]=(0,o.eJ)(!1),g=(0,p.aF)(),_=!s&&!c,C=!g,w=!(null==g?void 0:g.name),S=Object.values(i).some(e=>(null==e?void 0:e.membership_state)==="subscribed"),k=t.liveStreamInformation.chatAuthInfo.canSendChat,x=t.liveStreamInformation.chatAuthInfo.acceptableSendChatLevel,B=!k&&!("all_subscribers"===x&&S),I=(0,L.Zs0)(t.pub,(0,n._)({utm_source:Z.b3.liveStreamChat,next:document.location.href,utm_medium:Z.lP.web},"founding_subscribers"===x&&{plan:"founding"}));return(0,r.BX)(m.X2,{padding:16,borderTop:"detail",children:[(0,r.tZ)(T,{liveStream:t,isOpen:v,setIsOpen:b,subscriptions:i,setSubscriptions:l}),C?(0,r.tZ)(H,{onClick:()=>{b(!0)}}):B?(0,r.tZ)(R,{checkoutUrl:I,chatLevel:x}):w?(0,r.tZ)(U,{onClick:()=>{b(!0)}}):(0,r.tZ)(F,{ref:a,message:s,setMessage:d,loading:c,onSend:u}),_?(0,r.BX)(r.HY,{children:[(0,r.tZ)(f.d,{liveStream:t}),(0,r.tZ)(y,{activeLiveStream:t})]}):(0,r.tZ)(A,{loading:c,disabled:!s,onClick:u})]})},F=(0,l.forwardRef)((e,t)=>{let{message:i,setMessage:n,loading:l,onSend:o}=e,{iString:a}=(0,u.M1)();return(0,r.tZ)(v.oi,{ref:t,flex:"grow",placeholder:a("Write message..."),maxLength:256,value:i,disabled:l,onKeyDown:e=>{"Enter"===e.key&&o()},onChange:e=>{e.currentTarget.value.length<=256&&n(e.currentTarget.value)}})}),A=e=>{let{loading:t,disabled:i,onClick:n}=e;return(0,r.tZ)(m.hU,{priority:"tertiary",disabled:t||i,onClick:n,children:(0,r.tZ)(c,{width:20,height:20})})},H=e=>{let{onClick:t}=e,{iString:i}=(0,u.M1)();return(0,r.tZ)(m.zx,{flex:"grow",onClick:t,children:i("Sign up to join chat")})},U=e=>{let{onClick:t}=e,{iString:i}=(0,u.M1)();return(0,r.tZ)(m.zx,{flex:"grow",onClick:t,children:i("Set up profile to join the chat")})},R=e=>{let{checkoutUrl:t,chatLevel:i}=e,{iString:n}=(0,u.M1)();return(0,r.tZ)(m.zx,{flex:"grow",href:t,children:n("all_subscribers"===i?"Subscribe to join chat":"Upgrade to join chat")})}},78513:function(e,t,i){i.d(t,{M:()=>_,G:()=>x});var n=i(7409),r=i(99282),l=i(16584),o=i(30396),a=i(95441),s=i(60807),d=i(48980),c=i(94874),u=i(15771),p=i(80026),h=i(44424),m=i(91246),v=i(15562),f=i(70379),b=i(87989),g=i(60308),Z=i(47929);let y=e=>e&&"object"==typeof e&&"body"in e&&e.body&&"object"==typeof e.body&&"error"in e.body&&"string"==typeof e.body.error?e.body.error:null,_=e=>{let{message:t,showBlockButton:i}=e;return(0,l.BX)(C,{children:[(0,l.tZ)(S,{user:t.user}),(0,l.BX)(p.sg,{gap:4,flex:"grow",children:[(0,l.tZ)(p.xv.B3,{as:"span",children:(0,l.tZ)(w,{user:t.user,showBlockButton:i})}),(0,l.tZ)(k,{children:t.body})]})]},t.id)},C=e=>{let{children:t,key:i}=e;return(0,l.tZ)(p.X2,{gap:12,className:"message-lU6Uj5",children:t},i)},w=e=>{let{user:t,showBlockButton:i}=e,{iString:c}=(0,a.M1)(),_=(0,s.aF)(),[C,w]=(0,o.eJ)(!1),{popToast:S}=(0,f.pm)(),k=async()=>{try{await (0,d.rd)("/api/v1/blocks/".concat(t.id),{method:"POST",json:{type:"block",surface:"live_stream_chat"}}),S(e=>(0,l.tZ)(f.FN,(0,r._)((0,n._)({},e),{text:c("User blocked")})))}catch(e){console.error("Error blocking user:",JSON.stringify(e)),S(t=>(0,l.tZ)(f.FN,(0,r._)((0,n._)({},t),{text:y(e)||c("Error blocking user")})))}w(!1)};return i&&_?(0,l.BX)(l.HY,{children:[(0,l.BX)(p.xv.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:[(0,l.BX)(m.V,{trigger:(0,l.tZ)("span",{style:{cursor:"pointer",textDecoration:"underline"},children:I18N.p(t.name)}),placement:"bottom-start",children:[(0,l.tZ)(h.sN,{onClick:()=>{window.open((0,g.NNq)(t,{utm_source:Z.b3.liveStreamChat}),"_blank")},children:c("Visit profile")}),(0,l.tZ)(h.sN,{onClick:()=>{w(!0)},children:c("Block user")})]})," ",t.bestseller_tier?(0,l.tZ)(b.UserBadge,{tier:t.bestseller_tier,size:"xs",inline:!0}):null]}),(0,l.tZ)(v.W,{isOpen:C,onClose:()=>w(!1),title:c("Block %1?",t.name),description:c("You will no longer see messages from this user in the live chat. This action cannot be undone in the livestream UI."),primaryButton:(0,l.tZ)(u.zx,{priority:"destructive",onClick:k,children:c("Block user")}),secondaryButton:(0,l.tZ)(u.zx,{priority:"secondary",onClick:()=>w(!1),children:c("Cancel")})})]}):(0,l.BX)(p.xv.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:[(0,l.tZ)(p.hh,{href:(0,g.NNq)(t,{utm_source:Z.b3.liveStreamChat}),target:"_blank",children:I18N.p(t.name)})," ",t.bestseller_tier?(0,l.tZ)(b.UserBadge,{tier:t.bestseller_tier,size:"xs",inline:!0}):null]})},S=e=>{let{user:t}=e;return(0,l.tZ)(c.On,{size:24,user:t,utmSource:Z.b3.liveStreamChat,linkProps:{target:"_blank"}})},k=e=>{let{children:t}=e;return(0,l.tZ)(p.xv.B3,{as:"span",opacity:90,children:t})},x=e=>{let{message:t}=e,{iPlural:i}=(0,a.M1)(),n=t.users_to_display.length,r=t.users_to_display[0],o=t.users_to_display[1];return n?(0,l.BX)(C,{children:[r?(0,l.tZ)(S,{user:r}):null,(0,l.tZ)(p.xv.B3,{as:"span",lineHeight:24,display:"inline-block",className:"joinedText-pllHZH",children:1===n&&r&&(null==r?void 0:r.name)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(w,{user:r}),(0,l.tZ)(k,{children:"joined"})]}):2===n&&r&&(null==r?void 0:r.name)&&o&&(null==o?void 0:o.name)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(w,{user:r}),(0,l.tZ)(k,{children:"and"}),(0,l.tZ)(w,{user:o}),(0,l.tZ)(k,{children:"joined"})]}):n>2&&r&&(null==r?void 0:r.name)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(w,{user:r}),(0,l.tZ)(k,{children:"and"}),(0,l.BX)(k,{children:[I18N.p(t.num_viewers_joined-1)," others joined"]})]}):n>=1?(0,l.BX)(k,{children:[i("%1 person","%1 people",t.num_viewers_joined)," ","joined"]}):null})]},t.id):null}},49883:function(e,t,i){i.d(t,{j:()=>a});var n=i(16584),r=i(80026),l=i(73674),o=i(36889);let a=()=>(0,n.tZ)(r.tu,{overflow:"hidden",flex:"grow",justifyContent:"end",children:(0,n.tZ)(l.T7,{children:Array.from({length:16}).map((e,t)=>(0,n.tZ)(s,{index:t},t))})}),s=e=>{let{index:t}=e;return(0,n.BX)(r.X2,{gap:12,children:[(0,n.tZ)(o.V,{radius:"full",bg:"secondary",width:32,height:32}),(0,n.tZ)(o.V,{radius:"md",bg:"secondary",flex:"grow",height:[40,120,72,64,40,72,40,72,64,120,40,64,40,120,72,64].at(t)})]})}},2017:function(e,t,i){i.d(t,{h:()=>g});var n=i(16584),r=i(30396),l=i(29032),o=i(31122),a=i(95441),s=i(48980),d=i(98914),c=i(71068),u=i(15771),p=i(19081),h=i(58175),m=i(11879),v=i(98012),f=i(63651);let b={countdownTimer:"countdownTimer-Hez1AS"};function g(e){var t;let{liveStream:i,post:g}=e,{iString:y}=(0,a.M1)(),{liveStream:_}=(0,m.R)({liveStream:i}),[C,w]=(0,r.eJ)((0,v.Z)(null==_?void 0:_.liveStream.scheduled_at).valueOf()-Date.now()),[S,k]=(0,r.eJ)((0,v.Z)(null==_?void 0:_.liveStream.scheduled_at).isAfter((0,v.Z)().add(15,"minutes")));if((0,r.d4)(()=>{(null==_?void 0:_.liveStream.scheduled_at)&&k((0,v.Z)(_.liveStream.scheduled_at).isAfter((0,v.Z)().add(15,"minutes")))},[_]),(0,r.d4)(()=>{(null==_?void 0:_.liveStream.scheduled_at)&&w((0,v.Z)(_.liveStream.scheduled_at).valueOf()-Date.now());let e=setInterval(()=>{w((0,v.Z)(null==_?void 0:_.liveStream.scheduled_at).valueOf()-Date.now())},1e3);return()=>clearInterval(e)},[_]),!(null==_?void 0:_.liveStream.id))return null;if((null==_?void 0:_.liveStream.status)==="active")return(0,n.tZ)(o.Y,{activeLiveStream:_,isFeedItem:!0,listenForViewerCount:!1});let x=Math.max(C/1e3,0),B=Math.floor(x/60/60/24),I=Math.floor(x/60/60%24),N=Math.floor(x/60%60),X=String(B).padStart(2,"0"),P=String(I).padStart(2,"0"),L=String(N).padStart(2,"0"),z=String(Math.floor(x%60)).padStart(2,"0");return(0,n.tZ)(l.C,{children:(0,n.BX)(c.xu,{as:"a",href:(0,f.bHR)({liveStreamId:null==_?void 0:_.liveStream.id}),radius:"md",overflow:"hidden",children:[(0,n.tZ)(p.hs,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"black",children:S?(0,n.tZ)(p.hs,{className:b.countdownTimer,justifyContent:"center",alignItems:"center",children:(0,n.BX)(p.hs,{children:[B>0?(0,n.BX)(n.HY,{children:[(0,n.tZ)(Z,{value:X,unit:"DAYS"}),(0,n.tZ)(p.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})})]}):null,(0,n.tZ)(Z,{value:P,unit:"HR"}),(0,n.tZ)(p.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(Z,{value:L,unit:"MIN"}),0===B?(0,n.BX)(n.HY,{children:[(0,n.tZ)(p.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(Z,{value:z,unit:"SEC"})]}):null]})}):(0,n.BX)(p.tu,{className:b.countdownTimer,justifyContent:"center",alignItems:"center",gap:4,children:[(0,n.BX)(p.hs,{children:[(0,n.tZ)(Z,{value:L}),(0,n.tZ)(p.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(Z,{value:z})]}),(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",transform:"uppercase",children:y("Starting soon...")})]})}),(0,n.BX)(p.hs,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"secondary",borderTop:"detail",children:[(0,n.BX)(p.tu,{gap:4,children:[(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",children:null==_?void 0:null===(t=_.liveStream.user)||void 0===t?void 0:t.name}),(0,n.tZ)(h.xv.B4,{weight:"bold",color:"white",children:null==_?void 0:_.liveStream.title})]}),(0,n.tZ)(u.zx,{priority:"primary",onClick:async()=>{try{await (0,s.rd)("/api/v1/live_stream/".concat(null==_?void 0:_.liveStream.id,"/rsvp"),{method:"PUT"})}catch(e){console.error(e)}(0,d.uX)((0,f.bHR)({liveStreamId:null==_?void 0:_.liveStream.id}),{local_navigation:!1})},children:S?"Interested":"Join now"})]})]})})}let Z=e=>{let{value:t,unit:i}=e;return(0,n.BX)(p.tu,{alignItems:"center",gap:4,children:[(0,n.tZ)(p.tu,{justifyContent:"end",alignItems:"center",height:40,children:(0,n.tZ)(h.xv.B4,{font:"digit",fontSize:30,lineHeight:30,color:"white",children:t})}),i&&(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",children:i})]})}},22347:function(e,t,i){i.d(t,{d:()=>p});var n=i(16584),r=i(30396),l=i(8618),o=i(60807),a=i(48980),s=i(98914),d=i(80026),c=i(92039),u=i(79948);let p=e=>{let{liveStream:t}=e,[i,p]=(0,r.eJ)(new Set),[h,m]=(0,r.eJ)(new Set),v=(0,r.sO)(new Set),f=(0,o.aF)(),b=(0,c.rG)(),g=(0,r.I4)(e=>{p(t=>{let i=new Set(t);return i.add(e),v.current=i,i}),setTimeout(()=>{p(t=>{let i=new Set(t);return i.delete(e),v.current=i,i}),m(t=>{let i=new Set(t);return i.delete(e),i})},2750)},[]),Z=(0,r.I4)(async()=>{await (0,a.rd)("/api/v1/live_stream/".concat(t.liveStream.id,"/reaction"),{method:"POST",json:{reaction:"❤️"}})},[t.liveStream.id]);(0,r.d4)(()=>null==b?void 0:b.listen({["live-stream:".concat(t.liveStream.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:reaction"&&i.message.user.id!==(null==f?void 0:f.id)&&g(i.message.id)}}),[b]),(0,r.d4)(()=>{i.forEach(e=>{h.has(e)||setTimeout(()=>{m(t=>{let i=new Set(t);return i.add(e),i})},0)})},[i]);let y=(e,t)=>parseInt(e,16)/parseInt(t,16),_=e=>{let t=y(e.substring(0,8),"ffffffff"),i=y(e.substring(9,13),"ffff"),n=y(e.substring(28,32),"ffff");return"translate(".concat(50*t-25,"px, -").concat(125*i+200,"px) rotate(").concat(30*n-15,"deg)")};return(0,n.tZ)(d.hU,{priority:"quaternary",onClick:()=>{g((0,s.EH)()),Z().catch(console.error)},children:(0,n.BX)(d.hs,{position:"relative",children:[Array.from(v.current).map(e=>(0,n.tZ)(l.Z,{className:u.Z.heart,style:{transform:h.has(e)?_(e):void 0},size:20},e)),(0,n.tZ)(l.Z,{size:20})]})})}},21826:function(e,t,i){i.d(t,{W:()=>eE});var n=i(7409),r=i(99282),l=i(58865),o=i(16584),a=i(30396),s=i(92027),d=i(10120),c=i(32351),u=i(95441),p=i(60807),h=i(76317),m=i(68833),v=i(48980),f=i(65205),b=i(98914),g=i(80026),Z=i(98248),y=i(70379),_=i(83034),C=i(6490);let w=e=>{let{isOpen:t,onClose:i}=e,{iString:n}=(0,u.M1)();return(0,o.BX)(C.u_,{isOpen:t,onClose:i,children:[(0,o.tZ)(C.xB,{showClose:!0,onClose:i,title:n("Download the Substack app"),description:n("The Substack app is required to use the live stream practice room"),showDivider:!0}),(0,o.tZ)(_.AppInstallContent,{})]})};var S=i(11879),k=i(73674),x=i(34539),B=i(25380),I=i(29032),N=i(94874),X=i(24547),P=i(43254),L=i(60308),z=i(63651),T=i(23945),M=i(47929);function E(){let e=(0,l._)(["Subscribed to ",""]);return E=function(){return e},e}function O(){let e=(0,l._)(["See more from ",""]);return O=function(){return e},e}function j(){let e=(0,l._)(["See more from ",""]);return j=function(){return e},e}let F=e=>{let{liveStream:t,guests:i,isSubscribedToAll:l,setSubscriptions:s,subscriptions:d}=e,{iTemplate:c,iString:h}=(0,u.M1)(),{popToast:m}=(0,y.pm)(),[v,f]=(0,a.eJ)([]),Z=(0,p.aF)(),_=(0,a.Ye)(()=>[t,...i].sort((e,t)=>{var i,n,r,l,o,a,s,c;let u=["free_signup","subscribed"].includes(null!==(a=null==d?void 0:null===(i=d[null!==(o=null===(n=e.pub)||void 0===n?void 0:n.id)&&void 0!==o?o:0])||void 0===i?void 0:i.membership_state)&&void 0!==a?a:"unsubscribed")||!e.pub,p=["free_signup","subscribed"].includes(null!==(c=null==d?void 0:null===(r=d[null!==(s=null===(l=t.pub)||void 0===l?void 0:l.id)&&void 0!==s?s:0])||void 0===r?void 0:r.membership_state)&&void 0!==c?c:"unsubscribed")||!t.pub;return u&&!p?1:!u&&p?-1:0}),[]),C=async e=>{let t=!1;if(!Z){window.location.href=(0,L.Zs0)(e,{utm_source:M.b3.liveStreamEndCard,next:document.location.href,utm_medium:M.lP.web});return}f(t=>[...t,e.id]);try{let l=(await (0,P.i9)(e.id,M.b3.liveStreamEndCard,{publication:null!=e?e:void 0,user:Z,openPubInNewTabAfterSubscription:!1})).errorMessage;l?m(e=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},e),{Icon:x.Z,text:l}))):i.length?(s(t=>(0,r._)((0,n._)({},t),{[e.id]:(0,r._)((0,n._)({},t[e.id]),{membership_state:"free_signup"})})),m(t=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},t),{Icon:B.Z,text:c(E(),(null==e?void 0:e.name)||(null==Z?void 0:Z.name)||"")})))):((0,b.uX)((0,L.Zs0)(e,{utm_source:M.b3.liveStreamEndCard,next:document.location.href,utm_medium:M.lP.web,just_signed_up:!0}),{local_navigation:!1}),t=!0)}catch(e){m(t=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},t),{Icon:x.Z,text:(0,b.zx)(e)})))}finally{t||f(t=>t.filter(t=>t!==e.id))}};if(0===i.length){var w,S,k,j,F,H,U,R;let e=["free_signup","subscribed"].includes(null!==(H=null==d?void 0:null===(w=d[null!==(F=null===(S=t.pub)||void 0===S?void 0:S.id)&&void 0!==F?F:0])||void 0===w?void 0:w.membership_state)&&void 0!==H?H:"unsubscribed"),i=t.pub&&!e;return(0,o.tZ)(I.C,{children:(0,o.BX)(g.sg,{alignItems:"center",gap:20,width:440,children:[(0,o.tZ)(N.qE,{user:t.user,size:80}),(0,o.BX)(g.sg,{alignItems:"center",gap:8,children:[(0,o.BX)(g.xv.H3,{color:"primary",weight:"medium",textAlign:"center",translated:!0,children:[I18N.p(t.liveStream.title)," has ended"]}),l?null:(0,o.tZ)(g.xv.B4,{color:"tertiary",textAlign:"center",translated:!0,children:"Subscribe to receive a notification when the recording is published"})]}),(0,o.tZ)(g.zx,{priority:"primary",size:"lg",onClick:()=>{i&&t.pub&&C(t.pub)},href:i?void 0:(0,z.NNq)(t.user,{utm_source:M.b3.liveStreamEndCard}),loading:v.includes(null!==(U=null===(k=t.pub)||void 0===k?void 0:k.id)&&void 0!==U?U:0),children:i?h(v.includes(null!==(R=null===(j=t.pub)||void 0===j?void 0:j.id)&&void 0!==R?R:0)?"Subscribing...":"Subscribe"):c(O(),(0,T.Q1)(t.user.name))})]})})}return(0,o.tZ)(I.C,{children:(0,o.BX)(g.sg,{alignItems:"center",gap:24,width:440,children:[(0,o.tZ)(X.H,{direction:"rtl",users:[t.user,...i.map(e=>e.user)],size:60}),(0,o.BX)(g.sg,{alignItems:"center",gap:8,children:[(0,o.BX)(g.xv.H3,{weight:"medium",color:"primary",textAlign:"center",translated:!0,children:[I18N.p(t.liveStream.title)," has ended"]}),l?null:(0,o.tZ)(g.xv.B4,{color:"tertiary",textAlign:"center",translated:!0,children:"Subscribe to receive a notification when the recording is published"})]}),(0,o.tZ)(g.sg,{gap:12,children:_.map((e,t)=>{var i,n,r,l,a,s,c;return(0,o.tZ)(A,{user:e.user,pub:null!==(l=e.pub)&&void 0!==l?l:void 0,isSubscribing:v.includes(null!==(a=null===(i=e.pub)||void 0===i?void 0:i.id)&&void 0!==a?a:0),isSubscribed:["free_signup","subscribed"].includes(null!==(c=null==d?void 0:null===(n=d[null!==(s=null===(r=e.pub)||void 0===r?void 0:r.id)&&void 0!==s?s:0])||void 0===n?void 0:n.membership_state)&&void 0!==c?c:"unsubscribed"),onSubscribe:C},e.user.id||t)})})]})})},A=e=>{let{user:t,pub:i,isSubscribed:n,isSubscribing:r,onSubscribe:l}=e,{iString:a,iTemplate:s}=(0,u.M1)(),d=i&&!n;return(0,o.BX)(g.X2,{alignItems:"center",gap:12,width:440,children:[(0,o.tZ)(N.qE,{user:t,size:40}),(0,o.BX)(g.sg,{gap:2,children:[(0,o.tZ)(g.xv.B3,{weight:"medium",color:"primary",children:t.name}),t.handle&&(0,o.BX)(g.xv.B5,{color:"primary",lineHeight:16,children:["@",t.handle]})]}),(0,o.tZ)(g.xu,{flex:"grow"}),(0,o.tZ)(g.zx,{priority:d?"primary":"secondary",size:"sm",onClick:()=>{d&&l(i)},href:d?void 0:(0,z.NNq)(t,{utm_source:M.b3.liveStreamEndCard}),loading:r,children:d?a(r?"Subscribing...":"Subscribe"):s(j(),(0,T.Q1)(t.name))})]})};var H=i(33665),U=i(38841),R=i(57641);let V={primaryPubAvatar:"primaryPubAvatar-DsPqHi",guestPubAvatar:"guestPubAvatar-tqWNqe",subscribeWidget:"subscribeWidget-DmciqD"};function D(){let e=(0,l._)([""," and ",""]);return D=function(){return e},e}function Y(){let e=(0,l._)(["",", ",", and ",""]);return Y=function(){return e},e}function W(){let e=(0,l._)(["",", and ",""]);return W=function(){return e},e}function J(){let e=(0,l._)(["This live stream is only for founding members of ",""]);return J=function(){return e},e}function q(){let e=(0,l._)(["This live stream is only for paid subscribers of ",""]);return q=function(){return e},e}function G(){let e=(0,l._)(["This live video is only for subscribers of ",""]);return G=function(){return e},e}function K(){let e=(0,l._)(["Subscribe to ",""]);return K=function(){return e},e}let Q=e=>{let{liveStream:t,guests:i,subscriptions:n,open:r,setOpen:l}=e,{title:a,subtitle:s,isOpen:d,showIndividualPubs:c}=ei({liveStream:t,guests:i,open:r});if(!t.pub)return null;let u=i.find(e=>{var t;return null===(t=e.pub)||void 0===t?void 0:t.logo_url});return(0,o.BX)(C.u_,{isOpen:d,onClose:()=>{l(!1)},children:[(0,o.tZ)(C.xB,{showClose:!1,title:a,description:s,alignItems:"center",icon:(0,o.tZ)($,{liveStream:t,guestPubWithLogo:u})}),(0,o.tZ)(C.fe,{children:(0,o.tZ)(g.sg,{gap:20,paddingTop:8,children:c?(0,o.BX)(o.HY,{children:[(0,o.tZ)(et,{pub:t.pub,streamingUser:t.user,subscriptions:n,foundingUpsell:"only_founding"===t.liveStream.audience}),i.map(e=>(0,o.tZ)(et,{pub:e.pub,streamingUser:e.user,subscriptions:n,foundingUpsell:"only_founding"===t.liveStream.audience}))]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(ee,{liveStream:t,guests:i,subscriptions:n}),(0,o.tZ)(g.xu,{children:(0,o.tZ)(R.O,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center"})})]})})})]})},$=e=>{let{liveStream:t,guestPubWithLogo:i}=e;return i&&"only_free"===t.liveStream.audience?(0,o.BX)(g.xu,{position:"relative",width:80,height:80,children:[(0,o.tZ)(U.wk,{className:V.primaryPubAvatar,pub:t.pub,size:48,radius:"xs"}),(0,o.tZ)(U.wk,{className:V.guestPubAvatar,pub:i.pub||void 0,size:48,radius:"xs"})]}):(0,o.tZ)(U.wk,{pub:t.pub,size:48,radius:"sm",outline:"detail"})},ee=e=>{var t,i,n,r,l,a,s,d,c,h,m,v,f,b,g,Z,y,_,C;let{liveStream:w,guests:S,subscriptions:k}=e,{iString:x}=(0,u.M1)(),B=(0,p.aF)();return w.pub?(B&&(B.is_subscribed=["subscribed"].includes(null!==(v=null===(n=k[null!==(m=null===(r=w.pub)||void 0===r?void 0:r.id)&&void 0!==m?m:0])||void 0===n?void 0:n.membership_state)&&void 0!==v?v:"unsubscribed"),B.is_free_subscribed=["free_signup","subscribed"].includes(null!==(b=null===(l=k[null!==(f=null===(a=w.pub)||void 0===a?void 0:a.id)&&void 0!==f?f:0])||void 0===l?void 0:l.membership_state)&&void 0!==b?b:"unsubscribed"),B.is_founding=["subscribed"].includes(null!==(Z=null===(s=k[null!==(g=null===(d=w.pub)||void 0===d?void 0:d.id)&&void 0!==g?g:0])||void 0===s?void 0:s.membership_state)&&void 0!==Z?Z:"unsubscribed")&&!!(null===(c=k[null!==(y=null===(h=w.pub)||void 0===h?void 0:h.id)&&void 0!==y?y:0])||void 0===c?void 0:c.is_founding)),(0,o.tZ)(H.Z,{className:V.subscribeWidget,pub:w.pub,user:B,foundingUpsell:"only_founding"===w.liveStream.audience,freeSignup:["free_signup","subscribed"].includes(null!==(C=null===(t=k[null!==(_=null===(i=w.pub)||void 0===i?void 0:i.id)&&void 0!==_?_:0])||void 0===t?void 0:t.membership_state)&&void 0!==C?C:"unsubscribed"),additionalPubIds:["only_free","everyone"].includes(w.liveStream.audience)?S.map(e=>{var t,i;return null!==(i=null===(t=e.pub)||void 0===t?void 0:t.id)&&void 0!==i?i:0}).filter(e=>!!e):[],source:M.b3.liveStreamPermalink,onSignup:["only_free","everyone"].includes(w.liveStream.audience)?()=>{location.reload()}:void 0,onConfirmationRequired:()=>{alert(x("Check your email to confirm subscription"))}})):null},et=e=>{var t,i;let{pub:r,streamingUser:l,subscriptions:a,foundingUpsell:s}=e,{iString:d}=(0,u.M1)(),c=(0,p.aF)(),h=async e=>{if(e){try{await (0,v.rd)("/api/v1/reader/signup/pub",{method:"POST",json:{source:M.b3.liveStreamPermalink,publication_id:null==e?void 0:e.id,email:null==c?void 0:c.email,first_url:f.xY,first_referrer:f.ip,current_url:f.UE,current_referrer:f.xU,first_session_url:f.ac,first_session_referrer:f.qR}}),(0,m.IU)()}catch(e){(0,m.j)(m.FP.FREE_SIGNUP_FAILED,{reason:e.message,source:M.b3.liveStreamPermalink})}window.location.href=(0,L.Zs0)(e,(0,n._)({utm_source:M.b3.liveStreamChat,next:document.location.href,utm_medium:M.lP.web},s&&{plan:"founding"}))}};return(0,o.BX)(g.gq,{gap:12,alignItems:"center",flex:"grow",children:[(0,o.tZ)(N.qE,{user:l,size:40}),(0,o.BX)(g.sg,{flex:"grow",children:[(0,o.tZ)(g.xv.B4,{fontWeight:"semibold",children:l.name}),(0,o.tZ)(g.xv.B4,{color:"secondary",children:null==r?void 0:r.name})]}),(0,o.tZ)(g.zx,{priority:"primary",size:"sm",onClick:()=>{h(r)},children:d((null===(t=a[null!==(i=null==r?void 0:r.id)&&void 0!==i?i:0])||void 0===t?void 0:t.membership_state)==="free_signup"?"Upgrade":"Subscribe")})]})},ei=e=>{var t;let{liveStream:i,guests:n,open:r}=e,{iString:l,iTemplate:o}=(0,u.M1)(),a=(null===(t=i.pub)||void 0===t?void 0:t.name)||"",s=n.length>0,d="active"===i.liveStream.status,c=!i.liveStreamInformation.desktopPlaybackUrl,p=r||d&&c,h=e=>{let t=e[0]||"",i=e[1]||"",n=e[2]||"";return 0===e.length?"":1===e.length?t:2===e.length?o(D(),t,i):3===e.length?o(Y(),t,i,n):o(W(),e.slice(0,-1).join(", "),e[e.length-1]||"")},m=()=>[a,...n.map(e=>{var t;return(null===(t=e.pub)||void 0===t?void 0:t.name)||""})].filter(Boolean);return(()=>{switch(i.liveStream.audience){case"only_founding":return{title:s?l("This live stream is for founding members only"):o(J(),a),subtitle:l("Become a founding member to watch now"),isOpen:p,showIndividualPubs:s};case"only_paid":return{title:s?l("This live stream is for paid subscribers only"):o(q(),a),subtitle:l("Become a paid subscriber to watch now"),isOpen:p,showIndividualPubs:s};case"only_free":return{title:s?l("Subscribe for free to watch now"):o(G(),a),subtitle:s?h(m()):l("Subscribe for free to watch now"),isOpen:p,showIndividualPubs:s};default:return{title:o(K(),h(m())),subtitle:"",isOpen:r,showIndividualPubs:s}}})()};var en=i(82717),er=i(64797),el=i(94184),eo=i.n(el),ea=i(71375),es=i(69181);function ed(){let e=(0,l._)(["Subscribed to ",""]);return ed=function(){return e},e}let ec=e=>{let{liveStream:t,guests:i,subscriptions:n,setSubscriptions:r,isHostsModalOpen:l,setIsHostsModalOpen:a,user:s}=e,{iString:d}=(0,u.M1)();return(0,o.BX)(C.u_,{isOpen:l,onClose:()=>a(!1),children:[(0,o.tZ)(C.xB,{showDivider:!0,showClose:!0,onClose:()=>a(!1),title:d(i.length?"Hosts":"Host")}),(0,o.tZ)(C.fe,{children:(0,o.tZ)(g.tu,{gap:20,children:[t,...i.map(e=>e)].map(e=>{var t,i,l;let{user:a,pub:d}=e,c=["free_signup","subscribed"].includes(null!==(l=null===(t=n[null!==(i=null==d?void 0:d.id)&&void 0!==i?i:0])||void 0===t?void 0:t.membership_state)&&void 0!==l?l:"unsubscribed");return(0,o.tZ)(eu,{streamingUser:a,pub:d,isSubscribed:c,subscriptions:n,setSubscriptions:r,user:s})})})})]})},eu=e=>{var t,i;let{streamingUser:l,pub:s,isSubscribed:d,subscriptions:c,setSubscriptions:p,user:h}=e,{iString:m,iTemplate:v}=(0,u.M1)(),{popToast:f}=(0,y.pm)(),[Z,_]=(0,a.eJ)([]);return(0,o.BX)(g.gq,{gap:12,alignItems:"center",children:[(0,o.tZ)(N.On,{user:l,size:40,utmSource:M.b3.liveStreamHostModal,linkProps:{target:"_blank"}}),(0,o.BX)(g.tu,{flex:"grow",children:[(0,o.tZ)(ep,{streamingUser:l}),(0,o.tZ)(eh,{pub:s})]}),s?(0,o.tZ)(g.zx,{size:"sm",priority:"primary",disabled:d||Z.includes(s.id)||["free_signup","subscribed"].includes(null!==(i=null===(t=c[s.id])||void 0===t?void 0:t.membership_state)&&void 0!==i?i:"unsubscribed"),onClick:async()=>{if(!h){window.location.href=(0,L.Zs0)(s,{utm_source:M.b3.liveStreamHostModal,next:document.location.href,utm_medium:M.lP.web});return}if(s.id){_(e=>[...e,s.id]);try{await (0,P.i9)(s.id,M.b3.liveStreamPermalink,{publication:null!=s?s:void 0,user:h,openPubInNewTabAfterSubscription:!1}),p(e=>(0,r._)((0,n._)({},e),{[s.id]:(0,r._)((0,n._)({},e[s.id]),{membership_state:"free_signup"})})),f(e=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},e),{Icon:B.Z,text:v(ed(),null==s?void 0:s.name)})))}catch(e){alert((0,b.zx)(e))}_(e=>e.filter(e=>e!==s.id))}},children:m(d?"Subscribed":"Subscribe")}):null]},l.id)},ep=e=>{let{streamingUser:t}=e;return(0,o.tZ)(g.xv.B4,{fontWeight:"semibold",children:(0,o.tZ)(g.hh,{href:(0,L.NNq)(t,{utm_source:M.b3.liveStreamHostModal}),target:"_blank",children:t.name})})},eh=e=>{let{pub:t}=e;return t?(0,o.tZ)(g.xv.B4,{color:"secondary",children:(0,o.tZ)(g.hh,{href:(0,z.SVA)(t,{forceSubdomain:!0}),target:"_blank",children:t.name})}):null},em={subscribeButton:"subscribeButton-CtrItP",authorPill:"authorPill-wbOG0c",viewerCountContainer:"viewerCountContainer-XTwz_D",closeButtonHidden:"closeButtonHidden-PBnS9i",liveStreamHeader:"liveStreamHeader-OLlNVf"},ev=e=>{let{closeHref:t,liveStream:i,handle:n,guests:r,showSubscribeAllButton:l,isSubscribing:s,onSubscribeAll:d,hasEnded:c,viewerCount:u,subscriptions:p,setSubscriptions:h,user:m,isScheduled:v}=e,[f,b]=(0,a.eJ)(!1);return(0,o.BX)(o.HY,{children:[(0,o.tZ)(ec,{liveStream:i,guests:r,subscriptions:p,setSubscriptions:h,isHostsModalOpen:f,setIsHostsModalOpen:b,user:m}),(0,o.tZ)(I.C,{children:(0,o.BX)(eS,{children:[(0,o.BX)(g.X2,{minWidth:0,alignItems:"center",gap:8,children:[(0,o.tZ)(eg,{closeHref:t,handle:n}),(0,o.tZ)(ef,{liveStream:i,guests:r,showSubscribeAllButton:l,isSubscribing:s,onSubscribeAll:d,setIsHostsModalOpen:b})]}),c||v?null:(0,o.BX)(ew,{children:[(0,o.tZ)(es.Qn,{}),(0,o.tZ)(es.C,{viewerCount:u})]})]})})]})},ef=e=>{var t;let{liveStream:i,guests:n,showSubscribeAllButton:r,isSubscribing:l,onSubscribeAll:a,setIsHostsModalOpen:s}=e;return(0,o.BX)(e_,{children:[(0,o.BX)(eC,{onClick:()=>s(!0),children:[(0,o.tZ)(X.H,{users:[i.user,...n.map(e=>e.user)],size:28,direction:"rtl"}),(0,o.BX)(g.sg,{paddingRight:20*!r,minWidth:0,children:[(0,o.tZ)(eZ,{children:[i.user.name,...n.map(e=>e.user.name)].filter(Boolean).join(", ")}),(0,o.tZ)(ey,{children:[null===(t=i.pub)||void 0===t?void 0:t.name,...n.map(e=>{var t;return null===(t=e.pub)||void 0===t?void 0:t.name})].filter(Boolean).join(", ")})]})]}),r?(0,o.tZ)(eb,{isSubscribing:l,onSubscribeAll:a}):null]})},eb=e=>{let{isSubscribing:t,onSubscribeAll:i}=e,{iString:n}=(0,u.M1)();return(0,o.tZ)(g.zx,{className:em.subscribeButton,priority:"primary",size:"sm",disabled:t,onClick:i,children:n("Subscribe")})},eg=e=>{let{closeHref:t,handle:i}=e;return(0,o.tZ)(g.hU,{href:t,size:"sm",priority:"quaternary",rounded:!0,className:eo()(i.active&&em.closeButtonHidden),children:(0,o.tZ)(ea.Z,{})})},eZ=e=>{let{children:t}=e;return(0,o.tZ)(g.xv.B4,{color:"vibrance-primary",weight:"medium",ellipsis:!0,children:t})},ey=e=>{let{children:t}=e;return(0,o.tZ)(g.xv.B5,{color:"vibrance-secondary",opacity:70,ellipsis:!0,lineHeight:16,children:t})},e_=(0,g.zo)({display:"flex",direction:"row",alignItems:"center",gap:16,radius:"full",minWidth:0,paddingLeft:4,className:em.authorPill,pressable:"sm",wrap:"nowrap",userSelect:"none"}),eC=(0,g.zo)({display:"flex",direction:"row",gap:8,cursor:"pointer",alignItems:"center",minWidth:0,paddingLeft:2,height:40,sizing:"border-box"}),ew=(0,g.zo)({display:"flex",direction:"row",gap:8,alignItems:"center",className:em.viewerCountContainer}),eS=(0,g.zo)({display:"flex",direction:"row",position:"absolute",padding:16,gap:8,alignItems:"start",minWidth:0,className:em.liveStreamHeader});var ek=i(98012),ex=i(14773),eB=i(26111),eI=i(36186);function eN(){let e=(0,l._)(["Subscribed to "," and ",""]);return eN=function(){return e},e}function eX(){let e=(0,l._)(["Subscribed to ",", ",", and ",""]);return eX=function(){return e},e}function eP(){let e=(0,l._)(["Subscribed to ",", and ",""]);return eP=function(){return e},e}function eL(){let e=(0,l._)(["LIVE SOON: ",""]);return eL=function(){return e},e}function ez(){let e=(0,l._)(["LIVE NOW: ",""]);return ez=function(){return e},e}function eT(){let e=(0,l._)(["Starting "," at ",""]);return eT=function(){return e},e}function eM(){let e=(0,l._)([""," on Substack"]);return eM=function(){return e},e}function eE(e){var t,i;let{id:l,liveStream:g,liveStreamInvite:_,subscriptionToLiveStreamPub:C,subscriptionsToLiveStreamInvitedPub:x,smsInvite:B}=e,{liveStream:I,setLiveStream:N}=(0,S.R)({liveStream:g||null}),[X,P]=(0,a.eJ)(!!(0,eB.x)("show_test_run"));(0,a.d4)(()=>{l&&(0,v.rd)("/api/v1/live_stream/".concat(l)).then(e=>{N(e.activeLiveStream),e.activeLiveStream.pub&&(0,v.rd)("/api/v1/subscription/".concat(e.activeLiveStream.pub.id)).then(t=>{t.subscription&&O(i=>{var l,o;return e.activeLiveStream.pub?(0,r._)((0,n._)({},i),{[e.activeLiveStream.pub.id]:(0,r._)((0,n._)({},t.subscription),{role:null!==(o=null===(l=t.publicationUser)||void 0===l?void 0:l.role)&&void 0!==o?o:null})}):i})})})},[l]);let{iString:z,iTemplate:T}=(0,u.M1)(),[E,O]=(0,a.eJ)((0,n._)({},C?{[null!==(i=null==I?void 0:null===(t=I.pub)||void 0===t?void 0:t.id)&&void 0!==i?i:0]:C}:{},x));(0,a.d4)(()=>{(null==I?void 0:I.liveStream.scheduled_at)&&"scheduled"===I.liveStream.status&&(0,m.j)(m.FP.LIVE_STREAM_SCHEDULED_PERMALINK_VISITED,{liveStreamId:I.liveStream.id,addToCalendar:(0,eB.x)("add_to_calendar")})},[null==I?void 0:I.liveStream.scheduled_at,null==I?void 0:I.liveStream.status]);let j=(0,a.I4)(e=>{let{message:t}=e;if(t.invited_user_primary_publication&&!E[t.invited_user_primary_publication.id]){let e=t.invited_user_primary_publication;(0,v.rd)("/api/v1/subscription/".concat(e.id)).then(t=>{t.subscription&&O(i=>{var l,o;return(0,r._)((0,n._)({},i),{[e.id]:(0,r._)((0,n._)({},t.subscription),{role:null!==(o=null===(l=t.publicationUser)||void 0===l?void 0:l.role)&&void 0!==o?o:null})})})})}},[E]),{guests:A,hasEnded:H,isScheduled:U,viewerCount:R}=(0,h.d)({liveStream:I,onGuestJoined:j}),V=(0,d.r)(),D=(0,p.aF)(),[Y,W]=(0,a.eJ)(!1),[J,q]=(0,a.eJ)(!1),{popToast:G}=(0,y.pm)(),K=[null==I?void 0:I.pub,...A.map(e=>e.pub)].filter(e=>!!e).every(e=>{var t,i;return["free_signup","subscribed"].includes(null!==(i=null===(t=E[e.id])||void 0===t?void 0:t.membership_state)&&void 0!==i?i:"unsubscribed")}),$=async()=>{var e,t;if(!D){W(!0);return}let i=[null==I?void 0:null===(e=I.pub)||void 0===e?void 0:e.id,...A.map(e=>{var t;return null===(t=e.pub)||void 0===t?void 0:t.id})].filter(Boolean);if(i.length){q(!0);try{let{subscriptionResults:e}=await (0,v.rd)("/api/v1/bulk_signup",{method:"POST",json:{publications:i,source:M.b3.liveStreamPermalink,current_referrer:f.xU,current_url:f.UE,first_referrer:f.ip,first_session_referrer:f.qR,first_session_url:f.ac,first_url:f.xY}});if(e.every(e=>e.requires_confirmation)){alert(z("Check your email to confirm subscription"));return}O(e=>Object.fromEntries([...i.map(e=>[e,{is_founding:!1,membership_state:"free_signup",role:null}]),...Object.entries(e).map(e=>{let[t,i]=e;return[t,(0,r._)((0,n._)({},i),{membership_state:["free_signup","subscribed"].includes(null==i?void 0:i.membership_state)?null==i?void 0:i.membership_state:"free_signup"})]})]));let l=[null==I?void 0:I.pub,...A.map(e=>e.pub)].filter(e=>{var t,i,n;return!["free_signup","subscribed"].includes(null!==(n=null==E?void 0:null===(t=E[null!==(i=null==e?void 0:e.id)&&void 0!==i?i:0])||void 0===t?void 0:t.membership_state)&&void 0!==n?n:"unsubscribed")}).map(e=>null==e?void 0:e.name).filter(Boolean),a=0===l.length?"":1===l.length&&l[0]?"Subscribed to ".concat(l[0]):2===l.length&&l[0]&&l[1]?T(eN(),l[0],l[1]):3===l.length&&l[0]&&l[1]&&l[2]?T(eX(),l[0],l[1],l[2]):T(eP(),l.slice(0,-1).join(", "),null!==(t=l[l.length-1])&&void 0!==t?t:"");G(e=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},e),{Icon:s.Z,text:a})))}catch(e){alert((0,b.zx)(e))}q(!1)}};if(!(null==I?void 0:I.liveStream.id))return(0,o.tZ)(Z.$j,{});let ee=(0,eB.x)("fromPub")?(0,ex.SV)(null==I?void 0:I.pub):(0,eI.NN)(null==I?void 0:I.user,{utm_source:M.b3.liveStreamExit});return(0,o.BX)(d.I,{handle:V,children:[(0,o.tZ)(c.Metadata,{title:U?T(eL(),I.liveStream.title):T(ez(),I.liveStream.title),description:U?T(eT(),(0,ek.Z)(I.liveStream.scheduled_at).tz("America/New_York").format("MMM D"),(0,ek.Z)(I.liveStream.scheduled_at).tz("America/New_York").format("h:mm A z")):T(eM(),I.user.name),image:(0,L.VCE)(I),isLargeImage:!0}),(0,o.tZ)(w,{isOpen:X,onClose:()=>P(!1)}),(0,o.tZ)(Q,{liveStream:I,guests:A,subscriptions:E,open:Y,setOpen:W}),(0,o.BX)(ej,{children:[(0,o.BX)(eO,{children:[(0,o.tZ)(ev,{closeHref:ee,liveStream:I,handle:V,guests:A,showSubscribeAllButton:!K&&!H,isSubscribing:J,onSubscribeAll:$,hasEnded:H,isScheduled:U,viewerCount:R,subscriptions:E,setSubscriptions:O,user:D}),H?(0,o.tZ)(F,{liveStream:I,guests:A,isSubscribedToAll:K,subscriptions:E,setSubscriptions:O}):U?(0,o.tZ)(en.H,{liveStreamInvite:_,liveStream:I,subscriptions:E,smsInvite:B}):I.liveStreamInformation.desktopPlaybackUrl?(0,o.tZ)(er.P,{liveStream:I,handle:V,autoPlay:!0}):(0,o.tZ)(er.r,{liveStream:I})]}),H||U?null:(0,o.tZ)(k.aG,{liveStream:I,handle:V,subscriptions:E,setSubscriptions:O})]})]})}let eO=(0,g.zo)({display:"flex",direction:"row",flex:"grow",justifyContent:"center",alignItems:"center",className:"videoContainer-bFmoVz"}),ej=(0,g.zo)({display:"flex",direction:"row",flex:"grow",alignItems:"center",className:"container-hbjpWY"})},82717:function(e,t,i){i.d(t,{H:()=>D});var n=i(7409),r=i(99282),l=i(58865),o=i(16584),a=i(30396),s=i(79774),d=i(95325),c=i(71375),u=i(25380),p=i(83034),h=i(29032),m=i(98848),v=i(64515);let f=e=>{var{size:t=24,fill:i="#363737"}=e,l=(0,m._)(e,["size","fill"]);return(0,o.tZ)(v.l,(0,r._)((0,n._)({},l),{name:"HandIcon",svgParams:{height:t,width:t,viewBox:"0 0 24 24",fill:"none"},children:(0,o.tZ)("path",{d:"M3.83496 14.9536V6.80225C3.83496 6.52002 3.9318 6.28206 4.12549 6.08838C4.31917 5.89469 4.55713 5.79785 4.83936 5.79785C5.11605 5.79785 5.35124 5.89469 5.54492 6.08838C5.73861 6.28206 5.83545 6.52002 5.83545 6.80225V11.9238C5.93506 11.863 6.0402 11.8021 6.15088 11.7412C6.26709 11.6803 6.38607 11.6195 6.50781 11.5586V4.2124C6.50781 3.93018 6.60465 3.69499 6.79834 3.50684C6.99202 3.31315 7.22721 3.21631 7.50391 3.21631C7.7806 3.21631 8.01579 3.31315 8.20947 3.50684C8.40316 3.69499 8.5 3.93018 8.5 4.2124V10.9941C8.61621 10.972 8.73242 10.9554 8.84863 10.9443C8.96484 10.9277 9.08105 10.9139 9.19727 10.9028V3.52344C9.19727 3.24121 9.29134 3.00326 9.47949 2.80957C9.67318 2.61589 9.91113 2.51904 10.1934 2.51904C10.4756 2.51904 10.7135 2.61589 10.9072 2.80957C11.1009 3.00326 11.1978 3.24121 11.1978 3.52344V10.9941C11.314 11.0163 11.4274 11.0439 11.5381 11.0771C11.6488 11.1048 11.7567 11.138 11.8618 11.1768V4.69385C11.8618 4.41162 11.9559 4.17367 12.144 3.97998C12.3377 3.7863 12.5757 3.68945 12.8579 3.68945C13.1401 3.68945 13.3753 3.7863 13.5635 3.97998C13.7572 4.17367 13.854 4.41162 13.854 4.69385V13.5093C13.854 13.6421 13.8761 13.7334 13.9204 13.7832C13.9702 13.8275 14.0311 13.8496 14.103 13.8496C14.1639 13.8496 14.222 13.8275 14.2773 13.7832C14.3327 13.7389 14.3853 13.6559 14.4351 13.5342L15.6055 11.0024C15.777 10.6427 15.9652 10.3771 16.1699 10.2056C16.3802 10.034 16.632 9.96484 16.9253 9.99805C17.1854 10.0257 17.3874 10.1309 17.5312 10.3135C17.6807 10.4906 17.7415 10.7091 17.7139 10.9692C17.7028 11.1242 17.6585 11.3345 17.5811 11.6001C17.5091 11.8657 17.4233 12.1535 17.3237 12.4634C17.2297 12.7733 17.1383 13.0693 17.0498 13.3516C16.9391 13.7057 16.8174 14.0848 16.6846 14.4888C16.5518 14.8927 16.4051 15.305 16.2446 15.7256C16.0897 16.1406 15.9154 16.5474 15.7217 16.9458C15.5335 17.3387 15.3288 17.7012 15.1074 18.0332C14.5264 19.0182 13.8097 19.7542 12.9575 20.2412C12.1108 20.7337 11.0705 20.98 9.83643 20.98C8.97868 20.98 8.18457 20.8444 7.4541 20.5732C6.72363 20.3021 6.08724 19.9064 5.54492 19.3862C5.00814 18.866 4.58757 18.2352 4.2832 17.4937C3.98438 16.7466 3.83496 15.8999 3.83496 14.9536Z",stroke:"none",fill:i,style:"fill:".concat(i,";fill-opacity:1;")})}))},b=e=>{var{size:t=24,fill:i="#EEEEEE"}=e,l=(0,m._)(e,["size","fill"]);return(0,o.tZ)(v.l,(0,r._)((0,n._)({},l),{name:"KeyOffIcon",svgParams:{height:t,width:t,stroke:"none",viewBox:"0 0 33 33"},children:(0,o.tZ)("path",{d:"M16.5 4.34766C15.5781 4.34766 14.7266 4.54297 13.9453 4.93359C13.1719 5.31641 12.5117 5.83984 11.9648 6.50391C11.418 7.16016 11.0391 7.91016 10.8281 8.75391L9.19922 7.125C9.58984 6.17188 10.1445 5.32813 10.8633 4.59375C11.5898 3.85937 12.4336 3.28516 13.3945 2.87109C14.3633 2.45703 15.3984 2.25 16.5 2.25C17.6016 2.25 18.6328 2.45703 19.5938 2.87109C20.5547 3.27734 21.3984 3.84375 22.125 4.57031C22.8594 5.29688 23.4297 6.14062 23.8359 7.10156C24.2422 8.0625 24.4453 9.08984 24.4453 10.1836C24.4453 11.7227 24.0195 13.125 23.168 14.3906C22.3242 15.6484 21.1172 16.6719 19.5469 17.4609L17.9531 15.8555C18.8438 15.5977 19.6172 15.1875 20.2734 14.625C20.9297 14.0625 21.4375 13.4023 21.7969 12.6445C22.1641 11.8789 22.3477 11.0586 22.3477 10.1836C22.3477 9.10547 22.0859 8.125 21.5625 7.24219C21.0391 6.35938 20.3359 5.65625 19.4531 5.13281C18.5703 4.60937 17.5859 4.34766 16.5 4.34766ZM16.5 9.86719C15.9766 9.86719 15.5273 9.68359 15.1523 9.31641C14.7852 8.94141 14.6016 8.49219 14.6016 7.96875C14.6016 7.44531 14.7852 7 15.1523 6.63281C15.5195 6.26563 15.9688 6.08203 16.5 6.08203C17.0234 6.08203 17.4727 6.26563 17.8477 6.63281C18.2227 7 18.4102 7.44531 18.4102 7.96875C18.4102 8.49219 18.2227 8.94141 17.8477 9.31641C17.4727 9.68359 17.0234 9.86719 16.5 9.86719ZM17.3906 31.3359C17.1328 31.5859 16.8359 31.7031 16.5 31.6875C16.1719 31.6719 15.875 31.5508 15.6094 31.3242L13.6992 29.6602C13.5117 29.5039 13.3789 29.3125 13.3008 29.0859C13.2305 28.8672 13.1953 28.6523 13.1953 28.4414V18.2695L15.2344 20.2969V27.9844L16.5 29.25L18.9141 26.8008L17.332 25.2422V22.8633L21.0586 26.5781C21.1914 26.7188 21.2617 26.8945 21.2695 27.1055C21.2852 27.3242 21.1992 27.5273 21.0117 27.7148L17.3906 31.3359ZM4.37109 7.20703C4.19141 7.02734 4.10156 6.80859 4.10156 6.55078C4.10156 6.28516 4.19141 6.0625 4.37109 5.88281C4.55078 5.70313 4.77344 5.61719 5.03906 5.625C5.29688 5.625 5.51562 5.71484 5.69531 5.89453L27.1289 27.3047C27.3086 27.4844 27.3984 27.7031 27.3984 27.9609C27.3984 28.2188 27.3086 28.4414 27.1289 28.6289C26.9492 28.8008 26.7305 28.8867 26.4727 28.8867C26.2148 28.8945 25.9922 28.8086 25.8047 28.6289L4.37109 7.20703Z",fill:i,style:"fill:".concat(i,";fill-opacity:1;")})}))},g=e=>{let{size:t=24,fill:i="#363737"}=e;return(0,o.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:(0,o.tZ)("path",{d:"M19.0889 13.667C19.0889 14.4251 18.9754 15.0892 18.7485 15.6592C18.5216 16.2292 18.1536 16.7632 17.6445 17.2612C17.141 17.7537 16.4741 18.2573 15.644 18.772C14.814 19.2922 13.7985 19.8732 12.5977 20.5151C12.4925 20.5705 12.3846 20.612 12.2739 20.6396C12.1688 20.6729 12.0775 20.6895 12 20.6895C11.9225 20.6895 11.8285 20.6729 11.7178 20.6396C11.6126 20.612 11.5047 20.5705 11.394 20.5151C10.1932 19.8732 9.17773 19.2949 8.34766 18.7803C7.52311 18.2656 6.85628 17.762 6.34717 17.2695C5.84359 16.7715 5.47559 16.2375 5.24316 15.6675C5.01628 15.092 4.90283 14.4251 4.90283 13.667V7.44971C4.90283 6.91292 5.00521 6.51725 5.20996 6.2627C5.42025 6.00814 5.75228 5.78402 6.20605 5.59033C6.3776 5.51286 6.62386 5.41602 6.94482 5.2998C7.27132 5.17806 7.63102 5.04801 8.02393 4.90967C8.42236 4.77132 8.81527 4.63298 9.20264 4.49463C9.59554 4.35628 9.94971 4.23177 10.2651 4.12109C10.5861 4.01042 10.8324 3.92741 11.0039 3.87207C11.1644 3.8278 11.3304 3.79183 11.502 3.76416C11.6735 3.73096 11.8395 3.71436 12 3.71436C12.1549 3.71436 12.321 3.73096 12.498 3.76416C12.6751 3.79736 12.8411 3.83333 12.9961 3.87207C13.1621 3.92188 13.4056 4.00212 13.7266 4.11279C14.0475 4.21794 14.4045 4.33968 14.7974 4.47803C15.1903 4.61637 15.5804 4.75749 15.9678 4.90137C16.3607 5.03971 16.7176 5.16976 17.0386 5.2915C17.3651 5.41325 17.6169 5.51286 17.7939 5.59033C18.2533 5.77848 18.5825 6.0026 18.7817 6.2627C18.9865 6.51725 19.0889 6.91292 19.0889 7.44971V13.667ZM11.8755 18.7388V5.46582C11.8201 5.46582 11.7648 5.47412 11.7095 5.49072C11.6541 5.50179 11.5794 5.52393 11.4854 5.55713C11.2861 5.6346 11.0399 5.72868 10.7466 5.83936C10.4588 5.9445 10.1462 6.05794 9.80859 6.17969C9.47103 6.30143 9.12793 6.42318 8.7793 6.54492C8.43066 6.66667 8.09587 6.78564 7.7749 6.90186C7.45947 7.01253 7.18278 7.11214 6.94482 7.20068C6.82308 7.24495 6.74284 7.30583 6.7041 7.3833C6.66536 7.46077 6.646 7.57422 6.646 7.72363V13.3599C6.646 13.952 6.729 14.4556 6.89502 14.8706C7.06104 15.2856 7.33219 15.673 7.7085 16.0327C8.09033 16.3869 8.59391 16.7632 9.21924 17.1616C9.8501 17.5601 10.6248 18.0332 11.5435 18.5811C11.6209 18.6309 11.6846 18.6668 11.7344 18.689C11.7842 18.7111 11.8312 18.7277 11.8755 18.7388Z",fill:i,style:"fill:".concat(i,";fill-opacity:1;")})})};var Z=i(33665),y=i(95441),_=i(60807),C=i(68833),w=i(48980),S=i(98914),k=i(61641),x=i(80026),B=i(96745),I=i(6490),N=i(14518),X=i(70379),P=i(79567),L=i(60308),z=i(26111),T=i(63651),M=i(81821),E=i(47929);let O={headerIcon:"headerIcon-vFzD3Y",divider:"divider-RTh_Tm",declineButton:"declineButton-lXoT5b"};function j(){let e=(0,l._)([""," invited you to co-host this live video"]);return j=function(){return e},e}function F(){let e=(0,l._)([""," will start on "," at ",""]);return F=function(){return e},e}function A(){let e=(0,l._)(["Successfully blocked ",""]);return A=function(){return e},e}function H(){let e=(0,l._)(["Block ",""]);return H=function(){return e},e}function U(){let e=(0,l._)(["Successfully blocked invites from strangers"]);return U=function(){return e},e}function R(){let e=(0,l._)(["Block invites from strangers"]);return R=function(){return e},e}function V(){let e=(0,l._)(["Only people you follow can invite you"]);return V=function(){return e},e}let D=e=>{var t,i,l,p;let{liveStream:m,liveStreamInvite:v,smsInvite:L,subscriptions:D}=e,{language:W,iString:J,iTemplate:q}=(0,y.M1)(),G=(0,_.aF)(),[K,Q]=(0,a.eJ)(!1),[$,ee]=(0,a.eJ)(v),[et,ei]=(0,a.eJ)(!1),[en,er]=(0,a.eJ)(!!(0,z.x)("decline_invite_id")),[el,eo]=(0,a.eJ)(!1),[ea,es]=(0,a.eJ)(!1),[ed,ec]=(0,a.eJ)(!1),[eu,ep]=(0,a.eJ)(!1),eh=(0,X.pm)(),{changeSetting:em}=(0,_.SE)(),ev="undefined"!=typeof window&&(null===(t=window._preloads)||void 0===t?void 0:t.original_url)?(0,z.x)(window._preloads.original_url,"token"):null,[ef,eb]=(0,a.eJ)(!1),[eg,eZ]=(0,a.eJ)(m.liveStream.scheduled_at?new Date(m.liveStream.scheduled_at):new Date),[ey,e_]=(0,a.eJ)(!1),[eC,ew]=(0,a.eJ)(null!==(l=null==G?void 0:G.email)&&void 0!==l?l:""),[eS,ek]=(0,a.eJ)(!1),[ex,eB]=(0,a.eJ)(!1),eI=!!$||"everyone"===m.liveStream.audience||"only_free"===m.liveStream.audience&&Object.values(D).some(e=>"free_signup"===e.membership_state||"subscribed"===e.membership_state)||"only_paid"===m.liveStream.audience&&Object.values(D).some(e=>"subscribed"===e.membership_state)||"only_founding"===m.liveStream.audience&&Object.values(D).some(e=>"subscribed"===e.membership_state&&e.is_founding),eN=(null==G?void 0:G.id)===m.liveStream.user_id,eX=m.liveStream.scheduled_at&&new Intl.DateTimeFormat(W,{month:"short",day:"numeric"}).format(new Date(m.liveStream.scheduled_at)),eP=m.liveStream.scheduled_at&&new Intl.DateTimeFormat(W,{hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(m.liveStream.scheduled_at)),eL=(0,P.k)(m.liveStream),ez=async()=>{e_(!0);try{await (0,w.rd)("/api/v1/live_stream/".concat(m.liveStream.id,"/schedule"),{method:"PUT",json:{scheduledAt:eg}}),eb(!1),eh.popToast(e=>(0,o.tZ)(X.FN,(0,r._)((0,n._)({},e),{text:J("Successfully updated live video schedule")}))),window.location.reload()}catch(e){alert((0,w.i)(e))}finally{e_(!1)}};return L?(0,o.BX)(h.C,{children:[(0,o.tZ)(x.sg,{alignItems:"center",gap:20,width:320,padding:24,children:"cancelled"===L.status?(0,o.BX)(o.HY,{children:[(0,o.tZ)(x.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(b,{size:32})}),(0,o.tZ)(x.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:J("This invite link is invalid")}),(0,o.tZ)(x.xv.B3,{color:"secondary",textAlign:"center",children:J("Ask the host to send another link if you think you should be able to join.")})]}):"accepted"===L.status||ex?(0,o.BX)(o.HY,{children:[(0,o.tZ)(x.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(s.Z,{stroke:"white",size:32})}),(0,o.BX)(x.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:[J("This live video starts")," ",eX," ",J("at")," ",eP]}),(0,o.tZ)(x.xv.B3,{color:"secondary",textAlign:"center",children:J("You'll need the Substack app to join.")}),(0,o.tZ)(x.zx,{priority:"primary",onClick:()=>{(0,M.tq)()?(0,S.uX)((0,T.bHR)({liveStreamId:m.liveStream.id,utm_source:E.b3.liveStreamScheduledUpsell,params:{appStoreRedirect:"true"}}),{local_navigation:!1}):Q(!0)},children:J("Join in app")})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(x.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(d.Z,{stroke:"white",size:32})}),(0,o.tZ)(x.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:q(j(),m.user.name)}),(0,o.tZ)(x.tu,{gap:12,width:"100%",children:(0,o.tZ)(N.H,{placeholder:J("Enter your email"),placement:"end",priority:"primary",disabled:!!(null==G?void 0:G.email),button:(0,o.tZ)(x.zx,{priority:"primary",loading:eS,onClick:async()=>{ek(!0);try{await (0,w.rd)("/api/v1/live_stream/".concat(m.liveStream.id,"/sms_invite/").concat(L.id,"/accept"),{method:"PUT",json:{email:eC}}),eh.popToast(e=>(0,o.tZ)(X.FN,(0,r._)((0,n._)({},e),{text:J("Successfully accepted SMS invite")}))),eB(!0)}catch(e){alert((0,w.i)(e))}finally{ek(!1)}},children:eS?"":J("Accept")}),value:eC,onChange:e=>ew(e.currentTarget.value)})})]})}),(0,o.tZ)(Y,{isOpen:K,onClose:()=>Q(!1),liveStream:m})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(h.C,{children:$&&"pending"!==$.status?(0,o.BX)(x.sg,{alignItems:"center",gap:20,width:320,padding:24,children:[(0,o.tZ)(x.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(b,{size:32})}),(0,o.tZ)(x.xv.B1,{color:"white",children:J("This invite link is invalid")}),(0,o.tZ)(x.xv.B3,{color:"secondary",textAlign:"center",children:J("If you think you should be able to join, please ask the host to send another link.")})]}):(0,o.BX)(x.sg,{alignItems:"center",gap:20,width:400,padding:24,children:[(0,o.tZ)(s.Z,{size:32}),(0,o.BX)(x.sg,{alignItems:"center",gap:8,children:[eX&&eP?(0,o.tZ)(x.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:q(F(),m.liveStream.title,eX,eP)}):(0,o.tZ)(x.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:J("This live video will start soon")}),(null==$?void 0:$.status)==="pending"?(0,o.tZ)(x.xv.B3,{color:"secondary",textAlign:"center",children:J("You’ll need the Substack app to join as a participant.")}):eI?null:(0,o.tZ)(x.xv.B3,{color:"secondary",textAlign:"center",children:J("Subscribe now to watch this live video when it starts")})]}),eN?(0,o.tZ)(x.zx,{priority:"secondary",onClick:()=>{m.liveStream.scheduled_at?eZ(new Date(m.liveStream.scheduled_at)):eZ(new Date),eb(!0)},children:J("Edit")}):$?(0,o.BX)(x.sg,{alignItems:"center",gap:8,children:[(0,o.tZ)(x.zx,{priority:"primary",onClick:()=>{(0,M.tq)()?(0,S.uX)((0,T.bHR)({liveStreamId:m.liveStream.id,utm_source:E.b3.liveStreamScheduledUpsell,params:{appStoreRedirect:"true"}}),{local_navigation:!1}):Q(!0)},children:J("Join in app")}),$&&"pending"===$.status?(0,o.tZ)(x.zx,{className:O.declineButton,priority:"secondary",loading:et,onClick:async()=>{ei(!0);try{let{liveStreamInvite:e}=await (0,w.rd)("/api/v1/live_stream/".concat(m.liveStream.id,"/invite/").concat(null==v?void 0:v.id,"/decline"),{method:"PUT",json:{token:ev}});ee(e),er(!0)}catch(e){alert((0,w.i)(e))}finally{ei(!1)}},children:J("Decline invite")}):null]}):G&&eI||!m.pub?(0,o.tZ)(x.sg,{alignItems:"center",gap:8,children:(0,o.tZ)(k.m,{priority:"primary",handleClick:e=>{(0,C.j)(C.FP.ADD_TO_CALENDAR_CLICKED,{liveStreamId:m.liveStream.id,surface:"live-stream-permalink",type:e})},event:eL,menuProps:{onOpen:()=>{(0,w.rd)("/api/v1/live_stream/".concat(m.liveStream.id,"/rsvp"),{method:"PUT",json:{token:ev}})}}})}):(0,o.tZ)(Z.Z,{pub:m.pub,user:G,freeSignup:["free_signup","subscribed"].includes(null!==(p=null===(i=D[m.pub.id])||void 0===i?void 0:i.membership_state)&&void 0!==p?p:""),foundingUpsell:"only_founding"===m.liveStream.audience})]})}),(0,o.BX)(I.u_,{isOpen:en,onClose:()=>er(!1),position:(0,M.tq)()?"bottom":"default",children:[(0,o.BX)(x.tu,{gap:20,padding:16,alignItems:"center",children:[(0,o.tZ)(x.hs,{bg:"accent-red",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(x.hs,{className:O.headerIcon,radius:"full",width:32,height:32,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(c.Z,{color:"white"})})}),(0,o.BX)(x.tu,{gap:4,children:[(0,o.tZ)(x.xv.B1,{fontWeight:"medium",textAlign:"center",children:J("Invite declined")}),(0,o.tZ)(x.xv.B3,{color:"secondary",textAlign:"center",children:J("You will no longer receive notifications for this live video")})]}),(0,o.tZ)(x.iz,{className:O.divider})]}),(0,o.BX)(x.tu,{gap:24,paddingX:16,paddingY:12,children:[(0,o.BX)(x.hs,{gap:12,alignItems:"center",children:[(0,o.tZ)(x.hU,{disabled:ea,onClick:async()=>{es(!0);try{await (0,w.rd)("/api/v1/blocks/".concat(m.user.id),{method:"POST",json:{type:"block",surface:"live-stream-scheduled-card",token:ev}}),eh.popToast(e=>(0,o.tZ)(X.FN,(0,r._)((0,n._)({},e),{text:q(A(),m.user.name)}))),eo(!0)}catch(e){alert((0,w.i)(e))}finally{es(!1)}},size:"md",children:ea?(0,o.tZ)(x.X4,{priority:"secondary"}):el?(0,o.tZ)(u.Z,{size:24}):(0,o.tZ)(f,{size:24})}),(0,o.tZ)(x.xv.B3,{fontWeight:"medium",fontSize:15,children:q(H(),m.user.name)})]}),(0,o.BX)(x.hs,{gap:12,children:[(0,o.tZ)(x.hU,{disabled:eu,onClick:async()=>{ep(!0);try{await em("liveStreamAcceptableInviteLevel","follows_and_subscriptions","text",{token:ev}),eh.popToast(e=>(0,o.tZ)(X.FN,(0,r._)((0,n._)({},e),{text:q(U())}))),ec(!0)}catch(e){alert((0,w.i)(e))}finally{ep(!1)}},size:"md",children:eu?(0,o.tZ)(x.X4,{priority:"secondary"}):ed?(0,o.tZ)(u.Z,{size:24}):(0,o.tZ)(g,{size:24})}),(0,o.BX)(x.tu,{children:[(0,o.tZ)(x.xv.B3,{fontWeight:"medium",fontSize:15,children:q(R())}),(0,o.tZ)(x.xv.B3,{color:"secondary",children:q(V())})]})]})]}),(0,o.tZ)(x.hs,{padding:16,children:(0,o.tZ)(x.zx,{flex:"grow",priority:"secondary",onClick:()=>er(!1),children:J("Done")})})]}),(0,o.tZ)(Y,{isOpen:K,onClose:()=>Q(!1),liveStream:m}),(0,o.BX)(I.u_,{isOpen:ef,onClose:()=>eb(!1),children:[(0,o.tZ)(I.xB,{title:J("Edit scheduled time"),showDivider:!0,showClose:!0,onClose:()=>eb(!1)}),(0,o.tZ)(I.fe,{children:(0,o.BX)(x.tu,{gap:8,children:[(0,o.tZ)(x.xv.B3,{children:J("Date")}),(0,o.tZ)(B.Tz,{value:eg||new Date,onChange:e=>{eZ(new Date(e.currentTarget.value))}})]})}),(0,o.tZ)(I.mz,{showDivider:!0,primaryButton:(0,o.tZ)(x.zx,{priority:"primary",disabled:!(!m.liveStream.scheduled_at||new Date(m.liveStream.scheduled_at).getTime()!==eg.getTime())||ey,onClick:ez,loading:ey,children:J("Save changes")}),secondaryButton:(0,o.tZ)(x.zx,{priority:"secondary",onClick:()=>eb(!1),disabled:ey,children:J("Cancel")})})]})]})},Y=e=>{let{isOpen:t,onClose:i,liveStream:n}=e,{iString:r}=(0,y.M1)(),l=(0,_.aF)(),a=(0,T.bHR)({liveStreamId:n.liveStream.id,utm_source:E.b3.liveStreamScheduledUpsell});return(0,o.BX)(I.u_,{isOpen:t,onClose:i,children:[(0,o.tZ)(I.xB,{title:r("Open in app"),description:r("Scan the code below to open this live video in the app"),showDivider:!0,alignItems:"center",showClose:!0,onClose:i}),(0,o.tZ)(I.fe,{children:(0,o.tZ)(x.tu,{gap:16,alignItems:"center",children:(0,o.tZ)(x.sg,{border:"detail",radius:"lg",bg:"primary",padding:4,shadow:"md",children:(0,o.tZ)(p.AppStoreQrCode,{utm_source:E.b3.liveStreamScheduledUpsell,openUrl:(null==l?void 0:l.reader_installed_at)?a:void 0})})})}),(0,o.tZ)(I.mz,{direction:"column",showDivider:!0,primaryButton:(0,M.tq)()?(0,o.tZ)(x.zx,{priority:"primary",href:(0,L.D4e)({utm_source:E.b3.liveStreamScheduledUpsell}),children:r("Get the app")}):(0,o.tZ)(x.zx,{priority:"secondary",onClick:i,children:r("Done")})})]})}},64797:function(e,t,i){i.d(t,{P:()=>b,r:()=>g});var n=i(16584),r=i(30396),l=i(23279),o=i.n(l),a=i(47348),s=i(59488),d=i(80026),c=i(74571),u=i(18618);let p=e=>{let{isVisible:t,onVisibilityChange:i,videoRef:l}=e;return(0,r.d4)(()=>{var e;let t=e=>{e.target.muted&&(i(!0),setTimeout(()=>i(!1),6e3))},n=null===(e=l.current)||void 0===e?void 0:e.player;return n&&n.addEventListener("playing",t),()=>{n&&n.removeEventListener("playing",t)}},[]),(0,n.tZ)("div",{className:"unmuteOverlayContainer-WcXkPG",style:{opacity:+!!t,pointerEvents:t?"auto":"none",transition:"opacity 0.5s ease"},onClick:()=>{var e;(null===(e=l.current)||void 0===e?void 0:e.player)&&(l.current.player.muted=!1,i(!1))},children:(0,n.tZ)(u.KY,{})})};var h=i(61527),m=i(24054);let v={liveStreamVideoZoom:"liveStreamVideoZoom-_qvCom"},f={canvas:null,ctx:null},b=e=>{var t,i;let{disableZoom:l,liveStream:u,handle:b,autoPlay:g}=e,Z=(0,r.sO)(!0),y=(0,r.sO)(null),_=(0,r.sO)(null),[C,w]=(0,r.eJ)(!!u.liveStream.is_rtmp&&"9:16"===u.liveStream.mux_aspect_ratio),[S,k]=(0,r.eJ)("undefined"!=typeof window&&!u.liveStream.is_rtmp&&window.innerWidth/window.innerHeight<1.2),[x,B]=(0,r.eJ)(!1),{isIdle:I}=(0,s.c)({idleAfter:2e3,element:_.current}),N=(0,c.Ml)(_);return(0,r.d4)(()=>{var e;let t=null===(e=y.current)||void 0===e?void 0:e.player;if(t){t.playbackRate=1;let e=()=>{t.paused&&(t.currentTime<t.duration-1&&(t.currentTime=t.duration-1),t.play())};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}},[y,null===(t=y.current)||void 0===t?void 0:t.player]),(0,r.d4)(()=>{if(u.liveStream.is_rtmp&&"9:16"===u.liveStream.mux_aspect_ratio)return;let e=setInterval(()=>{var e;(null===(e=y.current)||void 0===e?void 0:e.player)&&w(function(e){if(f.canvas||(f.canvas=document.createElement("canvas")),f.ctx||(f.ctx=f.canvas.getContext("2d")),!f.ctx)return!1;f.canvas.width=f.canvas.height=3;try{var t,i,n,r,l,o;f.ctx.drawImage(e,0,0,3,3);let a=f.ctx.getImageData(0,1,1,1),s=f.ctx.getImageData(2,1,1,1);return(null!==(t=null==a?void 0:a.data[0])&&void 0!==t?t:0)+(null!==(i=null==a?void 0:a.data[1])&&void 0!==i?i:0)+(null!==(n=null==a?void 0:a.data[2])&&void 0!==n?n:0)+(null!==(r=null==s?void 0:s.data[0])&&void 0!==r?r:0)+(null!==(l=null==s?void 0:s.data[1])&&void 0!==l?l:0)+(null!==(o=null==s?void 0:s.data[2])&&void 0!==o?o:0)<7}catch(e){return!1}}(y.current.player))},250);return()=>clearInterval(e)},[null===(i=y.current)||void 0===i?void 0:i.player]),(0,r.d4)(()=>{if(u.liveStream.is_rtmp)return;let e=o()(()=>{"undefined"!=typeof window&&window.innerWidth/window.innerHeight<1.2?k(!0):k(!1)},100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.d4)(()=>{var e,t,i,n,r,l;if(Z.current){Z.current=!1;return}null===(e=y.current)||void 0===e||e.refreshVideoSrc(),(null===(t=y.current)||void 0===t?void 0:t.player)&&(null===(n=y.current)||void 0===n?void 0:null===(i=n.player)||void 0===i?void 0:i.duration)>1&&(y.current.player.currentTime=(null===(l=y.current)||void 0===l?void 0:null===(r=l.player)||void 0===r?void 0:r.duration)-1)},[S]),(0,n.BX)(n.HY,{children:[(0,n.tZ)(a.j,{autoPlay:g,className:(S||C)&&!l?v.liveStreamVideoZoom:"",ref:y,portrait:S,noKeyboardShortcuts:!0,noControls:!0,liveStreamId:u.liveStream.id,pub:u.pub||null,mediaUpload:{id:"ls-".concat(u.liveStream.id),width:S?m.tV:m.Sb,height:S?m.bI:m.rx},isLive:!0,showPreviewWhenPaused:!0},!0),(0,n.tZ)(d.xu,{position:"absolute",style:{left:0,right:0,bottom:0},children:(0,n.tZ)(h.Vo,{forLiveStream:!0,disableCaptions:!0,disableShortcuts:!0,disableTooltips:!0,disableSharing:!0,hideCaptions:!0,hidePip:!0,handle:b,hasPaywall:!1,hasTranscript:!1,hideNextVideoButton:!1,isActive:!I&&!x,isFocused:N,mediaRef:y,mediaUpload:{id:"ls-".concat(u.liveStream.id),width:1920,height:1080},podcastUpload:null,pub:null,showPaywall:!1,showTranscript:!1,onToggleShowTranscript:()=>{},autoPlayMuted:!1})}),(0,n.tZ)(p,{isVisible:x,onVisibilityChange:e=>B(e),videoRef:y})]})},g=e=>{let{liveStream:t}=e;return(0,n.tZ)("img",{src:t.liveStreamInformation.desktopThumbnailGifUrl,style:{width:"100%"}})}},11879:function(e,t,i){i.d(t,{R:()=>a});var n=i(30396),r=i(48980),l=i(92039),o=i(98012);let a=e=>{var t,i;let{liveStream:a}=e,s=(0,l.rG)(),[d,c]=(0,n.eJ)(null),[u,p]=(0,n.eJ)(a),[h,m]=(0,n.eJ)(null);return(0,n.d4)(()=>{p(a)},[a]),(0,n.d4)(()=>{if(!u||"scheduled"!==u.liveStream.status)return;let e=(0,o.Z)(u.liveStream.scheduled_at),t=(0,o.Z)();if(9e5>e.diff(t)){let e=setInterval(()=>{(0,r.rd)("/api/v1/live_stream/".concat(u.liveStream.id)).then(e=>{"scheduled"!==e.activeLiveStream.liveStream.status&&(c(null),m(e.activeLiveStream))}).catch(e=>{console.error(e)})},1e3);c(e)}return null==s?void 0:s.listen({["live-stream:".concat(u.liveStream.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:started"&&((0,r.rd)("/api/v1/live_stream/".concat(u.liveStream.id)).then(e=>{m(e.activeLiveStream)}).catch(e=>{console.error(e)}),d&&c(null))}})},[null==u?void 0:null===(t=u.liveStream)||void 0===t?void 0:t.id,null==u?void 0:null===(i=u.liveStream)||void 0===i?void 0:i.status,s]),(0,n.d4)(()=>{if(h){let e=h.liveStream.is_rtmp?h.liveStreamInformation.playbackUrl:h.liveStreamInformation.desktopPlaybackUrl;if(e){let t=setInterval(()=>{(0,r.rd)(e).then(()=>{c(null),p(h),m(null)})},1e3);c(t)}}},[h]),(0,n.d4)(()=>()=>{d&&clearInterval(d)},[d]),{liveStream:u,setLiveStream:p}}},38188:function(e,t,i){i.d(t,{Y:()=>ik,G:()=>ix});var n=i(7409),r=i(99282),l=i(16584),o=i(30396),a=i(3312),s=i.n(a),d=i(25380),c=i(92828),u=i(31122),p=i(77228),h=i(19548),m=i(35543),v=i(85095),f=i(40647),b=i(60807),g=i(68833),Z=i(21811),y=i(9682),_=i(98914),C=i(19081),w=i(70379),S=i(58865),k=i(83034),x=i(33665),B=i(75744),I=i(95441),N=i(6490),X=i(38841),P=i(58175),L=i(26111),z=i(63651),T=i(47929);let M={tos:"tos-fWRMR_",subscribeWidgetContainer:"subscribeWidgetContainer-xBr6Eu",mainPubAvatar:"mainPubAvatar-jsZ95u",invitedPubAvatar:"invitedPubAvatar-OPhB0e",pubAvatars:"pubAvatars-nTTf2Z"};function E(){let e=(0,S._)([""," and ",""]);return E=function(){return e},e}function O(){let e=(0,S._)([""," by ",""]);return O=function(){return e},e}let j=e=>{let{profile:t,activeLiveStream:i,subscriptionToLiveStreamPub:n,invitedLiveStreamPublications:r,subscriptionsToLiveStreamInvitedPub:a,freeSignup:s,freeSignupEmail:d}=e,[c,u]=(0,o.eJ)(!0);return(0,l.tZ)(F,{profile:t,activeLiveStream:i,subscriptionToLiveStreamPub:n,isOpen:c,onClose:()=>u(!1),freeSignup:s,freeSignupEmail:d,invitedLiveStreamPublications:r,subscriptionsToLiveStreamInvitedPub:a})},F=e=>{var t,i,n,r,a,s,d,c,u,p,h,m,v;let{profile:f,activeLiveStream:Z,subscriptionToLiveStreamPub:y,isOpen:_,onClose:w,freeSignup:S,freeSignupEmail:j,invitedLiveStreamPublications:F,subscriptionsToLiveStreamInvitedPub:A}=e,H=(0,z.bHR)({liveStreamId:Z.liveStream.id,utm_source:T.b3.web,utm_campaign:T.VX.profileLiveStream,params:{appStoreRedirect:!0}}),[U,R]=(0,o.eJ)(!1),{iTemplate:V}=(0,I.M1)(),D=(0,b.aF)(),Y=Z.pub,W=Object.entries(null!=A?A:{}).find(e=>{var t;let[i,n]=e;return["free_signup","subscribed"].includes(null!==(t=n.membership_state)&&void 0!==t?t:"unsubscribed")}),J=!["free_signup","subscribed"].includes(null!==(h=null==y?void 0:y.membership_state)&&void 0!==h?h:"unsubscribed")&&(null==F?void 0:F.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==W?void 0:W[0])===e.id)),q=Object.entries(null!=A?A:{}).find(e=>{let[t,i]=e;return"free_signup"===i.membership_state}),G=(null==y?void 0:y.membership_state)!=="free_signup"&&(null==F?void 0:F.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==q?void 0:q[0])===e.id)),{version:K,showLogo:Q,Header:$,Subtext:ee,CTA:et,invitedPub:ei=null}=!Y||"only_founding"!==Z.liveStream.audience||(null==y?void 0:y.membership_state)==="subscribed"&&(null==y?void 0:y.is_founding)||(null==W?void 0:null===(t=W[1])||void 0===t?void 0:t.membership_state)==="subscribed"&&(null==W?void 0:null===(i=W[1])||void 0===i?void 0:i.is_founding)?Y&&"only_paid"===Z.liveStream.audience&&(null==y?void 0:y.membership_state)!=="subscribed"&&(null==q?void 0:null===(a=q[1])||void 0===a?void 0:a.membership_state)!=="subscribed"?{version:"paywall",showLogo:!1,invitedPub:G,Header:(0,l.BX)(P.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["This live video is for paid subscribers of"," ",I18N.p(G?G.name:Y.name)]}),Subtext:(0,l.tZ)(P.xv.B3,{align:"center",translated:!0,children:"Choose a paid subscription to watch"}),CTA:(0,l.BX)(C.tu,{className:M.subscribeWidgetContainer,alignItems:"stretch",padding:20,children:[(0,l.tZ)(x.Z,{freeSignup:S||(null==y?void 0:y.membership_state)==="free_signup"||(null==F?void 0:F.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==q?void 0:q[0])===e.id))&&(null==q?void 0:null===(s=q[1])||void 0===s?void 0:s.membership_state)==="free_signup",freeSignupEmail:j,isStatic:!1,pub:G||Y,source:T.b3.profileLiveStream,user:D}),(0,l.tZ)(B.fJ,{className:M.tos,publication:Y})]})}:!Y||"only_free"!==Z.liveStream.audience||["subscribed","free_signup"].includes((null==y?void 0:y.membership_state)||"unsubscribed")||Object.values(null!=A?A:{}).every(e=>["subscribed","free_signup"].includes(e.membership_state||"unsubscribed"))||S?{version:"open app",showLogo:!1,Header:(0,l.BX)(P.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["Watch ",I18N.p(f.name),"'s live video in the Substack app"]}),Subtext:(0,l.tZ)(P.xv.B3,{align:"center",translated:!0,children:"Available now for iOS and Android"}),CTA:(0,l.tZ)(k.AppInstallContent,{hideEmailPrompt:!0,utm_campaign:"profile-live-stream",utm_source:"web",openUrl:H})}:{version:"freewall",showLogo:!!(null==F?void 0:F.length),Header:(0,l.BX)(P.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["Subscribe for free to watch"," ",I18N.p(Z.liveStream.title)]}),Subtext:(0,l.tZ)(P.xv.B3,{align:"center",color:"secondary",children:(null==F?void 0:F.find(e=>e.name))?V(E(),Y.name,(null===(d=F.find(e=>e.name))||void 0===d?void 0:d.name)||""):Y.author_name?V(O(),Y.name,Y.author_name):Y.name}),CTA:(0,l.BX)(C.tu,{className:M.subscribeWidgetContainer,alignItems:"stretch",padding:20,children:[(0,l.tZ)(x.Z,{freeSignup:S||(null==y?void 0:y.membership_state)==="free_signup"||Object.values(null!=A?A:{}).some(e=>"free_signup"===e.membership_state),freeSignupEmail:j,isStatic:!1,pub:Y,additionalPubIds:(null==F?void 0:F.find(e=>e.name))?[null===(c=F.find(e=>e.name))||void 0===c?void 0:c.id].filter(e=>!!e):[],source:T.b3.profileLiveStream,user:D,onSignup:()=>{U||window.location.reload()},onConfirmationRequired:()=>{window.location.search+="&requires_confirmation=true",R(!0)}}),(0,l.tZ)(B.fJ,{className:M.tos,publication:Y})]})}:{version:"founding paywall",showLogo:!1,invitedPub:J,Header:(0,l.BX)(P.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["This live video is for founding subscribers of"," ",I18N.p(J?J.name:Y.name)]}),Subtext:(0,l.tZ)(P.xv.B3,{align:"center",translated:!0,children:"Choose a founding subscription to watch"}),CTA:(0,l.BX)(C.tu,{className:M.subscribeWidgetContainer,alignItems:"stretch",padding:20,children:[(0,l.tZ)(x.Z,{freeSignup:S||(null==y?void 0:y.membership_state)==="free_signup"||(null==y?void 0:y.membership_state)==="subscribed"||(null==F?void 0:F.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==W?void 0:W[0])===e.id))&&((null==W?void 0:null===(n=W[1])||void 0===n?void 0:n.membership_state)==="free_signup"||(null==W?void 0:null===(r=W[1])||void 0===r?void 0:r.membership_state)==="subscribed"),freeSignupEmail:j,isStatic:!1,pub:J||Y,source:T.b3.profileLiveStream,user:D,foundingUpsell:!0}),(0,l.tZ)(B.fJ,{className:M.tos,publication:Y})]})};return((0,o.d4)(()=>{if(_){var e;(0,g.j)(g.FP.LIVE_STREAM_UPSELL_MODAL_SEEN,{live_stream_id:Z.liveStream.id,publication_id:null===(e=Z.pub)||void 0===e?void 0:e.id,version:K})}},[_,K,Z.liveStream.id,null===(u=Z.pub)||void 0===u?void 0:u.id]),(0,L.x)("requires_confirmation"))?(0,l.BX)(N.u_,{isOpen:_,onClose:w,children:[(0,l.tZ)(N.xB,{showClose:!0,onClose:w,icon:Q&&ei&&(null==ei?void 0:ei.logo_url)&&(null===(m=Z.pub)||void 0===m?void 0:m.logo_url)?(0,l.BX)(C.tu,{className:M.pubAvatars,alignItems:"center",children:[(0,l.tZ)(X.wk,{className:M.invitedPubAvatar,pub:ei,size:48}),(0,l.tZ)(X.wk,{className:M.mainPubAvatar,pub:Z.pub,size:48})]}):void 0}),(0,l.tZ)(N.fe,{children:(0,l.BX)(C.tu,{gap:4,children:[(0,l.tZ)(P.xv.H4,{weight:"heavy",align:"center",translated:!0,children:"Confirm your email address"}),(0,l.BX)(P.xv.B3,{align:"center",translated:!0,children:["We sent an email to"," ",I18N.p(null!==(v=j||(null==D?void 0:D.email))&&void 0!==v?v:"")," with a confirmation link. Click the link to finish your subscription."]})]})})]}):(0,l.BX)(N.u_,{isOpen:_,onClose:w,children:[(0,l.tZ)(N.xB,{showClose:!0,onClose:w,icon:Q&&ei&&(null==ei?void 0:ei.logo_url)&&(null===(p=Z.pub)||void 0===p?void 0:p.logo_url)?(0,l.BX)(C.tu,{className:M.pubAvatars,alignItems:"center",children:[(0,l.tZ)(X.wk,{className:M.invitedPubAvatar,pub:ei,size:48}),(0,l.tZ)(X.wk,{className:M.mainPubAvatar,pub:Z.pub,size:48})]}):void 0}),(0,l.tZ)(N.fe,{children:(0,l.BX)(C.tu,{gap:4,children:["active"===Z.liveStream.status?$:(0,l.BX)(P.xv.H4,{weight:"heavy",align:"center",translated:!0,children:[I18N.p(f.name),"'s live video has ended. Download the app so you can join next time"]}),ee]})}),et]})};var A=i(88817),H=i(32351),U=i(60308);function R(e){var t,i;let{profile:n,activeLiveStream:r}=e,o=(null==n?void 0:n.max_pub_tier)===2,a=!!(null==n?void 0:n.profile_set_up_at);return(0,l.tZ)(H.Metadata,{title:r?"LIVE NOW: ".concat(n.name||r.user.name||(null===(i=r.pub)||void 0===i?void 0:i.name)," on Substack"):"".concat(n.name||"<no name>"," | Substack"),description:(null==r?void 0:null===(t=r.pub)||void 0===t?void 0:t.name)||n.bio,image:r?(0,z.VCE)(r.liveStream.id,{isGif:!0}):n&&n.photo_url&&(0,U.zF4)(n.photo_url),seoProps:{noindex:!o||!n.photo_url&&!n.bio&&!a}})}var V=i(73525),D=i(15771),Y=i(61254),W=i(65575);function J(){let e=(0,S._)([""," blocked you"]);return J=function(){return e},e}function q(){let e=(0,S._)(["You are blocked from subscribing to "," and their publications"]);return q=function(){return e},e}function G(){let e=(0,S._)(["You blocked ",""]);return G=function(){return e},e}function K(){let e=(0,S._)(["You can manage your blocks in your account settings."]);return K=function(){return e},e}function Q(e){let{profile:t}=e,{iTemplate:i}=(0,I.M1)();return(0,l.BX)(C.sg,{gap:32,children:[(0,l.tZ)(Y.iz,{}),(0,l.tZ)(W._Y,{icon:(0,l.tZ)(V.Z,{}),title:i(J(),t.name||"This user"),text:i(q(),t.name||"this user")})]})}function $(e){let{profile:t}=e,{iString:i,iTemplate:n}=(0,I.M1)();return(0,l.BX)(C.sg,{gap:32,children:[(0,l.tZ)(Y.iz,{}),(0,l.tZ)(W._Y,{icon:(0,l.tZ)(V.Z,{}),title:n(G(),t.name||"this user"),text:n(K()),action:(0,l.tZ)(D.zx,{priority:"secondary",href:(0,U.v3t)(),children:i("Account settings")})})]})}var ee=i(39693),et=i.n(ee),ei=i(99259),en=i(69891),er=i(47976),el=i(42375),eo=i(81914),ea=i(883),es=i(12765),ed=i(7882),ec=i(27744),eu=i(70293),ep=i(84864);function eh(e){var t;let i,{profile:a,type:s="notes"}=e;(0,o.d4)(()=>{(0,g.j)(g.FP.FEED_PROFILE_SCREEN_VIEWED,{target_user_id:a.id})},[]);let d=(0,b.aF)(),c=(0,ei.M$)().isOnDestination,u=!d&&c,[p,m]=(0,es.L)(ec.K5,ec._H);"likes"===s?i=["like"]:"notes"===s?i=void 0:console.warn("Unrecognized type in NotesList: ".concat(s));let{canFetchMore:v,lastPage:f,fetchMore:Z,hasLoadedOnce:y}=(0,ed.NL)({pathname:"/api/v1/reader/feed/profile/".concat(a.id),query:{types:i},getPageInit:e=>{var t;let{lastPage:i,init:l}=e,o=null==i?void 0:null===(t=i.result)||void 0===t?void 0:t.nextCursor;return o&&(l.query=(0,r._)((0,n._)({},l.query),{cursor:o})),l},auto:!0,deps:[a.id,s],pages:p.pages,dispatch:m}),_=v&&!!(null==f?void 0:null===(t=f.result)||void 0===t?void 0:t.nextCursor)&&!u,{bodyRef:w}=(0,eu.M)(Z,[f],{shouldCheck:_,threshold:640}),S=p.pages.map(e=>{var t;return(null===(t=e.result)||void 0===t?void 0:t.items)||[]}).flat(),k=u&&S.length>2;k&&(S=S.slice(0,3));let x=a&&a.id===(null==d?void 0:d.id);return(0,o.d4)(()=>{var e;(null==f?void 0:null===(e=f.result)||void 0===e?void 0:e.items.length)===0&&_&&Z()},[f]),(0,l.tZ)(el.$U,{surface:"profile",dispatch:m,state:p,children:(0,l.BX)(C.tu,{ref:w,children:[(0,l.tZ)(h.fQ,{children:S.map((e,t)=>(0,l.tZ)(eo.Bm,{item:(0,ec.K6)(p,e),showLoginPrompt:!!(k&&2===t)}))}),(null==f?void 0:f.isLoading)||!y?(0,l.tZ)(ea.n,{}):0===S.length?(0,l.tZ)(C.hs,{paddingY:64,flex:"grow",children:"notes"===s?(0,l.tZ)(em,{yourProfile:x}):(0,l.tZ)(ev,{profile:a,yourProfile:x})}):null]})})}function em(e){let{yourProfile:t}=e;return(0,l.tZ)(W._Y,{icon:(0,l.tZ)(er.Z,{}),title:t?"You haven’t published any notes yet.":"This user hasn’t published any notes yet.",text:t?"Once you do, you’ll see them here.":"Once they do, you’ll see them here.",action:(0,l.tZ)(D.zx,{priority:"secondary",href:(0,U.E2n)(),children:"Explore more notes"})})}function ev(e){let{yourProfile:t,profile:i}=e,n=(0,ep.guessFirstName)(i.name);return(0,l.tZ)(W._Y,{title:"No likes yet",text:t?"Your likes will appear here.":n?"".concat(n,"’s likes will appear here."):"Their likes will appear here."})}var ef=i(98248),eb=i(19801);function eg(e){var t,i;let{profile:n,userId:r}=e,[a,s]=(0,o.eJ)(0),[d,c]=(0,o.eJ)([]),u=(0,b.aF)(),p=(0,ei.M$)().isOnDestination,h=!u&&p,{result:m,isLoading:v}=(0,ed.ib)({pathname:"/api/v1/profile/posts",query:{profile_user_id:r,offset:a,limit:13},auto:!0,deps:[r,a]}),f=h&&((null===(i=d[0])||void 0===i?void 0:null===(t=i.posts)||void 0===t?void 0:t.length)||0)>2;(0,o.bt)(()=>{m&&c(0===a?[m]:[...d,m])},[m]);let Z=(0,o.Ye)(()=>{let e=d.map(e=>e.posts.slice(0,12)).flat();return f&&(e=e.slice(0,3)),{posts:e,publicationMap:new Map(d.map(e=>e.publications).flat().map(e=>[e.id,e]))}},[d]),y=d[d.length-1],w=y&&y.posts.length>12&&!h,{bodyRef:S}=(0,eu.M)(()=>{s(a+12)},[Z,v],{shouldCheck:!!w&&!v}),{posts:k,publicationMap:x}=Z;return(0,l.tZ)(C.tu,{children:(0,l.BX)(W.mE,{ref:S,children:[m?k.length>0?k.map((e,t)=>{let i=x.get(e.publication_id);if(i){let r="profile"===i.homepage_type&&n.handle?(0,z.e3o)({postId:e.id,handle:n.handle,noBase:!1}):null;return(0,l.tZ)(eb.nK,{post:e,pub:i,isViewed:!0,isLiked:!!e.reaction,isSaved:e.is_saved,showLoginPrompt:!!(f&&2===t),onClick:r=>{if((0,g.j)(g.FP.ARCHIVE_PAGE_POST_CLICKED,{post_id:e.id,tab:"new",rank_in_feed:t,source:"profile"}),r.ctrlKey||r.metaKey)return;r.preventDefault(),r.stopPropagation();let l=p?(0,z.e3o)(n.handle?{postId:e.id,handle:n.handle,noBase:!0}:{readerProfileUser:n,postId:e.id,noBase:!0}):(0,z.uRy)(i,e,{noBase:!1});(0,_.uX)(l)},utmSource:"profile",openInPostViewer:!0,canonicalUrl:r},e.id)}}):(0,l.tZ)(eZ,{profile:n}):(0,l.tZ)(eb.Zg,{}),v&&(0,l.tZ)(ef.$j,{})]})})}function eZ(e){let{profile:t}=e,i=(0,b.aF)(),n=t&&t.id===(null==i?void 0:i.id);return(0,l.tZ)(C.hs,{paddingY:64,flex:"grow",children:(0,l.tZ)(W._Y,{icon:(0,l.tZ)(er.Z,{}),title:"".concat(n?"You haven’t":"".concat(t.name," hasn’t")||"This user hasn’t"," published any posts yet."),text:"Once they do, you’ll see them here."})})}var ey=i(78796),e_=i(71375),eC=i(44424),ew=i(78446),eS=i(43254),ek=i(36186),ex=i(59065);function eB(e){let{subscriptions:t,profile:i}=e,n=(0,b.aF)(),r=i.id===(null==n?void 0:n.id);return 0===t.length?(0,l.tZ)(C.hs,{paddingY:64,flex:"grow",children:r?i.hasHiddenPublicationUsers?(0,l.tZ)(W._Y,{title:"All of your publications are hidden.",text:"Edit your profile to show others what you read.",action:(0,l.tZ)(D.zx,{priority:"secondary",href:(0,U.qvS)(),children:"Edit profile"})}):(0,l.tZ)(W._Y,{title:"You haven’t subscribed to any publications yet.",text:"Visit Explore to find something to read.",action:(0,l.tZ)(D.zx,{priority:"secondary",href:(0,U._P8)(),children:"Explore"})}):(0,l.tZ)(W._Y,{title:"".concat(i.name," doesn’t have any subscriptions to show."),text:"Visit Explore to find something to read.",action:(0,l.tZ)(D.zx,{priority:"secondary",href:(0,U._P8)(),children:"Explore"})})}):(0,l.tZ)(C.tu,{flex:"fill",gap:{desktop:8,mobile:0},padding:8,children:t.map(e=>(0,l.tZ)(eI,{subscription:e},e.id))})}function eI(e){let{subscription:t}=e,i=t.is_founding?"founder":"subscribed"===t.membership_state?"subscribed":null,{publication:n}=t,{author:r}=n,o=(0,eS._F)({publication:n,subscriptionSource:T.b3.profileSubscriptions}),a="profile"===n.homepage_type&&r&&r.handle?(0,ek.NJ)(r.handle):(0,U.TJI)(n);return(0,l.BX)(C.gq,{as:"a",href:a,gap:12,alignItems:"center",paddingY:8,paddingX:8,className:ex.Z.readsRow,minWidth:0,flex:"grow",children:[(0,l.tZ)(X.wk,{pub:n,size:40,badgeType:i}),(0,l.BX)(C.tu,{flex:"grow",minWidth:0,children:[(0,l.tZ)(P.xv.B4,{ellipsis:!0,weight:"semibold",color:"primary",children:n.name}),r&&(0,l.BX)(P.xv.B4,{ellipsis:!0,color:"secondary",children:["by ",r.name]})]}),o.isSubscribed?(0,l.tZ)(eN,{onUnsubscribe:o.unsubscribe,publication:n,button:(0,l.tZ)(D.zx,{priority:"secondary",size:"sm",children:"Subscribed"})}):(0,l.tZ)(D.zx,{priority:"primary",size:"sm",onClick:o.subscribe,children:"Subscribe"})]})}function eN(e){let{onUnsubscribe:t,publication:i,button:n,manageOnly:r,isPledged:o}=e,a=(0,ew.N4)(),s=async()=>{!a.isConfirming&&await a.confirm()&&t()};return(0,l.BX)(l.HY,{children:[(0,l.tZ)(ew.sm,{modal:a,title:"Unsubscribe from ".concat(i.name,"?"),body:o?"Unsubscribing will also cancel your pledge.":"You can resubscribe at any time.",cancelLabel:"Cancel",confirmLabel:"Unsubscribe"}),(0,l.BX)(eC.v2,{trigger:n,children:[(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(ey.Z,{}),target:"_blank",href:(0,U.mGw)(i,{addBase:!0}),children:"Manage subscription"}),r?null:(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e_.Z,{}),onClick:s,priority:"destructive",children:"Unsubscribe"})]})]})}var eX=i(32224),eP=i(38202),eL=i(70839);let ez=e=>{let{lists:t,reads:i,ownProfile:n}=e,[r,a]=(0,o.eJ)(!1),[s,d]=(0,o.eJ)(null!=t?t:[]);return(0,o.d4)(()=>{(0,g.j)(g.FP.LIST_PROFILE_TAB_SEEN)}),(0,l.BX)(C.tu,{flex:"fill",gap:16,padding:8,children:[n&&(0,l.tZ)(eM,{openModal:()=>a(!0)}),null==s?void 0:s.map(e=>(0,l.tZ)(eT,{list:e})),(0,l.tZ)(eL.x,{open:r,close:e=>{e&&d([...s,e]),a(!1)},reads:i})]})},eT=e=>{let{list:t}=e,{iPlural:i}=(0,I.M1)();return(0,l.tZ)("a",{href:"".concat((0,z.SVA)(),"/list/").concat(t.slug),target:"_blank",rel:"noopener",onClick:()=>(0,g.j)(g.FP.LIST_PROFILE_TAB_LIST_CLICKED,{list_id:t.id}),children:(0,l.BX)(C.gq,{alignItems:"start",justifyContent:"center",gap:12,children:[(0,l.tZ)(eP.t,{src:(0,z.cKK)(t),width:40,height:40,className:"previewImage-gPZ7_D"}),(0,l.BX)(C.tu,{minWidth:0,flex:"grow",children:[(0,l.tZ)(P.xv.B4,{weight:"semibold",ellipsis:!0,children:t.name}),(0,l.tZ)(P.xv.B4,{color:"secondary",ellipsis:!0,children:i("1 item","%1 items",t.publications.length)})]})]})})},eM=e=>{let{openModal:t}=e;return(0,l.BX)(C.gq,{alignItems:"center",justifyContent:"start",gap:8,cursor:"pointer",onClick:t,children:[(0,l.tZ)(D.hU,{priority:"secondary-outline",children:(0,l.tZ)(eX.Z,{size:20})}),(0,l.tZ)(P.xv.B3,{translated:!0,weight:"medium",children:"Create new list"})]})},eE=new Set(["notes","posts","likes","lists","reads"]);function eO(e){let{subscriptions:t,profile:i,subpath:n}=e,[r,o]=(0,y.tv)(),a=(0,b.aF)(),{getConfigFor:s}=(0,f.xR)(),d=s("lists_enabled"),c=(0,ei.M$)().isOnDestination,u=n?n.slice(1):void 0,p=u&&eE.has(u)?u:i.hasActivity?"notes":i.hasPosts?"posts":i.hasLikes?"likes":(null==i?void 0:i.lists)&&d?"lists":"reads",h=et()([{value:"notes",label:"Activity"},{value:"posts",label:"Posts"},{value:"likes",label:"Likes"},d?{value:"lists",label:"Lists"}:null,{value:"reads",label:"Reads".concat(i.visibleSubscriptionsCount>0?" (".concat(i.visibleSubscriptionsCount,")"):"")}]);return(0,l.BX)(C.tu,{children:[(0,l.tZ)(en.n,{tabs:h,value:p,onChange:e=>{let t=history.state;o(c?"".concat((0,U.NNq)(i,{noBase:!0}),"/").concat(e):"/profile/".concat(e),!0),history.replaceState(t,"")}}),(0,l.BX)(C.tu,{flex:"fill",paddingBottom:20,children:["posts"===p&&(0,l.tZ)(eg,{profile:i,userId:i.id}),"notes"===p&&(0,l.tZ)(eh,{profile:i}),"likes"===p&&(0,l.tZ)(eh,{profile:i,type:"likes"}),d&&"lists"===p&&(0,l.tZ)(ez,{lists:i.lists,ownProfile:(null==a?void 0:a.id)===i.id}),"reads"===p&&(0,l.tZ)(eB,{subscriptions:t,profile:i})]})]})}var ej=i(7073);function eF(){let{iString:e}=(0,I.M1)();return(0,l.BX)(W.T3,{className:ex.Z.page,children:[(0,l.tZ)(H.Metadata,{title:e("Profile not found")}),(0,l.tZ)(W._Y,{icon:(0,l.tZ)(ej.Z,{}),title:e("Profile not found"),text:e("We couldn't load this profile."),action:(0,l.tZ)(D.zx,{priority:"secondary",size:"sm",href:(0,U.daR)({params:{searching:"profile"}}),children:e("Search people on Substack")})})]})}var eA=i(28175),eH=i.n(eA),eU=i(63474),eR=i(87989),eV=i(94874),eD=i(43570),eY=i(74312),eW=i(91400),eJ=i(92039),eq=i(98012);let eG={liveStreamAvatar:"liveStreamAvatar-f516FN",liveTag:"liveTag-Gk0dUD"};function eK(e){let{profile:t,activeLiveStream:i}=e,n=(0,eW.XA)(),r=(0,U.SMH)(t),[a,s]=(0,o.eJ)(!1),{isLive:d}=e1(i);return(0,l.BX)(l.HY,{children:[(0,l.BX)(eQ,{onClick:()=>{d&&(null==i?void 0:i.liveStream.id)?(0,_.uX)((0,z.bHR)({liveStreamId:i.liveStream.id,utm_source:T.b3.profileAvatar,utm_campaign:T.VX.substackProfile,params:{utm_medium:T.lP.web}}),{local_navigation:!1}):s(!0)},children:[(0,l.tZ)(eV.qE,{size:n?56:84,user:t,className:d?eG.liveStreamAvatar:void 0}),(0,l.tZ)(e$,{isLive:d})]}),(0,l.tZ)(e0,{isOpen:a,onClose:()=>s(!1),photoUrl:r})]})}function eQ(e){let{onClick:t,children:i}=e;return(0,l.tZ)(C.hs,{onClick:t,tabIndex:0,showFocus:!0,animate:!0,radius:"full",position:"relative",children:i})}function e$(e){let{isLive:t}=e,{iString:i}=(0,I.M1)();return t?(0,l.tZ)(eD.Vp,{className:eG.liveTag,theme:"error",priority:"primary",children:i("LIVE")}):null}function e0(e){let{isOpen:t,onClose:n,photoUrl:r}=e;return(0,l.tZ)(eY.cr,{module:"@/frontend/components/ImageViewerModal",resolve:e=>e.ImageViewerModal,onRequest:()=>Promise.resolve().then(i.bind(i,2563)),showModal:t,modalContent:[{attrs:{src:r}}],onClose:n,step:0,includeDownloadButton:!1})}let e1=e=>{let t=(0,eJ.rG)(),[i,n]=(0,o.eJ)(!1);return(0,o.d4)(()=>{if(null==e?void 0:e.liveStream.id)return null==t?void 0:t.listen({["live-stream:".concat(e.liveStream.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:ended"&&n(!0)}})},[t,null==e?void 0:e.liveStream.id]),{isLive:null!=e&&!!e.liveStream.id&&"active"===e.liveStream.status&&(0,eq.Z)(e.liveStream.started_streaming_at).isBefore((0,eq.Z)().subtract(1,"minute"))&&!i}};var e2=i(85200),e4=i(99869),e8=i(31131),e3=i(28596),e5=i(65207),e6=i(13639),e9=i(63685),e7=i(3678),te=i(80569),tt=i.n(te),ti=i(10878),tn=i(65958),tr=i(85566),tl=i(5281);function to(e){let{user:t,profile:i}=e,{iString:a}=(0,I.M1)(),{popToast:s}=(0,w.pm)(),[d,c]=(0,o.eJ)(!1),{refetch:u,isLoading:p}=(0,ed.ib)({pathname:"/api/v1/@".concat(i.handle,"/personal-initialize"),method:"post"}),h=async()=>{(0,g.j)(g.FP.PROFILE_MENU_DASHBOARD_LINK_CLICKED);let e=await u({query:{action:"access_dashboard"}});e instanceof Error?(console.error(e),s(e=>(0,l.tZ)(w.FN,(0,r._)((0,n._)({},e),{text:"Something went wrong. Please try again.",Icon:e_.Z})))):(c(!0),location.href=e.redirectUrl)},m=(null==t?void 0:t.subdomain)?(0,U.c0Q)(t.subdomain,{params:{utm_source:T.b3.substack}}):void 0;return(null==t?void 0:t.subdomain)||i.isPersonalEligible?(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(tl.Z,{}),disabled:p||d,onClick:(null==t?void 0:t.subdomain)?void 0:h,href:(null==t?void 0:t.subdomain)?m:void 0,children:a("Publisher dashboard")}):null}var ta=i(40949),ts=i(40559),td=i(50167),tc=i(84923);function tu(){let e=(0,S._)([""," only accepts messages from subscribers"]);return tu=function(){return e},e}function tp(){let e=(0,S._)([""," only accepts messages from paid subscribers"]);return tp=function(){return e},e}function th(){let e=(0,S._)([""," only accepts messages from founding members"]);return th=function(){return e},e}let tm=(0,z.Nhr)({utm_source:T.b3.substack}),tv=e=>{var t,i,n;let{profile:r,subscribeButton:a,yourProfile:s,user:d,onShare:c,showCTAs:u}=e,{iString:p}=(0,I.M1)(),m=(0,h.CH)(r,{surface:"profile",onClick(e){(0,g.j)(g.FP.PROFILE_BLOCKED_MUTED_CHANGED,{action:e,target_user_id:r.id})}}),[v,f]=(0,o.eJ)(!1),[b,Z]=(0,o.eJ)(!1),y=(0,ta.y)(),_=()=>{y((0,U.NNq)(r))},w=(0,tn.s)({source:"profile"}),S=null==r?void 0:null===(t=r.publicationUsers)||void 0===t?void 0:t.find(e=>"admin"===e.role||"contributor"===e.role),k=S||(null==r?void 0:r.isPersonalEligible);return(0,l.BX)(C.hs,{gap:8,direction:"row",justifyContent:"end",children:[(0,l.tZ)(ts.N,{isOpen:b,utmSource:"profile-page",onClose:()=>Z(!1)}),!s&&(0,l.BX)(l.HY,{children:[a&&(0,l.tZ)(ty,{children:a}),u&&!a&&(0,l.tZ)(ty,{children:(0,l.tZ)(tZ,{profile:r})}),r.can_dm?(0,l.tZ)(ty,{children:(0,l.tZ)(tf,{profile:r})}):(null!==(n=null===(i=r.dm_upgrade_options)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0&&r.primaryPublication&&(0,l.tZ)(ty,{children:(0,l.tZ)(tb,{profile:r,publication:r.primaryPublication})}),(0,l.BX)(eC.v2,{trigger:(0,l.tZ)(D.hU,{rounded:!1,priority:"secondary",children:(0,l.tZ)(e2.Z,{size:20})}),children:[(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e4.Z,{}),priority:"primary",onClick:_,children:"Copy link"}),(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e8.Z,{}),onClick:c,children:"Share"}),(0,l.BX)(eC.xw,{children:[r.can_dm&&(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e3.Z,{}),onClick:()=>w.handleStart([r.id]),children:"Send message"}),(0,l.tZ)(tg,{profile:r}),r.primaryPublication&&["free_can_upgrade","free_can_pledge"].includes(r.primaryPublicationSubscriptionState)&&(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(ey.Z,{}),href:(0,U.mGw)(r.primaryPublication,{addBase:!0}),children:"Manage Subscription"}),r.subscribesToViewerSubdomain&&(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e5.Z,{}),href:"".concat((0,z.SVA)({subdomain:r.subscribesToViewerSubdomain}),"/publish/subscribers/legacy?userId=").concat(r.id),children:"Subscriber stats"})]}),(0,l.BX)(eC.xw,{children:[m,(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(ej.Z,{}),priority:"destructive",onClick:()=>f(!0),children:"Report"})]}),(null==d?void 0:d.is_global_admin)&&(0,l.tZ)(eC.xw,{children:(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e5.Z,{}),priority:"secondary",onClick:()=>window.location.href=(0,U.SIi)(r.id),children:"Open in Underground"})})]}),(0,l.tZ)(ti.u,{canReportToAdmins:!1,isOpen:v,onClose:()=>f(!1),onSubmit:async e=>{let{reportCategory:t,details:i}=e;await tt().post("/api/v1/users/".concat(r.id,"/profile/report")).send({details:i,reportCategory:t,surface:"profile"}),f(!1)},reasons:ti.M})]}),u&&s&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(ty,{children:r&&k?(0,l.tZ)(td.QC,{profile:r,publicationUser:S}):r.profile_set_up_at?(0,l.tZ)(D.zx,{onClick:()=>Z(!0),children:"Share profile"}):(0,l.tZ)(D.zx,{href:tm,localNavigation:!1,children:"Set up profile"})}),(0,l.tZ)(ty,{children:(0,l.tZ)(D.zx,{priority:"secondary",href:(0,U.qvS)(),children:p("Edit profile")})}),(0,l.BX)(eC.v2,{trigger:(0,l.tZ)(D.hU,{rounded:!1,priority:"secondary",children:(0,l.tZ)(e2.Z,{size:20})}),children:[(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e4.Z,{}),priority:"primary",onClick:_,children:"Copy link"}),(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e8.Z,{}),onClick:c,children:"Share"}),(0,l.tZ)(eC.xw,{children:(0,l.tZ)(to,{user:d,profile:r})}),(null==d?void 0:d.is_global_admin)&&(0,l.tZ)(eC.xw,{children:(0,l.tZ)(eC.sN,{leading:(0,l.tZ)(e5.Z,{}),priority:"secondary",onClick:()=>window.location.href=(0,U.SIi)(r.id),children:"Open in Underground"})})]})]})]})};function tf(e){let{profile:t}=e,{isLoading:i,handleStart:n}=(0,tn.s)({source:"profile"}),{iString:r}=(0,I.M1)();return(0,l.tZ)(D.zx,{priority:"secondary",onClick:()=>n([t.id]),disabled:i,children:r("Message")})}function tb(e){let{profile:t,publication:i}=e,{iString:o,iTemplate:a}=(0,I.M1)(),s=(0,b.aF)(),d=(0,tc.d)(),{dm_upgrade_options:c}=t,u=null==c?void 0:c.includes("free_subscribers"),p=null==c?void 0:c.includes("paid_subscribers");return(0,l.BX)(l.HY,{children:[(0,l.tZ)(D.zx,{priority:"secondary",leading:(0,l.tZ)(e6.Z,{size:20}),onClick:d.onOpen,children:o("Message")}),(0,l.tZ)(N.u_,(0,r._)((0,n._)({},d),{width:360,children:(0,l.BX)(tr.F,{title:o(u?"Subscribers only":p?"Paid subscribers only":"Founding members only"),subtitle:a(u?tu():p?tp():th(),t.name),onClose:d.onClose,children:[(0,l.tZ)(D.zx,{priority:"primary",href:(0,z.W1P)(i,{user:s,addBase:!0,params:{next:document.location.href,utm_source:"profile-dm",utm_medium:T.lP.web,utm_campaign:T.VX.substackProfile}}),children:o("Subscribe")}),(0,l.tZ)(D.zx,{priority:"secondary",onClick:d.onClose,children:o("Cancel")})]})}))]})}function tg(e){let{profile:t}=e,{isFollowing:i,buttonProps:o}=(0,m.yr)(t,"profile");return(0,l.tZ)(eC.sN,(0,r._)((0,n._)({leading:i?(0,l.tZ)(e9.Z,{}):(0,l.tZ)(e7.Z,{})},o),{children:i?"Unfollow":"Follow"}))}function tZ(e){let{profile:t}=e,{isFollowing:i,buttonProps:o}=(0,m.yr)(t,"profile"),{iString:a}=(0,I.M1)();return(0,l.tZ)(D.zx,(0,r._)((0,n._)({priority:i?"secondary":"primary"},o),{children:a(i?"Following":t.followsViewer?"Follow back":"Follow")}))}function ty(e){return(0,l.tZ)(C.tu,(0,n._)({flex:"grow"},e))}var t_=i(94184),tC=i.n(t_),tw=i(25469),tS=i(59154),tk=i(85941),tx=i(79138),tB=i(23365),tI=i(37632),tN=i(18573),tX=i(8796),tP=i(39535),tL=i(33425),tz=i(23398);let tT={books:{icon:(0,l.tZ)(tk.Z,{size:16}),label:"Book"},facebook:{icon:(0,l.tZ)(tx.Z,{size:16}),label:"Facebook"},instagram:{icon:(0,l.tZ)(tB.Z,{size:16}),label:"Instagram"},linkedin:{icon:(0,l.tZ)(tI.Z,{size:16}),label:"LinkedIn"},youtube:{icon:(0,l.tZ)(tL.Z,{size:16}),label:"YouTube"},tiktok:{icon:(0,l.tZ)(tX.Z,{size:16}),label:"TikTok"},bluesky:{icon:(0,l.tZ)(tS.Z,{size:16}),label:"Bluesky"},twitter:{icon:(0,l.tZ)(tP.Z,{size:16}),label:"Twitter",verifiedIcon:(0,l.tZ)(tw.Z,{className:tC()(ex.Z.fillIcon,ex.Z.twitterVerifiedIcon),size:18})}},tM={icon:(0,l.tZ)(tN.Z,{size:16,stroke:"var(--color-fg-primary) !important"}),label:"Website"};function tE(e){var t;if(!e.type)return tM.icon;let i=tT[e.type];return null!==(t=null==i?void 0:i.icon)&&void 0!==t?t:tM.icon}function tO(e){return e?Object.keys(tT).indexOf(e):-1}var tj=i(20730);let tF="chip-fQexYY";function tA(e){let{link:t}=e;return(0,l.tZ)(tj.A,{leading:(0,l.tZ)(tH,{children:tE(t)}),href:t.url,newTab:!0,className:tF,children:function(e){var t,i,n,r;let l="Link",o=null===e.type,a=(n=e.value,!!URL.canParse(n)||!!URL.canParse("https://".concat(n))&&n.includes(".")&&!n.includes(" ")),s="books"===e.type||"facebook"===e.type?e.value:null===(t=(null==(r=e.value)?void 0:r.startsWith("@"))?r:r?"@".concat(r):null)||void 0===t?void 0:t.toLocaleLowerCase();return o?(0,tz.u)(e.value,0,!1):a?null!==(i=e.label)&&void 0!==i?i:l:null!=s?s:l}(t)})}let tH=(0,eU.zo)({display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:4});var tU=i(71068),tR=i(91246);function tV(e){let{pubs:t,links:i,onChipClick:n}=e,r=t.length+i.length;return(0,l.BX)(tR.V,{trigger:(0,l.tZ)(tj.A,{children:"+".concat(r.toLocaleString())}),placement:"bottom-start",children:[t.length>0&&t.map(e=>(0,l.tZ)(tY,{pub:e,onClick:n},e.id)),i.length>0&&i.map(e=>(0,l.tZ)(tD,{userLink:e},e.url))]})}function tD(e){var t;let{userLink:i}=e,n=i.type&&tT[i.type],r=null!==(t=null==n?void 0:n.label)&&void 0!==t?t:i.value;return(0,l.tZ)(tR.u,{leading:tE(i),href:i.url,target:"_blank",children:(0,l.tZ)(tW,{title:r,body:i.value})},i.url)}function tY(e){let{pub:t,onClick:i}=e;return(0,l.tZ)(tR.u,{leading:(0,l.tZ)(tU.xu,{children:(0,l.tZ)(X.wk,{pub:t,size:20,radius:"xs"})}),href:(0,U.TJI)(t),onClick:e=>i({e,pub:t}),children:(0,l.tZ)(tW,{title:t.name,body:t.subdomain})},t.id)}function tW(e){let{title:t,body:i}=e;return(0,l.BX)(C.sg,{minWidth:0,children:[(0,l.tZ)(P.xv.B4,{weight:"semibold",maxWidth:200,ellipsis:!0,children:t}),(0,l.tZ)(P.xv.B4,{color:"secondary",maxWidth:200,ellipsis:!0,children:i})]})}function tJ(e){let{pub:t,onClick:i}=e;return(0,l.tZ)(tj.A,{leading:(0,l.tZ)(X.wk,{pub:t,size:20}),href:(0,U.TJI)(t),onClick:e=>i({e,pub:t}),newTab:!0,className:tF,children:t.name})}function tq(e){let{profile:t,primaryPublication:i}=e,{visibleChips:n,overflowChips:r,handleChipClick:a}=function(e,t){var i;let n=(0,eW.XA)(),r=(0,ta.y)(),l=(0,ei.M$)().isOnDestination,o=n?2:5,a=e.publicationUsers.filter(e=>{var i;return(null===(i=e.publication)||void 0===i?void 0:i.id)!==(null==t?void 0:t.id)}),s=[t,...a.length>0?et()(a.map(e=>e.publication)):[],...(null!==(i=e.userLinks)&&void 0!==i?i:[]).sort((e,t)=>{let i=tO(e.type),n=tO(t.type);if(i!==n)return i-n;let r=String(e.id||""),l=String(t.id||"");return r.localeCompare(l)})].filter(Boolean);return{visibleChips:s.slice(0,o),overflowChips:s.slice(o),handleChipClick:e=>{let{e:t,pub:i}=e,n=(0,U.TJI)(i),o=!1;try{o=!l&&(window.location.origin===new URL(n).origin||i.custom_domain===window.location.hostname)}catch(e){o=!1}o?(t.preventDefault(),r(n),(0,g.j)(g.FP.PUBLICATION_URL_COPIED)):(0,g.x6)(i,"profile")}}}(t,i),s=e=>!!(e&&"object"==typeof e&&"subdomain"in e),d=e=>!!(e&&"object"==typeof e&&"type"in e),c=(0,o.Ye)(()=>n.filter(s),[n]),u=(0,o.Ye)(()=>n.filter(d),[n]),p=(0,o.Ye)(()=>r.filter(s),[r]),h=(0,o.Ye)(()=>r.filter(d),[r]);return(0,l.BX)(tG,{children:[c.map(e=>(0,l.tZ)(tJ,{pub:e,onClick:a},"pub-".concat(e.id))),u.map(e=>(0,l.tZ)(tA,{link:e},"link-".concat(e.id))),r.length>0&&(0,l.tZ)(tV,{pubs:p,links:h,onChipClick:a})]})}let tG=(0,eU.zo)({display:"flex",gap:6,wrap:"wrap"});var tK=i(53678),tQ=i(24547);"ListFormat"in Intl&&new Intl.ListFormat(void 0,{style:"short",type:"conjunction"});let t$="ListFormat"in Intl&&new Intl.ListFormat(void 0,{style:"long",type:"conjunction"});function t0(e){let{profile:t,yourProfile:i}=e;return(0,l.BX)(C.X2,{alignItems:"center",wrap:"wrap",gap:8,children:[(0,l.tZ)(t1,{profile:t,yourProfile:i}),(0,l.tZ)(t8,{profile:t})]})}function t1(e){let{profile:t,yourProfile:i}=e;return i||!t.mutualsContext?(0,l.tZ)(t2,{profile:t}):(0,l.tZ)(t4,{profile:t})}let t2=e=>{let{profile:t}=e,i=(0,ei.M$)().isOnDestination?(0,z.Fhs)(t,null,{noBase:!0}):"/profile/subscribers";return(0,l.tZ)(P.xv.B3,{color:"secondary",children:(0,l.tZ)(tK.hh,{href:i,state:{showBack:!0},showFocus:!0,animate:!0,children:t.subscriberCountString})})};function t4(e){var t;let{profile:i}=e,{iPlural:r}=(0,I.M1)(),o=(0,eW.XA)();if(!(null===(t=i.mutualsContext)||void 0===t?void 0:t.users))return(0,l.tZ)(t2,{profile:i});let a=i.mutualsContext.users.filter(e=>e.name),s=a.slice(0,2).map(e=>(0,ep.guessFirstName)(e.name)),d=Math.max(0,(i.subscriberCountNumber||0)-s.length),c="".concat((0,ep.numberToRoughShortString)(d)),u=r("other subscriber","other subscribers",d),p="".concat(c," ").concat(u);"subscribers"===i.mutualsContext.type&&d>0&&s.push(p);let h=t$.formatToParts(s);return(0,l.BX)(C.hs,{gap:8,minWidth:0,alignItems:"center",children:[(0,l.tZ)(tQ.H,{users:a,max:3,size:24,renderAvatar:e=>(0,l.tZ)(eV.xV,(0,n._)({},e))}),(0,l.tZ)(tK.hh,{href:(0,z.Fhs)(i,null,{noBase:!0}),state:{showBack:!0},decoration:"hover-underline",color:"secondary",children:o?(0,l.tZ)(P.xv.B3,{minWidth:0,children:i.subscriberCountString}):(0,l.BX)(P.xv.B3,{minWidth:0,children:["followers"===i.mutualsContext.type&&"Followed by ",h.map((e,t)=>(0,l.tZ)(P.xv,{as:"span",children:e.value},t)),"subscribers"===i.mutualsContext.type&&0===d&&(0,l.BX)(P.xv,{as:"span",children:[" ",r("subscribes","subscribe",a.length)]})]})})]})}function t8(e){let{profile:t}=e,{leaderboardRanking:i}=t;if(!i)return null;let n="paid"===i.ranking?"#".concat(i.rank," in ").concat(i.category_name):"bestseller"===i.category_id?"#".concat(i.rank," New bestseller"):"#".concat(i.rank," Rising in ").concat(i.category_name);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(P.xv.B3,{color:"secondary",as:"span",children:" • "}),(0,l.tZ)(P.xv.B3,{color:"accent",as:"span",children:(0,l.tZ)(tK.hh,{href:(0,z.k5c)({categoryId:i.category_id,ranking:i.ranking,utm_source:"profile",focusedPubId:i.publication_id,backAction:(0,U.NNq)(t)}),children:n})})]})}var t3=i(87077),t5=i(68279);function t6(e){let{profile:t,yourProfile:i}=e;return t.handle?(0,l.tZ)(t9,{profile:t}):i?(0,l.tZ)(t7,{}):null}let t9=e=>{let{profile:t}=e,i=(0,eW.XA)(),n=(0,ta.y)();return(0,l.tZ)(P.xv.B3,{color:"secondary",children:(0,l.tZ)(tK.hh,{onClick:()=>{(0,g.j)(g.FP.PROFILE_LINK_COPIED,{surface:"profile_page",profile_link:t.subdomainUrl,shared_user_id:t.id}),n((0,U.NNq)(t))},cursor:"pointer",decoration:"hover-underline",children:(0,l.tZ)(t3.u,{text:"Copy link",disabled:i,preferPlacement:"left-center",children:"@".concat(t.handle)})})})};function t7(){let{iString:e}=(0,I.M1)();return(0,l.BX)(C.X2,{gap:4,alignItems:"center",children:[(0,l.tZ)(eX.Z,{size:16,color:"var(--color-accent-themed)"}),(0,l.tZ)(P.xv.B3,{color:"accent",children:(0,l.tZ)(tK.hh,{href:(0,U.qvS)({params:{utm_source:T.b3.handleNotification,[t5.UN]:!0}}),children:e("Claim your handle")})})]})}function ie(e){let{profile:t,yourProfile:i,user:n,showCTAs:r,subscribeButton:o,onShare:a,activeLiveStream:s,primaryPublication:d,isBlocked:c}=e;return(0,l.BX)(il,{children:[(0,l.BX)(io,{children:[(0,l.BX)(ia,{children:[(0,l.tZ)(it,{profile:t}),(0,l.tZ)(t6,{profile:t,yourProfile:i})]}),(0,l.tZ)(eK,{profile:t,activeLiveStream:s})]}),(0,l.tZ)(ii,{profile:t}),!c&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(tq,{profile:t,primaryPublication:d}),(0,l.tZ)(t0,{profile:t,yourProfile:i}),(0,l.tZ)(tv,{subscribeButton:o,profile:t,yourProfile:i,user:n,showCTAs:r,onShare:a})]})]})}function it(e){let{profile:t}=e,{iString:i}=(0,I.M1)(),n=t.name||i("Substack user");return(0,l.BX)(P.xv.H3,{fontWeight:"bold",as:"span",children:[n,(0,l.tZ)(ir,{profile:t})]})}function ii(e){let{profile:t}=e;return t.bio?(0,l.tZ)(P.xv.B3,{clamp:3,children:(0,l.tZ)(eH(),{options:{attributes:{rel:"nofollow ugc"}},children:t.bio})}):null}function ir(e){let{profile:t}=e;return t.bestseller_tier?(0,l.BX)(P.xv,{as:"span",style:{whiteSpace:"nowrap",verticalAlign:"text-bottom"},children:["\xa0",(0,l.tZ)(P.xv,{as:"span",paddingLeft:4,children:(0,l.tZ)(eR.UserBadge,{tier:t.bestseller_tier,userId:t.id,inline:!0,size:"md"})})]}):null}let il=(0,eU.zo)({display:"flex",direction:"column",gap:16}),io=(0,eU.zo)({display:"flex",direction:"row",justifyContent:"space-between",alignItems:"center",gap:16}),ia=(0,eU.zo)({display:"flex",direction:"column",gap:2});var is=i(98848),id=i(64515);let ic=e=>{var{strokeWidth:t=1.5}=e,i=(0,is._)(e,["strokeWidth"]);return(0,l.BX)(id.l,(0,r._)((0,n._)({},i),{name:"UserIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},children:[(0,l.tZ)("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",strokeWidth:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.tZ)("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",strokeWidth:t,strokeLinecap:"round","stroke-linejoin":"round"})]}))};function iu(){let{iString:e}=(0,I.M1)();return(0,l.tZ)(W.ET,{children:(0,l.tZ)(C.hs,{paddingY:64,flex:"grow",children:(0,l.tZ)(W._Y,{icon:(0,l.tZ)(ic,{}),title:e("You haven’t set up your profile yet."),text:e("Click the button below to get started."),action:(0,l.tZ)(D.zx,{priority:"secondary",href:(0,U.v3t)(),children:e("Set up profile")})})})})}function ip(){return(0,l.tZ)(C.tu,{style:{maxWidth:600},flex:"grow",children:(0,l.BX)(C.tu,{gap:{desktop:20,mobile:16},paddingTop:{desktop:32,mobile:16},paddingBottom:16,children:[(0,l.BX)(C.gq,{justifyContent:"space-between",alignItems:"center",children:[(0,l.BX)(C.tu,{justifyContent:"center",gap:8,children:[(0,l.tZ)(W.Vm,{type:"bar",height:36,width:200}),(0,l.tZ)(W.Vm,{type:"bar",height:20,width:180})]}),(0,l.tZ)(W.Vm,{type:"circle",size:88})]}),(0,l.BX)(C.tu,{gap:8,flex:"grow",minWidth:0,children:[(0,l.tZ)(W.Vm,{type:"bar",height:20,width:"70%"}),(0,l.tZ)(W.Vm,{type:"bar",height:20,width:"80%"}),(0,l.tZ)(W.Vm,{type:"bar",height:20,width:"30%"})]}),(0,l.tZ)(W.Vm,{type:"bar",height:40,width:120})]})})}var ih=i(94442),im=i(21972),iv=i(5623);function ib(e){let{postId:t,onClose:i}=e,n=(0,im.B)(t),r=(0,ec.I0)(),a=(0,o.sO)(null),{posts:s,publications:d,publicationSettings:c,publicationRecommendations:u}=(0,ec.kc)(),p=s.get(t),h=(0,ih.nA)({postId:t,isSaved:!!(null==p?void 0:p.is_saved),trackSurface:"post-viewer"}),m=p?d.get(p.publication_id):void 0,v=p?c.get(p.publication_id):void 0,f=m?u.get(m.id):void 0,b=f?d.get(f.recommending_publication_id):void 0;return(0,l.tZ)(iv.R5,{post:p,postId:t,videoPlayerRef:a,onClose:i,onLike:n,onSave:()=>{h.onSave(),r({type:"post_save",payload:{postId:t}})},onLoad:e=>{r({type:"post_load",payload:e})},publication:m,publicationSettings:v,referringRecommendation:f,referringPub:b})}function ig(e){let{profile:t,subscriptionSource:i}=e,{refetch:n,isLoading:r}=(0,ed.ib)({pathname:(0,z.n1t)("/api/v1/@".concat(t.handle,"/personal-initialize"),{source:i}),method:"post"}),o=async()=>{let e=await n({query:{action:"subscribe"}});if(e instanceof Error)throw e;location.href=e.redirectUrl};return t.handle?(0,l.tZ)(D.zx,{priority:"primary",onClick:o,localNavigation:!1,disabled:r,children:"Subscribe"}):null}var iZ=i(11358),iy=i(32189);function i_(e){let{user:t,profile:i,primaryPublication:n,subscriptionSource:r}=e,{iString:a}=(0,I.M1)(),s=(0,iy.x)({surface:"profile",zIndex:1001}),[d,c]=(0,o.eJ)(i.primaryPublicationSubscriptionState),u=(0,eS._F)({publication:n,subscriptionSource:"profile"}),{isLoading:p,subscribe:h}=(0,iZ.G)({publication:n,profileId:i.id,source:r,onSuccess:()=>c("free")}),m=(0,z.W1P)(n,{user:t,addBase:!0,params:{next:document.location.href,utm_source:r,utm_medium:T.lP.web,utm_campaign:T.VX.substackProfile,just_signed_up:!0}}),v=(0,ei.M$)().isOnDestination;return["free","paid","founding"].includes(d)?(0,l.tZ)(eN,{publication:n,onUnsubscribe:()=>{u.unsubscribe()},button:(0,l.tZ)(D.zx,{priority:"secondary",children:a("Subscribed")}),manageOnly:["paid","founding"].includes(d),isPledged:i.primaryPublicationIsPledged}):"free_can_upgrade"===d?(0,l.tZ)(D.zx,{href:m,localNavigation:!1,onClick:()=>{(0,g.j)(g.FP.ACCOUNT_CARD_UPGRADE_CLICKED,{homepage_type:n.homepage_type,is_on_destination:v,target_user_id:i.id,target_publication_id:n.id}),(0,g.x6)(n,"hover_profile")},children:a("Upgrade")}):"free_can_pledge"===d?(0,l.tZ)(D.zx,{href:m,localNavigation:!1,onClick:()=>{(0,g.j)(g.FP.ACCOUNT_CARD_PLEDGE_CLICKED,{homepage_type:n.homepage_type,is_on_destination:v,target_user_id:i.id,target_publication_id:n.id}),(0,g.x6)(n,"hover_profile")},children:a("Pledge")}):"none"===d&&r===ik?t?(0,l.tZ)(D.zx,{priority:"primary",onClick:e=>{e.preventDefault(),h()},disabled:p,children:a("Subscribe")}):(0,l.tZ)(D.zx,{priority:"primary",onClick:s(n,i),children:a("Subscribe")}):(0,l.tZ)(D.zx,{href:m,localNavigation:!1,onClick:()=>{(0,g.j)(g.FP.ACCOUNT_CARD_SUBSCRIBE_CLICKED,{homepage_type:n.homepage_type,is_on_destination:v,target_user_id:i.id,target_publication_id:n.id}),(0,g.x6)(n,"hover_profile")},title:n.name,children:a("Subscribe")})}var iC=i(77614),iw=i(25479),iS=i(6163);let ik="profile-page-feed";function ix(e){var t,i,a;let s,S,{id:k,subpath:x,initialData:{profileSubscribeOnTransit:B=!1,referringUser:I,freeSignup:N,freeSignupEmail:X,activeLiveStream:P,subscriptionToLiveStreamPub:z,invitedLiveStreamPublications:T,subscriptionsToLiveStreamInvitedPub:M}}=e,E=(0,b.aF)(),[O,F]=(0,y.tv)(),[H,V]=(0,o.eJ)(!1),D=(0,w.pm)(),[Y]=(0,o.eJ)(!!((0,L.x)("followPrompt")&&I)),{addSurface:W}=(0,iw.ze)();(0,A.qr)("");let{getConfigFor:J}=(0,f.xR)(),q=J("profile_themes_enabled");k.includes("-")?(s=function(e){let t=e.split("-")[0];if(!t)return -1;let i=parseInt(t);return isNaN(i)?-1:i}(k),S=function(e){let t=e.split("-");return t.length?t.slice(1).join("-"):""}(k)):s=k;let{subjectProfile:G,error:K}=(0,v.Un)({subjectId:s,subjectName:S}),ee=RegExp("/p-(\\d+)"),et=null,ei=x.match(ee);ei&&ei[1]&&(et=Number(ei[1]));let en=(0,h.gc)(null==G?void 0:G.id),er="blocked"===en||"blocking"===en,el=!!(null==G?void 0:G.profile_set_up_at),eo=G&&G.id===(null==E?void 0:E.id),ea=(null==G?void 0:G.subscriptions)||[],es=(null==G?void 0:G.primaryPublication)&&(null===(t=G.publicationUsers.find(e=>{var t;return e.publication_id===(null==G?void 0:null===(t=G.primaryPublication)||void 0===t?void 0:t.id)}))||void 0===t?void 0:t.publication),ed=!!(es&&(null==G?void 0:G.isSubscribed)),ec=(0,m.Sv)(G,"profile");(0,o.d4)(()=>{var e;(null===(e=new URL(document.location.href).searchParams)||void 0===e?void 0:e.has("invite"))?(0,_.uX)("/app",{local_navigation:!1}):G&&((0,g.j)(g.FP.PROFILE_VISITED,{profile_user_id:G.id,is_set_up:el,is_self:eo,has_name:!!G.name,has_photo:!!G.photo_url,has_bio:!!G.bio,has_twitter:!!G.twitterAccount,reads_count:G.visibleSubscriptionsCount,writes_count:G.publicationUsers.length,subscribe_cta_publication_id:!ed&&(null==es?void 0:es.id),live_stream_id:null==P?void 0:P.liveStream.id}),B&&((0,_.iO)("subscribed"),D.popToast(e=>(0,l.tZ)(w.FN,(0,r._)((0,n._)({},e),{text:"Subscribed to ".concat((null==es?void 0:es.name)||G.name||"user"),Icon:d.Z})))))},[k]),(0,o.d4)(()=>{var e;(null===(e=new URL(document.location.href).searchParams)||void 0===e?void 0:e.has("follow"))&&G&&ec.isLoaded&&((0,_.iO)("follow"),eo||ec.isFollowing||ec.toggle())},[k,G,ec.isLoaded]),(0,o.d4)(()=>{E&&G&&W({type:"visited-profile",profile:G})},[W,G,E]);let[{url:eu}]=(0,y.tv)(),ep=!function(e,t){var i;let n=null===(i=new URL(e,"https://monograph.dev").searchParams)||void 0===i?void 0:i.get("utm_source");return!!(n&&iI.includes(n)||(null==t?void 0:t.source)&&iI.includes(t.source))}(eu,(0,Z.l)())?"profile-page":ik,eh=null;return(G&&!eo&&!er&&(es?eh=(0,l.tZ)(i_,{user:E,profile:G,primaryPublication:es,subscriptionSource:ep}):G.isPersonalEligible&&(eh=(0,l.tZ)(ig,{profile:G,subscriptionSource:ep}))),(0,o.d4)(()=>{if(!G)return;let e=[];if(eo)e.push("share","edit");else{var t;eh&&e.push((null==G?void 0:G.isSubscribed)?"subscribed":"subscribe"),G.isSubscribed||e.push(G.isFollowing?"following":"follow"),(G.can_dm||(null!==(t=G.dm_upgrade_options)&&void 0!==t?t:[]).length>0)&&e.push("message")}0!==e.length&&(0,g.j)(g.FP.PROFILE_PRIMARY_ACTIONS_SHOWN,{actions:e})},[G,eo,eh]),K)?(0,l.tZ)(eF,{}):G?(0,l.tZ)(iC.F,{profile:G,children:(0,l.BX)(C.tu,{style:{maxWidth:568,paddingTop:q&&(null===(a=G.theme)||void 0===a?void 0:null===(i=a.cover_image)||void 0===i?void 0:i.url)?100:0},flex:"grow",minWidth:0,children:[(0,l.tZ)(R,{profile:G,activeLiveStream:P}),(0,l.tZ)(p.V,{isOpen:H,onClose:()=>V(!1),medium:"profile-page",user:E,profile:G}),Y&&I?(0,l.tZ)(c.yi,{referringUser:I,freeSignupEmail:X,forceFollowPrompt:!0,surface:"profile-follow-referrer-prompt"}):null," ",(0,L.x)(document.location.href,"liveStream")&&(null==P?void 0:P.liveStream.id)?(0,l.tZ)(j,{profile:G,activeLiveStream:P,subscriptionToLiveStreamPub:z,invitedLiveStreamPublications:T,subscriptionsToLiveStreamInvitedPub:M,freeSignup:N,freeSignupEmail:X}):null,(0,l.tZ)(iB,{profile:G}),(0,l.BX)(C.tu,{children:[(0,l.BX)(C.tu,{gap:8,paddingX:{desktop:0,mobile:16},paddingTop:{desktop:32,mobile:16},paddingBottom:{desktop:16,mobile:8},children:[(null==P?void 0:P.liveStream.id)&&P.liveStreamInformation.desktopPlaybackUrl&&(0,eq.Z)(P.liveStream.started_streaming_at).isBefore((0,eq.Z)().subtract(1,"minute"))?(0,l.tZ)(u.Y,{activeLiveStream:P}):null,(0,l.tZ)(ie,{profile:G,yourProfile:!!eo,primaryPublication:es,user:E,showCTAs:!er,onShare:()=>V(!0),subscribeButton:eh,activeLiveStream:P,isBlocked:er}),"blocked"===en&&(0,l.tZ)(Q,{profile:G}),"blocking"===en&&(0,l.tZ)($,{profile:G})]}),!er&&!!G.name&&(0,l.tZ)(eO,{subscriptions:ea,profile:G,subpath:x})]}),!el&&eo&&(0,l.tZ)(iu,{}),et&&(0,l.tZ)(ib,{postId:et,onClose:()=>{F((0,U.NNq)(G,{noBase:!0}))}})]})}):(0,l.tZ)(ip,{})}let iB=e=>{let{profile:t}=e;return(0,l.tZ)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:s()((0,iS.v_)(t),{json:!0,isScriptContext:!0})}})},iI=["feed","feed-mentions","notes-inline-suggestions","notes-all-suggestions","notes-like-list","notes-restack-list","substack-feed-item"]},77614:function(e,t,i){i.d(t,{F:()=>c});var n=i(16584),r=i(98661),l=i(40647),o=i(71068),a=i(4615),s=i(69539),d=i(43894);let c=e=>{var t,i;let{profile:c,children:u,forceEnabled:p=!1}=e,{getConfigFor:h}=(0,l.xR)(),{variables:m,setTheme:v}=(0,s.OZ)({profileTheme:c.theme,forceEnabled:p}),f=(0,r.useMemo)(()=>({variables:m,setTheme:v}),[m,v,c.theme]);return p||h("profile_themes_enabled")&&m?(0,n.tZ)(a.f6,{theme:d.Z.profileTheme,variables:null!=m?m:void 0,children:(0,n.BX)(s.DM.Provider,{value:f,children:[(null===(i=c.theme)||void 0===i?void 0:null===(t=i.cover_image)||void 0===t?void 0:t.url)&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(o.xu,{className:d.Z.themedHeader}),(0,n.tZ)(o.xu,{className:d.Z.themedHeaderOverlay})]}),u]})}):(0,n.tZ)(n.HY,{children:u})}},61412:function(e,t,i){i.d(t,{B:()=>r});var n=i(30396);function r(e){let{name:t,action:i}=e;(0,n.d4)(()=>{if("undefined"==typeof window)return;let e=new URL(window.location.href);if(e.searchParams.get("action")===t){i();let t=e.searchParams;t.delete("action"),window.history.replaceState({},"","".concat(e.origin).concat(e.pathname,"?").concat(t))}},[])}},43254:function(e,t,i){i.d(t,{K1:()=>f,_F:()=>v,i9:()=>g});var n=i(7409),r=i(99282),l=i(16584),o=i(30396),a=i(35543),s=i(60807),d=i(48980),c=i(65205),u=i(70379),p=i(64172),h=i(67914),m=i(63651);function v(e){var t,i,d;let{publicationId:c,publication:h,publicationName:m,user:v,allowSecondaryPublications:f=!0,subscriptionSource:y,sourceNoteId:_}=e;c=null!==(d=null!==(i=null==h?void 0:h.id)&&void 0!==i?i:c)&&void 0!==d?d:null==v?void 0:null===(t=v.primary_publication)||void 0===t?void 0:t.id;let C=(0,s.aF)(),w=(0,u.pm)(),S=(0,a.oJ)(),k=(0,p.Th)(),[x,B]=(0,o.eJ)(!1),I=!!c&&function(e,t,i){if(!e||!t||!i.hasLoadedOnce||!i.result)return!1;let n=i.result.subscriptionMap.get(t);if(n&&"unsubscribed"!==n.membership_state)return!0;let r=i.result.publicationUserMap.get(t);return!!(r&&["admin","contributor"].includes(r.role))}(C,c,k)||function(e,t,i){let{allowSecondaryPublications:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e||!t||!i.hasLoadedOnce||!i.result)return!1;let{subscriptions:r,publicationUsers:l}=i.result;if(n){for(let e of r)if("unsubscribed"!==e.membership_state&&b(t.id,e.publication_id,i))return!0;for(let e of l)if(["admin","contributor"].includes(e.role)&&b(t.id,e.publication_id,i))return!0}return!1}(C,v,k,{allowSecondaryPublications:f}),[N,X]=(0,o.eJ)(null),P=k.isLoading||!!N,L=async e=>{var t;if(e&&(e.preventDefault(),e.stopPropagation()),P||I)return;X("subscribing");let i=await g(c,y,{publication:h,user:C,sourceNoteId:_}),o="Subscribed to ".concat(c?null!==(t=null!=m?m:null==h?void 0:h.name)&&void 0!==t?t:"publication":v?v.name:"profile");if(i.didAction){if(B(!0),w.popToast(e=>(0,l.tZ)(u.FN,(0,r._)((0,n._)({},e),{text:o}))),C&&c)try{await k.refetchPublication(c)}catch(e){console.error("Failed to reload subscriptions:",e)}v&&S(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.includes(v.id)?e:[v.id,...e]},{revalidate:!1})}else i.errorMessage&&w.popToast(e=>{var t;return(0,l.tZ)(u.FN,(0,r._)((0,n._)({},e),{text:null!==(t=i.errorMessage)&&void 0!==t?t:""}))});X(null)},z=async e=>{var t;if(e&&(e.preventDefault(),e.stopPropagation()),P||!I)return;X("unsubscribing");let i=await Z(c,y),o="Unsubscribed from ".concat(c?null!==(t=null!=m?m:null==h?void 0:h.name)&&void 0!==t?t:"publication":v?v.name:"profile");if(i.didAction){if(B(!1),w.popToast(e=>(0,l.tZ)(u.FN,(0,r._)((0,n._)({},e),{text:o}))),C&&c)try{await k.refetchPublication(c)}catch(e){console.error("Failed to reload subscriptions:",e)}else if(C)try{await k.refetch()}catch(e){console.error("Failed to reload subscriptions:",e)}}else i.errorMessage&&w.popToast(e=>{var t;return(0,l.tZ)(u.FN,(0,r._)((0,n._)({},e),{text:null!==(t=i.errorMessage)&&void 0!==t?t:""}))});X(null)},T=I&&!N||"subscribing"===N;return{showCta:!!c&&(!C||k.hasLoadedOnce)&&!(C&&C.id===(null==v?void 0:v.id))&&(!I||x||"unsubscribing"===N),isSubscribed:T,hasPublication:!!c,subscribe:L,unsubscribe:z,toggle:T?z:L}}function f(e){let t=(0,p.Th)(),i=(0,s.aF)();if((null==i?void 0:i.id)===e)return"subscribed";let{result:n}=t;if(!n)return null;let{subscriptions:r,publicationUsers:l}=n;for(let i of l)if(["admin","contributor"].includes(i.role)&&b(e,i.publication_id,t))return"subscribed";let o=null;for(let i of r)if(b(e,i.publication_id,t)){var a;o=null!==(a=(0,h.Ps)(i.membership_state,o)?i.membership_state:o)&&void 0!==a?a:null}return o}function b(e,t,i){if(i.isLoading||!i.result)return!1;let n=i.result.publicationMap.get(t);if(n){if(n.author_id===e)return!0;for(let t of n.contributors)if(t.user_id===e)return!0}return!1}async function g(e,t){let i,{publication:n,user:r,sourceNoteId:l,openPubInNewTabAfterSubscription:o=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=!1;if(r)try{(await (0,d.rd)("/api/v1/reader/signup/pub",{method:"POST",json:{publication_id:e,email:r.email,source:t,noWelcomeEmail:!0,sourceNoteId:l,first_url:c.xY,first_referrer:c.ip,first_session_url:c.ac,first_session_referrer:c.qR,current_url:c.UE,current_referrer:c.xU}})).requires_confirmation?i="Check your email to confirm subscription":a=!0}catch(e){console.error(e),i="Failed to subscribe"}else if(!r){if(!n)try{n=await (0,d.rd)("/api/v1/reader/publication/".concat(e))}catch(e){console.error(e)}if(n&&o){let e=(0,m.W1P)(n,{addBase:!0,user:null!=r?r:void 0});window.open(e,"_blank")}}return{didAction:a,errorMessage:i}}async function Z(e,t){let i,n=!1;try{await (0,d.rd)("/api/v1/subscription/email",{method:"POST",json:{publication_id:e,email_disabled:!0,disable_all:!0,receive_podcast_emails:!1,source:t}}),n=!0}catch(e){console.error(e),i="Failed to unsubscribe"}return{didAction:n,errorMessage:i}}},22419:function(e,t,i){i.d(t,{lq:()=>n});let n=25},46464:function(e,t,i){i.d(t,{Z:()=>n});function n(e){var t;return"twitter"===e.source?"From Twitter":"facebook"===e.source?"From Facebook":"contacts_email"===e.source||"contacts_phone"===e.source?"From your contacts":e.publication?"".concat(e.publication.name):null!==(t=e.user.handle)&&void 0!==t?t:"Suggested"}},24054:function(e,t,i){i.d(t,{Sb:()=>n,bI:()=>o,rx:()=>r,tV:()=>l});let n=1920,r=1080,l=1080,o=1920},84610:function(e,t,i){i.d(t,{H:()=>n});function n(e){let{category:t,language:i="en"}=e,{iString:n}=I18N.i(i);switch(t){case"hate":return n("Hate");case"private_information":return n("Private information");case"plagiarism":return n("Plagiarism");case"impersonation":return n("Impersonation");case"illegal_activity":return n("Illegal activity");case"spam":return n("Spam");case"pornography":return n("Pornography");case"other":return n("Other");default:return console.error("unrecognized category",t),n("Other")}}},67914:function(e,t,i){i.d(t,{B9:()=>a,Ps:()=>o,hl:()=>l});var n=i(6070);let r=new Set(["subscribed","free_signup"]);function l(e){return r.has(e)}function o(e,t){if(!e)return!1;if(!t)return!0;let i=["unsubscribed","free_signup","subscribed"];return i.indexOf(e)>=i.indexOf(t)}function a(e){let{pub:t,subscriptionType:i}=e;return(0,n.uT)({pub:t})&&"comp"===i}}}]);