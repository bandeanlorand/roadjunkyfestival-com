"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["5609"],{6651:function(e,t,n){n.d(t,{Z:()=>r});let r={popoverBase:"popoverBase-UcdBQb"}},83034:function(e,t,n){n.r(t),n.d(t,{AppInstallContent:()=>E,AppInstallModal:()=>D,AppInstallUpsells:()=>O,AppStoreQrCode:()=>N,EmailCodeCTA:()=>R,useAppModal:()=>x});var r=n(7409),o=n(99282),i=n(58865),l=n(16584),a=n(30396),c=n(21793),s=n(20888),d=n(95441),u=n(60807),p=n(68833),m=n(48980),h=n(64576),g=n(7882),f=n(24547),v=n(15771),y=n(61254),C=n(19081),T=n(1844),_=n(6490),Z=n(58175),I=n(14518),b=n(91400),w=n(60308),S=n(84864),k=n(8525);function A(){let e=(0,i._)(["Accept ","'s gift in the Substack app"]);return A=function(){return e},e}function B(){let e=(0,i._)(["We sent a link to download the Substack app to ","."]);return B=function(){return e},e}function x(){let{utm_campaign:e,utm_source:t,utm_content:n,abTestingId:r,overrideCTA:o,overrideTitle:i,subTitle:c,openUrl:s,giftCard:d,pub:u,facepileUsers:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[h,g]=(0,a.eJ)(!1),f=(0,a.I4)(()=>{g(!0),(0,p.j)(p.FP.APP_INSTALL_MODAL_OPENED,{utm_campaign:e,utm_source:t,utm_content:n})},[e,t,n]),v=(0,a.I4)(()=>{g(!1)},[]);return{open:f,modal:(0,l.tZ)(D,{isOpen:h,onClose:v,utm_campaign:e,utm_source:t,utm_content:n,abTestingId:r,overrideCTA:o,overrideTitle:i,subTitle:c,openUrl:s,width:d?450:void 0,giftCard:d,pub:u,facepileUsers:m})}}function E(e){let{utm_campaign:t,utm_source:n,utm_content:r,hideEmailPrompt:o=!1,abTestingId:i,suggestedEmail:a,size:c,padding:s=32,openUrl:u,overrideCTA:p,onSend:m}=e,{iString:h}=(0,d.M1)(),g=(0,b.XA)();return(0,l.BX)(C.tu,{gap:20,padding:s,children:[!g&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(C.hs,{className:k.Z.qrCode,padding:20,alignSelf:"center",children:(0,l.tZ)(N,{size:c,utm_campaign:t,utm_source:n,utm_content:r,abTestingId:i,openUrl:u})}),!g&&!o&&(0,l.tZ)(y.ZC,{})]}),!g&&!o&&(0,l.tZ)(R,{suggestedEmail:a,onSend:m}),g&&(0,l.tZ)(v.zx,{href:u||(0,w.D4e)({utm_campaign:t,utm_source:n}),children:p||h("Install the app")})]})}function O(e){let{utm_campaign:t,utm_source:n,darkMode:r=!1}=e;return(0,l.BX)(C.hs,{gap:16,justifyContent:"center",children:[(0,l.tZ)("a",{className:k.Z.appBadge,href:(0,w.RMm)({utm_campaign:t,utm_source:n}),onClick:()=>{(0,p.j)(p.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"ios",utm_campaign:t,utm_source:n})},children:(0,l.tZ)("img",{src:(0,w.zF4)(r?"/img/app_page/app-store-white.png":"/img/app_page/app-store.png",320),height:48})}),(0,l.tZ)("a",{className:k.Z.appBadge,href:(0,w.AaB)({utm_campaign:t,utm_source:n}),onClick:()=>{(0,p.j)(p.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"android",utm_campaign:t,utm_source:n})},children:(0,l.tZ)("img",{src:(0,w.zF4)(r?"/img/app_page/google-play-white.png":"/img/app_page/google-play.png",320),height:48})})]})}function D(e){var t;let{isOpen:n,onClose:i,utm_campaign:s,utm_content:u,utm_source:p,abTestingId:m,overrideCTA:h,overrideTitle:g,subTitle:v,openUrl:y,width:T,facepileUsers:Z,showMobileClose:I,giftCard:k,pub:B}=e,{iString:x,iTemplate:O}=(0,d.M1)(),D=(0,b.XA)(),[N,R]=(0,a.eJ)(""),L=(0,a.I4)(e=>{R(e)},[]),P=(0,a.I4)(()=>{R(""),i()},[i]),j=!!k&&!!B,U=(null==k?void 0:null===(t=k.gifter)||void 0===t?void 0:t.name)?"Split Zone Duo"===k.gifter.name?"SZD":(0,S.guessFirstName)(k.gifter.name):"",F=g||(j?U?O(A(),U):x("Accept this gift in the Substack app"):x("Download the Substack app"));return(0,l.BX)(_.u_,{isOpen:n,onClose:i,width:T||360,position:D?"bottom":"default",children:[(0,l.tZ)(_.xB,{title:F,description:v,onClose:i,showClose:!D||I,showDivider:!0}),N?(0,l.tZ)(X,{sentEmail:N,closeModal:P}):(0,l.BX)(C.tu,{alignItems:"stretch",paddingTop:32*!!D,children:[j?(0,l.tZ)(C.hs,{justifyContent:"center",alignItems:"center",paddingTop:{desktop:20,mobile:0},children:(0,l.tZ)(c.h,(0,o._)((0,r._)({},k),{pub:B}))}):(null==Z?void 0:Z.length)?(0,l.tZ)(C.hs,{justifyContent:"center",alignItems:"center",padding:{mobile:8},children:(0,l.tZ)(f.H,{users:Z,max:3,size:48})}):D?(0,l.tZ)(C.hs,{justifyContent:"center",alignItems:"center",children:(0,l.tZ)("img",{src:(0,w.zF4)("/img/substack-app-icon.png"),height:64,width:64})}):null,(0,l.tZ)(E,{utm_campaign:s,utm_source:p,utm_content:u,abTestingId:m,openUrl:y,overrideCTA:h,size:142,onSend:L})]})]})}function N(e){let{utm_campaign:t,utm_source:r,utm_content:o,abTestingId:i,size:c=240,width:s,height:d,openUrl:u}=e,p=(0,a.sO)(null),m=(0,w.D4e)({utm_campaign:t,utm_source:r,utm_content:o,abti:i}),{darkMode:f}=(0,h.v)(),v=function(e,t){let{result:r}=(0,g.Wf)(()=>n.e("9327").then(n.t.bind(n,91915,23)),[],{auto:!0}),o=null==r?void 0:r.default;return(0,a.Ye)(()=>o&&"undefined"!=typeof window?new o(e(window)):null,[o,...t])}(e=>{let t=e.devicePixelRatio,n=getComputedStyle(document.body),r=n.getPropertyValue("--color-fg-primary-themed");return{width:(null!=s?s:c)*t,height:(null!=d?d:c)*t,type:"canvas",data:u||m,dotsOptions:{color:r,type:"dots"},backgroundOptions:{color:n.getPropertyValue("--color-bg-elevated")},cornersSquareOptions:{color:r,type:"extra-rounded"},cornersDotOptions:{color:r,type:"dot"},qrOptions:{errorCorrectionLevel:"L"}}},[s,d,u,f]);return(0,a.d4)(()=>{let{current:e}=p;if(!e||!v||!v._canvas)return;let t=v._canvas;return t.style.width="".concat(null!=s?s:c,"px"),t.style.height="".concat(null!=d?d:c,"px"),e.style.width="".concat(null!=s?s:c,"px"),e.style.height="".concat(null!=d?d:c,"px"),e.appendChild(t),()=>{e.removeChild(t)}},[v,s,d]),(0,l.tZ)("div",{ref:p})}function R(e){let{suggestedEmail:t,onSend:n}=e,{iString:r}=(0,d.M1)(),o=(0,u.aF)(),[i,c]=(0,a.eJ)((null==o?void 0:o.email)||t||""),[s,p]=(0,a.eJ)(!1),[h,g]=(0,a.eJ)(null);return(0,l.tZ)(l.HY,{children:(0,l.BX)(C.tu,{gap:8,children:[(0,l.tZ)(I.H,{placeholder:r("Your email"),placement:"end",priority:"primary",type:"email",value:i,onChange:e=>c(e.currentTarget.value),button:(0,l.tZ)(v.zx,{priority:"primary",loading:s,onClick:async()=>{p(!0);try{await (0,m.rd)("/api/v1/send_app_download_link",{method:"POST",json:{email:i}}),g(null),p(!1),n&&n(i)}catch(e){g("Something went wrong")}},children:r("Send link")})}),h&&(0,l.tZ)(T.y,{align:"center",children:h})]})})}let X=e=>{let{sentEmail:t,closeModal:n}=e,{iString:r,iTemplate:o}=(0,d.M1)();return(0,l.BX)(l.HY,{children:[(0,l.tZ)(_.fe,{children:(0,l.BX)(C.tu,{gap:20,justifyContent:"center",alignItems:"center",children:[(0,l.tZ)(s.e,{src:"/img/cohorts/local_news/plane.png",maxWidth:64}),(0,l.BX)(C.tu,{gap:4,justifyContent:"center",alignItems:"center",children:[(0,l.tZ)(Z.xv.B2,{weight:"semibold",textAlign:"center",children:r("Check your email")}),(0,l.tZ)(Z.xv.B3,{color:"secondary",align:"center",children:o(B(),t||"your email")})]})]})}),(0,l.tZ)(_.mz,{alignButtons:"stretch",primaryButton:(0,l.tZ)(v.zx,{priority:"secondary",onClick:n,children:r("Done")})})]})}},16864:function(e,t,n){n.d(t,{Z:()=>c});var r=n(7409),o=n(99282),i=n(98848),l=n(16584),a=n(64515);let c=e=>{var{size:t=24,className:n}=e,c=(0,i._)(e,["size","className"]);return(0,l.tZ)(a.l,(0,o._)((0,r._)({},c),{name:"ChevronRightCircleIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,className:n,children:(0,l.tZ)("path",{d:"M24 12C24 18.553 18.5648 24 12 24C5.44707 24 0 18.553 0 12C0 5.4353 5.4353 0 11.9883 0C18.553 0 24 5.4353 24 12ZM9.22355 6.02354C8.84708 6.37648 8.83531 6.97649 9.21178 7.32943L14.2 12.0117L9.21178 16.7059C8.84708 17.0471 8.84708 17.6353 9.21178 18.0118C9.5412 18.3177 10.1765 18.2942 10.5177 17.9647L15.5647 13.2118C16.2471 12.5765 16.2588 11.4589 15.5647 10.8118L10.5177 6.07061C10.1412 5.71766 9.57649 5.68237 9.22355 6.02354Z"})}))}},41233:function(e,t,n){n.d(t,{LZ:()=>C,et:()=>T,fA:()=>v});var r=n(7409),o=n(99282),i=n(16584),l=n(95441),a=n(17625),c=n(80026),s=n(6490),d=n(65523),u=n(4354),p=n(65942),m=n(23276),h=n(9003),g=n(24142),f=n(91400);function v(e){let{onCancel:t,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:l,noExit:c,isOpen:d,redirectOverride:p,overrideTitle:m,zIndex:h}=e,g=(0,f.XA)();return(0,i.tZ)(s.u_,{onClose:t,isOpen:d,zIndex:h,children:(0,i.BX)(u.t,{children:[(0,i.tZ)(y,{onCancel:t,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:l,noExit:c,redirectOverride:p,overrideTitle:m}),g&&(0,i.tZ)(a.o$,{})]})})}function y(e){let{onCancel:t,onSuccess:n,onSignup:l,onUserCreated:a,noCloseButton:c,noExit:s,redirectOverride:d,overrideTitle:f}=e,{mode:v}=(0,u.I)(),y={overrideTitle:f,noCloseButton:c||s,onCancel:t,onSignup:l};return(0,i.BX)(i.HY,{children:["magic-link"===v&&(0,i.tZ)(p.v,(0,o._)((0,r._)({},y),{onSuccess:n})),"email"===v&&(0,i.tZ)(m.j,(0,o._)((0,r._)({},y),{onUserCreated:a,redirectOverride:d})),"password"===v&&(0,i.tZ)(g.L,(0,o._)((0,r._)({},y),{onSuccess:n})),"mfa"===v&&(0,i.tZ)(h.n,{onSuccess:n})]})}let C=e=>{let{overrideTitle:t,noCloseButton:n,onCancel:r,onSignup:o}=e,{iString:a}=(0,l.M1)();return(0,i.tZ)(d.xB,{title:t||a("Sign in to Substack"),description:o?(0,i.BX)(i.HY,{children:[a("First time here? "),(0,i.tZ)(c.hh,{color:"substack",decoration:"hover-underline",onClick:o,cursor:"pointer",children:a("Create account")})]}):void 0,showClose:!n,onClose:r,icon:(0,i.tZ)(d.ZN,{}),alignItems:"center"})},T=e=>{let{children:t}=e;return(0,i.tZ)(c.sg,{padding:16,borderTop:"detail",children:(0,i.tZ)(c.xv.B4,{as:"span",color:"secondary",align:"center",children:t})})}},16913:function(e,t,n){n.d(t,{E:()=>u});var r=n(16584),o=n(95441),i=n(80026),l=n(98012);let a=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),c=new Intl.DateTimeFormat(void 0,{weekday:"long"}),s=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(void 0,{dateStyle:"long"});function u(e){let{timestamp:t,conjunction:n=!1}=e,{iString:u,language:p}=(0,o.M1)(),m=new Date(t),h=(0,l.Z)(),g=p.startsWith("en"),f=h.isSame(m,"day")?u("Today"):h.subtract(1,"day").isSame(m,"day")?u("Yesterday"):h.isSame(m,"week")?c.format(m):h.isSame(m,"year")?s.format(m):d.format(m);return(0,r.tZ)(i.X2,{alignItems:"center",justifyContent:"center",children:(0,r.BX)(i.xv.B4,{color:"secondary",children:[f,n&&g?" at ":" ",a.format(m)]})})}},32223:function(e,t,n){n.d(t,{c:()=>s});var r=n(7409),o=n(98848),i=n(16584),l=n(77747),a=n(80026),c=n(23710);function s(e){var{children:t,setReactions:n=!0,alignSelf:a}=e,c=(0,o._)(e,["children","setReactions","alignSelf"]);return n?(0,i.BX)(d,{position:"relative",alignSelf:a,children:[t,(0,i.tZ)(l.Jg,(0,r._)({},c))]}):(0,i.tZ)(i.HY,{children:t})}let d=(0,a.E7)({display:"flex",className:c.Z.reactionsHoverZone})},11308:function(e,t,n){n.d(t,{o:()=>c});var r=n(7409),o=n(99282),i=n(79094),l=n(48980),a=n(97842);function c(e){let{entityType:t,publication:n}=e,l=(0,i.T)(),c=(0,a.I0)();return(e,i)=>{l({onSubmit:n=>c("communityPost"===t?s((0,o._)((0,r._)({},n),{id:e})):d((0,o._)((0,r._)({},n),{id:e}))),canReportToAdmins:!!(n&&i&&n.moderation_enabled),pub:null!=n?n:void 0})}}let s=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;return async e=>{e({type:"posts-flag_post",payload:{id:t}});let i=await u({id:t,details:n,reportCategory:r,reportedToSubstack:o});i instanceof Error&&console.warn("error flagging post",i)}},d=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;return async e=>{e({type:"comments-flag_comment",payload:{id:t}});let i=await p({id:t,details:n,reportCategory:r,reportedToSubstack:o});i instanceof Error&&console.warn("error flagging comment",i)}};async function u(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;try{return await (0,l.rd)("/api/v1/community/posts/".concat(t,"/reports"),{method:"POST",json:{postId:t,details:n,reportCategory:r,reportedToSubstack:o}})}catch(e){return e}}async function p(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;try{return await (0,l.rd)("/api/v1/community/comments/".concat(t,"/reports"),{method:"POST",json:{commentId:t,details:n,reportCategory:r,reportedToSubstack:o}})}catch(e){return e}}},45563:function(e,t,n){n.d(t,{X:()=>d});var r=n(7409),o=n(99282),i=n(23398),l=n(21666),a=n(76324);let c={medium:{desktop:{charactersTruncateTo:500,charactersTruncateIfOver:560,linesTruncateTo:6,linesTruncateIfOver:8},mobile:{charactersTruncateTo:320,charactersTruncateIfOver:420,linesTruncateTo:6,linesTruncateIfOver:8}},small:{desktop:{charactersTruncateTo:340,charactersTruncateIfOver:400,linesTruncateTo:4,linesTruncateIfOver:6},mobile:{charactersTruncateTo:210,charactersTruncateIfOver:210,linesTruncateTo:4,linesTruncateIfOver:4}}},s={desktop:{TRUNCATED_LINES:32,TRUNCATED_CHARACTERS:2400},mobile:{TRUNCATED_LINES:20,TRUNCATED_CHARACTERS:1e3}};function d(e,t){var n,d,u,p;let{truncationProfile:m="medium",isMobile:h}=t,{charactersTruncateTo:g,charactersTruncateIfOver:f,linesTruncateTo:v,linesTruncateIfOver:y}=c[d=e,"small"!==(u=m)&&(null===(p=d.attachments)||void 0===p?void 0:p.length)?"small":u][h?"mobile":"desktop"],C=function e(t){let n=null;if(t){if(n=(0,o._)((0,r._)({},t),{content:void 0,text:void 0}),null==t?void 0:t.content)for(let r of(n.content=[],t.content)){let t=e(r);t&&n.content.push(t)}else{var l,a;let e=null===(l=t.marks)||void 0===l?void 0:l.find(e=>"link"===e.type);(null==e?void 0:null===(a=e.attrs)||void 0===a?void 0:a.href)?n.text=(0,i.u)(e.attrs.href):n.text=t.text}}return n}(null!==(n=null==e?void 0:e.body_json)&&void 0!==n?n:(null==e?void 0:e.body)?{type:"doc",attrs:{schemaVersion:"v1"},content:e.body.split("\n\n").map(e=>({type:"paragraph",content:[{type:"text",text:e}]}))}:null),T=(0,l.k)(C)>f,_=(0,l.e)(C)>y;if(!C||!(T||_))return{bodyJson:C,truncatedBodyJson:C,isTruncated:!1,shouldExpandInline:!1};let Z=C,I=!1,b=0;if(T){let e=(0,a.$)(Z,{limit:g});Z=e.doc,I=e.isTruncated,b=(0,l.k)(C)-(0,l.k)(Z)}let w=!1,S=0;if(_&&Z){let e=(0,a.p)(Z,v);Z=e.doc,w=e.isTruncated,S=(0,l.e)(C)-(0,l.e)(Z)}return{bodyJson:C,truncatedBodyJson:Z,isTruncated:I||w,shouldExpandInline:S<s[h?"mobile":"desktop"].TRUNCATED_LINES&&b<s[h?"mobile":"desktop"].TRUNCATED_CHARACTERS}}}}]);