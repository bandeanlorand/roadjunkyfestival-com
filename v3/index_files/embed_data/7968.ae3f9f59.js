"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7968"],{28518:function(e,t,n){n.d(t,{KK:()=>_,NI:()=>q,YF:()=>U,Y_:()=>X,bQ:()=>I,ll:()=>D});var r=n(98661);if(2787!=n.j)var o=n(17268);var u=n(33771);if(2787!=n.j)var l=n(31720);if(2787!=n.j)var i=n(88388);if(2787!=n.j)var c=n(78493);let a={...r},s=a.useInsertionEffect,f=2787!=n.j?s||(e=>e()):null;function d(e){let t=r.useRef(()=>{});return f(()=>{t.current=e}),r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var v=2787!=n.j?"undefined"!=typeof document?r.useLayoutEffect:r.useEffect:null;let m=!1,p=0,h=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+p++,g=a.useId,b=2787!=n.j?g||function(){let[e,t]=r.useState(()=>m?h():void 0);return v(()=>{null==e&&t(h())},[]),r.useEffect(()=>{m=!0},[]),e}:null,y=2787!=n.j?r.createContext(null):null,E=2787!=n.j?r.createContext(null):null,R=()=>{var e;return(null==(e=r.useContext(y))?void 0:e.id)||null},k=()=>r.useContext(E);function w(e){return"data-floating-ui-"+e}function x(e){let t=(0,r.useRef)(e);return v(()=>{t.current=e}),t}function M(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let C=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function P(e,t){let n=(0,i.ht)(e,C());"prev"===t&&n.reverse();let r=n.indexOf((0,o.AW)((0,o.Me)(e)));return n.slice(r+1)[0]}function L(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!(0,o.r3)(n,r)}function j(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let A=2787!=n.j?{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0}:null,K=2787!=n.j?r.forwardRef(function(e,t){let[n,l]=r.useState();v(()=>{(0,o.G6)()&&l("button")},[]);let i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[w("focus-guard")]:"",style:A};return(0,u.tZ)("span",{...e,...i})}):null,S=2787!=n.j?r.createContext(null):null,T=2787!=n.j?w("portal"):null;function D(e){let{children:t,id:n,root:o,preserveTabOrder:c=!0}=e,a=function(e){void 0===e&&(e={});let{id:t,root:n}=e,o=b(),u=O(),[i,c]=r.useState(null),a=r.useRef(null);return v(()=>()=>{null==i||i.remove(),queueMicrotask(()=>{a.current=null})},[i]),v(()=>{if(!o||a.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=o,n.setAttribute(T,""),e.appendChild(n),a.current=n,c(n)},[t,o]),v(()=>{if(null===n||!o||a.current)return;let e=n||(null==u?void 0:u.portalNode);e&&!(0,l.kK)(e)&&(e=e.current),e=e||document.body;let r=null;t&&((r=document.createElement("div")).id=t,e.appendChild(r));let i=document.createElement("div");i.id=o,i.setAttribute(T,""),(e=r||e).appendChild(i),a.current=i,c(i)},[t,n,o,u]),i}({id:n,root:o}),[s,f]=r.useState(null),d=r.useRef(null),m=r.useRef(null),p=r.useRef(null),h=r.useRef(null),g=null==s?void 0:s.modal,y=null==s?void 0:s.open,E=!!s&&!s.modal&&s.open&&c&&!!(o||a);return r.useEffect(()=>{if(a&&c&&!g)return a.addEventListener("focusin",e,!0),a.addEventListener("focusout",e,!0),()=>{a.removeEventListener("focusin",e,!0),a.removeEventListener("focusout",e,!0)};function e(e){a&&L(e)&&("focusin"===e.type?j:function(e){(0,i.ht)(e,C()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})})(a)}},[a,c,g]),r.useEffect(()=>{a&&(y||j(a))},[y,a]),(0,u.BX)(S.Provider,{value:r.useMemo(()=>({preserveTabOrder:c,beforeOutsideRef:d,afterOutsideRef:m,beforeInsideRef:p,afterInsideRef:h,portalNode:a,setFocusManagerState:f}),[c,a]),children:[E&&a&&(0,u.tZ)(K,{"data-type":"outside",ref:d,onFocus:e=>{if(L(e,a)){var t;null==(t=p.current)||t.focus()}else{let e=P(document.body,"prev")||(null==s?void 0:s.domReference);null==e||e.focus()}}}),E&&a&&(0,u.tZ)("span",{"aria-owns":a.id,style:A}),a&&r.createPortal(t,a),E&&a&&(0,u.tZ)(K,{"data-type":"outside",ref:m,onFocus:e=>{if(L(e,a)){var t;null==(t=h.current)||t.focus()}else{let t=P(document.body,"next")||(null==s?void 0:s.domReference);null==t||t.focus(),(null==s?void 0:s.closeOnFocusOut)&&(null==s||s.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}let O=()=>r.useContext(S),B=2787!=n.j?{pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"}:null,H=2787!=n.j?{pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"}:null,W=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function I(e,t){void 0===t&&(t={});let{open:n,onOpenChange:u,elements:i,dataRef:c}=e,{enabled:a=!0,escapeKey:s=!0,outsidePress:f=!0,outsidePressEvent:v="pointerdown",referencePress:m=!1,referencePressEvent:p="pointerdown",ancestorScroll:h=!1,bubbles:g,capture:b}=t,y=k(),E=d("function"==typeof f?f:()=>!1),R="function"==typeof f?E:f,x=r.useRef(!1),C=r.useRef(!1),{escapeKey:P,outsidePress:L}=W(g),{escapeKey:j,outsidePress:A}=W(b),K=r.useRef(!1),S=d(e=>{var t;if(!n||!a||!s||"Escape"!==e.key||K.current)return;let r=null==(t=c.current.floatingContext)?void 0:t.nodeId,l=y?M(y.nodesRef.current,r):[];if(!P&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}u(!1,(0,o.MM)(e)?e.nativeEvent:e,"escape-key")}),T=d(e=>{var t;let n=()=>{var t;S(e),null==(t=(0,o.U9)(e))||t.removeEventListener("keydown",n)};null==(t=(0,o.U9)(e))||t.addEventListener("keydown",n)}),D=d(e=>{var t;let n=x.current;x.current=!1;let r=C.current;if(C.current=!1,"click"===v&&r||n||"function"==typeof R&&!R(e))return;let a=(0,o.U9)(e),s="["+w("inert")+"]",f=(0,o.Me)(i.floating).querySelectorAll(s),d=(0,l.kK)(a)?a:null;for(;d&&!(0,l.Py)(d);){let e=(0,l.Ow)(d);if((0,l.Py)(e)||!(0,l.kK)(e))break;d=e}if(f.length&&(0,l.kK)(a)&&!(0,o.ex)(a)&&!(0,o.r3)(a,i.floating)&&Array.from(f).every(e=>!(0,o.r3)(d,e)))return;if((0,l.Re)(a)&&U){let t=(0,l.Py)(a),n=(0,l.Dx)(a),r=/auto|scroll/,o=t||r.test(n.overflowX),u=t||r.test(n.overflowY),i=o&&a.clientWidth>0&&a.scrollWidth>a.clientWidth,c=u&&a.clientHeight>0&&a.scrollHeight>a.clientHeight,s="rtl"===n.direction,f=c&&(s?e.offsetX<=a.offsetWidth-a.clientWidth:e.offsetX>a.clientWidth),d=i&&e.offsetY>a.clientHeight;if(f||d)return}let m=null==(t=c.current.floatingContext)?void 0:t.nodeId,p=y&&M(y.nodesRef.current,m).some(t=>{var n;return(0,o.Pe)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,o.Pe)(e,i.floating)||(0,o.Pe)(e,i.domReference)||p)return;let h=y?M(y.nodesRef.current,m):[];if(h.length>0){let e=!0;if(h.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}u(!1,e,"outside-press")}),O=d(e=>{var t;let n=()=>{var t;D(e),null==(t=(0,o.U9)(e))||t.removeEventListener(v,n)};null==(t=(0,o.U9)(e))||t.addEventListener(v,n)});r.useEffect(()=>{if(!n||!a)return;c.current.__escapeKeyBubbles=P,c.current.__outsidePressBubbles=L;let e=-1;function t(e){u(!1,e,"ancestor-scroll")}function r(){window.clearTimeout(e),K.current=!0}function f(){e=window.setTimeout(()=>{K.current=!1},5*!!(0,l.Pf)())}let d=(0,o.Me)(i.floating);s&&(d.addEventListener("keydown",j?T:S,j),d.addEventListener("compositionstart",r),d.addEventListener("compositionend",f)),R&&d.addEventListener(v,A?O:D,A);let m=[];return h&&((0,l.kK)(i.domReference)&&(m=(0,l.Kx)(i.domReference)),(0,l.kK)(i.floating)&&(m=m.concat((0,l.Kx)(i.floating))),!(0,l.kK)(i.reference)&&i.reference&&i.reference.contextElement&&(m=m.concat((0,l.Kx)(i.reference.contextElement)))),(m=m.filter(e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{s&&(d.removeEventListener("keydown",j?T:S,j),d.removeEventListener("compositionstart",r),d.removeEventListener("compositionend",f)),R&&d.removeEventListener(v,A?O:D,A),m.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[c,i,s,R,v,n,u,h,a,P,L,S,j,T,D,A,O]),r.useEffect(()=>{x.current=!1},[R,v]);let I=r.useMemo(()=>({onKeyDown:S,...m&&{[B[p]]:e=>{u(!1,e.nativeEvent,"reference-press")},..."click"!==p&&{onClick(e){u(!1,e.nativeEvent,"reference-press")}}}}),[S,u,m,p]),U=r.useMemo(()=>({onKeyDown:S,onMouseDown(){C.current=!0},onMouseUp(){C.current=!0},[H[v]]:()=>{x.current=!0}}),[S,v]);return r.useMemo(()=>a?{reference:I,floating:U}:{},[a,I,U])}function U(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:o}=e,u=b(),l=r.useRef({}),[i]=r.useState(()=>(function(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}})()),c=null!=R(),[a,s]=r.useState(o.reference),f=d((e,t,r)=>{l.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:r,nested:c}),null==n||n(e,t,r)}),v=r.useMemo(()=>({setPositionReference:s}),[]),m=r.useMemo(()=>({reference:a||o.reference||null,floating:o.floating||null,domReference:o.reference}),[a,o.reference,o.floating]);return r.useMemo(()=>({dataRef:l,open:t,onOpenChange:f,elements:m,events:i,floatingId:u,refs:v}),[t,f,m,i,u,v])}({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,u=o.elements,[i,a]=r.useState(null),[s,f]=r.useState(null),m=(null==u?void 0:u.domReference)||i,p=r.useRef(null),h=k();v(()=>{m&&(p.current=m)},[m]);let g=(0,c.YF)({...e,elements:{...u,...s&&{reference:s}}}),y=r.useCallback(e=>{let t=(0,l.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;f(t),g.refs.setReference(t)},[g.refs]),E=r.useCallback(e=>{((0,l.kK)(e)||null===e)&&(p.current=e,a(e)),((0,l.kK)(g.refs.reference.current)||null===g.refs.reference.current||null!==e&&!(0,l.kK)(e))&&g.refs.setReference(e)},[g.refs]),w=r.useMemo(()=>({...g.refs,setReference:E,setPositionReference:y,domReference:p}),[g.refs,E,y]),x=r.useMemo(()=>({...g.elements,domReference:m}),[g.elements,m]),M=r.useMemo(()=>({...g,...o,refs:w,elements:x,nodeId:t}),[g,w,x,t,o]);return v(()=>{o.dataRef.current.floatingContext=M;let e=null==h?void 0:h.nodesRef.current.find(e=>e.id===t);e&&(e.context=M)}),r.useMemo(()=>({...g,context:M,refs:w,elements:x}),[g,w,x,M])}function _(e,t){void 0===t&&(t={});let{open:n,onOpenChange:u,events:i,dataRef:c,elements:a}=e,{enabled:s=!0,visibleOnly:f=!0}=t,d=r.useRef(!1),v=r.useRef(-1),m=r.useRef(!0);r.useEffect(()=>{if(!s)return;let e=(0,l.Jj)(a.domReference);function t(){!n&&(0,l.Re)(a.domReference)&&a.domReference===(0,o.AW)((0,o.Me)(a.domReference))&&(d.current=!0)}function r(){m.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",r,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",r,!0)}},[a.domReference,n,s]),r.useEffect(()=>{if(s)return i.on("openchange",e),()=>{i.off("openchange",e)};function e(e){let{reason:t}=e;("reference-press"===t||"escape-key"===t)&&(d.current=!0)}},[i,s]),r.useEffect(()=>()=>{-1!==v.current&&(clearTimeout(v.current),v.current=-1)},[]);let p=r.useMemo(()=>({onPointerDown(e){(0,o.cr)(e.nativeEvent)||(m.current=!1)},onMouseLeave(){d.current=!1},onFocus(e){if(d.current)return;let t=(0,o.U9)(e.nativeEvent);if(f&&(0,l.kK)(t))try{if((0,o.G6)()&&(0,o.V5)())throw Error();if(!t.matches(":focus-visible"))return}catch(e){if(!m.current&&!(0,o.j7)(t))return}u(!0,e.nativeEvent,"focus")},onBlur(e){d.current=!1;let t=e.relatedTarget,n=e.nativeEvent,r=(0,l.kK)(t)&&t.hasAttribute(w("focus-guard"))&&"outside"===t.getAttribute("data-type");v.current=window.setTimeout(()=>{var e;let l=(0,o.AW)(a.domReference?a.domReference.ownerDocument:document);if(t||l!==a.domReference){if((0,o.r3)(null==(e=c.current.floatingContext)?void 0:e.refs.floating.current,l)||(0,o.r3)(a.domReference,l)||r)return;u(!1,n,"focus")}})}}),[c,a.domReference,u,f]);return r.useMemo(()=>s?{reference:p}:{},[s,p])}let F="active",Z="selected";function N(e,t,n){let r=new Map,o="item"===n,u=e;if(o&&e){let{[F]:t,[Z]:n,...r}=e;u=r}return{..."floating"===n&&{tabIndex:-1,"data-floating-ui-focusable":""},...u,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,u]=t;if(!(o&&[F,Z].includes(n))){if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof u){var l;null==(l=r.get(n))||l.push(u),e[n]=function(){for(var e,t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}}else e[n]=u}}),e),{})}}function q(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),o=e.map(e=>null==e?void 0:e.item),u=r.useCallback(t=>N(t,e,"reference"),t),l=r.useCallback(t=>N(t,e,"floating"),n),i=r.useCallback(t=>N(t,e,"item"),o);return r.useMemo(()=>({getReferenceProps:u,getFloatingProps:l,getItemProps:i}),[u,l,i])}let Y=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function V(e,t){return"function"==typeof e?e(t):e}function X(e,t){void 0===t&&(t={});let{initial:n={opacity:0},open:o,close:u,common:l,duration:i=250}=t,c=e.placement,a=c.split("-")[0],s=r.useMemo(()=>({side:a,placement:c}),[a,c]),f="number"==typeof i,d=(f?i:i.open)||0,m=(f?i:i.close)||0,[p,h]=r.useState(()=>({...V(l,s),...V(n,s)})),{isMounted:g,status:b}=function(e,t){void 0===t&&(t={});let{open:n,elements:{floating:o}}=e,{duration:u=250}=t,l=("number"==typeof u?u:u.close)||0,[i,c]=r.useState("unmounted"),a=function(e,t){let[n,o]=r.useState(e);return e&&!n&&o(!0),r.useEffect(()=>{if(!e&&n){let e=setTimeout(()=>o(!1),t);return()=>clearTimeout(e)}},[e,n,t]),n}(n,l);return a||"close"!==i||c("unmounted"),v(()=>{if(o){if(n){c("initial");let e=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(e)}}c("close")}},[n,o]),{isMounted:a,status:i}}(e,{duration:i}),y=x(n),E=x(o),R=x(u),k=x(l);return v(()=>{let e=V(y.current,s),t=V(R.current,s),n=V(k.current,s),r=V(E.current,s)||Object.keys(e).reduce((e,t)=>(e[t]="",e),{});if("initial"===b&&h(t=>({transitionProperty:t.transitionProperty,...n,...e})),"open"===b&&h({transitionProperty:Object.keys(r).map(Y).join(","),transitionDuration:d+"ms",...n,...r}),"close"===b){let r=t||e;h({transitionProperty:Object.keys(r).map(Y).join(","),transitionDuration:m+"ms",...n,...r})}},[m,R,y,E,k,d,b,s]),{isMounted:g,styles:p}}},17268:function(e,t,n){if(n.d(t,{AW:()=>o,G6:()=>a,MM:()=>d,Me:()=>m,Pe:()=>p,U9:()=>h,V5:()=>f,cr:()=>c,ex:()=>v,j7:()=>b,r3:()=>u}),2787!=n.j)var r=n(31720);function o(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function u(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function l(){let e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function i(){let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}function c(e){return!i().includes("jsdom/")&&(!s()&&0===e.width&&0===e.height||s()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function a(){return/apple/i.test(navigator.vendor)}function s(){let e=/android/i;return e.test(l())||e.test(i())}function f(){return l().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function d(e){return"nativeEvent"in e}function v(e){return e.matches("html,body")}function m(e){return(null==e?void 0:e.ownerDocument)||document}function p(e,t){return null!=t&&("composedPath"in e?e.composedPath().includes(t):null!=e.target&&t.contains(e.target))}function h(e){return"composedPath"in e?e.composedPath()[0]:e.target}let g=/^(4716|5288)$/.test(n.j)?"input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])":null;function b(e){return(0,r.Re)(e)&&e.matches(g)}},99961:function(e,t,n){n.d(t,{U:()=>o,Z:()=>o});var r=n(88897);let o=r.NB.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",(0,r.P1)(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{let{selection:e,storedMarks:o}=n;if(e.$from.parent.type.spec.isolating)return!1;let{keepMarks:u}=this.options,{splittableMarks:l}=r.extensionManager,i=o||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&i&&u){let t=i.filter(e=>l.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}})}}]);