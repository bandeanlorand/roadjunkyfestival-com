"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["8982"],{42725:function(t,e,r){r.d(e,{pc:()=>n}),r(16584),r(6400),r(30396),r(14068),r(68833),r(62981),r(15771),r(19081),r(58175),r(35144);let n="clip_web_nux_seen_at"},72392:function(t,e,r){r.d(e,{o:()=>_});var n=r(16584),i=r(30396),o=r(94184),l=r.n(o),a=r(95441),s=r(98914),d=r(15771),c=r(19081),p=r(44424),u=r(63474),h=r(58175),m=r(81821),v=r(98550);let f=t=>{let[e,r]=(0,i.eJ)(null);return(0,i.d4)(()=>{let e=[];return t.forEach(t=>{let n=(0,s.VA)(t.text.toLowerCase(),!0),i=document.getElementById("\xa7".concat(n));if(i){let t=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&t.intersectionRatio>=.8&&r(n)})},{threshold:.5,rootMargin:"0px 0px -90% 0px"});t.observe(i),e.push(t)}}),()=>e.forEach(t=>t.disconnect())},[t]),e},b=t=>t?/^H[1-5]$/i.test(t.tagName)?t:b(t.parentElement):null,g=t=>{let{toc:e,minLevel:r,activeItem:i}=t;return(0,n.tZ)(c.tu,{gap:12,paddingY:12,paddingX:8,alignItems:"end",children:e.map((t,e)=>{let o=t.level-r,a="indent-".concat(Math.min(o,3)),d=(0,s.VA)(t.text.toLowerCase(),!0);return(0,n.tZ)("div",{className:l()(v.Z.line,v.Z[a],i===d&&v.Z.active)},e)})})},Z=t=>{let{toc:e,minLevel:r,activeItem:i,onItemClick:o}=t,{iString:d}=(0,a.M1)();return(0,n.BX)(c.tu,{gap:4,flex:"grow",children:[(0,n.tZ)(h.xv.Meta,{padding:4,color:"primary",children:d("Contents")}),e.map((t,e)=>{let a=(0,s.VA)(t.text.toLowerCase(),!0),d=t.level-r,p="indent-".concat(Math.min(d,3));return(0,n.tZ)(u.A0,{href:"#\xa7".concat(a),onClick:t=>{t.preventDefault(),o(a)},children:(0,n.tZ)(c.gq,{padding:4,className:l()(v.Z.row),children:(0,n.tZ)(h.xv.B3,{className:l()(v.Z.label,v.Z[p],i===a&&v.Z.active),ellipsis:!0,children:t.text})})},e)})]})},_=t=>{let{toc:e,position:r="fixed"}=t,{iString:o}=(0,a.M1)(),s=Math.min(...e.map(t=>t.level)),[c,u]=(0,i.eJ)(null),h=f(e);return e.length<2||(0,m.tq)()?null:(0,n.tZ)(p.v2,{trigger:t=>{let{ref:i,onClick:a}=t;return(0,n.tZ)(d.kG,{ref:i,onClick:a,className:l()(v.Z.trigger,v.Z[r]),"aria-label":o("Table of Contents"),position:r,children:(0,n.tZ)(g,{toc:e,minLevel:s,activeItem:h})})},customShowClass:v.Z.show,customHideClass:v.Z.hide,layerClassName:v.Z.menu,layerOptions:{placement:"right-center",triggerOffset:8},children:(0,n.tZ)(Z,{toc:e,minLevel:s,activeItem:h,onItemClick:t=>{let e=document.getElementById("\xa7".concat(t));if(e){let r=b(e);if(r){if(c){let t=document.getElementById("\xa7".concat(c)),e=t?b(t):null;null==e||e.classList.remove("highlight")}r.classList.add("highlight"),u(t),e.scrollIntoView({behavior:"smooth",block:"start"})}}}})})}},59708:function(t,e,r){let n;r.d(e,{Kd:()=>W,N1:()=>Y});var i,o=r(7409),l=r(99282),a=r(16584),s=r(6400),d=r(70109),c=r(94184),p=r.n(c),u=r(60826),h=r(4373),m=r(62049),v=r(16564),f=r(17117),b=r(36441),g=r(78435),Z=r(80836),_=r(3258),w=r(33665),y=r(95441),S=r(57796),C=r(26989),x=r(98914),N=r(55706),k=r(19081),I=r(32700),A=r(93903),E=r(60308),F=r(26111),L=r(81821),M=r(64314);let P=(t,e)=>{var r,n,i,l;return(0,a.tZ)("div",{className:"subscription-widget-wrap",children:(0,a.BX)("div",{className:"subscription-widget show-subscribe",children:[(0,a.tZ)("div",{className:"preamble",children:(0,a.tZ)("p",{dangerouslySetInnerHTML:{__html:null!==(l=null===(i=t.children[0])||void 0===i?void 0:null===(n=i.children[0])||void 0===n?void 0:null===(r=n.children[0])||void 0===r?void 0:r.innerHTML)&&void 0!==l?l:""}})}),(0,a.tZ)(w.Z,(0,o._)({pub:e.pub,subscribeButtonAttrs:null,source:"subscribe-widget-preamble"},e.props))]})})},H=(t,e)=>{try{let r=JSON.parse((0,A.Z)(t.getAttribute("data-attrs")));if(["".concat(e.pub.base_url,"/subscribe?"),"".concat(e.pub.base_url,"/subscribe?plan=founding"),u.W.CHECKOUT_URL,u.W.FOUNDING_CHECKOUT_URL].includes(r.url)){let r=JSON.parse((0,A.Z)(t.getAttribute("data-attrs")));return(0,a.tZ)(w.Z,(0,o._)({pub:e.pub,subscribeButtonAttrs:r},e.props))}}catch(t){console.error("Failed to parse button:",t)}return null},T=(t,e)=>{let{pub:r,props:{isStatic:n,post:i}}=e;try{let e=t.getAttribute("data-attrs");if(e){let t=JSON.parse((0,A.Z)(e));return n?(0,a.tZ)(v.nO,{label:t.label,pub:r,post:i,duration:t.duration}):(0,a.tZ)(v.cM,{label:t.label,pub:r,post:i,src:"/api/v1/audio/upload/".concat(t.mediaUploadId,"/src"),duration:t.duration,autoPlay:!1,mediaUpload:{id:t.mediaUploadId}})}}catch(t){console.error("Failed to parse audio:",t)}return null},O=(t,e)=>{let{pub:r,props:{isStatic:n,post:i}}=e;try{let e=t.getAttribute("data-attrs");if(e){let t=JSON.parse((0,A.Z)(e));return n?(0,a.tZ)(v.nO,{label:t.label,pub:r,post:i,duration:t.duration}):(0,a.tZ)(v.cM,{label:t.label,pub:r,post:i,src:t.url,duration:t.duration,autoPlay:!1})}}catch(t){console.error("Failed to parse audio:",t)}return null},B=(t,e)=>{let{props:{isStatic:r}}=e;try{let e=t.getAttribute("data-attrs");if(e){let{name:t,avatarUrl:n,url:i}=JSON.parse((0,A.Z)(e));return r?(0,a.tZ)(N.W,{name:t,avatarUrl:n,url:i}):(0,a.tZ)(N.R,{name:t,avatarUrl:n,url:i})}}catch(t){console.error("Failed to parse audio:",t)}return null},J=t=>{try{let e=JSON.parse(t.dataset.attrs).symbol;if(e)return(0,a.tZ)(f.Z,{symbol:e,prependSymbol:JSON.parse(t.dataset.attrs).prependSymbol,isStatic:JSON.parse(t.dataset.attrs).isStatic});return(0,a.tZ)(a.HY,{})}catch(t){return console.error("failed to parse cashtag"),(0,a.tZ)(a.HY,{})}},U=(t,e)=>{let{pub:r,props:{isStatic:n}}=e,{iString:i}=I18N.i({pub:r});try{if(n){let e=t.getAttribute("data-attrs");if(e){let t=JSON.parse((0,A.Z)(e)),r=null==t?void 0:t.persistentExpression;return r?(0,a.tZ)("img",{src:(0,E.iJV)(r),style:{transform:"scale(0.5)"},"data-component-name":"LatexImg"}):(0,a.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found in email")})}return(0,a.tZ)("p",{children:i("Failed to render LaTeX expression — data attributes not found")})}let e=t.getAttribute("data-attrs"),r=JSON.parse((0,A.Z)(e)),o=null==r?void 0:r.persistentExpression;return o?(0,a.tZ)(k.gq,{className:"latex-rendered",justifyContent:"center",flex:"grow",paddingBottom:"4px",paddingTop:"4px","data-component-name":"Latex",children:(0,a.tZ)(k.tu,{justifyContent:"center",children:(0,a.tZ)(d.Z,{inline:!1,children:"\\(".concat(o,"\\)")})})}):(0,a.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found")})}catch(t){return console.error("failed to render mathjax",t),(0,a.tZ)("p",{children:i("Failed to render LaTeX expression — error")})}},V=t=>{try{let{name:e,id:r,type:n,url:i,photo_url:o,uuid:l,isStatic:s}=JSON.parse(t.dataset.attrs);if(e)return(0,a.tZ)(_.ZP,{name:e,id:r,type:n,url:i,photo_url:o,uuid:l,isStatic:s});return(0,a.tZ)(a.HY,{})}catch(t){return(0,a.tZ)(a.HY,{})}},D=(t,e)=>{try{let i=JSON.parse((0,A.Z)(t.getAttribute("data-attrs")));if(null==i?void 0:i.isEmail){var r,n;return(0,a.tZ)("table",{className:"poll-embed poll-email",cellSpacing:"16px",width:"100%",children:(0,a.tZ)("tbody",{children:(0,a.tZ)("tr",{children:(0,a.tZ)("td",{align:"center",children:(0,a.tZ)(g.kq,{id:i.id,embeddedPolls:null!==(n=null===(r=e.props.dataForEmailRender)||void 0===r?void 0:r.embeddedPolls)&&void 0!==n?n:[],pub:e.pub})})})})})}return(0,a.tZ)("div",{className:"poll-embed",dataAttrs:t.getAttribute("data-attrs"),children:(0,a.tZ)(g.n_,{id:i.id,isEditor:!1,post:e.props.post,isVersionView:!!e.props.isVersionView})})}catch(t){return console.error("Failed to parse poll:",t),(0,a.tZ)(a.HY,{})}},j=(t,e,r)=>{var n;let[i,,o]=t.id.split("-"),l=null===(n=r.wrapper.querySelector("#".concat(i,"-").concat(o)))||void 0===n?void 0:n.nextElementSibling;return l?((0,L.tq)()&&(t.href="#_"),(0,a.tZ)(I.z,{content:(0,a.tZ)("div",{className:"markup",children:q(l,e,r)}),className:"footnote-hovercard-target",dontStopPropagation:!0,layerClassName:"typography footnote-hovercard",as:"span",children:q(t,e,r)})):q(t,e,r)},z=(t,e)=>(0,a.tZ)(y._7,{language:e,children:t}),R=function(t,e){var r,n,i;let{shallow:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("A"!==t.nodeName||t.getAttribute("rel")||t.setAttribute("rel","pub"in e&&(null===(i=e.pub)||void 0===i?void 0:i.no_follow)?"nofollow ugc noopener":""),(0,x.pv)(t,"image2")&&(null===(r=e.props)||void 0===r?void 0:r.canRestackImage)&&t.classList.add("can-restack"),"pub"in e&&e.pub&&"P"===t.nodeName&&(0,x.pv)(t,"button-wrapper")){let r=H(t,e);if(r)return r;let n=(0,b.TW)(t,e);if(n)return n}let d="pub"in e&&(null===(n=e.pub)||void 0===n?void 0:n.language)||"en";return(0,x.pv)(t,"subscription-widget-wrap-editor")||(0,x.pv)(t,"subscription-widget-wrap")?z(P(t,e),d):(0,x.pv)(t,"cashtag-wrap")?z(J(t),d):(0,x.pv)(t,"mention-wrap")?z(V(t),d):"pub"in e&&e.pub&&(0,x.pv)(t,"native-audio-url-embed")?z(O(t,e),d):"pub"in e&&e.pub&&(0,x.pv)(t,"native-audio-embed")?z(T(t,e),d):"pub"in e&&e.pub&&(0,x.pv)(t,"native-video-embed")?z((0,b.tj)(t,e),d):"pub"in e&&e.pub&&(0,x.pv)(t,"meeting-embed")?z(B(t,e),d):(0,x.pv)(t,"poll-embed")?z(D(t,e),d):(0,x.pv)(t,"recipe-embed")?z((0,b.G3)(t,e),d):(0,x.pv)(t,"pinterest-embed")?z((0,b.EK)(t),d):(0,x.pv)(t,"sponsorship-campaign-embed")?z((0,b.b3)(t,e),d):(0,x.pv)(t,"image-gallery-embed")?z((0,b.W5)(t,e),d):(0,x.pv)(t,"image3")?z((0,b.L0)(t,e),d):(0,x.pv)(t,"directMessage")?z((0,b.Gz)(t,e),d):(0,x.pv)(t,"latex-rendered")?z(U(t,e),d):(0,x.pv)(t,"community-chat")?z(function(t,e){let{props:{isStatic:r}}=e;try{let e=t.getAttribute("data-attrs"),n=JSON.parse((0,A.Z)(e));if(!n.pub||!n.subdomain)return console.error("could not deepPrepare communityChat, subdomain or pub missing from node"),(0,a.tZ)(s.Fragment,{});return(0,a.tZ)("div",{className:"community-chat",dataAttrs:e,children:r?(0,a.tZ)(h.C,(0,o._)({},n)):(0,a.tZ)(h.a,{pub:n.pub,subdomain:n.subdomain})})}catch(t){return console.error("Failed to parse chat embed:",t),(0,a.tZ)(s.Fragment,{})}}(t,e),d):(0,x.pv)(t,"community-post")?z(function(t,e){let{props:{isStatic:r,is_freemail:n}}=e;try{let e=t.getAttribute("data-attrs"),i=JSON.parse((0,A.Z)(e));return r?(0,a.tZ)(m.s,(0,o._)({is_freemail:n},i)):(0,a.tZ)(m.V,(0,o._)({},i))}catch(t){return console.error("Failed to parse chat post embed:",t),(0,a.tZ)(s.Fragment,{})}}(t,e),d):(0,x.pv)(t,"digest-post-embed")?z((0,b.Do)(t,e),d):(0,x.pv)(t,"comment")&&!(0,x.pv)(t,"template-comment")?z(function(t,e){let{props:{isStatic:r}}=e;try{let e=t.getAttribute("data-attrs"),n=JSON.parse((0,A.Z)(e));return r?(0,a.tZ)(C.Eo,(0,o._)({},n)):(0,a.tZ)(S.d,(0,o._)({},n))}catch(t){return console.error("Failed to parse chat post embed:",t),(0,a.tZ)(s.Fragment,{})}}(t,e),d):(0,x.pv)(t,"referrals-tier-card")?z((0,b.mx)(t,e),d):("undefined"!=typeof window&&(0,x.pv)(t,"file-embed-button")&&"href"in t&&t.href&&!(0,F.x)(t.href,"token")&&(t.href=(0,E.n1t)(t.href,{token:(0,F.x)(window._preloads.original_url,"token")})),"props"in e&&e.props&&"post"in e.props&&e.props.post&&"object"==typeof e.props.post&&"id"in e.props.post&&e.props.post.id&&(0,x.pv)(t,"footnote")&&(t.id&&(t.id+="-".concat(e.props.post.id)),"href"in t&&t.href&&(t.href+="-".concat(e.props.post.id))),(0,x.pv)(t,"footnote-anchor"))?z(j(t,R,e),d):l?null:q(t,R,e)},X=function(t){let e={};for(let{name:r,value:n}of Array.prototype.slice.call(t))e[r]=n;return e},q=(i=(t,e,r,n)=>{var i;if(!t)throw Error("Empty node, cannot preactify!");let d=3===t.nodeType?"span":8===t.nodeType?"x_preact_compatible_html_comment_x":t.tagName.toLowerCase(),c=1!==t.nodeType?{}:X(t.attributes),u=t.children&&t.children.length>0?null:t.textContent;if(n||"script"===d&&t.innerHTML===M.N)return(0,s.h)(d,(0,l._)((0,o._)({},c),{dangerouslySetInnerHTML:{__html:t.innerHTML}}));let h=!!(null===(i=t.parentElement)||void 0===i?void 0:i.getAttribute("data-prose-mirror-wrapper"));if(r&&"pub"in r&&h&&["h1","h2","h3","h4"].includes(d)&&!t.className)return function(t,e,r,n){var i,d,c,u;let h=p()("header-anchor-post",e.className),m=r.children.length?Array.prototype.map.call(r.childNodes,t=>R(t,n)):[r.textContent];return(0,s.h)(t,(0,l._)((0,o._)({},e),{className:h}),...m,(0,a.tZ)(Z.Z,{text:null!==(c=r.textContent)&&void 0!==c?c:"",pub:null==n?void 0:n.pub,post:null==n?void 0:null===(i=n.props)||void 0===i?void 0:i.post,offsetTop:!0,isAboutPage:null!==(u=null==n?void 0:null===(d=n.props)||void 0===d?void 0:d.isAboutPage)&&void 0!==u&&u}))}(d,c,t,r);if(u)return(0,s.h)(d,c,u);let m=e(t,r,{shallow:!0});return m||(0,s.h)(d,c,...Array.prototype.map.call(t.childNodes,t=>e(t,r)))},n=0,function(){let t=[].slice.call(arguments,0),e=++n>2500;if(e){var r,o,l;console.error("Too many post nodes to recurse",{postId:null===(l=t[2])||void 0===l?void 0:null===(o=l.props)||void 0===o?void 0:null===(r=o.post)||void 0===r?void 0:r.id,depth:n})}let a=i.apply(null,[...t,...e?[!0]:[]]);return n--,a});function W(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=document.createElement("div");return n.setAttribute("data-prose-mirror-wrapper","1"),n.innerHTML=t,Array.prototype.map.call(n.childNodes,t=>q(t,R,{wrapper:n,pub:e,props:r}))}function Y(t){if("undefined"==typeof window)return[];let e=document.createElement("div");e.innerHTML=t;let r=[];for(let t of e.querySelectorAll("h1, h2, h3, h4")){var n,i;let e=t.tagName[1],o=e?parseInt(e):NaN;r.push({level:null!=o?o:0,text:null!==(n=t.textContent)&&void 0!==n?n:"",id:null!==(i=t.id)&&void 0!==i?i:""})}return r}},31852:function(t,e,r){r.d(e,{Z:()=>s});var n=r(7409),i=r(99282),o=r(98848),l=r(16584),a=r(64515);let s=t=>{var{size:e=24,color:r="var(--color-fg-primary)"}=t,s=(0,o._)(t,["size","color"]);return(0,l.tZ)(a.l,(0,i._)((0,n._)({},s),{name:"BigQuoteIcon",svgParams:{viewBox:"0 0 27 17"},stroke:"none",width:e,height:e,fill:r,children:(0,l.tZ)("path",{d:"M11.7188 10.6172C11.7188 7.5 9.41016 5.01562 6.43359 5.01562C5.03906 5.01562 3.71484 5.56641 2.74219 6.64453H2.42578C3.10547 4.42969 5.16797 2.57812 7.73438 1.81641C8.09766 1.69922 8.36719 1.59375 8.53125 1.45312C8.71875 1.30078 8.82422 1.11328 8.82422 0.84375C8.82422 0.351562 8.44922 0.0117188 7.89844 0.0117188C7.53516 0.0117188 7.25391 0.0820312 6.75 0.246094C5.13281 0.773438 3.67969 1.69922 2.55469 2.88281C0.972656 4.52344 0 6.71484 0 9.31641C0 13.7109 2.78906 16.2539 6.05859 16.2539C9.28125 16.2539 11.7188 13.793 11.7188 10.6172ZM25.793 10.6172C25.793 7.5 23.4727 5.01562 20.5078 5.01562C19.1133 5.01562 17.7773 5.56641 16.8164 6.64453H16.5C17.1797 4.42969 19.2422 2.57812 21.7969 1.81641C22.1602 1.69922 22.4414 1.59375 22.6055 1.45312C22.793 1.30078 22.8867 1.11328 22.8867 0.84375C22.8867 0.351562 22.5234 0.0117188 21.9727 0.0117188C21.5977 0.0117188 21.3281 0.0820312 20.8125 0.246094C19.207 0.773438 17.7422 1.69922 16.6172 2.88281C15.0469 4.52344 14.0742 6.71484 14.0742 9.31641C14.0742 13.7109 16.8633 16.2539 20.1328 16.2539C23.3555 16.2539 25.793 13.793 25.793 10.6172Z"})}))}},7523:function(t,e,r){r.d(e,{Z:()=>d});var n=r(7409),i=r(98848),o=r(6400),l=r(94184),a=r.n(l),s=r(4777);let d=t=>{let{align:e,as:r="div",children:l,clamp:d,className:c,color:p="primary",innerRef:u,preset:h,whiteSpace:m,wrap:v}=t,f=(0,i._)(t,["align","as","children","clamp","className","color","innerRef","preset","whiteSpace","wrap"]),b=a()(c,s.Z.container,s.Z["preset-".concat(h)],s.Z["color-".concat(p)],e&&s.Z["align-".concat(e)],d&&s.Z.clamp,d&&s.Z["clamp-".concat(d)],v&&s.Z["wrap-".concat(v)],m&&s.Z["white-space-".concat(m)]);return(0,o.h)(r,(0,n._)({className:b,ref:u},f),l)}},70522:function(t,e,r){r.d(e,{ZP:()=>g});var n=r(27412),i=r(16584),o=r(6400),l=r(94184),a=r.n(l),s=r(81094),d=r(70149),c=r(15702),p=r(82621),u=r(42493),h=r(20888),m=r(86603),v=r(32261),f=r(68833),b=r(60308);class g extends o.Component{static getSubject(t){return t?"author_id"in t&&t.author_id?{id:t.author_id,name:t.author_name,photo_url:(0,b.SMH)(t,{preferAuthorPhoto:!0}),publications:t.subdomain?[t]:[]}:"user_id"in t&&t.user_id?{id:t.user_id,name:t.name,photo_url:(0,b.SMH)(t),publications:[]}:{id:"id"in t?t.id:void 0,name:"name"in t?t.name:void 0,photo_url:(0,b.SMH)(t),publications:[]}:{id:null,name:null,photo_url:b.zUJ,publications:[]}}static hasCustomProfilePhoto(t){return!!g.getSubject(t).photo_url}isSelf(){return this.props.user&&this.props.user.id===g.getSubject(this.props.subject).id||!this.props.subject}profileUrl(){return this.props.url?this.props.url:this.props.isAuthor?(0,b.LwU)(g.getSubject(this.props.subject),this.props.pub):(0,b.NNq)(g.getSubject(this.props.subject))}onBeforeProfileClose(t){if(t){if(!this.props.onEdit)return document.location.reload(),!1;this.props.onEdit()}}render(t){let{subject:e,pub:r,user:n,badge:o,freeSignup:l,freeSignupEmail:s,token:d,isStatic:c,size:p,modalProfile:h,isBanned:m,lazy:f,tooltip:b,noLink:_,className:w}=t;p=p||33;let y=g.getSubject(e);return(0,i.BX)("div",{className:a()("user-head",{banned:m},w),children:[_?(0,i.tZ)(Z,{photo_url:y.photo_url,size:p,isStatic:c,isBanned:m,lazy:f,badge:o,tooltip:b,className:"default-pointer"}):(0,i.tZ)("a",{href:c||!h?this.profileUrl():void 0,onClick:this.onClick,children:(0,i.tZ)(Z,{photo_url:y.photo_url,size:p,isStatic:c,isBanned:m,lazy:f,badge:o,tooltip:b})}),this.props.modalProfile&&!c&&"undefined"!=typeof window&&this.state.includeProfile&&(this.isSelf()?(0,i.tZ)(u.EB,{ref:this.assignProfile,user:n,freeSignup:l,freeSignupEmail:s,needsPhoto:!0,token:d,onBeforeClose:t=>this.onBeforeProfileClose(t)}):(0,i.tZ)(v.FI,{ref:this.assignProfile,profileUser:y,pub:r,isBanned:null!=m&&m}))]})}constructor(...t){super(...t),(0,n._)(this,"profileShown",void 0),(0,n._)(this,"profile",void 0),(0,n._)(this,"assignProfile",t=>{this.profile=t}),(0,n._)(this,"onClick",t=>{if(this.props.onClick)this.props.onClick(t);else if(!this.props.modalProfile)return!1;else if(t.preventDefault(),t.stopPropagation(),this.profileShown||(this.profileShown=!0,(0,f.j)(f.FP.USER_HEAD_CLICKED,{is_self:this.isSelf()})),this.state.includeProfile){var e;null===(e=this.profile)||void 0===e||e.open()}else this.setState({includeProfile:!0},()=>{var t;return null===(t=this.profile)||void 0===t?void 0:t.open()})})}}let Z=t=>{let{photo_url:e,size:r,isStatic:n,isBanned:o,lazy:l,badge:p,tooltip:u,style:h,children:m,className:v}=t,f=!e&&!!m,b={founding:(0,i.tZ)(c.Z,{height:14,width:14,stroke:"var(--print_on_pop)",strokeWidth:1,title:u}),author:(0,i.tZ)(s.Z,{height:14,width:14,stroke:"var(--print_on_pop)",title:u})}[null!=p?p:"undefined"];return(0,i.BX)("div",{className:a()("profile-img-wrap",v),children:[f?m:l?(0,i.tZ)(w,{photo_url:e,size:r,isStatic:n,badge:p,style:h}):(0,i.tZ)(y,{photo_url:e,size:r,isStatic:n,badge:p,style:h}),b&&(0,i.tZ)("div",{className:"profile-img-badge",title:null!=u?u:void 0,children:b}),o&&(0,i.tZ)(d.Z,{})]})},_=(t,e)=>(0,b.zF4)(t,2*e,{height:2*e,crop:"fill"}),w=t=>{let{photo_url:e,size:r,isStatic:n,badge:o,style:l}=t,[a,s]=(0,m.Z)({}),d=!s||s.isIntersecting?e:b.zUJ;return(0,i.tZ)(S,{url:_(d,r),size:r,ref:a,badge:o,isStatic:n,style:l})},y=t=>{let{photo_url:e,size:r,isStatic:n,badge:o,style:l}=t;return(0,i.tZ)(S,{url:_(e,r),size:r,badge:o,isStatic:n,style:l})},S=t=>{let{url:e,size:r,isStatic:n,ref:o,badge:l,className:a}=t;return n?(0,i.tZ)(p.Z,{className:a,src:(0,b.zF4)(e,2*r,{height:2*r,crop:"fill"}),ref:o,height:r,width:r,alt:l||""}):(0,i.tZ)(h.e,{className:a,src:e,imageProps:{height:2*r,crop:"fill"},maxWidth:2*r,ref:o,alt:l||""})}},58319:function(t,e,r){r.d(e,{Z:()=>d});var n=r(27412),i=r(16584),o=r(6400),l=r(94184),a=r.n(l),s=r(98914);class d extends o.Component{async componentDidMount(){"undefined"!=typeof window&&(this.ref||await new Promise(t=>setTimeout(t,0)),this.checkVisibility(),(this.props.parent||window).addEventListener("scroll",this.checkVisibility))}componentWillUnmount(){"undefined"!=typeof window&&(this.props.parent||window).removeEventListener("scroll",this.checkVisibility)}render(t){let{className:e,children:r}=t;return(0,i.tZ)("div",{ref:this.assignRef,className:a()("visibility-check",e),children:r})}constructor(...t){super(...t),(0,n._)(this,"ref",void 0),(0,n._)(this,"assignRef",t=>{this.ref=t}),(0,n._)(this,"checkVisibility",()=>{if(!this.ref)return;let t=this.ref.getBoundingClientRect(),e=this.props.threshold||0,r=this.props.parent?this.props.parent.clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight),n=!(t.bottom<0-e||t.top>=r+e);(0,s.nn)(this,async(t,e)=>{if(t.isVisible!==n)this.setState({isVisible:n});else if(!e.noDedupe)return;let r=n?"hadFirstVisible":"hadFirstInvisible",i=!t[r];i&&this.setState({[r]:!0}),(await Promise.all([n&&e.onVisible&&e.onVisible(),n&&e.onFirstVisible&&i&&e.onFirstVisible(),!n&&e.onInvisible&&e.onInvisible(),!n&&e.onFirstInvisible&&i&&e.onFirstInvisible()])).reduce((t,e)=>!0===e||t)&&this.checkVisibility()})})}}},4796:function(t,e,r){r(16584),r(30396),r(98661),r(80569),r(95441),r(6400),r(68833),r(15771),r(61254),r(19081),r(44424),r(61468)},6091:function(t,e,r){r.d(e,{N:()=>u});var n=r(16584),i=r(32351),o=r(40647),l=r(32129);r(30396),r(94184),r(31852),r(28161),r(3880),r(77338),r(5952);var a=r(98170);r(16451),r(94874),r(71068),r(61254),r(19081),r(58175),r(23398),r(98012),r(60308);var s=r(63651);r(5749);var d=r(33884),c=r(70408),p=r(84864);function u(t){var e,r,u,h,m,v;let f,b,g,{comment:Z,post:_,publication:w}=t,y=!!(0,o.xR)().getConfigFor("enable_attachment_only_note_previews"),S="Substack | Notes";w&&Z.name?S="".concat(Z.name," on ").concat(w.name):Z.name?S="".concat(Z.name," on Substack"):w&&(S="".concat(w.name));let C=_&&w?(0,l.getPageTitleAndMeta)(_,w,{isCommentPage:!0}).title:"".concat(S,': "').concat((0,p.truncateText)(Z.body,280),'"'),x=null===(e=Z.attachments)||void 0===e?void 0:e.find(t=>"image"===t.type),N=x&&"imageUrl"in x?x.imageUrl:void 0;y&&N?f=N:!y||function(t){let{linkAttachment:e,imageAttachments:r,videoAttachments:n,quoteAttachments:i}=function(t){var e,r,n,i,o,l,a;let s=null===(e=t.attachments)||void 0===e?void 0:e.find(t=>["post","comment","link","publication"].includes(t.type)),d=null!==(o=null===(r=t.attachments)||void 0===r?void 0:r.filter(t=>"image"===t.type))&&void 0!==o?o:[];return{linkAttachment:s,imageAttachments:d,videoAttachments:null!==(l=null===(n=t.attachments)||void 0===n?void 0:n.filter(t=>"video"===t.type))&&void 0!==l?l:[],quoteAttachments:null!==(a=null===(i=t.attachments)||void 0===i?void 0:i.filter(t=>"post"===t.type&&!!t.postSelection))&&void 0!==a?a:[]}}(t);return!!e&&("comment"===e.type||"post"===e.type&&null!==(0,a.FK)({post:e.post,compact:!1,readOnly:!0}))||r.length>0||n.length>0||i.length>0}(Z)?(b=680,g=680,f=(0,s.zF4)((0,d.IY)(Z.id,{isSmall:!0}),g,{height:b})):(Z.photo_url||Z.user_id)&&(f=(0,s.zF4)(null!==(u=Z.photo_url)&&void 0!==u?u:(0,c.I4)(null!==(r=Z.user_id)&&void 0!==r?r:0),64),b=32,g=32);let k=null!==(h=Z.body)&&void 0!==h?h:"";return(0,n.tZ)(i.Metadata,{title:C,socialTitle:S,description:k,image:f,imageHeight:b,imageWidth:g,isLargeImage:!!f||void 0,siteName:w?w.name:"Substack",publishedTime:Z.date.toString(),meta:[{name:"twitter:label1",content:"Likes"},{name:"twitter:data1",content:String(null!==(m=Z.reaction_count)&&void 0!==m?m:0)},{name:"twitter:label2",content:"Replies"},{name:"twitter:data2",content:String(null!==(v=Z.children_count)&&void 0!==v?v:0)}]})}},62981:function(t,e,r){r.d(e,{Z:()=>s});var n=r(30396),i=r(68833),o=r(59176),l=r(98012);let a=()=>{};function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,[s,c]=(0,n.eJ)(!!t&&d(t,e,l));return((0,n.d4)(()=>{t&&c(d(t,e,l));let r=()=>{c(!0)};if(t){document.addEventListener("dismiss: ".concat(t),r,!1);let e=(0,o.mM)("".concat(t,"-seen-count"))||0;(!l||e<l)&&(0,o.ex)("".concat(t,"-seen-count"),e+1)}return()=>{document.removeEventListener("dismiss: ".concat(t),r)}},[t]),t)?[s,()=>{r(),(0,i.j)(i.FP.DASHBOARD_ACTION_BOX_DISMISSED,{key:t});let e=new Date;(0,o.ex)(t,e.toString()),c(!0);let n=new Event("dismiss: ".concat(t));document.dispatchEvent(n)}]:[!0,a]}function d(t,e,r){let n;let i="undefined"==typeof window?new Date().toString():(0,o.mM)(t),a="undefined"==typeof window?0:(0,o.mM)("".concat(t,"-seen-count")),s=i||r&&a>=r;return s&&e?(0,l.Z)(i).add(e,"second").isAfterNow():!!(i||s)}},2748:function(t,e,r){r.d(e,{F:()=>o});var n=r(1835),i=r(84864);function o(t,e){var r,o,l,a;let s,d;let c=null===(r=t.name)||void 0===r?void 0:r.trim(),p=c;(0,i.endsWithPunctuation)(c)&&(p='"'.concat(c,'"'));let u=(0,n.Im)(t.contributors);return t.invite_only?(s=null,d=null):(s=(null===(l=t.rankingDetailFreeIncluded)||void 0===l?void 0:l.toLowerCase().includes("subscribers"))?t.rankingDetailFreeIncluded.toLowerCase():null,d=t.rankingDetailFreeIncluded||t.rankingDetail),(0,n.ab)(null!==(a=null!=e?e:null===(o=t.hero_text)||void 0===o?void 0:o.trim())&&void 0!==a?a:"",u,s,p,d)}},17352:function(t,e,r){r.d(e,{Z:()=>w});var n=r(7409),i=r(99282),o=r(98848),l=r(16584),a=r(70843),s=r(98661),d=r(20160),c=r(71068),p=r(15771),u=r(19081),h=r(1844),m=r(68709),v=r(98248),f=r(63474),b=r(58175),g=r(87077),Z=r(52434);let _=()=>(0,l.tZ)(u.sg,{flex:"grow",justifyContent:"center",alignItems:"center",children:(0,l.tZ)(v.$j,{})}),w=t=>{var e,r,{children:a,gap:p=8,direction:u="column",radius:h="md",outline:m="detail",bg:v="primary",elevated:b=!0,loading:g,href:Z,onClick:w}=t,y=(0,o._)(t,["children","gap","direction","radius","outline","bg","elevated","loading","href","onClick"]);let S=Z||w,C=b?d.W:s.Fragment,x=(0,l.tZ)(c.xu,(0,i._)((0,n._)({display:"flex",sizing:"border-box",direction:u,bg:v,outline:m,radius:h,gap:p,shadow:null!==(e=y.shadow)&&void 0!==e?e:b?"xs":void 0,pressable:null!==(r=y.pressable)&&void 0!==r?r:S?"lg":void 0},y),{children:g?(0,l.tZ)(_,{}):a}));return(0,l.tZ)(C,{children:S?(0,l.tZ)(f.A0,{href:Z,onClick:w,children:x}):x})};w.Title=t=>{let{children:e}=t;return(0,l.tZ)(m.__,{children:e})},w.Header=t=>{let{children:e}=t;return(0,l.tZ)(u.X2,{justifyContent:"space-between",gap:12,paddingTop:20,paddingX:20,children:e})},w.Body=t=>{var{children:e}=t,r=(0,o._)(t,["children"]);return(0,l.tZ)(u.sg,(0,i._)((0,n._)({paddingX:20},r),{children:e}))},w.Footer=t=>{let{children:e}=t;return(0,l.tZ)(u.sg,{paddingBottom:20,paddingX:20,children:e})},w.Description=t=>{let{children:e}=t;return(0,l.tZ)(h.p6,{children:e})},w.Loading=_,w.Value=t=>{let{children:e,size:r="md"}=t,n="sm"===r?b.xv.H3:b.xv.H2;return(0,l.tZ)(n,{className:Z.Z.value,children:e})},w.Tooltip=t=>{let{title:e,text:r,disabled:n}=t;return(0,l.tZ)(g.u,{title:e,text:r,disabled:n,hoverOptions:{delayEnter:250},children:(0,l.tZ)(u.M5,{width:20,height:20,children:(0,l.tZ)(p.hU,{priority:"quaternary",size:"xs",children:(0,l.tZ)(a.Z,{size:16})})})})}},61468:function(t,e,r){r.d(e,{Ap:()=>a});var n=r(7409),i=r(99282);r(56303);var o=r(14293),l=r.n(o);r(84864);let a=t=>{let{rows:e,maxWordsPerRow:r=60}=t;if(l()(e[0]))return[];let o=[],a=(0,i._)((0,n._)({},e[0]),{words:e[0].words.map(t=>(0,i._)((0,n._)({},t),{originalIndex:0}))});for(let t=1;t<e.length;t++){let l=e[t];if(!l)continue;let s=(0,i._)((0,n._)({},l),{words:l.words.map(e=>(0,i._)((0,n._)({},e),{originalIndex:t}))});a.speaker===s.speaker&&a.words.length+s.words.length<=r?a={start:a.start,end:s.end,text:"".concat(a.text," ").concat(s.text),words:a.words.concat(...s.words),speaker:a.speaker}:(o.push(a),a=s)}return o.push(a),o}},93370:function(t,e,r){r.d(e,{DL:()=>i,Jk:()=>l,UB:()=>n,ZD:()=>a,fI:()=>o});let n=t=>{let e=Math.floor(t/60),r=Math.floor(t%60);return"".concat(e,":").concat(r.toString().padStart(2,"0"))};function i(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t<0)return"0:00";let r=Math.floor(t),n=Math.floor(r/60),i=r%60;if(e){let e=Math.round((t-r)*10);return"".concat(n,":").concat(String(i).padStart(2,"0"),".").concat(e)}return"".concat(n,":").concat(String(i).padStart(2,"0"))}let o=t=>/^[0-9.:]*$/.test(t),l=t=>/^(?:(?:[0-9]{1,3}):)?(?:[0-5][0-9]|[0-9]{1,2})(?:\.[0-9]{1,3})?$/.test(t),a=t=>{let[e="",r=""]=t.split("."),n=e.split(":").reverse().map(t=>parseInt(t)),i=n[0]||0,o=n[1]||0;return 3600*(n[2]||0)+60*o+i+parseInt(r.padEnd(3,"0"))/1e3}}}]);