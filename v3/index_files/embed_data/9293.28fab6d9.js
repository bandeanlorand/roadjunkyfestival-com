"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9293"],{28518:function(e,t,n){n.d(t,{NI:()=>j,YF:()=>F,Y_:()=>Y,bQ:()=>W,ll:()=>O});var r=n(98661),o=n(17268),u=n(33771),l=n(31720),i=n(88388),c=n(78493);let s={...r},a=s.useInsertionEffect||(e=>e());function f(e){let t=r.useRef(()=>{});return a(()=>{t.current=e}),r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var d="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;let v=!1,m=0,p=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+m++,g=s.useId||function(){let[e,t]=r.useState(()=>v?p():void 0);return d(()=>{null==e&&t(p())},[]),r.useEffect(()=>{v=!0},[]),e},h=r.createContext(null),y=r.createContext(null),b=()=>{var e;return(null==(e=r.useContext(h))?void 0:e.id)||null},E=()=>r.useContext(y);function x(e){return"data-floating-ui-"+e}function w(e){let t=(0,r.useRef)(e);return d(()=>{t.current=e}),t}function k(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let R=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function C(e,t){let n=(0,i.ht)(e,R());"prev"===t&&n.reverse();let r=n.indexOf((0,o.AW)((0,o.Me)(e)));return n.slice(r+1)[0]}function M(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!(0,o.r3)(n,r)}function P(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let K={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},L=r.forwardRef(function(e,t){let[n,l]=r.useState();d(()=>{(0,o.G6)()&&l("button")},[]);let i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[x("focus-guard")]:"",style:K};return(0,u.tZ)("span",{...e,...i})}),A=r.createContext(null),S=x("portal");function O(e){let{children:t,id:n,root:o,preserveTabOrder:c=!0}=e,s=function(e){void 0===e&&(e={});let{id:t,root:n}=e,o=g(),u=D(),[i,c]=r.useState(null),s=r.useRef(null);return d(()=>()=>{null==i||i.remove(),queueMicrotask(()=>{s.current=null})},[i]),d(()=>{if(!o||s.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=o,n.setAttribute(S,""),e.appendChild(n),s.current=n,c(n)},[t,o]),d(()=>{if(null===n||!o||s.current)return;let e=n||(null==u?void 0:u.portalNode);e&&!(0,l.kK)(e)&&(e=e.current),e=e||document.body;let r=null;t&&((r=document.createElement("div")).id=t,e.appendChild(r));let i=document.createElement("div");i.id=o,i.setAttribute(S,""),(e=r||e).appendChild(i),s.current=i,c(i)},[t,n,o,u]),i}({id:n,root:o}),[a,f]=r.useState(null),v=r.useRef(null),m=r.useRef(null),p=r.useRef(null),h=r.useRef(null),y=null==a?void 0:a.modal,b=null==a?void 0:a.open,E=!!a&&!a.modal&&a.open&&c&&!!(o||s);return r.useEffect(()=>{if(s&&c&&!y)return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){s&&M(e)&&("focusin"===e.type?P:function(e){(0,i.ht)(e,R()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})})(s)}},[s,c,y]),r.useEffect(()=>{s&&(b||P(s))},[b,s]),(0,u.BX)(A.Provider,{value:r.useMemo(()=>({preserveTabOrder:c,beforeOutsideRef:v,afterOutsideRef:m,beforeInsideRef:p,afterInsideRef:h,portalNode:s,setFocusManagerState:f}),[c,s]),children:[E&&s&&(0,u.tZ)(L,{"data-type":"outside",ref:v,onFocus:e=>{if(M(e,s)){var t;null==(t=p.current)||t.focus()}else{let e=C(document.body,"prev")||(null==a?void 0:a.domReference);null==e||e.focus()}}}),E&&s&&(0,u.tZ)("span",{"aria-owns":s.id,style:K}),s&&r.createPortal(t,s),E&&s&&(0,u.tZ)(L,{"data-type":"outside",ref:m,onFocus:e=>{if(M(e,s)){var t;null==(t=h.current)||t.focus()}else{let t=C(document.body,"next")||(null==a?void 0:a.domReference);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}let D=()=>r.useContext(A),I={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},_={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},B=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function W(e,t){void 0===t&&(t={});let{open:n,onOpenChange:u,elements:i,dataRef:c}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:d=!0,outsidePressEvent:v="pointerdown",referencePress:m=!1,referencePressEvent:p="pointerdown",ancestorScroll:g=!1,bubbles:h,capture:y}=t,b=E(),w=f("function"==typeof d?d:()=>!1),R="function"==typeof d?w:d,C=r.useRef(!1),M=r.useRef(!1),{escapeKey:P,outsidePress:K}=B(h),{escapeKey:L,outsidePress:A}=B(y),S=r.useRef(!1),O=f(e=>{var t;if(!n||!s||!a||"Escape"!==e.key||S.current)return;let r=null==(t=c.current.floatingContext)?void 0:t.nodeId,l=b?k(b.nodesRef.current,r):[];if(!P&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}u(!1,(0,o.MM)(e)?e.nativeEvent:e,"escape-key")}),D=f(e=>{var t;let n=()=>{var t;O(e),null==(t=(0,o.U9)(e))||t.removeEventListener("keydown",n)};null==(t=(0,o.U9)(e))||t.addEventListener("keydown",n)}),W=f(e=>{var t;let n=C.current;C.current=!1;let r=M.current;if(M.current=!1,"click"===v&&r||n||"function"==typeof R&&!R(e))return;let s=(0,o.U9)(e),a="["+x("inert")+"]",f=(0,o.Me)(i.floating).querySelectorAll(a),d=(0,l.kK)(s)?s:null;for(;d&&!(0,l.Py)(d);){let e=(0,l.Ow)(d);if((0,l.Py)(e)||!(0,l.kK)(e))break;d=e}if(f.length&&(0,l.kK)(s)&&!(0,o.ex)(s)&&!(0,o.r3)(s,i.floating)&&Array.from(f).every(e=>!(0,o.r3)(d,e)))return;if((0,l.Re)(s)&&U){let t=(0,l.Py)(s),n=(0,l.Dx)(s),r=/auto|scroll/,o=t||r.test(n.overflowX),u=t||r.test(n.overflowY),i=o&&s.clientWidth>0&&s.scrollWidth>s.clientWidth,c=u&&s.clientHeight>0&&s.scrollHeight>s.clientHeight,a="rtl"===n.direction,f=c&&(a?e.offsetX<=s.offsetWidth-s.clientWidth:e.offsetX>s.clientWidth),d=i&&e.offsetY>s.clientHeight;if(f||d)return}let m=null==(t=c.current.floatingContext)?void 0:t.nodeId,p=b&&k(b.nodesRef.current,m).some(t=>{var n;return(0,o.Pe)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,o.Pe)(e,i.floating)||(0,o.Pe)(e,i.domReference)||p)return;let g=b?k(b.nodesRef.current,m):[];if(g.length>0){let e=!0;if(g.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}u(!1,e,"outside-press")}),F=f(e=>{var t;let n=()=>{var t;W(e),null==(t=(0,o.U9)(e))||t.removeEventListener(v,n)};null==(t=(0,o.U9)(e))||t.addEventListener(v,n)});r.useEffect(()=>{if(!n||!s)return;c.current.__escapeKeyBubbles=P,c.current.__outsidePressBubbles=K;let e=-1;function t(e){u(!1,e,"ancestor-scroll")}function r(){window.clearTimeout(e),S.current=!0}function f(){e=window.setTimeout(()=>{S.current=!1},5*!!(0,l.Pf)())}let d=(0,o.Me)(i.floating);a&&(d.addEventListener("keydown",L?D:O,L),d.addEventListener("compositionstart",r),d.addEventListener("compositionend",f)),R&&d.addEventListener(v,A?F:W,A);let m=[];return g&&((0,l.kK)(i.domReference)&&(m=(0,l.Kx)(i.domReference)),(0,l.kK)(i.floating)&&(m=m.concat((0,l.Kx)(i.floating))),!(0,l.kK)(i.reference)&&i.reference&&i.reference.contextElement&&(m=m.concat((0,l.Kx)(i.reference.contextElement)))),(m=m.filter(e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{a&&(d.removeEventListener("keydown",L?D:O,L),d.removeEventListener("compositionstart",r),d.removeEventListener("compositionend",f)),R&&d.removeEventListener(v,A?F:W,A),m.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[c,i,a,R,v,n,u,g,s,P,K,O,L,D,W,A,F]),r.useEffect(()=>{C.current=!1},[R,v]);let T=r.useMemo(()=>({onKeyDown:O,...m&&{[I[p]]:e=>{u(!1,e.nativeEvent,"reference-press")},..."click"!==p&&{onClick(e){u(!1,e.nativeEvent,"reference-press")}}}}),[O,u,m,p]),U=r.useMemo(()=>({onKeyDown:O,onMouseDown(){M.current=!0},onMouseUp(){M.current=!0},[_[v]]:()=>{C.current=!0}}),[O,v]);return r.useMemo(()=>s?{reference:T,floating:U}:{},[s,T,U])}function F(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:o}=e,u=g(),l=r.useRef({}),[i]=r.useState(()=>(function(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}})()),c=null!=b(),[s,a]=r.useState(o.reference),d=f((e,t,r)=>{l.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:r,nested:c}),null==n||n(e,t,r)}),v=r.useMemo(()=>({setPositionReference:a}),[]),m=r.useMemo(()=>({reference:s||o.reference||null,floating:o.floating||null,domReference:o.reference}),[s,o.reference,o.floating]);return r.useMemo(()=>({dataRef:l,open:t,onOpenChange:d,elements:m,events:i,floatingId:u,refs:v}),[t,d,m,i,u,v])}({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,u=o.elements,[i,s]=r.useState(null),[a,v]=r.useState(null),m=(null==u?void 0:u.domReference)||i,p=r.useRef(null),h=E();d(()=>{m&&(p.current=m)},[m]);let y=(0,c.YF)({...e,elements:{...u,...a&&{reference:a}}}),x=r.useCallback(e=>{let t=(0,l.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;v(t),y.refs.setReference(t)},[y.refs]),w=r.useCallback(e=>{((0,l.kK)(e)||null===e)&&(p.current=e,s(e)),((0,l.kK)(y.refs.reference.current)||null===y.refs.reference.current||null!==e&&!(0,l.kK)(e))&&y.refs.setReference(e)},[y.refs]),k=r.useMemo(()=>({...y.refs,setReference:w,setPositionReference:x,domReference:p}),[y.refs,w,x]),R=r.useMemo(()=>({...y.elements,domReference:m}),[y.elements,m]),C=r.useMemo(()=>({...y,...o,refs:k,elements:R,nodeId:t}),[y,k,R,t,o]);return d(()=>{o.dataRef.current.floatingContext=C;let e=null==h?void 0:h.nodesRef.current.find(e=>e.id===t);e&&(e.context=C)}),r.useMemo(()=>({...y,context:C,refs:k,elements:R}),[y,k,R,C])}let T="active",U="selected";function Z(e,t,n){let r=new Map,o="item"===n,u=e;if(o&&e){let{[T]:t,[U]:n,...r}=e;u=r}return{..."floating"===n&&{tabIndex:-1,"data-floating-ui-focusable":""},...u,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,u]=t;if(!(o&&[T,U].includes(n))){if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof u){var l;null==(l=r.get(n))||l.push(u),e[n]=function(){for(var e,t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}}else e[n]=u}}),e),{})}}function j(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),o=e.map(e=>null==e?void 0:e.item),u=r.useCallback(t=>Z(t,e,"reference"),t),l=r.useCallback(t=>Z(t,e,"floating"),n),i=r.useCallback(t=>Z(t,e,"item"),o);return r.useMemo(()=>({getReferenceProps:u,getFloatingProps:l,getItemProps:i}),[u,l,i])}let q=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function N(e,t){return"function"==typeof e?e(t):e}function Y(e,t){void 0===t&&(t={});let{initial:n={opacity:0},open:o,close:u,common:l,duration:i=250}=t,c=e.placement,s=c.split("-")[0],a=r.useMemo(()=>({side:s,placement:c}),[s,c]),f="number"==typeof i,v=(f?i:i.open)||0,m=(f?i:i.close)||0,[p,g]=r.useState(()=>({...N(l,a),...N(n,a)})),{isMounted:h,status:y}=function(e,t){void 0===t&&(t={});let{open:n,elements:{floating:o}}=e,{duration:u=250}=t,l=("number"==typeof u?u:u.close)||0,[i,c]=r.useState("unmounted"),s=function(e,t){let[n,o]=r.useState(e);return e&&!n&&o(!0),r.useEffect(()=>{if(!e&&n){let e=setTimeout(()=>o(!1),t);return()=>clearTimeout(e)}},[e,n,t]),n}(n,l);return s||"close"!==i||c("unmounted"),d(()=>{if(o){if(n){c("initial");let e=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(e)}}c("close")}},[n,o]),{isMounted:s,status:i}}(e,{duration:i}),b=w(n),E=w(o),x=w(u),k=w(l);return d(()=>{let e=N(b.current,a),t=N(x.current,a),n=N(k.current,a),r=N(E.current,a)||Object.keys(e).reduce((e,t)=>(e[t]="",e),{});if("initial"===y&&g(t=>({transitionProperty:t.transitionProperty,...n,...e})),"open"===y&&g({transitionProperty:Object.keys(r).map(q).join(","),transitionDuration:v+"ms",...n,...r}),"close"===y){let r=t||e;g({transitionProperty:Object.keys(r).map(q).join(","),transitionDuration:m+"ms",...n,...r})}},[m,x,b,E,k,v,y,a]),{isMounted:h,styles:p}}},17268:function(e,t,n){n.d(t,{AW:()=>o,G6:()=>l,MM:()=>i,Me:()=>s,Pe:()=>a,U9:()=>f,ex:()=>c,r3:()=>u});var r=n(31720);function o(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function u(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function l(){return/apple/i.test(navigator.vendor)}function i(e){return"nativeEvent"in e}function c(e){return e.matches("html,body")}function s(e){return(null==e?void 0:e.ownerDocument)||document}function a(e,t){return null!=t&&("composedPath"in e?e.composedPath().includes(t):null!=e.target&&t.contains(e.target))}function f(e){return"composedPath"in e?e.composedPath()[0]:e.target}}}]);