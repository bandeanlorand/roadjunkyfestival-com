"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3056"],{82021:function(e,t,i){i.d(t,{Z:()=>n});let n={containerElevated:"containerElevated-R4qz8n",containerInline:"containerInline-L_YjpZ",videoTrimmerWrapper:"videoTrimmerWrapper-m8Tcry",videoTrimmerSlider:"videoTrimmerSlider-RWqSeS",videoTrimmerSliderVisible:"videoTrimmerSliderVisible-kDKdSk",durationContainer:"durationContainer-h05YYe",captionsAvailable:"captionsAvailable-C8g24C",captionsNotAvailable:"captionsNotAvailable-gazpbB"}},66824:function(e,t,i){i.d(t,{Z:()=>n});let n={container:"container-D8CZbL","videoContainer-clip":"videoContainer-clip-KcDC9v",videoContainerClip:"videoContainer-clip-KcDC9v",videoContainerWrapper:"videoContainerWrapper-VrqlAM",videoIcon:"videoIcon-JWfwBB",videoContainer:"videoContainer-S7toSI",video:"video-dep_Pc",fullScreenContainer:"fullScreenContainer-oPOI4W","playerContainer-vertical":"playerContainer-vertical-nqZGWC",playerContainerVertical:"playerContainer-vertical-nqZGWC","playerContainer-landscape":"playerContainer-landscape-R9mTfd",playerContainerLandscape:"playerContainer-landscape-R9mTfd","playerContainer-vertical_fit":"playerContainer-vertical_fit-j9atXq",playerContainerVerticalFit:"playerContainer-vertical_fit-j9atXq","videoContainer-vertical_fit":"videoContainer-vertical_fit-ku5xgX",videoContainerVerticalFit:"videoContainer-vertical_fit-ku5xgX","video-vertical_fit":"video-vertical_fit-aJ3XQJ",videoVerticalFit:"video-vertical_fit-aJ3XQJ","playerContainer-vertical_fill":"playerContainer-vertical_fill-As6E90",playerContainerVerticalFill:"playerContainer-vertical_fill-As6E90","videoContainer-vertical_fill":"videoContainer-vertical_fill-pCmPd2",videoContainerVerticalFill:"videoContainer-vertical_fill-pCmPd2","video-vertical_fill":"video-vertical_fill-UOGFke",videoVerticalFill:"video-vertical_fill-UOGFke",videoPlayer:"videoPlayer-ySwQUq",generateClips:"generateClips-qHOZUt",spinner:"spinner-FpLDBB",backDrop:"backDrop-EWGPYa",downloadModal:"downloadModal-SupuMR"}},29439:function(e,t,i){i.d(t,{Z:()=>n});let n={link:"link-LIBpto"}},52503:function(e,t,i){i.d(t,{Z:()=>n});let n={kbd:"kbd-PuF2B0"}},41302:function(e,t,i){i.d(t,{Z:()=>n});let n={reset:"reset-kAomxn","color-primary":"color-primary-S_7X35",colorPrimary:"color-primary-S_7X35","color-secondary":"color-secondary-vHUBzS",colorSecondary:"color-secondary-vHUBzS",overscrollTransition:"overscrollTransition-h5GdsE"}},87089:function(e,t,i){i.d(t,{Z:()=>n});let n={pill:"pill-KqexDs",pillSelected:"pillSelected-ngbq5t"}},73015:function(e,t,i){i.d(t,{Z:()=>n});let n={controlsCentered:"controlsCentered-TEIxxh",track:"track-pNMNGn"}},66861:function(e,t,i){i.d(t,{Z:()=>n});let n={playButton:"playButton-VfYy0S",playButtonIcon:"playButtonIcon-iVd8T6",videoIcon:"videoIcon-pEKkgy",pauseIconBar:"pauseIconBar-fixY8H",pauseIcon:"pauseIcon-bgib4b",videoPauseIconBar:"videoPauseIconBar-boRJoC"}},95738:function(e,t,i){i.d(t,{Z:()=>n});let n={videoPlayer:"videoPlayer-AdXrEr",videoPlayerContainer:"videoPlayerContainer-rPl28G",tagContainer:"tagContainer-S_oHWt"}},51938:function(e,t,i){i.d(t,{V:()=>c});var n=i(16584),r=i(30396),l=i(94184),a=i.n(l),o=i(24202),d=i(19081),s=i(54796);function c(e){let{className:t,assets:i,readOnly:l,onClick:c,maxHeight:v=420,children:p}=e,m=(0,o.dz)(i),[h,g]=(0,r.eJ)(null),f=(0,r.sO)(null),C=(0,o.yU)(f,0),[y,Z]=m;if(!y||!Z)return null;let b=y.width&&y.height?y.width/y.height:1,w=Z.width&&Z.height?Z.width/Z.height:1,_=b+w,k=C-6,x=Math.min(v,k/_),I=[k*b/_,k*w/_];return(0,n.BX)(d.hs,{ref:f,className:a()(s.Z.imageDiptych,t),gap:6,overflow:"hidden",children:[m.map((e,t)=>(0,n.tZ)(u,{asset:e.src,explicit:e.explicit,readOnly:l,width:I[t],height:x,index:t,onClick:l?void 0:i=>{i.preventDefault(),c&&c({attachmentId:e.id,attachmentType:"image"}),g({index:t})},children:p},e.src)),!l&&(0,n.tZ)(o.$9,{assets:m,imageViewer:h,setImageViewer:g,readOnly:l})]})}function u(e){let{asset:t,explicit:i,onClick:r,readOnly:l,width:d=500,height:c,children:u,index:v}=e;return(0,n.tZ)(o.Z4,{asset:t,explicit:i,onClick:r,readOnly:l,width:d,height:c,className:a()(s.Z.diptychImage,s.Z["index-".concat(v+1)]),children:u})}},31122:function(e,t,i){i.d(t,{Y:()=>T});var n=i(7409),r=i(16584),l=i(98661),a=i(94184),o=i.n(a),d=i(23260),s=i(45790),c=i(29032),u=i(47348),v=i(60807),p=i(69181),m=i(98914),h=i(98422),g=i(71068),f=i(19081),C=i(58175),y=i(75822),Z=i(92039),b=i(18618),w=i(74571),_=i(60651),k=i(63651),x=i(47929);let I={backDrop:"backDrop-FxvQIL",liveStreamTitle:"liveStreamTitle-xahUfX",liveStreamContainer:"liveStreamContainer-NKIioJ",viewerCountContainer:"viewerCountContainer-uxBWdH",endedMessage:"endedMessage-Z3p5RL",endedMessageContent:"endedMessageContent-d_enFy",liveStreamExplicitLabel:"liveStreamExplicitLabel-roJA52",liveStreamThumbnail:"liveStreamThumbnail-uER3zj",explicit:"explicit-tw5du6",liveStreamVideoPlayer:"liveStreamVideoPlayer-tm5aYT"},T=e=>{var t,i;let{activeLiveStream:a,fromPub:T=!1,listenForViewerCount:E=!0,isFeedItem:B=!1,videoPlayerProps:S,startMuted:N=!1}=e,L=(0,l.useRef)(null),P=(0,l.useRef)(null),[D,X]=(0,l.useState)(!B);(0,y.KS)({videoPlayerRef:L,showPaywall:!1,disable:D}),(0,l.useEffect)(()=>{setTimeout(()=>{X(!1)},500)},[]),(0,l.useEffect)(()=>{var e;let t=null===(e=L.current)||void 0===e?void 0:e.player,i=()=>{t&&t.duration&&t.duration>1&&!isNaN(t.duration)&&(t.currentTime=t.duration-1),t&&(t.playbackRate=1)};return t&&t.addEventListener("play",i),()=>{null==t||t.removeEventListener("play",i)}},[L.current]);let M=(0,w.Ml)(P),[R,O]=(0,l.useState)(a.liveStreamInformation.currentViewerCount),[z,F]=(0,l.useState)(!1),{isMobile:A}=(0,h.v9)(),U=(0,v.Fl)().autoPlayVideo,[V,q]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e;return V&&(e=setTimeout(()=>{q(!1)},4e3)),()=>{clearTimeout(e)}},[V]);let j=(0,Z.rG)();(0,l.useEffect)(()=>{if(E)return null==j?void 0:j.listen({["live-stream:".concat(a.liveStream.id)]:e=>{var t,i;let{data:n}=e;(null==n?void 0:null===(t=n.message)||void 0===t?void 0:t.type)==="live-stream:viewer-count-updated"&&O(n.message.current_viewer_count),(null==n?void 0:null===(i=n.message)||void 0===i?void 0:i.type)==="live-stream:ended"&&F(!0)}})},[j,E]);let J=a.liveStreamInformation.isExplicit||"active"!==a.liveStream.status;return z?null:(0,r.BX)(f.hs,{position:"relative",overflow:"hidden",radius:"sm",ref:P,className:I.liveStreamContainer,onClick:e=>{if(e.stopPropagation(),"active"===a.liveStream.status){let e=(0,m.K1)()?(0,k.bHR)({liveStreamId:a.liveStream.id,utm_campaign:x.VX.substackProfile,params:(0,n._)({utm_medium:x.lP.web},T&&{fromPub:T})}):(0,k.UDR)({noBase:!0,liveStreamId:a.liveStream.id,params:(0,n._)({utm_campaign:x.VX.substackProfile,utm_medium:x.lP.web},T&&{fromPub:T})});(0,m.K1)()?document.location.href=e:(0,m.uX)(e)}else q(!0)},cursor:"pointer",children:[J?(0,r.BX)(r.HY,{children:[a.liveStreamInformation.isExplicit&&(0,r.tZ)(g.xu,{position:"absolute",inset:0,zIndex:1,children:(0,r.BX)(f.tu,{className:I.liveStreamExplicitLabel,alignItems:"center",justifyContent:"center",gap:4,children:[(0,r.tZ)(d.Z,{color:"white",size:24}),(0,r.tZ)(C.xv.B5,{color:"white",textAlign:"center",translated:!0,children:"May contain sensitive content"})]})}),(0,r.tZ)("img",{className:o()(I.liveStreamThumbnail,a.liveStreamInformation.isExplicit&&I.explicit),src:a.liveStreamInformation.desktopThumbnailGifUrl,alt:"Live stream thumbnail"})]}):(0,r.tZ)(u.j,(0,n._)({className:I.liveStreamVideoPlayer,ref:L,liveStreamId:a.liveStream.id,noKeyboardShortcuts:!0,noControls:!0,autoPlay:U,pub:a.pub||null,mediaUpload:{id:"ls-".concat(a.liveStream.id),width:1920,height:1080},noJoin:!0,thumbnailUrl:a.liveStreamInformation.desktopThumbnailPhotoUrl,isLive:!0,renderPlayButton:B?()=>(0,r.tZ)(b.f,{isPlaying:!1,size:A?40:56}):void 0,startMuted:N},S),!0),"active"===a.liveStream.status?(0,r.BX)(f.gq,{gap:8,className:I.viewerCountContainer,children:[(0,r.tZ)(p.Qn,{}),(0,r.tZ)(p.C,{viewerCount:R})]}):(0,r.tZ)(f.gq,{className:I.viewerCountContainer,children:(0,r.tZ)(p.j0,{})}),V&&(0,r.tZ)(f.gq,{className:I.endedMessage,children:(0,r.BX)(f.tu,{className:I.endedMessageContent,padding:12,radius:"md",alignItems:"center",justifyContent:"center",gap:4,children:[(0,r.tZ)(s.Z,{size:24,stroke:"white"}),(0,r.tZ)(C.xv.B3,{color:"white",children:"Live video has ended"})]})}),(0,r.tZ)("div",{className:I.backDrop}),(0,r.BX)(f.gq,{position:"absolute",style:{left:0,right:0,bottom:0,width:"100%",pointerEvents:"none"},direction:"row-reverse",alignItems:"end",children:[!J&&(0,r.tZ)(g.xu,{padding:12,onClick:e=>{e.stopPropagation()},style:{pointerEvents:"auto"},children:(0,r.tZ)(_.Z,{hideVolumeBar:!0,disableShortcuts:!1,disableTooltips:!1,isFocused:M,mediaRef:L})}),(0,r.tZ)(c.C,{children:(0,r.tZ)(f.tu,{className:I.liveStreamTitle,gap:4*!B,padding:B?12:16,style:{pointerEvents:"none"},children:B?(0,r.BX)(r.HY,{children:[(0,r.tZ)(C.xv.B3,{weight:"semibold",color:"vibrance-primary",children:a.liveStream.title}),(0,r.tZ)(C.xv.B4,{color:"vibrance-secondary",children:null===(t=a.pub)||void 0===t?void 0:t.name})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(C.xv.H4,{color:"vibrance-primary",children:a.liveStream.title}),(0,r.tZ)(C.xv.B3,{color:"vibrance-secondary",children:null===(i=a.pub)||void 0===i?void 0:i.name})]})})})]})]})}},73649:function(e,t,i){i.d(t,{AM:()=>m,RF:()=>h,wb:()=>g});var n=i(16584);i(6400);var r=i(30396),l=i(94184),a=i.n(l),o=i(74691),d=i.n(o),s=i(61649),c=i(19081),u=i(98248),v=i(93370),p=i(33942);let m=e=>{let{videoElement:t,start:i,setStart:l,end:a,setEnd:o,storyboard:d,maxDuration:v,minDuration:m,maxTimelineDuration:h=360,minTimelineDuration:g=360,looping:C,zoom:y,setZoom:Z}=e,[b,w]=(0,r.eJ)(!1),[_,k]=(0,r.eJ)(0),[x,I]=(0,r.eJ)(Math.max(0,i-s.Zl)),[T,E]=(0,r.eJ)(0),[B,S]=(0,r.eJ)(0),N=(0,r.sO)(0),[L,P]=(0,r.eJ)({isDragging:!1,element:void 0});return(0,r.d4)(()=>{let e=()=>{if(t){k(t.duration);let e=[360,t.duration];h&&e.push(h),E(Math.min(...e))}};return t&&t.addEventListener("loadedmetadata",e),(null==t?void 0:t.duration)&&e(),()=>{t&&t.removeEventListener("loadedmetadata",e)}},[h,t]),(0,r.d4)(()=>{let e=()=>{t&&S(t.currentTime)};if(t)return t.addEventListener("timeupdate",e),()=>{t.removeEventListener("timeupdate",e)}},[t]),(0,r.d4)(()=>{if(!b)return;let e=Math.abs(B-N.current);if(N.current=B,e<1){C&&t&&!L.isDragging&&(B>a||B<i)&&(t.currentTime=i);return}if(!L.isDragging&&(B>T||B<x)){let e=T-x,t=Math.min(B,_-e);I(t),E(t+e)}},[B,b]),(0,r.d4)(()=>{if(!_||L.isDragging)return;if(i>x&&a<T){w(!0);return}let e=a-i,t=Math.min(_,a+e);I(Math.max(0,i-e)),E(t);let n=(0,s.MZ)(e);(!y||n<y)&&Z(n),w(!0)},[i,a,_]),(0,r.d4)(()=>{if(!b)return;let e=T-x,t=(0,s.AO)(y),n=isNaN(e)||e<s.Zl?.5:(i-x)/e,r=x+n*e,l=r-n*t,a=r+(1-n)*t,o=l,d=a;l<0?d=Math.min(_,(o=0)+t):a>_&&(o=Math.max(0,(d=_)-t)),(!h||!(d-o>h))&&(!g||!(d-o<g))&&(E(d),I(o))},[y,h,g,_,b]),(0,n.tZ)("div",{className:p.Z.timeline,children:_>0?(0,n.tZ)(f,{startTimeline:x,setStartTimeline:I,endTimeline:T,setEndTimeline:E,startPosition:i,setStartPosition:e=>{if(m&&e+m>=a){l(a-m);return}if(v&&e+v<=a){l(a-v);return}l(e)},endPosition:a,setEndPosition:e=>{if(m&&e-m<=i){o(i+m);return}if(v&&e-v>=i){o(i+v);return}o(e)},setPosition:(e,t)=>{l(e),o(t)},playerPosition:B,setPlayback:e=>{t&&(t.currentTime=e)},duration:_,onDragging:e=>{P(e)},storyboard:d}):(0,n.tZ)(c.gq,{alignItems:"center",justifyContent:"center",children:(0,n.tZ)(u.$j,{})})})},h=e=>{let{storyboard:t,imageUrl:i,x:r,y:l,displayWidth:a,displayHeight:o,className:d}=e,s=(r?r/t.tile_width:0)*a,c=(l?l/t.tile_height:0)*o,u={width:"".concat(a,"px"),height:"".concat(o,"px"),backgroundImage:"url(".concat(i,")"),backgroundPosition:"-".concat(s,"px -").concat(c,"px"),backgroundSize:"500%"};return(0,n.tZ)("div",{className:d,style:u})};function g(e,t){return e.reduce((e,i)=>Math.abs(i.start-t)<Math.abs(e.start-t)?i:e)}let f=e=>{let{startTimeline:t,setStartTimeline:i,endTimeline:l,setEndTimeline:o,startPosition:s,setStartPosition:u,endPosition:m,setEndPosition:f,setPosition:Z,playerPosition:b,setPlayback:w,duration:_,storyboard:k,onDragging:x}=e,I=(0,r.sO)(null),T=(0,r.sO)(null),E=(0,r.sO)(m-s),B=(0,r.sO)(null),[S,N]=(0,r.eJ)({isDragging:!1,element:void 0}),L=l-t,P=(0,r.Ye)(()=>m-s,[m,s]),D=s-t,X=m-t,M=b-t,R=t<1,O=1>Math.abs(l-_),z=(0,r.Ye)(()=>D/L*100,[L,D]),F=(0,r.Ye)(()=>X/L*100,[X,L]),A=(0,r.Ye)(()=>M/L*100,[M,L]),U="linear-gradient(to right, \n    rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.5) calc(".concat(z,"% - 6px), \n    rgba(0,0,0,0) calc(").concat(z,"% - 6px), rgba(0,0,0,0) calc(").concat(F,"% + 6px), \n    rgba(0,0,0,0.5) calc(").concat(F,"% + 6px), rgba(0,0,0,0.5) 100%)"),V=(0,r.I4)(e=>{u(Math.max(0,e/100*L+t))},[L,u,t]),q=(0,r.I4)(e=>{f(Math.min(_,e/100*L+t))},[_,L,f,t]);(0,r.d4)(()=>{x(S)},[S]);let j=()=>{document.addEventListener("selectstart",H)},J=()=>{document.removeEventListener("selectstart",H)},H=e=>{e.preventDefault(),e.stopPropagation()},Y=()=>{setTimeout(()=>{N({isDragging:!1,element:void 0})},300),T.current=null,B.current=null,J(),document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",Y),document.removeEventListener("pointerup",Y)},K=e=>{if(null===T.current)return;let n=e.clientX-T.current;if(N({isDragging:!0,element:"interval"}),!I.current)return;let r=n/I.current.getBoundingClientRect().width*L,a=s+r,d=a+E.current;B.current?a<0?(Z(0,E.current),i(0)):d>_?(Z(_-E.current,_),o(_)):Z(a,d):t-r>0&&l-r<=_&&(i(Math.max(0,t-r)),o(Math.min(_,l-r)))};return(0,n.tZ)("div",{className:p.Z.railContainer,children:(0,n.BX)("div",{className:p.Z.rail,ref:I,onMouseDown:e=>{if(!I.current)return;j(),T.current=e.clientX,E.current=m-s;let t=I.current.getBoundingClientRect().left,i=(e.clientX-t)/I.current.getBoundingClientRect().width*100,n=i>=z&&i<=F;B.current=n,document.addEventListener("mousemove",K),document.addEventListener("mouseup",Y),document.addEventListener("pointerup",Y)},onClick:e=>{if(e.stopPropagation(),e.preventDefault(),S.isDragging||!I.current)return;T.current=e.clientX,E.current=m-s;let i=I.current.getBoundingClientRect().left,n=(e.clientX-i)/I.current.getBoundingClientRect().width*100,r=n>=z&&n<=F,l=t+n/100*L;if(r)w(l);else{let e=d()(l,0,_-E.current),t=e+E.current;Z(e,t)}},children:[(()=>{var e,i;if(!k)return null;let r=null!==(i=null==I?void 0:null===(e=I.current)||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==i?i:0;if(0===r)return null;let a=(function(e,t,i){let n=[],r=Math.floor(e/i)*i,l=Math.ceil(t/i)*i;for(let e=r;e<=l;e+=i)n.push(e);return n})(t,l,L/r*(60*(k.tile_width/k.tile_height))).map(e=>({time:e,tile:g(k.tiles,e)}));return(0,n.tZ)(c.gq,{className:p.Z.storyboard,children:a.map((e,i)=>{let{time:r,tile:l}=e,a=(r-t)/L*100;return(0,n.tZ)("div",{style:{position:"absolute",left:"calc(".concat(a,"% + 6px)")},children:(0,n.tZ)(h,{storyboard:k,imageUrl:k.url,displayHeight:60,displayWidth:k.tile_width/k.tile_height*60,x:l.x,y:l.y},"".concat(l.x,"-").concat(l.y,"-").concat(i))})})})})(),(0,n.tZ)("div",{className:p.Z.nonSelectable,style:{background:U,position:"absolute",top:0,bottom:0,left:0,right:0}}),(0,n.BX)("div",{className:a()(p.Z.handles,p.Z.nonSelectable),children:[(0,n.tZ)("div",{className:p.Z.selection,style:{left:"calc(".concat(z,"% - 6px)"),width:"calc(".concat(F-z,"% + 12px)")}}),!R&&(0,n.tZ)("div",{className:p.Z.selectionFadeLeft}),!O&&(0,n.tZ)("div",{className:p.Z.selectionFadeRight})]}),(0,n.tZ)(y,{divRef:I,startTimeline:t,railDuration:l-t,active:!S.isDragging}),(0,n.BX)("div",{className:p.Z.handles,children:[(0,n.tZ)(C,{className:"".concat(p.Z.draggable," ").concat(p.Z.draggableLeft),railRef:I,label:(0,v.DL)(null!=P?P:0,!0),position:z,maxPosition:F,setPosition:V,isDragging:"start"===S.element,setIsDragging:e=>e?N({isDragging:!0,element:"start"}):N({isDragging:!1,element:void 0})}),(0,n.tZ)(C,{className:"".concat(p.Z.draggable," ").concat(p.Z.draggableRight),railRef:I,label:(0,v.DL)(null!=P?P:0,!0),position:F,minPosition:z,setPosition:q,isDragging:"end"===S.element,setIsDragging:e=>e?N({isDragging:!0,element:"end"}):N({isDragging:!1,element:void 0})}),(0,n.tZ)(C,{className:p.Z.playback,railRef:I,label:(0,v.DL)(P,!0),position:A,isDragging:S.isDragging,disabled:!0})]})]})})};p.Z.lgTick,p.Z.lgTick,p.Z.smTick,p.Z.smTick;let C=e=>{let{railRef:t,position:i,disabled:l,setPosition:a,label:o,maxPosition:d,minPosition:s,className:c,onDragStart:u,onDragEnd:v,showIcon:m=!0,setIsDragging:h}=e,g=(0,r.sO)(null),[f,C]=(0,r.eJ)(!1),y=()=>{document.addEventListener("selectstart",b)},Z=()=>{document.removeEventListener("selectstart",b)},b=e=>{e.preventDefault(),e.stopPropagation()},w=()=>{setTimeout(()=>{null==h||h(!1)},0),C(!1),Z(),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",w),document.removeEventListener("pointerup",w),v&&v()},_=e=>{if(null==h||h(!0),!t.current||!g.current)return;let i=t.current.getBoundingClientRect().left,n=t.current.getBoundingClientRect().width,r=(e.clientX-i)/n*100;a&&(void 0!==d&&void 0!==s?a(Math.min(d,Math.max(s,r))):void 0!==d?a(Math.min(d,r)):void 0!==s?a(Math.max(s,r)):a(r))};return(0,n.BX)("div",{className:c,ref:g,style:{left:"".concat(i,"%")},onMouseDown:e=>{!l&&(null==h||h(!1),e.stopPropagation(),C(!0),y(),document.addEventListener("mousemove",_),document.addEventListener("mouseup",w),document.addEventListener("pointerup",w),u&&u())},children:[m&&(0,n.tZ)("div",{className:p.Z.handle}),(0,n.tZ)("div",{className:"".concat(p.Z.tooltip," ").concat(f?p.Z.visible:p.Z.hidden," ").concat(p.Z.nonSelectable),children:o})]})},y=e=>{let{divRef:t,startTimeline:i,railDuration:l,active:o}=e,[d,s]=(0,r.eJ)(null),[c,u]=(0,r.eJ)(!1),m=e=>{if(t.current){let n=t.current.getBoundingClientRect(),{left:r,width:a}=n,o=e.clientX-r;s({x:e.clientX-n.left,time:i+o/a*100/100*l})}},h=()=>u(!0),g=()=>u(!1);return((0,r.d4)(()=>(t.current&&(t.current.addEventListener("mousemove",m),t.current.addEventListener("mouseenter",h),t.current.addEventListener("mouseleave",g)),()=>{t.current&&(t.current.removeEventListener("mousemove",m),t.current.removeEventListener("mouseenter",h),t.current.removeEventListener("mouseleave",g))}),[i,l]),o&&d&&c)?(0,n.BX)("div",{className:a()(p.Z.shadowContainer,p.Z.nonSelectable),style:{left:d.x},children:[(0,n.tZ)("div",{className:p.Z.shadow}),(0,n.tZ)("div",{className:a()(p.Z.tooltip,p.Z.mouseTracker),children:(0,v.DL)(d.time,!0)})]}):null}},46543:function(e,t,i){i.d(t,{i:()=>X});var n=i(7409),r=i(99282),l=i(98848),a=i(16584),o=i(30396),d=i(94184),s=i.n(d),c=i(71212),u=i(80569),v=i.n(u),p=i(61649),m=i(45582),h=i(14068),g=i(7654),f=i.n(g),C=i(23493),y=i.n(C),Z=i(75697),b=i(68833),w=i(19081),_=i(43681);let k=e=>{let{clipEnd:t,clipStart:i,post:r,pub:l}=e,o={t:i.toFixed(1),d:(t-i).toFixed(1)},d={variant:"icon",url:(0,Z.O1)(null,{post:r,pub:l,useCustomDomainOverOpen:!0,params:o}),onLinkClicked:e=>{(0,b.j)(b.FP.SHARE_LINK_CLICKED,(0,n._)({is_clip:!0,type:e,post_id:r.id},o)),(0,b.j)(b.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"share_to_".concat(e),source:"video clipper"})}},s=(0,_.LM)(d),c=(0,_.oy)(d),u=(0,_.gY)(d),v=(0,_.Wh)(d),p=(0,_.kB)(d);return(0,a.BX)(w.gq,{alignItems:"center",gap:16,children:[s,u,c,v,p]})};var x=i(33804),I=i(73649),T=i(95441),E=i(15771),B=i(82021);function S(e){var t,i,n;let{hideBottomControls:r,initialEnd:l,initialStart:d,isInline:c,videoPlayerRef:u,videoUpload:m,post:h,pub:g,onCancel:C,onSubmit:Z,onSubmitLabel:b,minClipDuration:_=1,maxClipDuration:S=Number.MAX_VALUE,minTimelineDuration:N=0,maxTimelineDuration:L=Number.MAX_VALUE}=e,{clipTimes:P,setClipEnd:D,setClipStart:X,zoom:M,setZoom:R}=(0,p.Sr)(),{start:O,end:z}=null!=P?P:{start:null!=d?d:0,end:null!=l?l:Math.min(p.ss,null!==(n=null==m?void 0:m.duration)&&void 0!==n?n:p.ss)};(0,o.d4)(()=>{setTimeout(()=>{var e,t;!P&&(null==u?void 0:null===(t=u.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.duration)&&(X(O),D(z))},1e3)},[]);let[F,A]=(0,o.eJ)(),[U,V]=(0,o.eJ)(!1),{iString:q}=(0,T.M1)(),j=(0,o.Ye)(()=>y()(e=>{var t;let{time:i}=e;!(null==u?void 0:null===(t=u.current)||void 0===t?void 0:t.player)||f()(i)||(u.current.player.currentTime=i)},10),[u]);(0,o.d4)(()=>{u&&j({time:z})},[z,j,u]),(0,o.d4)(()=>{u&&j({time:O})},[O,j,u]),(0,o.d4)(()=>{let e=async e=>{let{body:{src:t}}=await v().get("/api/v1/video/upload/".concat(e,"/storyboard"));A((await v().get(t)).body)};(null==m?void 0:m.id)&&e(m.id)},[m]);let J=async()=>{V(!0),await (null==Z?void 0:Z({start:O,duration:z-O,render_transcript_as:void 0})),V(!1)};return u?(0,a.tZ)(x.w,{children:(0,a.tZ)(w.hs,{bg:"primary",className:s()(B.Z.containerElevated,{[B.Z.containerInline]:c}),children:(0,a.BX)(w.tu,{gap:16,flex:"grow",children:[(0,a.tZ)(w.gq,{className:B.Z.videoTrimmerWrapper,children:(null===(t=u.current)||void 0===t?void 0:t.player)&&(0,a.tZ)(I.AM,{videoElement:null===(i=u.current)||void 0===i?void 0:i.player,start:O,setStart:e=>{X(e)},end:z,setEnd:e=>{D(e)},minDuration:_,maxDuration:S,maxTimelineDuration:L,minTimelineDuration:N,storyboard:F,looping:!0,zoom:M,setZoom:R})}),!r&&(0,a.BX)(w.gq,{justifyContent:"space-between",alignItems:"center",gap:16,opacity:U?50:100,children:[(0,a.tZ)(p.l7,{}),(0,a.BX)(w.gq,{alignItems:"center",gap:16,children:[h&&g&&(0,a.tZ)(k,{clipEnd:z,clipStart:O,post:h,pub:g}),C&&(0,a.tZ)(E.zx,{priority:"secondary",onClick:C,disabled:U,children:q("Cancel")}),"string"==typeof b?(0,a.tZ)(E.zx,{priority:"primary",onClick:J,disabled:U,children:b}):null==b?void 0:b(J)]})]})]})})}):null}var N=i(61280),L=i(98914),P=i(70379),D=i(60308);let X=e=>{var t;let{postId:i,visible:d,videoPlayerRef:c}=e,u=(0,l._)(e,["postId","visible","videoPlayerRef"]),{onCancelClipping:v}=(0,p.Sr)(),[m,g]=(0,o.eJ)(!1),[f,C]=(0,o.eJ)(),y=()=>{if(d){var t,n,r,l;null===(n=c.current)||void 0===n||null===(t=n.player)||void 0===t||t.pause(),(0,b.j)(b.FP.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:null!=i?i:null===(r=e.post)||void 0===r?void 0:r.id}),u.hideBottomControls||(0,b.j)(b.FP.MEDIA_CLIP_CREATE_MODAL_CLOSED,{video_upload_id:u.videoUpload.id,post_id:null!=i?i:null===(l=e.post)||void 0===l?void 0:l.id,is_post_editor:!1})}v()},Z=async e=>{var t,i;C({id:(0,L.EH)(),created_at:new Date,media_upload_id:u.videoUpload.id,title:null!==(i=null===(t=u.post)||void 0===t?void 0:t.slug)&&void 0!==i?i:"",start_time:e.start,duration:e.duration,source:"user",assets:[],user_id:null,description:""}),g(!0)};return((0,h.Z)(e.containerRef,y),d)?(0,a.BX)(w.gq,{className:s()(B.Z.videoTrimmerSlider,{[B.Z.videoTrimmerSliderVisible]:d}),children:[(0,a.tZ)(M,(0,r._)((0,n._)({},u),{videoPlayerRef:c,onCancel:y,onSubmit:Z})),f&&(0,a.tZ)(N._,{videoUpload:u.videoUpload,transcription:null===(t=u.videoUpload.extractedAudio)||void 0===t?void 0:t.transcription,isOpen:m,onClose:()=>{g(!1),v()},clip:f,useDownloadsCenter:!0,surface:"post_view"})]}):null},M=e=>{let{hideBottomControls:t,isInline:i,videoPlayerRef:l,videoUpload:d,post:s,pub:u,onCancel:h,onSubmit:g}=e,f=(0,P.pm)(),C=(0,m.Gi)(),{iString:y}=(0,T.M1)();(0,o.d4)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);let Z=async e=>{var t,i;(0,b.j)(b.FP.VIDEO_CLIP_CREATE_BUTTON_CLICKED,{post_id:null==s?void 0:s.id,media_upload_id:null==s?void 0:null===(t=s.videoUpload)||void 0===t?void 0:t.id,start_time:e.start,end_time:e.start+e.duration}),l&&setTimeout(()=>{var e,t;return null===(t=l.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.pause()},100);try{let t=await v().post("/api/v1/video/assets/".concat(null==d?void 0:d.id,"/clips")).send(e);return C.addMediaUpload({mediaUpload:t.body.mediaUpload,thumbnailUrl:(0,D.kOB)(d),title:null!==(i=null==s?void 0:s.title)&&void 0!==i?i:y("Download"),source:"user"}),h(),e}catch(e){console.error(e),f.popToast(e=>(0,a.tZ)(P.FN,(0,r._)((0,n._)({},e),{text:y("Error creating clip")})))}};return(0,a.tZ)(S,{hideBottomControls:t,isInline:i,videoPlayerRef:l,videoUpload:d,post:s,pub:u,onSubmit:null!=g?g:Z,onSubmitLabel:e=>(0,a.tZ)(E.zx,{leading:(0,a.tZ)(c.Z,{size:20}),onClick:e,children:y("Create clip")}),minClipDuration:p.AT,maxClipDuration:p.ar,minTimelineDuration:p.Zl,maxTimelineDuration:p.eD})}},48083:function(e,t,i){i.d(t,{Z:()=>r});var n=i(30396);let r=e=>{let[t,i]=(0,n.eJ)(0);return(0,n.d4)(()=>{let t=()=>{e&&i(e.currentTime)};if(e)return e.addEventListener("timeupdate",t),()=>{e.removeEventListener("timeupdate",t)}},[e]),t}},52842:function(e,t,i){i.d(t,{Z:()=>o});var n=i(7409),r=i(99282),l=i(16584),a=i(64515);let o=e=>(0,l.tZ)(a.l,(0,r._)((0,n._)({},e),{name:"PauseIconRounded",svgParams:{height:16,width:16},stroke:"none",children:(0,l.tZ)("path",{d:"M3.43396 16C2.47491 16 1.99064 15.5157 2.00014 14.5757V1.42433C2.00014 0.484273 2.48441 0 3.43396 0L5.7034 0C6.65296 0.00949555 7.13723 0.465282 7.13723 1.42433V14.5757C7.13723 15.5157 6.65296 16 5.7034 16H3.43396ZM10.831 16C9.87195 16 9.40666 15.5157 9.40666 14.5757V1.42433C9.40666 0.484273 9.89094 0 10.831 0L13.1004 0C14.05 0 14.5343 0.465282 14.5343 1.42433V14.5757C14.5343 15.5157 14.05 16 13.1004 16H10.831Z"})}))},61280:function(e,t,i){i.d(t,{_:()=>U});var n=i(7409),r=i(99282),l=i(16584),a=i(30396),o=i(71375),d=i(22885),s=i(46299),c=i(71212),u=i(61649),v=i(45582),p=i(33804),m=i(95441),h=i(14952),g=i(40647),f=i(60807),C=i(12281),y=i(48083),Z=i(83617);let b=e=>{var t,i;let{videoRef:o,mediaUpload:d,showCaptions:s,maxLineWidth:c=48,CaptionsComponent:u}=e,[v,p]=(0,a.eJ)([]),[m,h]=(0,a.eJ)({segment:null,wordIndex:-1}),{segment:g,wordIndex:f}=m,C=(0,y.Z)(null!==(i=null===(t=o.current)||void 0===t?void 0:t.player)&&void 0!==i?i:null);(0,a.d4)(()=>{var e,t;if(null===(e=o.current)||void 0===e?void 0:e.player){let e=o.current.player.currentTime,i=null!==(t=b.find(t=>e>=t.start&&e<=t.end))&&void 0!==t?t:null;if(i){let t=-1;for(let n=0;n<i.words.length;n++){let r=i.words[n];if(r){if(e>=r.start&&e<=r.end){t=n;break}if(e<r.start)break;t=n}}h({wordIndex:t,segment:i})}else h({wordIndex:-1,segment:i})}},[o.current,v.length,C]),(0,a.d4)(()=>{var e,t;(null==d?void 0:null===(e=d.transcription)||void 0===e?void 0:e.cdn_url)&&fetch(null==d?void 0:null===(t=d.transcription)||void 0===t?void 0:t.cdn_url).then(e=>e.json()).then(e=>{p(e.map(e=>(0,r._)((0,n._)({},e),{words:e.words?e.words:[]})))}).catch(e=>console.error("Error fetching transcription:",e))},[d,s]);let b=(0,a.Ye)(()=>(0,Z.B)(v,{max_line_width:c}),[v,c]);return s&&b.length&&g?(0,l.tZ)(u,{segment:g,currentWordIndex:f}):null},w=e=>{let{segment:t}=e;return(0,l.tZ)("div",{className:"container-GCnHIT",children:(0,l.tZ)("div",{className:"text-XHqLyz",children:(0,l.tZ)("div",{children:null==t?void 0:t.words.map((e,t)=>(0,l.tZ)("span",{children:e.word.startsWith(" ")?e.word:" ".concat(e.word)},t))})})})};var _=i(94184),k=i.n(_);let x={container:"container-sA1yem",text:"text-jTDXzk","highlight-word":"highlight-word-sP4eUs"},I=e=>{let{segment:t,currentWordIndex:i}=e;return(0,l.tZ)("div",{className:x.container,children:(0,l.tZ)("div",{className:x.text,children:(0,l.tZ)("div",{children:null==t?void 0:t.words.flatMap((e,t)=>[t>0&&" ",(0,l.tZ)("span",{className:k()({[x["highlight-word"]]:t===i}),children:e.word.trim().replace(/[,.]+$/,"")},t)])})})})},T=e=>{let{segment:t}=e;return(0,l.tZ)("div",{className:"container-OtABFE",children:(0,l.tZ)("div",{className:"text-Qzw72N",children:(0,l.tZ)("div",{children:null==t?void 0:t.words.flatMap((e,t)=>[t>0&&" ",(0,l.tZ)("span",{children:e.word.trim().replace(/[,.]+$/,"")},t)])})})})};var E=i(19081),B=i(87131);let S=e=>{var t,i,n;let{videoUpload:r,clip:o,showCaptions:d=!1,captionsStyle:s="classic",aspectRatio:c="landscape"}=e,u=(0,h.Ij)(),v=(0,a.sO)(null),p=(0,a.sO)(null),[m,f]=(0,a.eJ)(!1),y=(0,g.xR)().getConfigFor("updated_social_subtitles_clips"),Z=(0,a.sO)();(0,a.d4)(()=>{var e;let t=p.current,i=null==v?void 0:null===(e=v.current)||void 0===e?void 0:e.player;if(!t||!i)return;let n=t.getContext("2d");if(!n)return;let r=!1,l=()=>{if(!r||!i)return;if(i.paused||i.ended){r=!1;return}n.clearRect(0,0,t.width,t.height),n.fillStyle="rgb(22, 23, 24)",n.fillRect(0,0,t.width,t.height);let{videoWidth:e,videoHeight:a}=i;if(e&&a){if("vertical_fill"===c){let r,l,o,d;let s=9/16,c=t.height*s,u=e/a;u>s?(r=(e-(l=a*s))/2,d=c,o=(t.width-c)/2):(l=e,r=0,d=t.height*u,o=(t.width-d)/2);let v=t.height;n.drawImage(i,r,0,l,a,o,0,d,v)}else if("vertical_fit"===c){let r,l,o,d;let s=9/16,c=t.height,u=c*s,v=e/a;v>s?(r=u,l=u/v,o=(t.width-u)/2,d=(t.height-l)/2):(l=c,r=c*v,o=(t.width-r)/2,d=(t.height-c)/2),n.fillStyle="black",n.fillRect(o,0,r,t.height),n.drawImage(i,0,0,e,a,o,d,r,l)}else{let r=e*(t.height/a),l=t.height,o=(t.width-r)/2;n.drawImage(i,0,0,e,a,o,0,r,l)}}Z.current=requestAnimationFrame(l)},a=()=>{r||(r=!0,l())},d=()=>{r=!1,Z.current&&(cancelAnimationFrame(Z.current),Z.current=void 0)},s=()=>{d();let e=t.parentElement;if(!e)return;let i=e.clientWidth,r=e.clientHeight;if(t.width===i&&t.height===r){a();return}t.width=i,t.height=r,n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),a()},u=()=>{a()},m=()=>{i.currentTime!==o.start_time?d():i.play()};i.addEventListener("play",u),i.addEventListener("pause",m),i.addEventListener("ended",m);let h=()=>{s(),a()};i.addEventListener("loadedmetadata",h);let g=t.parentElement;if(g){let e=new ResizeObserver(()=>{s()});return e.observe(g),()=>{i.removeEventListener("play",u),i.removeEventListener("pause",m),i.removeEventListener("ended",m),i.removeEventListener("loadedmetadata",h),e.disconnect(),d()}}},[c,r.id,s,d]);let{width:_,height:k}=r,x="portrait"==(void 0!=_&&void 0!=k&&_/k>=1?"landscape":"portrait"),S=(null!==(i=null===(t=r.liveStream)||void 0===t?void 0:t.joinedOrCompletedLiveStreamInvites)&&void 0!==i?i:[]).length>0,N=(x||["vertical_fill","vertical_fit"].includes(null!=c?c:""))&&S&&"social"===s;return(0,l.BX)(E.tu,{className:"container-G3tbl8",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[(0,l.BX)(E.tu,{className:"absolute-dkdKY4",children:[(0,l.tZ)("div",{style:{display:"none"},children:(0,l.tZ)(C.Z,{ref:v,mediaUpload:r,pub:u,autoPlay:!0,surface:"editor",contentType:"clip",entityType:"post",entityKey:null!==(n=r.post_id)&&void 0!==n?n:"unknown"})}),(0,l.tZ)("canvas",{width:1024,height:576,ref:p,className:"canvas-sv7jC_"})]}),r.extractedAudio&&(0,l.tZ)(E.gq,{style:{position:"absolute",left:"50%",transform:"translateX(-50%) translateY(-50%) ".concat("landscape"!==c||x?"scale(calc(9 / 16))":""),top:N?"50%":"90%"},children:(0,l.tZ)(b,{videoRef:v,mediaUpload:r.extractedAudio,showCaptions:d,maxLineWidth:"social"===s?20:48,CaptionsComponent:"social"===s?y?T:I:w})}),(0,l.tZ)(B.ql,{mediaRef:v,mediaUpload:r,isActive:m,startTime:o.start_time,duration:o.duration,hoverOptions:{transition:0,transitionDelay:0}})]})};var N=i(54687),L=i(89871),P=i(93862),D=i(68833),X=i(15771),M=i(61254),R=i(6490),O=i(58175),z=i(6630),F=i(60308),A=i(66824);let U=e=>{let{videoUpload:t,clip:i,isOpen:C,onClose:y,transcription:Z,useDownloadsCenter:b=!1,surface:w,onSave:_}=e,k=(0,f.aF)(),x=(0,h.Ij)(),{iString:I}=(0,m.M1)(),[T,B]=(0,a.eJ)(!1),U=(0,v.Gi)(),{syncClips:V}=(0,L.z)(),{clipTitle:q,setClipTitle:j}=(0,u.Sr)(),J=(0,g.xR)(),H=(null==Z?void 0:Z.status)==="transcribed",[Y,K]=(0,a.eJ)("landscape"),[W,G]=(0,a.eJ)("classic"),[Q,$]=(0,a.eJ)(!1),ee=null!==W,et="landscape";(null==t?void 0:t.height)&&(null==t?void 0:t.width)&&(et=t.height>t.width?"portrait":"landscape");let ei=(e,i)=>{(0,D.j)(e,(0,r._)((0,n._)({},i),{is_post_editor:"media_drawer"===w,video_upload_id:t.id}))};(0,a.d4)(()=>{C&&ei(D.FP.MEDIA_CLIP_EXPORT_MODAL_OPENED,{button:"cancel",source:"export_modal"})},[C]);let en=async()=>{var e,n,r;let l=null===(e=i.assets)||void 0===e?void 0:e.find(e=>{var t,i,n,r,l,a,o,d,s,c,u,v,p;return("landscape"===et?"landscape"===Y&&(null===(t=e.mediaUpload)||void 0===t?void 0:t.height)&&(null===(i=e.mediaUpload)||void 0===i?void 0:i.width)&&(null===(n=e.mediaUpload)||void 0===n?void 0:n.height)<(null===(r=e.mediaUpload)||void 0===r?void 0:r.width):(null===(l=e.mediaUpload)||void 0===l?void 0:l.height)&&(null===(a=e.mediaUpload)||void 0===a?void 0:a.width)&&(null===(o=e.mediaUpload)||void 0===o?void 0:o.height)>(null===(d=e.mediaUpload)||void 0===d?void 0:d.width))&&(ee?(null===(s=e.asset_metadata)||void 0===s?void 0:s.caption_style)===W:!(null===(c=e.asset_metadata)||void 0===c?void 0:c.captions_enabled))&&(J.getConfigFor("updated_social_subtitles_clips")&&"social"===W?(null===(u=e.asset_metadata)||void 0===u?void 0:u.captions_version)===2:!(null===(v=e.asset_metadata)||void 0===v?void 0:v.captions_version))&&(null===(p=e.mediaUpload)||void 0===p?void 0:p.state)==="transcoded"});if(l&&l.mediaUpload){y(!0),ei(D.FP.MEDIA_CLIP_DOWNLOAD_REQUESTED,{video_upload_id:t.id,is_post_editor:!1,type:i.source,media_clip_id:i.id,asset_media_upload_id:l.mediaUpload.id}),U.addMediaUpload({mediaUpload:l.mediaUpload,thumbnailUrl:(0,F.kOB)(t),title:null!==(n=i.title)&&void 0!==n?n:I("Download"),source:i.source});return}try{B(!0),y(!0);let e=i;if(e.id||(e=await (0,P.C)({videoUpload:t,start:i.start_time,duration:i.duration,title:null!=q?q:I("Untitled")})),!e)return;ei(D.FP.MEDIA_CLIP_DOWNLOAD_REQUESTED,{video_upload_id:t.id,is_post_editor:!1,type:e.source,media_clip_id:e.id});let{mediaUpload:n}=await (0,P.O)({clip:e,useCaptions:ee,captionsStyle:W,showLiveOverlay:Q,aspectRatio:Y,videoUpload:t,pub:x});V(),B(!1),b&&U.addMediaUpload({mediaUpload:n,thumbnailUrl:(0,F.kOB)(t),title:null!==(r=e.title)&&void 0!==r?r:I("Download"),source:e.source}),null==_||_({mediaUpload:n,videoUpload:t,aspectRatio:Y})}catch(e){console.error(e)}finally{B(!1)}},er=()=>{ei(D.FP.MEDIA_CLIP_EXPORT_MODAL_CLOSED,{button:"cancel",source:"export_modal"}),y(!1)},el=()=>{ei(D.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"cancel",source:"export_modal"}),er()};return(0,l.tZ)(R.u_,{width:720,isOpen:C,onClose:er,children:(0,l.BX)(p.w,{children:[q?(0,l.BX)(E.gq,{flex:"grow",paddingLeft:20,paddingRight:20,paddingTop:20,gap:12,alignItems:"center",children:[(0,l.tZ)(N.U,{clipTitle:null!=q?q:I("Untitled Clip"),onSaveTitle:j}),(0,l.tZ)(X.hU,{priority:"quaternary",size:"sm",title:"Close",onClick:el,"aria-label":"close",className:A.Z.closeButton,children:(0,l.tZ)(o.Z,{size:20})})]}):(0,l.tZ)(R.xB,{title:I("Download clip"),showClose:!0,onClose:el,showDivider:!0}),(0,l.BX)(R.fe,{className:A.Z.downloadModal,children:[(0,l.tZ)(S,{videoUpload:t,clip:i,aspectRatio:Y,showCaptions:ee,captionsStyle:W}),(0,l.BX)(E.tu,{gap:24,paddingTop:24,children:[(0,l.BX)(E.gq,{gap:32,style:{overflowY:"auto"},children:["landscape"===et&&(0,l.BX)(E.tu,{gap:8,children:[(0,l.tZ)(O.xv.B4,{weight:"semibold",children:I("Aspect ratio")}),(0,l.tZ)(z.Z,{options:[{label:I("Landscape"),value:"landscape",icon:(0,l.tZ)(d.Z,{size:16})},{label:I("Vertical Fit"),value:"vertical_fit",icon:(0,l.tZ)(s.Z,{size:16})},{label:I("Vertical Fill"),value:"vertical_fill",icon:(0,l.tZ)(s.Z,{size:16})}],value:Y,onChange:e=>K(e)})]}),H&&(0,l.BX)(E.tu,{gap:8,children:[(0,l.tZ)(O.xv.B4,{weight:"semibold",children:I("Captions Style")}),(0,l.tZ)(z.Z,{options:[{label:I("Classic"),value:"classic"},{label:I("Social"),value:"social"},{label:I("None"),value:null}],value:W,onChange:e=>G(e)})]}),(null==k?void 0:k.is_global_admin)&&(0,l.BX)(E.tu,{gap:8,children:[(0,l.tZ)(O.xv.B4,{weight:"semibold",children:I("Live Overlay")}),(0,l.tZ)(z.Z,{options:[{label:I("Show"),value:!0},{label:I("Hide"),value:!1}],value:Q,onChange:e=>$(e)})]})]}),(0,l.tZ)(M.iz,{}),(0,l.tZ)(X.zx,{leading:(0,l.tZ)(c.Z,{}),onClick:()=>{ei(D.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"complete_download_export",source:"export_modal"}),en()},disabled:T,children:I("Download")})]})]})]})})}},54687:function(e,t,i){i.d(t,{U:()=>c});var n=i(16584),r=i(30396),l=i(23279),a=i.n(l),o=i(19081),d=i(440);let s={editIcon:"editIcon-P5YgXz",title:"title-VzicoP",input:"input-hzxurD"},c=e=>{let{clipTitle:t,onSaveTitle:i}=e,[l,c]=(0,r.eJ)(t),u=a()(e=>{i(e)},200);return(0,r.d4)(()=>{u(l)},[l]),(0,n.tZ)(o.gq,{flex:"grow",className:s.inputContainer,children:(0,n.tZ)(d.l,{className:s.input,value:l,maxLength:125,onChange:e=>{c(e.currentTarget.value)},defaultRows:1,maxRows:2,onKeyDown:e=>{e.stopPropagation()}})})}},93862:function(e,t,i){i.d(t,{C:()=>a,O:()=>o});var n=i(80569),r=i.n(n),l=i(12988);let a=async e=>{let{videoUpload:t,start:i,duration:n,title:l}=e;try{let{body:{mediaClip:e}}=await r().post("/api/v1/video/assets/".concat(t.id,"/media_clips")).send({title:l,start:i,duration:n});return e}catch(e){return console.error(e),null}},o=async e=>{let{aspectRatio:t,clip:i,useCaptions:n,captionsStyle:a,videoUpload:o,shareToNotes:d,showLiveOverlay:s,pub:c}=e,u=(0,l.Ws)(o,{showLiveOverlay:s,aspectRatio:t,pub:c}),v={start:i.start_time,duration:i.duration,render_transcript_as:n||null!==a?"subtitles":void 0,aspect_ratio:t,captions_style:null!=a?a:void 0,media_clip_id:i.id,sync:!1,share_to_notes:d,features:u};return{mediaUpload:(await r().post("/api/v1/video/assets/".concat(null==o?void 0:o.id,"/clips")).send(v)).body.mediaUpload}}},72572:function(e,t,i){i.d(t,{N:()=>m});var n=i(16584),r=i(94184),l=i.n(r),a=i(99869),o=i(20160),d=i(20888),s=i(27625),c=i(19081),u=i(58175),v=i(91400),p=i(5749);function m(e){let{image:t,title:i,url:r,host:m,readOnly:h,isExplicit:g,onClick:f}=e,C=(0,v.XA)(),{isHidden:y,onShow:Z}=(0,s.Sl)(!!g);return(0,n.tZ)(o.W,{children:(0,n.BX)(c.hs,{className:l()(p.Z.postAttachment,h&&p.Z.readOnly),position:"relative",padding:12,gap:12,as:h?"div":"a",bg:"primary",radius:"md",href:h?void 0:r,onClick:f,rel:"nofollow noopener ugc",target:"_blank",draggable:!1,showFocus:!0,animate:!0,children:[(0,n.BX)(c.tu,{gap:2,flex:"grow",minWidth:0,children:[m&&(0,n.tZ)(u.xv.B4,{as:"p",color:"secondary",clamp:C?1:2,children:m}),(0,n.tZ)(u.xv.B3,{clamp:C?1:2,color:"primary",weight:"medium",children:i})]}),t?(0,n.tZ)(d.e,{className:l()(p.Z.linkImage),src:null!=t?t:"",useRetinaSizing:!0,imageIsFixedWidth:!0,maxWidth:64,imageProps:{smartCrop:!0,aspect:"1:1"}}):(0,n.tZ)(c.hs,{width:64,height:64,bg:"secondary",radius:"md",alignItems:"center",justifyContent:"center",children:(0,n.tZ)(a.Z,{stroke:"var(--color-fg-secondary)"})}),y&&(0,n.tZ)(s.HU,{onShow:Z})]})})}},25827:function(e,t,i){i.d(t,{W:()=>p});var n=i(16584),r=i(30396),l=i(31122),a=i(98914),o=i(19081),d=i(76820),s=i(24054),c=i(63651),u=i(47929),v=i(5749);function p(e){let{activeLiveStream:t,onAttachmentClick:i,maxWidth:p,videoPlayerProps:m}=e,h=(0,a.K1)(),g=(0,r.sO)(null),f=(0,d.Qz)(g,p),C=s.Sb/s.rx,y={};if(h){let e=null!=f?f:d.YQ;y={width:"".concat(e,"px"),height:"".concat(e/C,"px")}}else{let e=null!=f?f:d.PJ;y={width:"".concat(e,"px"),height:"".concat(e/C,"px")}}return(0,n.tZ)(o.tu,{width:"100%",ref:g,onClick:()=>{null==i||i({attachmentType:"live_stream",attachmentId:t.liveStream.id.toString()});let e=h?(0,c.bHR)({liveStreamId:t.liveStream.id,utm_campaign:u.VX.substackProfile,params:{utm_medium:u.lP.web,appStoreRedirect:!!h}}):(0,c.UDR)({noBase:!0,liveStreamId:t.liveStream.id,params:{utm_campaign:u.VX.substackProfile,utm_medium:u.lP.web}});h?document.location.href=e:(0,a.uX)(e)},children:(0,n.tZ)(o.tu,{style:y,radius:"md",overflow:"hidden",position:"relative",className:v.Z.videoPlayerContainer,children:(0,n.tZ)(l.Y,{activeLiveStream:t,listenForViewerCount:!1,isFeedItem:!0,videoPlayerProps:m,startMuted:!0})})})}},58998:function(e,t,i){i.d(t,{h:()=>p});var n=i(16584),r=i(30396),l=i(20160),a=i(95441),o=i(92291),d=i(15771),s=i(19081),c=i(58175),u=i(15503),v=i(23854);function p(e){let{attachment:t,readOnly:i,isRestack:p,onAttachmentClick:m,utm_content:h}=e,g=[v.sC.YouBlocked,v.sC.YouMuted].includes(t.reason)&&!!t.hidden_attachment,[f,C]=(0,r.eJ)(!1),{iString:y}=(0,a.M1)();return f&&t.hidden_attachment?(0,n.tZ)(o.Mk,{attachment:t.hidden_attachment,readOnly:i,isRestack:p,onAttachmentClick:m,utm_content:h}):(0,n.tZ)(l.W,{children:(0,n.BX)(s.hs,{bg:"primary",border:"detail",justifyContent:g?"space-between":"center",alignItems:"center",radius:"md",padding:16,children:[(0,n.tZ)(c.xv.B4,{color:"secondary",align:"center",children:t.reason===v.sC.YouBlocked?"This note is from someone you blocked.":t.reason===v.sC.YouMuted?"This note is from someone you muted.":"This attachment is not available."}),g&&(0,n.tZ)(d.kG,{resetCss:!0,onClick:()=>{var e;(0,u.Kr)(t.id,t.reason,{noteId:null===(e=t.hidden_attachment)||void 0===e?void 0:e.id}),C(!0)},children:(0,n.tZ)(c.xv,{weight:"bold",size:14,color:"secondary",children:y("Show")})})]})})}},60225:function(e,t,i){i.d(t,{U:()=>T});var n=i(7409),r=i(99282),l=i(16584),a=i(94184),o=i.n(a),d=i(29032),s=i(20888),c=i(95441),u=i(60807),v=i(98170),p=i(3411),m=i(71068),h=i(15771),g=i(19081),f=i(10510),C=i(58175),y=i(65575),Z=i(32189),b=i(91400),w=i(64172),_=i(60308),k=i(84864),x=i(47929);let I={attachment:"attachment-E9mJrI",logoContainer:"logoContainer-vqxwR7",bgImage:"bgImage-OTU5LC",header:"header-d8U2_d",gradientBG:"gradientBG-jbdaN9",gradientBg:"gradientBG-jbdaN9",button:"button-uDQ6x4"};function T(e){var t;let{publication:i,readOnly:n,onClick:r}=e,a=null!==(t=i.logoPalette)&&void 0!==t?t:null;return(0,l.tZ)(E,{readOnly:n,onClick:r,publication:i,palette:a,children:(0,l.BX)(g.sg,{children:[(0,l.tZ)(B,{pub:i,palette:a}),(0,l.tZ)(N,{pub:i,readOnly:n,palette:a})]})})}let E=e=>{let{readOnly:t,onClick:i,publication:n,palette:r,children:a}=e,d=(0,v.UO)(r);return(0,l.tZ)(g.sg,{as:t?"div":"a",className:o()(I.attachment,t&&I.readOnly),position:"relative",bg:"secondary",radius:"md",target:"_blank",rel:"noopener noreferrer",minWidth:0,onClick:i,href:t?void 0:(0,_.TJI)(n),draggable:!1,showFocus:!0,animate:!0,style:d,children:a})};function B(e){var t;let{pub:i,palette:a}=e,o=a?(0,n._)({},(0,p.LE)({palette:a,defaultColor:"var(--color-dark-bg-primary)"})):void 0;return(0,l.BX)(g.M5,{gap:12,padding:12,alignItems:"center",className:I.header,sizing:"border-box",position:"relative",style:(0,r._)((0,n._)({},o),{"--glow-color":(0,p.zn)(null==a?void 0:null===(t=a.Vibrant)||void 0===t?void 0:t.rgb,.5)}),overflow:"hidden",children:[(0,l.tZ)(m.xu,{className:I.logoContainer,radius:"sm",children:(0,l.tZ)(f.wk,{pub:i,size:144,outline:"detail",shadow:"lg"})}),(0,l.tZ)(S,{pub:i})]})}function S(e){var t;let{pub:i}=e;return(0,l.tZ)(s.e,{imageProps:{aspect:"1.91:1",crop:"fill"},src:null!==(t=i.logo_url)&&void 0!==t?t:"",maxWidth:568,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1,className:I.bgImage})}function N(e){let{pub:t,readOnly:i,palette:n}=e;return(0,l.BX)(g.hs,{gap:12,padding:12,alignItems:"center",borderTop:"detail",children:[(0,l.tZ)(L,{pub:t,readOnly:i,palette:n}),!i&&(0,l.tZ)(D,{pub:t})]})}function L(e){let{pub:t,readOnly:i,palette:n}=e;return(0,l.BX)(g.sg,{gap:2,minWidth:0,flex:"grow",children:[(0,l.tZ)(C.xv.B4,{color:n?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,children:(0,l.tZ)(P,{pub:t,readOnly:i})}),(0,l.tZ)(C.xv.B3,{clamp:2,color:n?"vibrance-primary":"primary",weight:"medium",children:t.name})]})}function P(e){let{pub:t,readOnly:i}=e;return i?(0,l.tZ)(l.HY,{children:t.subdomain}):(0,l.tZ)(y.zr,{href:(0,_.TJI)(t),draggable:!1,children:t.subdomain})}function D(e){let{pub:t}=e,{iString:i}=(0,c.M1)(),n=(0,b.XA)(),r=(0,u.aF)(),a=(null==t?void 0:t.payments_state)==="enabled",{isFreeSubscribed:o,isPaid:s,isAuthor:v,isPledged:p,isFounding:m}=(0,w.Y0)(t.id),g=(0,Z.x)({surface:"pub-attachment"}),f=(0,w.Th)(),C=!(a?s:s||o);return t?v?(0,l.tZ)(d.C,{children:(0,l.tZ)(h.zx,{size:"sm",priority:"secondary-outline",newTab:!0,href:(0,_.TJI)(t),className:I.button,children:i("View now")})}):(0,l.tZ)(d.C,{children:(0,l.tZ)(h.zx,{size:"sm",priority:C?"primary":"secondary-outline",newTab:!0,className:I.button,href:(0,_.W1P)(t,{user:r,addBase:!0,params:{utm_source:x.b3.substack,utm_medium:x.lP.web,utm_campaign:x.VX.notesPubAttachment}}),onClick:e=>{if(!r&&t){g(t)(e);return}setTimeout(()=>{f.refetchPublication(t.id)},5e3)},children:C?(0,k.getSubscribeText)(t,{isFreeSubscribed:o,isPledged:p,isFoundingSubscribed:m,isMobile:n}):i("Subscribed")})}):null}},71576:function(e,t,i){i.d(t,{w:()=>h});var n=i(7409),r=i(99282),l=i(16584),a=i(20160),o=i(98170),d=i(26049),s=i(80878),c=i(80026),u=i(19081),v=i(2009),p=i(63651),m=i(47929);let h=e=>{let{readOnly:t,attachment:i,onClick:n,utm_content:r,onSavePostClick:d}=e,{post:s,publication:c,postImageSelection:u}=i,v=function(e){var t,i,n,r,l;let a=(null!==(t=e.width)&&void 0!==t?t:520)/(null!==(i=e.height)&&void 0!==i?i:450);if(a>1){let t=!e.img_width||(null==e?void 0:e.img_width)>520?520:null!==(n=e.width)&&void 0!==n?n:520;return{height:t/a,width:t}}let o=(null!==(r=e.height)&&void 0!==r?r:0)>450?450:null!==(l=e.height)&&void 0!==l?l:450;return{height:o,width:o*a}}(u);return(0,l.tZ)(a.W,{children:(0,l.BX)(g,{readOnly:t,onClick:n,publication:c,post:s,postImageSelection:u,size:v,utm_content:r,children:[(0,l.tZ)(f,{postImageSelection:u,size:v}),(0,l.tZ)(o.Q9,{post:s,publication:c,onSavePostClick:d,compact:!1,readOnly:t,palette:u.imagePalette})]})})},g=e=>{let{readOnly:t,children:i,publication:r,postImageSelection:a,post:d,onClick:c,size:h,utm_content:g}=e,f=(0,o.UO)(a.imagePalette),C=t?void 0:(0,p.uRy)(r,d,{feedViewer:!1,urlParams:{imgSelection:null==a?void 0:a.id,utm_content:m.fZ.substackFeedItem,utm_source:null!=g?g:void 0}});return(0,l.tZ)(u.tu,{className:"container-ruacmA",as:t?"div":"a",position:"relative",onClick:e=>{c&&c(),v.L&&!t&&(0,s.Q)(e,(0,p.uRy)(r,d,{noBase:!0,feedViewer:!0,urlParams:{imgSelection:null==a?void 0:a.id,utm_content:m.fZ.substackFeedItem,utm_source:null!=g?g:void 0}}))},href:C,draggable:!1,showFocus:!0,animate:!0,bg:"primary",radius:"md",overflow:"hidden",style:(0,n._)({width:a?h.width:void 0},f),children:i})};function f(e){var t,i;let{postImageSelection:a,size:o}=e,s=(t=a.img_src,i=o,{backgroundImage:(0,d._)(t,i),backgroundSize:"cover",backgroundPosition:"center"});return(0,l.tZ)(c.xu,{style:(0,r._)((0,n._)({},s),{width:o.width,height:o.height})})}},73544:function(e,t,i){i.d(t,{R:()=>c,n:()=>o});var n=i(16584),r=i(71068),l=i(19081),a=i(5749);function o(e){let{embedType:t,resourceId:i}=e;if(!i)return null;let r="https://open.spotify.com/embed/".concat(t,"/").concat(i);return(0,n.tZ)(l.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.spotify,children:(0,n.tZ)(d,{src:r,height:"playlist"===t||"album"===t?"352":"152",frameBorder:0,allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture"})})}let d=(0,r.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),s=["track","playlist","show","episode","artist","album"];function c(e){try{let t=new URL(e);if(!["spotify.com","open.spotify.com"].includes(t.host))return null;let i=t.pathname.split("/").filter(Boolean);if(i.length<2)return null;let[n,r]=i;if(!s.includes(n))return null;return{embedType:n,resourceId:r}}catch(e){return null}}},79251:function(e,t,i){i.d(t,{Mi:()=>u});var n=i(16584),r=i(98170),l=i(53678),a=i(58175),o=i(2009),d=i(23398),s=i(23854),c=i(63651);function u(e){let{attachments:t,readOnly:i,onAttachmentClick:r,utm_content:l}=e;if(0===t.length)return null;let a=t.filter(e=>"image"!==e.type&&"video"!==e.type&&!("post"===e.type&&e.postSelection));return(0,n.tZ)(n.HY,{children:a.map(e=>(0,n.tZ)(v,{attachment:e,readOnly:i,onAttachmentClick:r,utm_content:l},e.id))})}function v(e){let{attachment:t,readOnly:i,onAttachmentClick:r,utm_content:l}=e,o=null;return(0,s.bP)(t)?null:("textlink"===t.type&&(o=(0,n.tZ)(p,{url:t.url,readOnly:i,onClick:()=>{null==r||r()}})),"link"===t.type&&(o=(0,n.tZ)(m,{readOnly:i,onClick:r,url:t.linkMetadata.url},t.id)),"post"===t.type&&(o=(0,n.tZ)(h,{readOnly:i,post:t.post,publication:t.publication,onClick:r},t.id)),"comment"===t.type&&(o=(0,n.tZ)(f,{comment:t.comment,readOnly:i,onAttachmentClick:r,utm_content:l},t.id)),"publication"===t.type&&(o=(0,n.tZ)(g,{readOnly:i,publication:t.publication,onClick:r},t.id)),o?(0,n.tZ)(a.xv.B4,{color:"accent-cyan",children:o}):null)}function p(e){let{url:t,readOnly:i,onClick:r}=e;return(0,n.tZ)(l.hh,{onClick:r,href:i?void 0:t,rel:"nofollow noopener ugc",target:"_blank",className:"note-link",color:"accent-cyan",fontSize:14,children:(0,d.u)(t,48)})}function m(e){let{url:t,readOnly:i,onClick:r}=e;return(0,n.tZ)(p,{url:t,readOnly:i,onClick:r})}function h(e){let{post:t,publication:i,readOnly:l,onClick:a}=e,o=(0,c.uRy)(i,t,{feedViewer:!1}),d=(0,r.vE)({post:t,publication:i,readOnly:l,onClick:a});return(0,n.tZ)(p,{url:o,readOnly:l,onClick:()=>{d(new MouseEvent("click"))}})}function g(e){let{publication:t,readOnly:i,onClick:r}=e;return(0,n.tZ)(p,{url:t.base_url,readOnly:i,onClick:r})}function f(e){let{comment:t,readOnly:i,onAttachmentClick:r,utm_content:l}=e,a=(0,c.Sgq)(t,{noBase:o.L,urlParams:{utm_content:null!=l?l:void 0}});return(0,n.tZ)(p,{url:a,readOnly:i,onClick:()=>null==r?void 0:r({commentId:String(t.id)})})}},68710:function(e,t,i){i.d(t,{D:()=>o});var n=i(16584),r=i(71068),l=i(19081),a=i(5749);function o(e){let{videoId:t}=e;return(0,n.tZ)(l.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.tiktok,children:(0,n.tZ)(d,{src:"https://www.tiktok.com/player/v1/".concat(t,"?").concat("volume_control=0&loop=1&timestamp=0&closed_caption=0&play_button=1&fullscreen_button=0"),frameBorder:0})})}let d=(0,r.zo)({className:a.Z.tiktokIframe,border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe")},60735:function(e,t,i){i.d(t,{n:()=>o});var n=i(16584),r=i(71068),l=i(19081),a=i(5749);function o(e){let{videoId:t}=e;return(0,n.tZ)(l.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.youtube,children:(0,n.tZ)(d,{src:"https://www.youtube.com/embed/".concat(t),frameBorder:0})})}let d=(0,r.zo)({className:a.Z.youtubeIframe,border:"unset",bg:"black",flex:"grow"},"iframe")},69181:function(e,t,i){i.d(t,{C:()=>C,Qn:()=>g,j0:()=>f,u0:()=>y});var n=i(16584),r=i(30396),l=i(2564),a=i(60129),o=i(64729),d=i(95441),s=i(42375),c=i(98170),u=i(85527),v=i(63474),p=i(43570),m=i(15503),h=i(20063);let g=()=>{let{iString:e}=(0,d.M1)();return(0,n.tZ)(p.Vp,{theme:"error",priority:"primary",className:h.Z.livePill,children:e("LIVE")})},f=()=>{let{iString:e}=(0,d.M1)();return(0,n.tZ)(o.i,{children:(0,n.tZ)(p.D7,{priority:"primary",children:e("WAS LIVE")})})},C=e=>{let{viewerCount:t}=e;return(0,n.tZ)(p.D7,{priority:"primary",leading:(0,n.tZ)(a.Z,{size:18}),children:t})},y=e=>{let{item:t,pub:i,post:a,onViewEpisodeClick:o}=e,{iString:v}=(0,d.M1)(),h=(0,c.vE)({post:a,publication:i}),g=(0,s.rI)(),f=(0,r.qp)(u.q);return(0,n.tZ)(p.D7,{priority:"primary",onClick:e=>{t&&(0,m.rw)(t,g,"watch_full_episode",{tabId:f}),null==o||o(),h(e)},trailing:(0,n.tZ)(l.Z,{size:16}),children:v("View full episode")})};(0,v.zo)({display:"flex",direction:"row",gap:8,alignItems:"center",className:h.Z.viewerCountContainer})},59488:function(e,t,i){i.d(t,{c:()=>a});var n=i(30396),r=i(23493),l=i.n(r);let a=e=>{let{idleAfter:t=3e3,element:i}=e,[r,a]=(0,n.eJ)(!1);return(0,n.d4)(()=>{let e;let n=null!=i?i:window,r=()=>{a(!0)},o=l()(()=>{a(!1),clearTimeout(e),e=setTimeout(r,t)},500),d=()=>{document.hidden||o()};return e=setTimeout(r,t),n.addEventListener("mousemove",o),n.addEventListener("mousedown",o),n.addEventListener("resize",o),n.addEventListener("keydown",o),n.addEventListener("touchstart",o),n.addEventListener("wheel",o),i||document.addEventListener("visibilitychange",d),()=>{n.removeEventListener("mousemove",o),n.removeEventListener("mousedown",o),n.removeEventListener("resize",o),n.removeEventListener("keydown",o),n.removeEventListener("touchstart",o),n.removeEventListener("wheel",o),i||document.removeEventListener("visibilitychange",d),clearTimeout(e)}},[i,t]),{isIdle:r}}},440:function(e,t,i){i.d(t,{l:()=>p});var n=i(7409),r=i(99282),l=i(98848),a=i(16584),o=i(94184),d=i.n(o),s=i(98661),c=i(64300),u=i(51776),v=i(68686);let p=(0,s.forwardRef)((e,t)=>{var{className:i,error:o=!1,defaultRows:p=4,maxRows:m,value:h,onChange:g}=e,f=(0,l._)(e,["className","error","defaultRows","maxRows","value","onChange"]);let{innerRef:C,combinedRef:y}=(0,u.ts)(t),{value:Z,handleChange:b}=(0,c.y)({value:h,onChange:g}),w=()=>{let e=C.current;if(!e)return;let t=window.getComputedStyle(e),i=parseInt(t.borderTopWidth)+parseInt(t.borderBottomWidth),n=parseInt(t.paddingTop)+parseInt(t.paddingBottom),r=parseInt(t.lineHeight);e.style.height="auto";let l=r*p+i+n,a=Math.min(Math.max(e.scrollHeight+i,l),m?r*m+i+n:1/0);e.style.height="".concat(a,"px")};return(0,s.useEffect)(()=>(w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)),[]),(0,a.tZ)(c.g,(0,r._)((0,n._)({},f),{value:Z,onChange:e=>{b(e),w()},rows:p,className:d()(i,v.Z.autogrowing),ref:y,error:o}))})},9459:function(e,t,i){i.d(t,{L:()=>I});var n=i(7409),r=i(99282),l=i(16584),a=i(30396),o=i(94184),d=i.n(o),s=i(10120),c=i(61649),u=i(12281),v=i(46543),p=i(95441),m=i(69181),h=i(59488),g=i(98422),f=i(71068),C=i(75822),y=i(18618),Z=i(74571),b=i(28226),w=i(70958),_=i(87131),k=i(31377);let x={"preview-label-container":"preview-label-container-Y88jiD",previewLabelContainer:"preview-label-container-Y88jiD","live-stream-tag-container":"live-stream-tag-container-MWmvAX",liveStreamTagContainer:"live-stream-tag-container-MWmvAX","media-clip-tag-container":"media-clip-tag-container-FbCpZr",mediaClipTagContainer:"media-clip-tag-container-FbCpZr",videoContainer:"videoContainer-wF4DEO",overflow:"overflow-ns9Lj9",notesVideoContainer:"notesVideoContainer-XgGhEY"},I=e=>{var t,i,o,I,T;let{clipInfo:E,disableAutoPlay:B=!1,forceAutoPlay:S=!1,isFreeSubscribed:N,isSubscribed:L,isLiveStream:P=!1,mediaUpload:D,post:X,pub:M,startMuted:R,variant:O="notes",videoPlayerRef:z,videoType:F="post",entityKey:A,entityType:U,primaryEntityType:V,primaryEntityKey:q,surface:j,contentType:J,feedItemTrackingParameters:H}=e,{isClipping:Y}=(0,c.Sr)(),{iString:K}=(0,p.M1)(),{isMobile:W}=(0,g.v9)(),[G,Q]=(0,a.eJ)(!1),$=(0,k.isPaidAudience)(X.audience)&&!L,ee=(null!==(i=D.preview_duration)&&void 0!==i?i:0)>0,et=$&&(!ee||G),ei=!1;if(E&&ee&&$){let e=null!==(o=D.preview_start)&&void 0!==o?o:0,t=e+(null!==(I=D.preview_duration)&&void 0!==I?I:0),i=E.startTime,n=i+E.duration;ei=i<e||n>t}(0,C.KS)({videoPlayerRef:z,showPaywall:et,disable:B});let en=(0,a.sO)(null),[er,el]=(0,a.eJ)(!1),{isIdle:ea}=(0,h.c)({idleAfter:2e3,element:en.current}),eo=(0,s.r)(),ed=(0,Z.Ml)(en),es={mediaRef:z,pub:M,post:X,mediaUpload:D,podcastUpload:null==D?void 0:D.extractedAudio,isActive:null!==(T=er||!ea||Y)&&void 0!==T&&T,isFocused:ed,handle:eo,hasPaywall:$,hideNextVideoButton:!0,showPaywall:et,onShareMenuOpen:()=>el(!0),onShareMenuClose:()=>el(!1),disableShortcuts:!0,size:"notes"===O?"sm":"md",hideSettings:!!E,hidePip:!!E};return(0,l.tZ)(f.xu,{ref:en,position:"relative",onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.BX)(s.I,{handle:eo,className:x.fullScreenContainer,children:[(0,l.BX)("div",{className:d()(x.videoContainer,{[x.overflow]:Y,[x.notesVideoContainer]:"notes"===O,[x.inboxVideoContainer]:"inbox"===O}),children:[(0,l.tZ)(u.Z,{ref:z,doNotResetOnEnd:!0,hidePlayButton:et,mediaUpload:D,noControls:!0,noKeyboardShortcuts:!0,post:X,pub:M,startMuted:R,onFinishVideo:()=>{Q(!0)},renderPlayButton:()=>(0,l.tZ)(y.f,{isPlaying:!1,size:W?40:56}),isClipping:Y,videoType:F,usePreview:$&&ee,videoPlayerClassName:x.videoPlayer,autoPlay:S&&!et,entityKey:A,entityType:U,primaryEntityKey:q,primaryEntityType:V,surface:j,contentType:J,feedItemTrackingParameters:H}),E&&!E.isAutoSelected?(0,l.tZ)(_.to,(0,r._)((0,n._)({},es),{startTime:E.startTime,duration:E.duration})):(0,l.tZ)(_.Vo,(0,n._)({},es))]}),(null===(t=z.current)||void 0===t?void 0:t.player)&&"post"===F&&(0,l.tZ)(v.i,{visible:Y,videoPlayerRef:z,containerRef:en,videoUpload:D,post:X}),ee&&!et&&!L&&(0,l.tZ)("div",{className:x["preview-label-container"],children:(0,l.tZ)(w.l,{children:K("Preview")})}),!(ee&&!et&&!L)&&P&&(0,l.tZ)("div",{className:x["live-stream-tag-container"],children:(0,l.tZ)(m.j0,{})}),et&&(0,l.tZ)(b.Y,{post:X,pub:M,isFreeSubscribed:N,isPaidClip:ei,medium:"video",variant:"dialog",onRestart:ee&&!ei?()=>{var e;(null===(e=z.current)||void 0===e?void 0:e.player)&&(Q(!1),z.current.player.currentTime=0,z.current.player.play())}:void 0})]})})}},54480:function(e,t,i){i.d(t,{n:()=>R});var n=i(58865),r=i(16584),l=i(36081),a=i(36813),o=i(95441),d=i(98422),s=i(19081),c=i(58175),u=i(18618),v=i(30396),p=i(85200),m=i(71212),h=i(51043),g=i(45609),f=i(67358),C=i(80569),y=i.n(C),Z=i(49995),b=i(68833),w=i(49762),_=i(98914),k=i(71068),x=i(15771),I=i(61254),T=i(44424),E=i(21685),B=i(43905),S=i(60308);let N=e=>{let{audioFileUrl:t,feedUrl:i,isPrivateFeed:n,sectionId:l,user:a}=e,{iString:d}=(0,o.M1)();return(0,r.tZ)(E.J,{className:"popoverContainer-jZEE00",layerClassName:"popoverLayer-gOi2YH",content:(0,r.tZ)(L,{audioFileUrl:t,feedUrl:i,isPrivateFeed:n,sectionId:l,user:a}),preferPlacement:"bottom-start",children:(0,r.tZ)(p.Z,{className:"icon-vlW9ea",size:24,"aria-label":d("More options"),role:"button"})})},L=e=>{let{audioFileUrl:t,feedUrl:i,isPrivateFeed:n,sectionId:l,user:a}=e,{iString:d}=(0,o.M1)(),[u,p]=(0,v.eJ)(!1),[C,E]=(0,v.eJ)(null),B=(0,w.default)("hide_media_download_option"),N=async()=>{try{(0,b.j)(b.FP.PODCAST_EMAIL_LINK_CLICKED),await y().post("/api/v1/subscription/send_podcast_email").send({section_id:l}),(0,Z.ZP)(d("Email sent")),p(!0)}catch(e){E(e)}},L=()=>{(0,b.j)(b.FP.PODCAST_FEED_URL_COPIED),(0,_.vQ)(i),(0,Z.ZP)(d("RSS feed copied"))};return(0,r.BX)(k.xu,{style:{maxWidth:285},children:[(0,r.BX)(T.xw,{isFirst:!0,children:[t&&!B&&(0,r.tZ)(T.sN,{leading:(0,r.tZ)(m.Z,{size:16}),onClick:()=>{(0,_.Hl)((0,S.rhs)(t,{download:!0}))},children:d("Download MP3")}),i&&(0,r.tZ)(T.sN,{leading:(0,r.tZ)(h.Z,{size:16}),onClick:L,children:n?d("Your private RSS feed"):d("RSS feed")})]}),a&&i&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.iz,{paddingY:8}),(0,r.BX)(s.tu,{gap:12,padding:8,children:[(0,r.BX)(c.xv.B4,{color:"pub-primary-text",children:[d("Copy your RSS link and paste it in your podcast app.")," ",(0,r.tZ)(P,{})]}),(0,r.BX)(s.gq,{gap:8,children:[(0,r.tZ)(x.zx,{leading:(0,r.tZ)(g.Z,{size:16}),priority:"secondary-outline",onClick:L,children:d("Copy link")}),(0,r.tZ)(x.zx,{disabled:u,leading:(0,r.tZ)(f.Z,{size:16}),priority:"secondary-outline",onClick:N,children:d("Email link")})]}),C&&(0,r.tZ)(c.xv.B4,{color:"error",children:(0,_.zx)(C)})]})]})]})},P=()=>{let{iString:e}=(0,o.M1)();return(0,r.tZ)(c.xv.B4,{as:"a",href:B.ty,target:"_blank",rel:"noopener",color:"pub-accent",children:e("Learn about RSS.")})},D={"skip-button":"skip-button-jgLOBO","skip-icon":"skip-icon-YsbexL",playbackRate:"playbackRate-o33VkZ"};function X(){let e=(0,n._)(["Change playback speed. Current speed is "," times"]);return X=function(){return e},e}let M=[{value:1,display:"1"},{value:1.25,display:"1.25"},{value:1.5,display:"1.5"},{value:1.75,display:"1.75"},{value:2,display:"2"}],R=e=>{var t,i;let{audioFileUrl:n,feedUrl:v,isPlaying:p,isPrivateFeed:m,playbackRate:h,sectionId:g,user:f,onChangePlaybackRate:C,onSkipBack:y,onSkipForward:Z,onTogglePlayback:b}=e,{isMobile:w}=(0,d.v9)(),_=w?28:32,{iString:k,iTemplate:x}=(0,o.M1)(),I=M.findIndex(e=>{let{value:t}=e;return t===h}),T=(null===(t=M[I])||void 0===t?void 0:t.display)?x(X(),null===(i=M[I])||void 0===i?void 0:i.display):k("Change playback speed");return(0,r.BX)(s.gq,{gap:20,alignItems:"center",justifyContent:"space-between",children:[(0,r.tZ)(s.gq,{style:{width:60},justifyContent:"center",role:"button","aria-label":T,onClick:()=>{let e=(I+1)%M.length;C(M[e].value)},children:(0,r.BX)(c.xv.B2,{className:D.playbackRate,color:"vibrance-secondary",weight:"medium","aria-hidden":!0,children:[M[I].display,"\xd7"]})}),(0,r.BX)(s.gq,{gap:w?20:32,alignItems:"center",children:[y&&(0,r.tZ)("div",{onClick:y,role:"button",className:D["skip-button"],"aria-label":k("Skip backward 15 seconds"),children:(0,r.tZ)(l.Z,{className:D["skip-icon"],height:_})}),(0,r.tZ)(u.D,{size:w?56:72,isPlaying:p,onTogglePlayback:b}),Z&&(0,r.tZ)("div",{onClick:Z,role:"button",className:D["skip-button"],"aria-label":k("Skip forward 30 seconds"),children:(0,r.tZ)(a.Z,{className:D["skip-icon"],height:_})})]}),(0,r.tZ)(s.gq,{style:{width:60},justifyContent:"center",alignItems:"center",children:(0,r.tZ)(N,{audioFileUrl:n,feedUrl:v,isPrivateFeed:m,sectionId:g,user:f})})]})}},3486:function(e,t,i){i.d(t,{p:()=>c});var n=i(16584),r=i(94184),l=i.n(r),a=i(71068),o=i(10510),d=i(43905),s=i(24791);let c=e=>{let t,{border:i,isFreemail:r,isStatic:c,post:u,pub:v,section:p,size:m=48,url:h,useSection:g}=e,f=(0,s.sv)({post:u}),{artUrl:C,paidArtUrl:y,url:Z}=(0,d.Mv)({pub:v,section:p,useSection:g}),b=(0,a.oB)({outline:"detail"});return t=c&&f&&u?r?C:null!=y?y:C:g?null!=C?C:null==u?void 0:u.podcast_episode_image_url:u&&((null==u?void 0:u.podcastUpload)||(null==u?void 0:u.videoUpload)||(null==u?void 0:u.podcast_url))?u.podcast_episode_image_url:C,(0,n.tZ)(o.nZ,{className:l()(b,"pub-logo-m0IFm6",{"pub-logo--border-white-M0Tr8T":"white"===i}),href:null!=h?h:Z,pub:v,logoUrl:t,size:m})}},28226:function(e,t,i){i.d(t,{Y:()=>Y});var n=i(7409),r=i(99282),l=i(58865),a=i(16584),o=i(30396),d=i(94184),s=i.n(d),c=i(13639),u=i(25425),v=i(84488),p=i(98661),m=i(80569),h=i.n(m),g=i(83034),f=i(45530),C=i(95441),y=i(56629),Z=i(60807),b=i(68833),w=i(98914),_=i(98422),k=i(94874),x=i(15771),I=i(19081),T=i(58175),E=i(70379),B=i(24791),S=i(60308),N=i(47929);let L={"container--dialog":"container--dialog-IFBVqS",containerDialog:"container--dialog-IFBVqS","container--overlay":"container--overlay-NodljG",containerOverlay:"container--overlay-NodljG","container--animated":"container--animated-lBR5nE",containerAnimated:"container--animated-lBR5nE","container--animated-in":"container--animated-in-AmGha2",containerAnimatedIn:"container--animated-in-AmGha2","icon-container":"icon-container-XN2D7I",iconContainer:"icon-container-XN2D7I","content-top":"content-top-eM6ECM",contentTop:"content-top-eM6ECM","content-bottom":"content-bottom-VxiZOP",contentBottom:"content-bottom-VxiZOP",icon:"icon-k4eGDx",inlineIconContainer:"inlineIconContainer-fljw1h","restart-button":"restart-button-XCv0DP",restartButton:"restart-button-XCv0DP"};function P(){let e=(0,l._)(["Available now for iOS and Android"]);return P=function(){return e},e}function D(){let e=(0,l._)(["Continue watching this video for free in the Substack app"]);return D=function(){return e},e}function X(){let e=(0,l._)(["Continue watching this video for free, courtesy of ","."]);return X=function(){return e},e}function M(){let e=(0,l._)(["Continue listening for free in the Substack app"]);return M=function(){return e},e}function R(){let e=(0,l._)(["Continue listening for free, courtesy of ","."]);return R=function(){return e},e}function O(){let e=(0,l._)(["Watch this video for free in the Substack app"]);return O=function(){return e},e}function z(){let e=(0,l._)(["Watch this video for free, courtesy of ","."]);return z=function(){return e},e}function F(){let e=(0,l._)(["Listen to this episode for free in the Substack app"]);return F=function(){return e},e}function A(){let e=(0,l._)(["Listen to this episode for free, courtesy of ","."]);return A=function(){return e},e}function U(){let e=(0,l._)([""," episode"]);return U=function(){return e},e}function V(){let e=(0,l._)(["The full episode is only available to "," subscribers"]);return V=function(){return e},e}function q(){let e=(0,l._)(["The full episode is only available to paid subscribers of ",""]);return q=function(){return e},e}function j(){let e=(0,l._)([""," clip"]);return j=function(){return e},e}function J(){let e=(0,l._)(["This clip is only available to "," subscribers"]);return J=function(){return e},e}function H(){let e=(0,l._)(["This clip is only available to paid subscribers of ",""]);return H=function(){return e},e}let Y=e=>{var t,i,l,d;let{disableButtons:m,medium:f,inlineIcon:Y,isFreeSubscribed:W,isPaidClip:G,post:Q,pub:$,variant:ee,onRestart:et,magicToken:ei}=e,{iString:en,iTemplate:er}=(0,C.M1)(),{isMobile:el}=(0,_.v9)(),[ea,eo]=(0,o.eJ)(!1),{getSettingFor:ed}=(0,y.So)(),es=(0,Z.aF)(),{popToast:ec}=(0,E.pm)(),eu=!!(ed("paywall_unlock_tokens")&&"only_paid"===Q.audience&&Q.teaser_post_eligible)&&!(null==es?void 0:es.is_subscribed)&&W&&!(null==es?void 0:es.has_redeemed_post_unlock_token),ev=null==es?void 0:es.reader_installed_at,{modal:ep,open:em}=(0,g.useAppModal)({utm_campaign:N.VX.paywallPostUnlockPrompt,utm_source:N.b3.substack,overrideCTA:null!==(t=ev&&en("Open in app"))&&void 0!==t?t:void 0,overrideTitle:ev?en("Unlock your free post in the Substack app"):en("Get the free Substack app to unlock this post"),subTitle:er(P()),openUrl:null!==(i=ev&&(0,S.K8_)($.subdomain,Q.slug))&&void 0!==i?i:void 0}),eh=(0,p.useCallback)(async()=>{(0,b.j)(b.FP.PAYWALL_UNLOCK_CTA_CLICKED,{post_id:Q.id,publication_id:$.id,medium:f});try{await h().post("/api/v1/post_unlock_token").send({post_id:Q.id,token:ei}),el?window.location.href=ev?(0,S.K8_)($.subdomain,Q.slug,{redirect:"app-store",params:{utm_campaign:N.VX.paywallPostUnlockPrompt,utm_source:N.b3.paywall,utm_medium:f}}):(0,S.D4e)({utm_campaign:N.VX.paywallPostUnlockPrompt,utm_source:N.b3.paywall,utm_medium:f}):em()}catch(e){ec(e=>(0,a.tZ)(E.FN,(0,r._)((0,n._)({},e),{text:en("Teaser posts are not currently available for this content")})))}},[Q.id,Q.slug,$.id,$.subdomain,f,ei,ev,em,ec,en,el]),eg=!!et,ef=null!==(l=(0,B.H$)($))&&void 0!==l?l:"Founding Member",eC=eu?et?"video"===f?el?er(D()):er(X(),$.author_name||$.name):el?er(M()):er(R(),$.author_name||$.name):"video"===f?el?er(O()):er(z(),$.author_name||$.name):el?er(F()):er(A(),$.author_name||$.name):"founding"===Q.audience?er(U(),ef):en("Paid episode"),ey="founding"===Q.audience?er(V(),ef):er(q(),$.name);2309160===$.id?(eC=en("Watch the film"),ey="Subscribe or purchase as a 1-month rental to continue."):G&&(eC="founding"===Q.audience?er(j(),ef):en("Paid clip"),ey="founding"===Q.audience?er(J(),ef):er(H(),$.name));let eZ="video"===f?en("Subscribe to watch"):en("Subscribe to listen"),eb=eu?en("Claim my free episode"):"video"===f?en("Upgrade to watch"):en("Upgrade to listen"),ew=eu?()=>{eh()}:()=>{(0,w.uX)((0,S.Zs0)($,{simple:!0,next:document.location.href,utm_source:N.b3.showsPaywall,utm_medium:N.lP.web,utm_content:Q.id}),{local_navigation:!1})},e_=W?eb:eZ;return(0,o.d4)(()=>{(0,b.j)(b.FP.FREE_PREVIEW_PAYWALL_SHOWN,{post_id:Q.id,medium:f})},[Q.id,f]),(0,o.d4)(()=>{eg&&setTimeout(()=>{eo(!0)},10)},[eg]),(0,a.BX)(I.gq,{className:s()(L.container,{[L["container--dialog"]]:"dialog"===ee,[L["container--overlay"]]:"overlay"===ee,[L["container--animated"]]:eg,[L["container--animated-in"]]:ea}),inset:0,justifyContent:"center",alignItems:"center",position:"absolute",onClick:e=>{e.stopPropagation(),e.preventDefault()},"data-testid":"paywall",children:[ep,"dialog"===ee?(0,a.tZ)(K,{showUnlockPrompt:eu,description:ey,headerText:eC,post:Q,pub:$,primaryCta:e_,primaryCtaClick:ew,onRestart:et}):(0,a.BX)(I.tu,{alignItems:"center",gap:el?12:16,paddingX:24,children:[(0,a.BX)(I.tu,{alignItems:"center",className:L["content-top"],gap:el?12:16,children:[!Y&&(eu?(0,a.tZ)(k.qE,{photoUrl:null!==(d=$.author_photo_url)&&void 0!==d?d:void 0,size:64}):(0,a.tZ)(I.gq,{className:L["icon-container"],alignItems:"center",color:"white",justifyContent:"center",radius:"sm",children:(0,a.tZ)(c.Z,{size:el?16:24})})),(0,a.BX)(I.tu,{alignItems:"center",gap:4*!el,children:[(0,a.BX)(I.gq,{alignItems:"center",gap:8,children:[Y&&(0,a.tZ)(I.gq,{className:L.inlineIconContainer,alignItems:"center",justifyContent:"center",radius:"sm",children:(0,a.tZ)(c.Z,{size:16})}),(0,a.tZ)(T.xv.B3,{as:"h3",color:"white",weight:"semibold",fontSize:eu?20:15,textAlign:"center",children:eC})]}),!eu&&(0,a.tZ)(T.xv.B4,{color:"white",opacity:80,align:"center",children:ey})]})]}),(0,a.BX)(I.gq,{className:L["content-bottom"],gap:16,children:[et&&(0,a.tZ)(x.zx,{className:L["restart-button"],disabled:m,priority:"secondary-outline",onClick:()=>{(0,b.j)(b.FP.FREE_PREVIEW_PAYWALL_RESTART_BUTTON_CLICKED,{post_id:Q.id}),et()},children:(0,a.BX)(I.gq,{alignItems:"center",gap:12,children:[(0,a.tZ)(u.Z,{size:16}),en("Restart")]})}),(0,a.BX)(x.zx,{priority:"primary",onClick:ew,disabled:m,children:[eu&&(0,a.tZ)(v.Z,{className:"icon",size:20,stroke:"#fff",fill:"none",strokeWidth:2}),e_]})]})]})]})},K=e=>{var t;let{description:i,headerText:n,post:r,pub:l,primaryCtaClick:o,primaryCta:d,onRestart:s,showUnlockPrompt:u}=e,{iString:v}=(0,C.M1)();return(0,a.BX)(I.tu,{bg:"glass-inverted-medium",padding:16,gap:16,radius:"md",maxWidth:320,children:[(0,a.BX)(I.tu,{gap:4,alignItems:"center",children:[u&&(0,a.tZ)(k.qE,{photoUrl:null!==(t=l.author_photo_url)&&void 0!==t?t:void 0,size:64}),(0,a.BX)(I.gq,{alignItems:"center",color:"white",gap:8,children:[!u&&(0,a.tZ)(c.Z,{size:16}),(0,a.tZ)(T.xv.B2,{as:"h3",color:"white",weight:"semibold",textAlign:u?"center":"left",children:n})]}),!u&&(0,a.tZ)(T.xv.B4,{color:"white",opacity:80,align:"center",children:i})]}),(0,a.BX)(I.tu,{gap:8,children:[s&&(0,a.tZ)(x.zx,{priority:"primary-mono",onClick:()=>{(0,b.j)(b.FP.FREE_PREVIEW_PAYWALL_RESTART_BUTTON_CLICKED,{post_id:r.id}),s()},children:v("Replay")}),(0,a.BX)(x.zx,{onClick:o,priority:"secondary",children:[u&&(0,a.tZ)(f.Z,{size:18,className:L.icon}),d]})]})]})}},70958:function(e,t,i){i.d(t,{l:()=>a});var n=i(16584),r=i(19081),l=i(58175);let a=e=>{let{children:t,avoidBackgroundBlur:i}=e;return(0,n.tZ)(r.gq,{alignItems:"center",bg:i?void 0:"glass-inverted-medium",color:"white",gap:6,height:24,paddingX:8,radius:"sm","data-testid":"audio-player-preview-label",style:i?{background:"var(--color-light-primary)"}:void 0,children:(0,n.tZ)(l.xv.B5,{weight:"medium",color:"white",children:t})})}},61404:function(e,t,i){i.d(t,{w:()=>v});var n=i(58865),r=i(16584),l=i(94184),a=i.n(l),o=i(95441),d=i(19081),s=i(58175);let c={timestamp:"timestamp-FzOPmB","track-container":"track-container-Ycx4d5","track-container-dragging":"track-container-dragging-oDgpWK","track-handle":"track-handle-Ko3Wwm",track:"track-AtNL73","track-played":"track-played-VpPIlb","track-drag-time":"track-drag-time-QOxM_w","sr-progress":"sr-progress-gt0aLk"};function u(){let e=(0,n._)([""," with "," remaining"]);return u=function(){return e},e}let v=e=>{let{containerRef:t,currentTime:i,dragTime:n,hideStartingTimestamp:l,remainingTime:v,progress:p,onMouseDown:m}=e,{iString:h,iTemplate:g}=(0,o.M1)();return(0,r.BX)(d.gq,{alignItems:"center",flex:"grow",gap:12,children:[!l&&(0,r.tZ)(s.xv.B5,{className:c.timestamp,color:"vibrance-primary",children:i}),(0,r.BX)("div",{ref:t,className:a()(c["track-container"],n&&c["track-container-dragging"]),onMouseDown:m,role:"slider","aria-label":h("Seek progress"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":100*p,"aria-valuetext":g(u(),i,v),tabIndex:0,children:[(0,r.BX)("div",{className:c["sr-progress"],"aria-hidden":!0,children:[h("Current time"),": ",i," / ",h("Total time"),": ",v]}),(0,r.tZ)("div",{className:c.track}),(0,r.tZ)("div",{className:c["track-played"],style:{width:"".concat(100*p,"%")}}),n&&(0,r.tZ)(s.xv.B5,{className:c["track-drag-time"],style:{left:"".concat(100*p,"%")},"aria-hidden":!0,children:n}),(0,r.tZ)("div",{className:c["track-handle"],style:{left:"".concat(100*p,"%")},"aria-hidden":!0})]}),(0,r.tZ)(s.xv.B5,{className:c.timestamp,color:"vibrance-secondary",children:v})]})}},4158:function(e,t,i){i.d(t,{z:()=>s});var n=i(7409),r=i(16584),l=i(3411),a=i(19081),o=i(60308);let d={backgroundImage:"backgroundImage-Eijlhi",backgroundDarkenRight:"backgroundDarkenRight-DYlB0F"},s=e=>{let{backgroundUrl:t,blurAmount:i,isBlurred:s,palette:c,radius:u="md"}=e,v="none"===u?void 0:u;return(0,r.BX)(r.HY,{children:[t&&(0,r.tZ)(a.hs,{className:d.backgroundImage,inset:0,position:"absolute",radius:v,style:t?{backgroundImage:"url(".concat((0,o.zF4)(t),")")}:void 0}),s?(0,r.tZ)(a.hs,{inset:0,position:"absolute",radius:v,style:(0,n._)({backdropFilter:"blur(".concat(i,"px)"),WebkitBackdropFilter:"blur(".concat(i,"px)"),WebkitFilter:"brightness(0.7)",filter:"brightness(0.7)"},(0,l.mX)({palette:c}))}):(0,r.tZ)(a.hs,{className:d.backgroundDarkenRight,inset:0,position:"absolute",radius:v})]})}},14283:function(e,t,i){i.d(t,{o:()=>g});var n=i(7409),r=i(99282),l=i(16584),a=i(2564),o=i(95441),d=i(68833),s=i(15771),c=i(19081),u=i(58175),v=i(3486),p=i(60308),m=i(47929);let h={header:"header-PjQum5",vibranceIcon:"vibranceIcon-a9wDjU"},g=e=>{let{explicitPodcastUrl:t,isDisabled:i,post:g,postTitle:f,pub:C,section:y,showTitle:Z,showUpgradeButton:b,variant:w}=e,{iString:_}=(0,o.M1)();return(0,l.BX)(c.gq,{className:h.header,flex:"grow",alignItems:"center",alignSelf:"start",gap:"mini"===w||"notes-embed"===w?12:16,opacity:i?20:void 0,pointerEvents:i?"none":void 0,children:[(0,l.tZ)(v.p,{post:g,pub:C,section:y,size:"mini"===w?32:"notes-embed"===w?48:76,url:t}),(0,l.BX)(c.tu,{minWidth:0,gap:4,flex:"grow",children:["mini"!==w&&(0,l.tZ)(u.xv.B4,{color:"vibrance-secondary",ellipsis:!0,overflow:"hidden",children:Z}),(0,l.tZ)(u.xv.B3,(0,r._)((0,n._)({color:"vibrance-primary",ellipsis:!0,overflow:"hidden",weight:"medium"},"mini"===w?{size:14,lineHeight:20}:null),{style:{maxWidth:460},children:f})),b&&"mini"!==w&&"notes-embed"!==w&&(0,l.tZ)(c.gq,{paddingTop:4,children:(0,l.tZ)(s.zx,{"data-testid":"free-podcast-url-cta",href:(0,p.Zs0)(C,{simple:!0,next:"undefined"!=typeof document?document.location.href:"",utm_source:m.b3.showsAudioPlayerHeader,utm_medium:m.lP.web,utm_content:null==g?void 0:g.id}),localNavigation:!1,priority:"primary-mono",size:"sm",onClick:()=>{(0,d.j)(d.FP.LISTEN_AD_FREE_CLICKED,{post_id:null==g?void 0:g.id,section_id:null==y?void 0:y.id,source:"audio-player"})},children:_("Listen ad-free")})})]}),"notes-embed"===w&&(0,l.tZ)(a.Z,{className:h.vibranceIcon,size:20})]})}},63722:function(e,t,i){i.d(t,{Z:()=>c});var n=i(7409),r=i(99282),l=i(98848),a=i(16584),o=i(94184),d=i.n(o),s=i(15771);let c=e=>{var{children:t,className:i}=e,o=(0,l._)(e,["children","className"]);return(0,a.tZ)(s.kG,(0,r._)((0,n._)({resetCss:!0,className:d()("playerButton-qCsqQJ",i)},o),{children:t}))}},87131:function(e,t,i){i.d(t,{ql:()=>eK,to:()=>eY,Vo:()=>eH});var n=i(16584),r=i(30396),l=i(61649),a=i(68833),o=i(98422),d=i(19081),s=i(7409),c=i(99282),u=i(94184),v=i.n(u),p=i(85277),m=i(48083);let h={container:"container-zAxsTa",text:"text-Mt4veX","container-full-screen":"container-full-screen-mK397L","text-full-screen":"text-full-screen-BX6VEN","highlight-word":"highlight-word-YsKp8Q","captions-small":"captions-small-CavdhE","text-small":"text-small-boKa5D"},g=new p.WebVTTParser,f=e=>{var t,i;let{videoEle:l,mediaUpload:a,handle:o,subtitles:d,showCaptions:u,withHighlight:p,size:f="md",captionsStyle:C}=e,[y,Z]=(0,r.eJ)([]),[b,w]=(0,r.eJ)({segment:null,wordIndex:-1}),{segment:_,wordIndex:k}=b,x=(0,m.Z)(l);return((0,r.d4)(()=>{if(l){let e=l.currentTime,t=y.find(t=>e>=t.start&&e<=t.end),i=null!=t?t:null;if(!p){w({wordIndex:-1,segment:i});return}if(i){let t=-1;for(let n=0;n<i.words.length;n++){let r=i.words[n];if(r){if(e>=r.start&&e<=r.end){t=n;break}if(e<r.start)break;t=n}}w({wordIndex:t,segment:i})}else w({wordIndex:-1,segment:i})}},[l,d,y.length,x]),(0,r.d4)(()=>{var e,t,i,n;let r=(null!==(i=null==a?void 0:null===(e=a.transcription)||void 0===e?void 0:e.signed_captions)&&void 0!==i?i:[]).find(e=>e.language===d);(null==r?void 0:r.original)?(null==a?void 0:null===(t=a.transcription)||void 0===t?void 0:t.cdn_url)&&fetch(null==a?void 0:null===(n=a.transcription)||void 0===n?void 0:n.cdn_url).then(e=>e.json()).then(e=>{Z(e.map(e=>(0,c._)((0,s._)({},e),{words:e.words?e.words:[]})))}).catch(e=>console.error("Error fetching transcription:",e)):(null==r?void 0:r.url)&&fetch(r.url).then(e=>e.text()).then(e=>{Z(g.parse(e,"metadata").cues.map(e=>({text:e.text,start:e.startTime,end:e.endTime,words:[]})))}).catch(e=>console.error("Error fetching transcription:",e))},[a,d,u]),u&&y.length)?_?(0,n.tZ)("div",{className:v()(h.container,{[h["container-full-screen"]]:o.active,[h["captions-small"]]:"sm"===f}),style:C,children:_&&(0,n.tZ)("div",{className:v()(h.text,{[h["text-full-screen"]]:o.active,[h["text-small"]]:"sm"===f}),children:(null==_?void 0:null===(t=_.words)||void 0===t?void 0:t.length)?(0,n.tZ)("div",{children:null==_?void 0:_.words.map((e,t)=>(0,n.tZ)("span",{className:v()({[h["highlight-word"]]:t<=k&&p||!p}),children:e.word.startsWith(" ")?e.word:" ".concat(e.word)},t))}):(0,n.tZ)("span",{className:h["highlight-word"],children:function(e){var t;let i=e.match(/<v [^>]+>(.*?)(<\/v>|$)/);return i?null===(t=i[1])||void 0===t?void 0:t.replace(/<\/v>$/,""):""}(null!==(i=null==_?void 0:_.text)&&void 0!==i?i:"")})})}):null:null};var C=i(64515);let y=e=>(0,n.tZ)(C.l,(0,c._)((0,s._)({name:"ClosedCaptionsFilledIcon",svgParams:{height:16,width:20,stroke:"#808080"}},e),{children:(0,n.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 2.51429C0 1.12568 1.14532 0 2.55814 0H17.4419C18.8547 0 20 1.12568 20 2.51429V13.4857C20 14.8743 18.8547 16 17.4419 16H2.55814C1.14532 16 0 14.8743 0 13.4857V2.51429ZM12.6776 7.9987V8.60503C12.6776 8.91696 12.7142 9.17954 12.7874 9.3928C12.8638 9.60605 12.972 9.76837 13.1121 9.87977C13.2553 9.98799 13.4272 10.0421 13.6277 10.0421C13.8251 10.0421 13.9906 9.99436 14.1242 9.89887C14.2579 9.8002 14.3582 9.66811 14.425 9.5026C14.4919 9.3371 14.5253 9.1509 14.5253 8.94401H16.4207V9.09201V9.23524C16.4207 9.7254 16.2997 10.1535 16.0578 10.5195C15.8191 10.8824 15.4881 11.1641 15.0648 11.3646C14.6415 11.5651 14.1561 11.6654 13.6086 11.6654C12.9657 11.6654 12.4214 11.538 11.9758 11.2834C11.5334 11.0288 11.1976 10.6723 10.9684 10.214C10.7393 9.75246 10.6247 9.21137 10.6247 8.59071V8.00347C10.6247 7.37963 10.7393 6.83854 10.9684 6.38021C11.1976 5.92188 11.5334 5.56699 11.9758 5.31554C12.4214 5.06091 12.9657 4.93359 13.6086 4.93359C14.0192 4.93359 14.3964 4.99089 14.7401 5.10547C15.0839 5.21687 15.3799 5.3792 15.6281 5.59245C15.8796 5.8057 16.0737 6.06192 16.2106 6.36111C16.3507 6.6603 16.4207 6.99609 16.4207 7.36849V7.51172V7.65017H14.5253C14.5253 7.44329 14.4919 7.25709 14.425 7.09158C14.3582 6.92607 14.2579 6.79557 14.1242 6.70009C13.9906 6.6046 13.8251 6.55686 13.6277 6.55686C13.4272 6.55686 13.2553 6.61256 13.1121 6.72396C12.972 6.83218 12.8638 6.99291 12.7874 7.20616C12.7142 7.41942 12.6776 7.68359 12.6776 7.9987ZM6.23177 8.60503V7.9987C6.23177 7.68359 6.26837 7.41942 6.34158 7.20616C6.41797 6.99291 6.52619 6.83218 6.66623 6.72396C6.80946 6.61256 6.98134 6.55686 7.18186 6.55686C7.3792 6.55686 7.5447 6.6046 7.67839 6.70009C7.81207 6.79557 7.91233 6.92607 7.97917 7.09158C8.04601 7.25709 8.07943 7.44329 8.07943 7.65017H9.97483V7.51172V7.36849C9.97483 6.99609 9.9048 6.6603 9.76476 6.36111C9.62789 6.06192 9.43374 5.8057 9.18229 5.59245C8.93403 5.3792 8.63802 5.21687 8.29427 5.10547C7.95052 4.99089 7.57335 4.93359 7.16276 4.93359C6.51982 4.93359 5.97555 5.06091 5.52995 5.31554C5.08753 5.56699 4.75174 5.92188 4.52257 6.38021C4.2934 6.83854 4.17882 7.37963 4.17882 8.00347V8.59071C4.17882 9.21137 4.2934 9.75246 4.52257 10.214C4.75174 10.6723 5.08753 11.0288 5.52995 11.2834C5.97555 11.538 6.51982 11.6654 7.16276 11.6654C7.71021 11.6654 8.1956 11.5651 8.61892 11.3646C9.04225 11.1641 9.37326 10.8824 9.61198 10.5195C9.85388 10.1535 9.97483 9.7254 9.97483 9.23524V9.09201V8.94401H8.07943C8.07943 9.1509 8.04601 9.3371 7.97917 9.5026C7.91233 9.66811 7.81207 9.8002 7.67839 9.89887C7.5447 9.99436 7.3792 10.0421 7.18186 10.0421C6.98134 10.0421 6.80946 9.98799 6.66623 9.87977C6.52619 9.76837 6.41797 9.60605 6.34158 9.3928C6.26837 9.17954 6.23177 8.91696 6.23177 8.60503Z",fill:"white",strokeWidth:.25})})),Z=e=>(0,n.BX)(C.l,(0,c._)((0,s._)({name:"ClosedCaptionsIcon",svgParams:{height:16,width:20,stroke:"#808080"}},e),{children:[(0,n.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 2.51429C0 1.12568 1.14532 0 2.55814 0H17.4419C18.8547 0 20 1.12568 20 2.51429V13.4857C20 14.8743 18.8547 16 17.4419 16H2.55814C1.14532 16 0 14.8743 0 13.4857V2.51429ZM2.55814 1.37143C1.91595 1.37143 1.39535 1.8831 1.39535 2.51429V13.4857C1.39535 14.1169 1.91595 14.6286 2.55814 14.6286H17.4419C18.0841 14.6286 18.6047 14.1169 18.6047 13.4857V2.51429C18.6047 1.8831 18.0841 1.37143 17.4419 1.37143H2.55814Z",fill:"white","stroke-width":"0.25"}),(0,n.tZ)("path",{d:"M12.1858 7.94143V8.6719C12.1858 9.03793 12.2336 9.34826 12.329 9.60289C12.4277 9.85752 12.5694 10.0501 12.754 10.1806C12.9418 10.3111 13.1661 10.3763 13.4271 10.3763C13.6563 10.3763 13.8536 10.3286 14.0192 10.2331C14.1878 10.1344 14.3183 10.0008 14.4106 9.83206C14.5029 9.66337 14.5555 9.4708 14.5682 9.25437H16.0626C16.0626 9.2862 16.0626 9.31802 16.0626 9.34985C16.0626 9.38168 16.0626 9.41192 16.0626 9.44057C16.053 9.88617 15.9321 10.2777 15.6997 10.615C15.4705 10.9492 15.1586 11.2102 14.7639 11.398C14.3693 11.5826 13.9205 11.6749 13.4176 11.6749C12.8097 11.6749 12.294 11.5524 11.8707 11.3073C11.4506 11.0622 11.1307 10.7153 10.9111 10.2665C10.6946 9.81774 10.5864 9.2846 10.5864 8.66713V7.94143C10.5864 7.32077 10.6962 6.78605 10.9159 6.33727C11.1355 5.8853 11.4553 5.53677 11.8755 5.29169C12.2988 5.04661 12.8128 4.92407 13.4176 4.92407C13.7964 4.92407 14.1449 4.97818 14.4632 5.0864C14.7814 5.19143 15.0584 5.34421 15.2939 5.54473C15.5294 5.74525 15.714 5.98556 15.8477 6.26565C15.9846 6.54256 16.0562 6.85289 16.0626 7.19664C16.0626 7.22847 16.0626 7.2603 16.0626 7.29213C16.0626 7.32077 16.0626 7.34942 16.0626 7.37807H14.5682C14.5555 7.15526 14.5014 6.95633 14.4059 6.78128C14.3136 6.60622 14.1847 6.46936 14.0192 6.37069C13.8536 6.26883 13.6563 6.21791 13.4271 6.21791C13.1661 6.21791 12.9433 6.28634 12.7587 6.4232C12.5741 6.55688 12.4325 6.75104 12.3338 7.00567C12.2352 7.2603 12.1858 7.57222 12.1858 7.94143Z",fill:"white","stroke-width":"0.25"}),(0,n.tZ)("path",{d:"M5.87381 7.94143V8.6719C5.87381 9.03793 5.92155 9.34826 6.01704 9.60289C6.1157 9.85752 6.25734 10.0501 6.44195 10.1806C6.62974 10.3111 6.85413 10.3763 7.11513 10.3763C7.34429 10.3763 7.54163 10.3286 7.70714 10.2331C7.87583 10.1344 8.00633 10.0008 8.09863 9.83206C8.19094 9.66337 8.24345 9.4708 8.25618 9.25437H9.75054C9.75054 9.2862 9.75054 9.31802 9.75054 9.34985C9.75054 9.38168 9.75054 9.41192 9.75054 9.44057C9.74099 9.88617 9.62004 10.2777 9.3877 10.615C9.15853 10.9492 8.84661 11.2102 8.45193 11.398C8.05726 11.5826 7.60847 11.6749 7.10558 11.6749C6.49765 11.6749 5.98202 11.5524 5.5587 11.3073C5.13856 11.0622 4.81868 10.7153 4.59907 10.2665C4.38263 9.81774 4.27441 9.2846 4.27441 8.66713V7.94143C4.27441 7.32077 4.38422 6.78605 4.60384 6.33727C4.82346 5.8853 5.14334 5.53677 5.56348 5.29169C5.9868 5.04661 6.50083 4.92407 7.10558 4.92407C7.48434 4.92407 7.83286 4.97818 8.15115 5.0864C8.46944 5.19143 8.74635 5.34421 8.98188 5.54473C9.21741 5.74525 9.40202 5.98556 9.5357 6.26565C9.67256 6.54256 9.74418 6.85289 9.75054 7.19664C9.75054 7.22847 9.75054 7.2603 9.75054 7.29213C9.75054 7.32077 9.75054 7.34942 9.75054 7.37807H8.25618C8.24345 7.15526 8.18934 6.95633 8.09386 6.78128C8.00156 6.60622 7.87265 6.46936 7.70714 6.37069C7.54163 6.26883 7.34429 6.21791 7.11513 6.21791C6.85413 6.21791 6.63133 6.28634 6.44672 6.4232C6.26212 6.55688 6.12048 6.75104 6.02181 7.00567C5.92314 7.2603 5.87381 7.57222 5.87381 7.94143Z",fill:"white","stroke-width":"0.25"})]}));var b=i(95441),w=i(84370),_=i(87077),k=i(74571),x=i(63722);let I=e=>{let{showCaptions:t,setShowCaptions:i,isFocused:l,disabled:a,disableShortcuts:o,disableTooltips:d=!1}=e,{iString:s}=(0,b.M1)(),c=e=>{i({showCaptions:e,userInitiated:!0}),e?localStorage.setItem("video_player:show_captions","true"):localStorage.removeItem("video_player:show_captions")};return(0,r.d4)(()=>{let e="true"===localStorage.getItem("video_player:show_captions");t!==e&&i({showCaptions:e,userInitiated:!1})},[]),(0,k.Kr)("c",()=>c(!t),l&&!o),(0,n.tZ)(_.u,{disabled:d,text:s("Closed captions / subtitles"),trailing:o?void 0:(0,n.tZ)(w.T,{children:"C"}),children:(0,n.tZ)(x.Z,{onClick:()=>c(!t),disabled:a,children:t?(0,n.tZ)(y,{}):(0,n.tZ)(Z,{})})})};var T=i(27299),E=i(83502);let B=e=>{let{disableShortcuts:t=!1,disableTooltips:i=!1,handle:r,isFocused:l}=e,a=()=>{r.active?r.exit():r.enter()};return(0,k.Kr)("f",a,l&&!t),(0,n.tZ)(_.u,{disabled:i,text:r.active?"Exit full screen":"Full screen",trailing:t?void 0:(0,n.tZ)(w.T,{children:"F"}),children:(0,n.tZ)(x.Z,{onClick:a,children:r.active?(0,n.tZ)(T.Z,{size:18}):(0,n.tZ)(E.Z,{size:18})})})};var S=i(2564),N=i(33979),L=i(80569),P=i.n(L),D=i(20888),X=i(98914),M=i(33870),R=i(71068),O=i(58175),z=i(84864);let F={fullWidth:"fullWidth-KNhzK0",container:"container-djeVTw","thumbnail-duration":"thumbnail-duration-CaP985",space:"space-NQlvsK"},A=e=>{var t,i,l,o;let{pub:s,postId:c,isFocused:u,disableShortcuts:v=!1}=e,[p,m]=(0,r.eJ)(!1),[h,g]=(0,r.eJ)(null),f=e=>{if(!h||!s)return;(0,a.j)(a.FP.VIDEO_NEXT_VIDEO_BUTTON_CLICKED,{postId:h.id,pubId:s.id});let t=(0,M.zV)({linkToComments:!1,post:h,pub:s,utm:"next-episode"});(0,X.uX)(t,{event:e})};(0,r.d4)(()=>{(async()=>{var e,t,i;let n=await P().get("/api/v1/recent_posts").query({episodes_only:!0}),r=(null!==(t=n.body)&&void 0!==t?t:[]).findIndex(e=>e.id===c);g(null!==(i=null===(e=n.body)||void 0===e?void 0:e[r+1])&&void 0!==i?i:void 0)})()},[]),(0,k.Kr)("shift+n",()=>f(),u&&!v);let C=(null==h?void 0:h.cover_image)||(null==h?void 0:h.podcast_episode_image_url);return(0,n.BX)("div",{style:{position:"relative"},onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[p&&C&&(0,n.BX)(d.tu,{position:"absolute",className:F.container,children:[(0,n.BX)(d.tu,{bg:"glass-inverted-medium",radius:"sm",style:{cursor:"pointer"},paddingY:8,paddingX:12,gap:4,onClick:f,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[(0,n.BX)(d.gq,{gap:16,children:[(0,n.BX)(d.tu,{gap:2,flex:"grow",children:[(0,n.tZ)(O.xv.Meta,{color:"white",opacity:80,children:"Next Up"}),(0,n.tZ)(O.xv.B4,{color:"white",children:h.title})]}),(0,n.tZ)(d.gq,{alignItems:"center",children:(0,n.tZ)(S.Z,{color:"white",size:24})})]}),(0,n.BX)("div",{style:{position:"relative"},children:[(0,n.tZ)(D.e,{className:F.fullWidth,src:C,alt:h.title,maxWidth:200,imageProps:{height:112.5,smartCrop:!0},radius:"sm"}),(0,n.tZ)(d.gq,{className:F["thumbnail-duration"],bg:"glass-inverted-medium",position:"absolute",radius:"sm",children:(0,n.tZ)(O.xv.Meta,{color:"white",lineHeight:20,children:(0,z.secondsToHHMMSS)(null!==(o=null!==(l=null===(t=h.videoUpload)||void 0===t?void 0:t.duration)&&void 0!==l?l:null===(i=h.podcastUpload)||void 0===i?void 0:i.duration)&&void 0!==o?o:0)})})]})]}),(0,n.tZ)(R.xu,{className:F.space})]}),(0,n.tZ)(x.Z,{disabled:!h,children:(0,n.tZ)(N.Z,{size:18,fill:"white",onClick:f})})]})};var U=i(37474);let V=e=>{let{disableShortcuts:t,disableTooltips:i,isFocused:l,mediaRef:a}=e,[o,d]=(0,r.eJ)(!1),s=async()=>{if(a.current)try{document.pictureInPictureElement?await document.exitPictureInPicture():a.current.player&&"requestPictureInPicture"in a.current.player&&await a.current.player.requestPictureInPicture()}catch(e){console.error("Failed to toggle PiP mode:",e)}};return(0,r.d4)(()=>{let e=()=>d(!0),t=()=>d(!1);if(a.current){var i,n;null===(i=a.current.player)||void 0===i||i.addEventListener("enterpictureinpicture",e),null===(n=a.current.player)||void 0===n||n.addEventListener("leavepictureinpicture",t)}return()=>{if(a.current){var i,n;null===(i=a.current.player)||void 0===i||i.removeEventListener("enterpictureinpicture",e),null===(n=a.current.player)||void 0===n||n.removeEventListener("leavepictureinpicture",t)}}},[a]),(0,k.Kr)("i",s,l&&!t),(0,n.tZ)(_.u,{disabled:i,text:"Picture-in-picture",trailing:t?void 0:(0,n.tZ)(w.T,{children:"I"}),children:(0,n.tZ)(x.Z,{onClick:s,children:(0,n.tZ)(U.Z,{size:18})})})};var q=i(43905);let j=e=>{let{startTime:t,mediaRef:i}=e,[l,a]=(0,r.eJ)(0);return(0,r.d4)(()=>{let e;let t=()=>{var n;(null===(n=i.current)||void 0===n?void 0:n.player)&&(a(i.current.player.currentTime),e=requestAnimationFrame(t))};return i.current&&(e=requestAnimationFrame(t)),()=>{cancelAnimationFrame(e)}},[i]),(0,n.tZ)(O.xv.Digit,{size:14,color:"white",children:t?l-t<0?null:(0,q.mr)(l-t):(0,q.mr)(l)})},J=e=>{var t;let{duration:i,mediaRef:l}=e,a=null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.player,[o,d]=(0,r.eJ)(null!=i?i:(null==a?void 0:a.duration)?a.duration:0);return(0,r.d4)(()=>{let e=()=>{var e;(null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.player)&&!isNaN(l.current.player.duration)&&d(l.current.player.duration)};if(null==l?void 0:l.current){var t,i;null===(i=l.current)||void 0===i||null===(t=i.player)||void 0===t||t.addEventListener("durationchange",e)}return e(),()=>{if(null==l?void 0:l.current){var t,i;null===(i=l.current)||void 0===i||null===(t=i.player)||void 0===t||t.removeEventListener("durationchange",e)}}},[a]),(0,n.tZ)(O.xv.Digit,{size:14,color:"white",children:(0,q.mr)(o)})},H=e=>{let{startTime:t,duration:i,mediaRef:r}=e;return(0,n.BX)(d.gq,{justifyContent:"center",alignItems:"center",gap:4,children:[(0,n.tZ)(j,{mediaRef:r,startTime:t}),(0,n.tZ)(O.xv.Digit,{size:14,color:"white",children:"/"}),(0,n.tZ)(J,{duration:i})]})},Y=e=>{let{duration:t,mediaRef:i}=e;return(0,n.BX)(d.gq,{justifyContent:"center",alignItems:"center",gap:4,children:[(0,n.tZ)(j,{startTime:null,mediaRef:i}),(0,n.tZ)(O.xv.Digit,{size:14,color:"white",children:"/"}),(0,n.tZ)(J,{duration:t,mediaRef:i})]})};var K=i(44276),W=i(77475),G=i(53030);let Q=e=>{let{mediaRef:t,isFocused:i,disableShortcuts:r,disableTooltips:l=!1}=e,a=(0,G.On)(t),o=()=>{var e,i;return null===(i=t.current)||void 0===i?void 0:null===(e=i.player)||void 0===e?void 0:e.play()},d=()=>{var e,i;return null===(i=t.current)||void 0===i?void 0:null===(e=i.player)||void 0===e?void 0:e.pause()},s=()=>a?d():o();return(0,k.Kr)("k",s,i&&!r),(0,k.Kr)(" ",s,i&&!r),(0,n.tZ)(_.u,{disabled:l,text:a?"Pause":"Play",trailing:r?void 0:(0,n.tZ)(w.T,{children:"K"}),children:(0,n.tZ)(x.Z,{onClick:s,children:a?(0,n.tZ)(K.Z,{fill:"white",size:18}):(0,n.tZ)(W.Z,{fill:"white",size:18})})})};var $=i(2647);let ee=e=>{let{disableTooltips:t=!1,isSettingsOpen:i,setIsSettingsOpen:r}=e,{iString:l}=(0,b.M1)();return i?(0,n.tZ)(x.Z,{children:(0,n.tZ)($.Z,{size:18,onClick:()=>r(!i)})}):(0,n.tZ)(_.u,{disabled:t,text:l("Settings"),children:(0,n.tZ)(x.Z,{children:(0,n.tZ)($.Z,{size:18,onClick:()=>r(!i)})})})};var et=i(6400),ei=i(25380),en=i(53961),er=i(48619),el=i(31131),ea=i(14068),eo=i(75697),ed=i(40949);let es={seetingsMenu:"seetingsMenu-zc8kI3",menuItem:"menuItem-Z86vY3"},ec=e=>{let{mediaRef:t,dismiss:i}=e,r=e=>{var n;(null===(n=t.current)||void 0===n?void 0:n.player)&&(t.current.player.playbackRate=e,localStorage.setItem("video_player:playbackRate",e.toString())),i()};return(0,n.tZ)(d.tu,{gap:4,flex:"grow",children:[.25,.5,.75,1,1.25,1.5,1.75,2].map(e=>{var i,l;return(0,n.BX)(d.gq,{className:es.menuItem,padding:8,justifyContent:"space-between",alignItems:"center",onClick:()=>r(e),children:[(0,n.BX)(O.xv.B4,{font:"text",size:12,lineHeight:16,weight:"regular",color:"white",children:[e,"\xd7"]}),e===(null===(l=t.current)||void 0===l?void 0:null===(i=l.player)||void 0===i?void 0:i.playbackRate)&&(0,n.tZ)(ei.Z,{size:16,color:"white"})]})})})},eu={en:"English",es:"Spanish",it:"Italian",de:"German",pt:"Portuguese",fr:"French"},ev=e=>{let{options:t=[],subtitles:i,setSubtitles:r,dismiss:l}=e,a=e=>{r(e),localStorage.setItem("video_player:subtitles",e||""),l()};return(0,n.tZ)(d.tu,{gap:4,flex:"grow",children:[null,...t].map(e=>{var t;return(0,n.BX)(d.gq,{className:es.menuItem,paddingY:8,paddingX:16,justifyContent:"space-between",alignItems:"center",onClick:()=>a(e),children:[(0,n.tZ)(O.xv.B4,{font:"text",size:12,lineHeight:16,weight:"regular",color:"white",children:null!==(t=eu[null!=e?e:""])&&void 0!==t?t:"None"}),i===e&&(0,n.tZ)(ei.Z,{size:16,color:"white"})]})})})},ep=e=>{let{title:t,icon:i,selection:r,onClick:l}=e;return(0,n.BX)(d.gq,{className:es.menuItem,padding:8,justifyContent:"space-between",alignItems:"center",onClick:l,children:[(0,n.BX)(d.gq,{gap:8,alignItems:"center",children:[i,(0,n.tZ)(O.xv.B4,{color:"white",font:"text",size:12,lineHeight:16,weight:"regular",children:t})]}),(0,n.tZ)(d.gq,{children:(0,n.tZ)(O.xv.B4,{color:"white",font:"text",size:12,lineHeight:16,weight:"regular",children:r})})]})},em=e=>{var t,i,l;let{hideSharePostAtCurrentTime:o,mediaRef:c,post:u,pub:p,podcastUpload:h,subtitles:g,setSubtitles:f,setIsSettingsOpen:C}=e,{iString:y}=(0,b.M1)(),[Z,w]=(0,r.eJ)(!1),[_,k]=(0,r.eJ)(!1),x=(0,et.createRef)(),I=(0,m.Z)(null===(t=c.current)||void 0===t?void 0:t.player),T=(0,ed.y)(),[E,B]=(0,r.eJ)([]);return(0,r.d4)(()=>{f(localStorage.getItem("video_player:subtitles")||null)},[]),(0,r.d4)(()=>{var e,t;if(null==h?void 0:null===(e=h.transcription)||void 0===e?void 0:e.signed_captions){let e=(null!==(t=h.transcription.signed_captions)&&void 0!==t?t:[]).map(e=>e.language);B(e),g&&!e.includes(g)&&f(null)}},[h,g]),(0,r.d4)(()=>{var e,t;let i=parseFloat(localStorage.getItem("video_player:playbackRate")||"1"),n=()=>{var e;(null===(e=c.current)||void 0===e?void 0:e.player)&&(c.current.player.playbackRate=i)};return(null===(e=c.current)||void 0===e?void 0:e.player)&&(null===(t=c.current.player)||void 0===t||t.addEventListener("loadedmetadata",n)),()=>{if(c.current){var e;null===(e=c.current.player)||void 0===e||e.removeEventListener("loadedmetadata",n)}}},[c]),(0,ea.Z)(x,()=>{w(!1),k(!1),C(!1)}),(0,n.BX)(d.tu,{paddingY:8,ref:x,gap:4,flex:"grow",className:v()(es.seetingsMenu,{[es.slideOut]:Z}),children:[Z&&(0,n.tZ)(ec,{mediaRef:c,dismiss:()=>w(!1)}),_&&(0,n.tZ)(ev,{options:E,subtitles:g,setSubtitles:f,dismiss:()=>k(!1)}),!Z&&!_&&(0,n.BX)(d.tu,{gap:4,flex:"grow",children:[(0,n.tZ)(ep,{title:y("Playback speed"),icon:(0,n.tZ)(en.Z,{size:16,color:"white"}),onClick:()=>w(!0),selection:(0,n.BX)(n.HY,{children:[null===(l=c.current)||void 0===l?void 0:null===(i=l.player)||void 0===i?void 0:i.playbackRate,"\xd7"]})}),E.length>0&&(0,n.tZ)(ep,{title:y("Subtitles"),icon:(0,n.tZ)(er.Z,{size:16,color:"white"}),onClick:()=>k(!0),selection:eu[null!=g?g:""]}),u&&p&&(0,n.BX)(et.Fragment,{children:[(0,n.tZ)(ep,{title:y("Share post"),icon:(0,n.tZ)(el.Z,{size:16,color:"white"}),onClick:()=>{u&&p&&(T((0,eo.O1)(null,{post:u,pub:p,useCustomDomainOverOpen:!0})),(0,a.j)(a.FP.SHARE_LINK_CLICKED,{name:"copy",source:"player",post_id:u.id}))}}),!o&&(0,n.tZ)(ep,{title:y("Share post at current time"),icon:(0,n.tZ)(el.Z,{size:16,color:"white"}),onClick:()=>{if(!u||!p)return;let e=I?{timestamp:I.toFixed(1)}:{};T((0,eo.O1)(null,{post:u,pub:p,useCustomDomainOverOpen:!0,params:e})),(0,a.j)(a.FP.SHARE_LINK_CLICKED,(0,s._)({name:"copy",source:"player",post_id:u.id},e))}})]})]})]})};var eh=i(74691),eg=i.n(eh);let ef=()=>{let e=new URL(window.location.href);e.searchParams.delete("t"),e.searchParams.delete("d"),window.history.replaceState({},"",e.toString())},eC=()=>{if("undefined"==typeof window)return null;let e=new URLSearchParams(window.location.search),t=e.get("t"),i=e.get("d");if(!t||!i)return null;let n=parseInt(t),r=parseInt(i);return isNaN(n)||isNaN(r)?(ef(),null):{start:n,end:n+eg()(r,l.AT,l.ar)}},ey=()=>{let[e]=(0,r.eJ)(eC());return{clipTimes:e}};var eZ=i(40423),eb=i(93370);let ew=e=>{let{clipDuration:t,isMinimized:i,onClick:r}=e;return i?(0,n.tZ)(e_,{onClick:r}):(0,n.BX)(d.gq,{alignItems:"center",bg:"glass-inverted-thick",gap:6,padding:6,paddingRight:8,radius:"full",onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),r()},children:[(0,n.tZ)("div",{className:"iconContainer-RgovDu",children:(0,n.tZ)(eZ.Z,{size:12,color:"white"})}),(0,n.tZ)(O.xv.Meta,{color:"white",children:(0,eb.DL)(t)})]})},e_=e=>{let{onClick:t}=e;return(0,n.tZ)("div",{className:"iconContainerMarker-qBRnT3",onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),t()},children:(0,n.tZ)(eZ.Z,{size:12,color:"white"})})};var ek=i(39693),ex=i.n(ek),eI=i(71212),eT=i(42042),eE=i(67203),eB=i(15771),eS=i(61254),eN=i(44424),eL=i(43681),eP=i(33884);function eD(e){var t,i,o,d;let{duration:c,pub:u,post:v,trigger:p,timestamp:m,onShareMenuOpen:h,onShareMenuClose:g,size:f}=e,[C,y]=(0,r.eJ)(m),{onStartClipping:Z}=(0,l.Sr)(),w=C&&c,_=w?{t:C.toFixed(1),d:c.toFixed(1)}:C?{timestamp:C.toFixed(1)}:{};(0,r.d4)(()=>{y(m)},[m]);let k=(0,eo.O1)(null,{post:v,pub:null!=u?u:void 0,useCustomDomainOverOpen:!0,params:_}),{iString:x}=(0,b.M1)(),I={variant:"menu",url:k,onLinkClicked:e=>{(0,a.j)(a.FP.SHARE_LINK_CLICKED,(0,s._)({is_clip:w,type:e,post_id:null==v?void 0:v.id},_)),(0,a.j)(a.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"share_to_".concat(e),source:"playback timeline"})}},T=(0,eL.LM)(I),E=(0,eL.gY)(I),B=(0,eL.oy)(I),S=(0,eL.Wh)(I),N=eX(I),L=ex()([S,"sm"!==f?(0,n.tZ)(eN.sN,{leading:(0,n.tZ)(eI.Z,{}),onClick:()=>{(0,a.j)(a.FP.SHARE_LINK_CLICKED,(0,s._)({is_clip:w,type:"download_clip",post_id:null==v?void 0:v.id},_)),(0,a.j)(a.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"playback timeline"}),Z({source:"video-timeline",title:null})},children:x("Download clip")}):null,(0,n.tZ)(eE.O0,{url:I.url,onShare:()=>{var e;null===(e=I.onLinkClicked)||void 0===e||e.call(I,"chat")}}),(0,n.tZ)(eS.iz,{paddingX:8}),N,T,E,B]);return(0,n.BX)(eN.v2,{trigger:p,title:x("Share"),maxHeight:350,layerOptions:{placement:"top-center"},onOpen:h,onClose:g,children:[L,!w&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(eS.iz,{}),(0,n.tZ)(eE.YY,{initialTime:null!=C?C:0,onChange:y,maxTime:null!==(d=null!==(o=null==v?void 0:null===(t=v.videoUpload)||void 0===t?void 0:t.duration)&&void 0!==o?o:null==v?void 0:null===(i=v.podcastUpload)||void 0===i?void 0:i.duration)&&void 0!==d?d:null})]})]})}let eX=e=>{let{variant:t,url:i,onLinkClicked:r}=e,{iString:l}=(0,b.M1)(),a=()=>{window.open((0,eP.TK)({message:null!=i?i:""}),"_blank"),null==r||r("notes")};return"icon"===t?(0,n.tZ)(eB.hU,{onClick:a,children:(0,n.tZ)(eT.Z,{})}):(0,n.tZ)(eN.sN,{leading:(0,n.tZ)(eT.Z,{}),onClick:a,children:l("Share to Notes")})};var eM=i(73649);let eR={timelineThumbnail:"timelineThumbnail-sJc0Xj",timelineThumbnailSmall:"timelineThumbnailSmall-FCvVQ9"},eO=e=>{var t;let{children:i,showTooltip:r,size:l,setIsHovering:a,storyboard:o,videoTime:s}=e,c="sm"===l?75:100,u=null!==(t=null==o?void 0:o.tiles)&&void 0!==t?t:[],p=u.length?(0,eM.wb)(u,s):null;return(0,n.BX)(d.tu,{bg:r?"glass-inverted-medium":void 0,radius:"sm"===l?"xs":"sm",padding:8*("sm"!==l),gap:4,opacity:100*!!r,children:[(0,n.tZ)(d.gq,{justifyContent:"center",alignItems:"center",onMouseEnter:()=>a(!1),children:(0,n.tZ)("div",{style:{position:"relative"},children:o&&p&&(0,n.tZ)(eM.RF,{storyboard:o,imageUrl:o.url,displayHeight:c,displayWidth:o.tile_width/o.tile_height*c,x:p.x,y:p.y,className:v()(eR.timelineThumbnail,{[eR.timelineThumbnailSmall]:"sm"===l})})})}),i]})},ez={container:"container-S0aAZ3",track:"track-FYojQC",trackClippedPlayed:"trackClippedPlayed-cnYlGh",trackClippedUnplayed:"trackClippedUnplayed-km4zul",trackFilled:"trackFilled-gbOxAX",trackExpanded:"trackExpanded-_EdObk"},eF=e=>{let{clipTimes:t,duration:i,isHovering:l,isPlayingClippedSegment:o,post:s,pub:c,progress:u,setIsHovering:p,storyboard:m,onClickBubble:h,onPause:g,onShareMenuOpen:f,onShareMenuClose:C}=e,{iString:y}=(0,b.M1)(),[Z,w]=(0,r.eJ)(!1),[_,k]=(0,r.eJ)(!0),x=!o&&u>t.start/i*100,I=!o&&u>t.end/i*100;return(0,r.d4)(()=>{(0,a.j)(a.FP.MEDIA_CLIP_SEEN,{start_time:t.start,duration:t.end-t.start})},[t.end,t.start]),(0,n.BX)("div",{className:ez.container,children:[(0,n.tZ)("div",{className:v()(ez.track,ez.trackUnclipped,{[ez.trackFilled]:x,[ez.trackExpanded]:x&&l}),style:{left:0,width:"calc(".concat(t.start/i*100,"% - 2px)")}}),(0,n.tZ)("div",{className:v()(ez.track,{[ez.trackClippedUnplayed]:o,[ez.trackFilled]:I,[ez.trackExpanded]:I&&l}),style:{left:"".concat(t.start/i*100,"%"),width:"".concat((t.end-t.start)/i*100,"%")}}),(0,n.tZ)("div",{className:v()(ez.track),style:{right:0,width:"calc(".concat((1-t.end/i)*100,"% - 2px)")}}),o?(0,n.tZ)("div",{className:v()(ez.track,ez.trackClippedPlayed,{[ez.trackExpanded]:l}),style:{left:"".concat(t.start/i*100,"%"),width:"".concat(u-t.start/i*100,"%")}}):u<t.start/i*100?(0,n.tZ)("div",{className:v()(ez.track,ez.trackFilled,{[ez.trackExpanded]:l}),style:{left:0,width:"".concat(u,"%")}}):(0,n.tZ)("div",{className:v()(ez.track,ez.trackFilled,{[ez.trackExpanded]:l}),style:{left:"calc(".concat(t.end/i*100,"% + 2px)"),width:"calc(".concat(u-t.end/i*100,"% - 2px)")}}),(0,n.BX)(d.tu,{alignItems:"center",position:"absolute",gap:8,style:{bottom:16,left:o?"".concat(Math.max(t.start/i*100,3.5),"%"):"".concat(Math.max(.5*(t.start+t.end)/i*100,1.5),"%"),transform:"translateX(-50%)"},onMouseEnter:()=>{w(!0)},onMouseLeave:()=>{_&&(k(!0),w(!1))},children:[Z&&(0,n.tZ)(eO,{setIsHovering:p,showTooltip:_,size:"md",storyboard:m,videoTime:t.start,children:(0,n.tZ)(eD,{onShareMenuOpen:()=>{k(!1),null==f||f(),(0,a.j)(a.FP.POST_SHARE_BUTTON_CLICKED,{position:"video_timeline",post_id:null==s?void 0:s.id})},onShareMenuClose:()=>{k(!0),null==C||C()},timestamp:t.start,duration:t.end-t.start,pub:c,post:s,size:"md",trigger:(0,n.tZ)("div",{onMouseDown:e=>e.stopPropagation(),children:_&&(0,n.BX)(d.gq,{cursor:"pointer",gap:8,flex:"grow",paddingY:4,onClick:g,justifyContent:"center",children:[(0,n.tZ)(el.Z,{color:"white",size:20}),(0,n.tZ)(O.xv.B4,{color:"white",weight:"semibold",children:y("Share clip")})]})})})}),(0,n.tZ)(ew,{clipDuration:t.end-t.start,isMinimized:!o,onClick:h})]})]})},eA={timelineContainer:"timelineContainer-QAunx2",timeline:"timeline-nCVBQY",timelineHover:"timelineHover-G7eFow",progress:"progress-K0IenH",progressHover:"progressHover-Cm9xTr",thumbnailContainer:"thumbnailContainer-vAgzNA"},eU=e=>{var t;let{disableSharing:i,mediaRef:o,mediaUpload:s,post:c,pub:u,size:p,startTime:m=0,endTime:h,onShareMenuOpen:g,onShareMenuClose:f}=e,{iString:C}=(0,b.M1)(),{isClipping:y}=(0,l.Sr)(),{currentTime:Z}=(0,G.FI)(o),{clipTimes:w}=ey(),_=!!(w&&Z>=w.start&&Z<=w.end),[x,I]=(0,r.eJ)(!0),[T,E]=(0,r.eJ)(null),[B,S]=(0,r.eJ)(0),[N,L]=(0,r.eJ)(!1),[P,D]=(0,r.eJ)(!1),[X,M]=(0,r.eJ)(0),[R,z]=(0,r.eJ)(0),[F,A]=(0,r.eJ)(0),[U,V]=(0,r.eJ)(0),j=(0,r.sO)(null),J=(0,r.sO)(null),H=(0,r.sO)(null),Y=(0,k.lg)(s),K=(h||X)-m,W=(0,r.I4)(()=>{var e;if(null===(e=o.current)||void 0===e?void 0:e.player){let e=o.current.player;S(eg()(e.currentTime-m,0,null!=K?K:e.duration-m)/(null!=K?K:e.duration)*100),h&&e.currentTime>=h&&(e.currentTime=m,e.pause())}j.current=requestAnimationFrame(W)},[o,m,K,h]),Q=(0,r.I4)(e=>{var t;if(H.current&&(null===(t=o.current)||void 0===t?void 0:t.player)){let t=H.current.getBoundingClientRect(),i=(e.clientX-t.left)/t.width;o.current.player.currentTime=eg()(m+i*K,0,X),S(100*i)}},[o,m,X,K]),$=(0,r.I4)(e=>{Q(e)},[Q]),ee=(0,r.I4)(e=>{N&&e.preventDefault()},[N]),et=(0,r.I4)(()=>{L(!1),document.removeEventListener("mousemove",$),document.removeEventListener("selectstart",ee)},[$,ee]),ei=(0,r.I4)(e=>{e.preventDefault(),L(!0),Q(e),document.addEventListener("mousemove",$),document.addEventListener("mouseup",et),document.addEventListener("selectstart",ee)},[Q,$,et,ee]),en=()=>{Math.abs(R-U)>.1?(V(e=>e+(R-e)*.1),J.current=window.requestAnimationFrame(en)):(V(R),J.current&&window.cancelAnimationFrame(J.current))};(0,r.d4)(()=>(j.current=window.requestAnimationFrame(W),()=>{null!==j.current&&window.cancelAnimationFrame(j.current),null!==J.current&&window.cancelAnimationFrame(J.current)}),[W]),(0,r.d4)(()=>{let e=()=>{var e;(null===(e=o.current)||void 0===e?void 0:e.player)&&!isNaN(o.current.player.duration)&&M(o.current.player.duration)};if(o.current){var t;null===(t=o.current.player)||void 0===t||t.addEventListener("durationchange",e)}return e(),()=>{if(o.current){var t;null===(t=o.current.player)||void 0===t||t.removeEventListener("durationchange",e)}}},[null===(t=o.current)||void 0===t?void 0:t.player]);let er=T?T/K*100:R*K/100;return(0,n.BX)(d.gq,{ref:H,onMouseDown:ei,onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),onClick:et,onMouseMove:e=>{var t,i,n,r;let{x:l,width:a}=null!==(n=null===(t=H.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==n?n:{x:0,width:0};z((e.clientX-l)/a*100);let o=Y?Y.tile_width/Y.tile_height*100:100,d=((null!=o?o:0)+10)/2/(null!==(r=null===(i=H.current)||void 0===i?void 0:i.getBoundingClientRect().width)&&void 0!==r?r:1)*100,s=T?T/K*100:null;A(eg()(null!=s?s:R,d,100-d)),J.current||en()},flex:"grow",position:"relative",className:eA.timelineContainer,cursor:"pointer",children:[w&&X&&c&&u&&!y?(0,n.tZ)(eF,{clipTimes:w,duration:X,isHovering:P,isPlayingClippedSegment:null!=_&&_,post:c,pub:u,progress:B,setIsHovering:D,storyboard:Y,onClickBubble:()=>{var e,t,i;(null===(e=o.current)||void 0===e?void 0:e.player)&&w&&(o.current.player.currentTime=w.start,o.current.player.paused&&(null===(t=(i=o.current.player).play)||void 0===t||t.call(i)))},onPause:()=>{var e,t,i;(null===(e=o.current)||void 0===e?void 0:e.player)&&(null===(t=(i=o.current.player).pause)||void 0===t||t.call(i))},onShareMenuOpen:g,onShareMenuClose:f}):(0,n.BX)("div",{className:eA.timeline,children:[P&&(0,n.tZ)("div",{className:eA.timelineHover,style:{width:"".concat(R,"%"),height:"100%"}}),(0,n.tZ)("div",{className:v()(eA.progress,{[eA.progressHover]:P&&!w}),style:{width:"".concat(B,"%"),height:"100%"}})]}),!y&&!i&&!w&&c&&u&&f&&g&&(0,n.tZ)(d.tu,{position:"absolute",className:eA.thumbnailContainer,style:{position:"absolute",left:"".concat(F,"%"),opacity:+!!P},children:(0,n.tZ)(eO,{setIsHovering:D,showTooltip:x,size:null!=p?p:"md",storyboard:Y,videoTime:er,children:"sm"!==p&&(0,n.tZ)(eD,{onShareMenuOpen:()=>{I(!1),null==g||g(),(0,a.j)(a.FP.POST_SHARE_BUTTON_CLICKED,{position:"video_timeline",post_id:null==c?void 0:c.id})},onShareMenuClose:()=>{I(!0),E(null),null==f||f()},timestamp:T,pub:u,post:c,size:p,trigger:(0,n.tZ)(d.gq,{children:x&&(0,n.BX)(d.gq,{cursor:"pointer",gap:8,flex:"grow",paddingY:4,onClick:()=>{var e,t,i,n;(null===(t=o.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.paused)||null===(n=o.current)||void 0===n||null===(i=n.player)||void 0===i||i.pause(),E(er)},justifyContent:"center",children:[(0,n.tZ)(el.Z,{color:"white",size:20}),(0,n.BX)(O.xv.B4,{color:"white",weight:"semibold",children:[C("Share from "),(0,q.mr)(er)]})]})})})})})]})};var eV=i(56687);let eq=e=>{let{isFocused:t,disabled:i,disableShortcuts:r,disableTooltips:l=!1,onToggleShowTranscript:a}=e,{iString:o}=(0,b.M1)();return(0,k.Kr)("t",a,t&&!r),(0,n.tZ)(_.u,{disabled:l,text:o("Transcripts"),trailing:r?void 0:(0,n.tZ)(w.T,{children:"T"}),children:(0,n.tZ)(x.Z,{onClick:a,disabled:i,children:(0,n.tZ)(eV.Z,{size:18})})})};var ej=i(60651);let eJ={bottomControlsContainer:"bottomControlsContainer-kx5Iet",bottomInnerControlsContainer:"bottomInnerControlsContainer-nA_qdP",backDrop:"backDrop-OMzeTr",captionsContainer:"captionsContainer-sSAb5L",settingsControlsContainer:"settingsControlsContainer-V3A25d",settingsControlsBox:"settingsControlsBox-svKH2p",topOverlaysContainer:"topOverlaysContainer-xo1FwD"},eH=e=>{var t,i,s,c;let{autoPlayMuted:u,forLiveStream:v=!1,disableSharing:p=!1,disableShortcuts:m=!1,disableTooltips:h=!1,disableCaptions:g=!1,duration:C,handle:y,hasPaywall:Z=!1,hasTranscript:b=!1,hideNextVideoButton:w=!1,hidePip:_=!1,hideCaptions:k=!1,hideSettings:x=!1,isActive:T,isAudio:E=!1,isFocused:S,mediaRef:N,mediaUpload:L,podcastUpload:P,post:D,pub:X,showPaywall:M,showTranscript:R,size:O="md",onShareMenuClose:z,onShareMenuOpen:F,onToggleShowTranscript:U,onBlur:q,hoverOptions:j}=e,{transition:J=.5,transitionDelay:H=.1}=null!=j?j:{},{isClipping:K}=(0,l.Sr)(),{isMobile:W}=(0,o.v9)(),G=T&&!M,$=(0,r.sO)(null),[et,ei]=(0,r.eJ)(!1),[en,er]=(0,r.eJ)(!1),[el,ea]=(0,r.eJ)(null),eo=e=>{let{current:t}=N;t&&(t.isShowingCaptionsElsewhere=e),er(e)};(0,r.d4)(()=>{(K||u)&&ed({showCaptions:!0,userInitiated:!1})},[K,u]);let ed=e=>{let{showCaptions:t,userInitiated:i}=e;eo(t),t&&(null==es?void 0:es.length)&&es[0]&&(ea(es[0].language),i&&(0,a.j)(a.FP.VIDEO_CLOSED_CAPTIONS_BUTTON_CLICKED,{language:es[0].language}))};(0,r.d4)(()=>{G||ei(!1)},[G]);let es=null!==(s=null==P?void 0:null===(t=P.transcription)||void 0===t?void 0:t.signed_captions)&&void 0!==s?s:[],ec=!!(null==P?void 0:null===(i=P.transcription)||void 0===i?void 0:i.approved_at);return(0,n.BX)("div",{ref:$,style:{zIndex:K?10:+!!et},onBlur:q,children:[(null==y?void 0:y.active)?(0,n.tZ)("div",{className:eJ.topOverlaysContainer,style:{opacity:+!!G,transform:G||W?"translateY(0)":"translateY(-20%)"},children:(0,n.BX)(d.gq,{justifyContent:"space-between",paddingBottom:32,children:[(0,n.tZ)(d.gq,{padding:16}),(0,n.tZ)(d.gq,{padding:16})]})}):null,(0,n.tZ)("div",{}),(0,n.tZ)("div",{className:eJ.settingsControlsContainer,style:{opacity:et&&G?1:0,pointerEvents:et?"auto":"none"},children:(0,n.BX)(d.tu,{children:[(0,n.tZ)(d.gq,{className:eJ.settingsControlsBox,children:(0,n.tZ)(em,{hideSharePostAtCurrentTime:E,mediaRef:N,post:D,pub:X,podcastUpload:P,subtitles:el,setSubtitles:e=>{ea(e),!e&&en?eo(!1):e&&!en&&eo(!0)},setIsSettingsOpen:ei})}),(0,n.tZ)("div",{style:{height:"60px"}})]})}),(0,n.BX)("div",{className:eJ.bottomControlsContainer,style:{transform:G||W?"translateY(0)":"translateY(40px)",transition:"transform ".concat(J,"s ease"),transitionDelay:"".concat(H,"s")},children:[(0,n.tZ)("div",{className:eJ.backDrop,style:{opacity:+!!G}}),(0,n.BX)(d.tu,{flex:"grow",gap:8,paddingY:4,children:[N.current&&P&&!Z&&y&&L&&!g&&(0,n.tZ)("div",{className:eJ.captionsContainer,children:(0,n.tZ)(f,{handle:y,mediaUpload:P,showCaptions:en,size:O,subtitles:el,videoEle:null!==(c=N.current.player)&&void 0!==c?c:null,withHighlight:K})}),(0,n.tZ)("div",{className:eJ.bottomInnerControlsContainer,style:{opacity:+!!G,transition:void 0!=J?"opacity ".concat(J,"s ease"):"opacity 0.5s ease"},children:(0,n.BX)(d.tu,{flex:"grow",children:[!v&&(0,n.tZ)(d.gq,{flex:"grow",paddingBottom:4,children:(0,n.tZ)(eU,{disableSharing:E||p,mediaRef:N,mediaUpload:L,post:D,pub:X,size:O,onShareMenuClose:z,onShareMenuOpen:F})}),(0,n.BX)(d.gq,{paddingX:4,children:[(0,n.BX)(d.hs,{gap:8,alignItems:"center",children:[!v&&(0,n.tZ)(Q,{disableShortcuts:m,disableTooltips:h,isFocused:S,mediaRef:N}),!w&&(null==L?void 0:L.post_id)&&(0,n.tZ)(A,{disableShortcuts:m,isFocused:S,postId:L.post_id,pub:X}),(0,n.tZ)(ej.Z,{disableShortcuts:m,disableTooltips:h,isFocused:S,mediaRef:N}),!v&&(0,n.tZ)(Y,{duration:E&&null!=C?C:null,mediaRef:N})]}),(0,n.tZ)(d.hs,{flex:"grow"}),(0,n.BX)(d.hs,{gap:8,alignItems:"center",children:[!E&&U&&!v&&(0,n.tZ)(eq,{disableShortcuts:m,disableTooltips:h,disabled:Z||!b,isFocused:S,showTranscript:null!=R&&R,onToggleShowTranscript:U}),!E&&!k&&!v&&(0,n.tZ)(I,{disableShortcuts:m,disableTooltips:h,disabled:!ec||Z,isFocused:S,setShowCaptions:ed,showCaptions:en}),!E&&!_&&(0,n.tZ)(V,{disableShortcuts:m,disableTooltips:h,isFocused:S,mediaRef:N}),!E&&y&&(0,n.tZ)(B,{disableShortcuts:m,disableTooltips:h,handle:y,isFocused:S}),!v&&!x&&(0,n.tZ)(ee,{disableTooltips:h,isSettingsOpen:et,setIsSettingsOpen:ei})]})]})]})})]})]})]})},eY=e=>{var t,i,l,s,c,u;let{mediaRef:v,mediaUpload:p,handle:m,isActive:h,pub:g,size:C="sm",startTime:y,duration:Z,useCaptions:b=!1,captionsStyle:w,hoverOptions:_,onBlur:k}=e,{transition:x=.5,transitionDelay:T=.1}=null!=_?_:{},{isMobile:E}=(0,o.v9)(),S=(0,r.sO)(null),[N,L]=(0,r.eJ)(!1),[P,D]=(0,r.eJ)(null),X=null!==(c=null==p?void 0:null===(i=p.extractedAudio)||void 0===i?void 0:null===(t=i.transcription)||void 0===t?void 0:t.signed_captions)&&void 0!==c?c:[],M=!!(null==p?void 0:null===(s=p.extractedAudio)||void 0===s?void 0:null===(l=s.transcription)||void 0===l?void 0:l.approved_at);return(0,r.d4)(()=>{let e=()=>{var e;(null===(e=v.current)||void 0===e?void 0:e.player)&&!isNaN(v.current.player.duration)&&(v.current.player.currentTime=y)};if(v.current){var t;null===(t=v.current.player)||void 0===t||t.addEventListener("durationchange",e)}return()=>{if(v.current){var t;null===(t=v.current.player)||void 0===t||t.removeEventListener("durationchange",e)}}},[v]),(0,n.BX)("div",{ref:S,onBlur:k,children:[(null==m?void 0:m.active)?(0,n.tZ)("div",{className:eJ.topOverlaysContainer,style:{opacity:+!!h,transform:h||E?"translateY(0)":"translateY(-20%)"},children:(0,n.BX)(d.gq,{justifyContent:"space-between",paddingBottom:32,children:[(0,n.tZ)(d.gq,{padding:16}),(0,n.tZ)(d.gq,{padding:16})]})}):null,v.current&&(null==p?void 0:p.extractedAudio)&&m&&b&&(0,n.tZ)("div",{className:eJ.captionsContainer,style:{bottom:0},children:(0,n.tZ)(f,{handle:m,mediaUpload:p.extractedAudio,showCaptions:N,size:C,subtitles:P,videoEle:null!==(u=v.current.player)&&void 0!==u?u:null,captionsStyle:w,withHighlight:!0})}),(0,n.BX)("div",{className:eJ.bottomControlsContainer,style:{transform:h||E?"translateY(0)":"translateY(40px)",transition:void 0!=x?"transform ".concat(x,"s ease"):"transform 0.5s ease",transitionDelay:void 0!=T?"".concat(T,"s"):"0.1s"},children:[(0,n.tZ)("div",{className:eJ.backDrop,style:{opacity:+!!h}}),(0,n.tZ)(d.tu,{flex:"grow",gap:8,paddingY:4,children:(0,n.tZ)("div",{className:eJ.bottomInnerControlsContainer,style:{opacity:+!!h,transition:void 0!=x?"opacity ".concat(x,"s ease"):"opacity 0.5s ease"},children:(0,n.BX)(d.tu,{flex:"grow",children:[(0,n.tZ)(d.gq,{flex:"grow",paddingBottom:4,children:(0,n.tZ)(eU,{disableSharing:!0,mediaRef:v,mediaUpload:p,post:void 0,pub:g,size:"sm",startTime:y,endTime:Z?y+Z:void 0})}),(0,n.BX)(d.gq,{paddingX:4,children:[(0,n.BX)(d.hs,{gap:8,alignItems:"center",children:[(0,n.tZ)(Q,{disableShortcuts:!0,disableTooltips:!0,isFocused:!1,mediaRef:v}),(0,n.tZ)(ej.Z,{disableShortcuts:!0,disableTooltips:!0,isFocused:!1,mediaRef:v}),(0,n.tZ)(H,{startTime:y,duration:null!=Z?Z:null,mediaRef:v})]}),(0,n.tZ)(d.hs,{flex:"grow"}),(0,n.tZ)(I,{disableShortcuts:!0,disableTooltips:!0,disabled:!M,setShowCaptions:e=>{let{showCaptions:t,userInitiated:i}=e;L(t),t&&(null==X?void 0:X.length)&&X[0]&&(D(X[0].language),i&&(0,a.j)(a.FP.VIDEO_CLOSED_CAPTIONS_BUTTON_CLICKED,{language:X[0].language}))},showCaptions:N,isFocused:!1}),m&&(0,n.tZ)(B,{disableShortcuts:!0,disableTooltips:!0,handle:m,isFocused:!1})]})]})})})]})]})},eK=e=>{let{mediaRef:t,mediaUpload:i,isActive:l,pub:a,startTime:s,duration:c,hoverOptions:u,onBlur:v}=e,{transition:p=.5,transitionDelay:m=.1}=null!=u?u:{},{isMobile:h}=(0,o.v9)(),g=(0,r.sO)(null);return(0,r.d4)(()=>{let e=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&!isNaN(t.current.player.duration)&&(t.current.player.currentTime=s)};if(t.current){var i;null===(i=t.current.player)||void 0===i||i.addEventListener("durationchange",e)}return()=>{if(t.current){var i;null===(i=t.current.player)||void 0===i||i.removeEventListener("durationchange",e)}}},[t]),(0,n.tZ)("div",{ref:g,onBlur:v,children:(0,n.BX)("div",{className:eJ.bottomControlsContainer,style:{transform:l||h?"translateY(0)":"translateY(40px)",transition:"transform ".concat(p,"s ease"),transitionDelay:"".concat(m,"s")},children:[(0,n.tZ)("div",{className:eJ.backDrop,style:{opacity:+!!l}}),(0,n.tZ)(d.tu,{flex:"grow",gap:8,paddingY:4,children:(0,n.tZ)("div",{className:eJ.bottomInnerControlsContainer,style:{opacity:+!!l,transition:void 0!=p?"opacity ".concat(p,"s ease"):"opacity 0.5s ease"},children:(0,n.BX)(d.tu,{flex:"grow",children:[(0,n.tZ)(d.gq,{flex:"grow",paddingBottom:4,children:(0,n.tZ)(eU,{disableSharing:!0,mediaRef:t,mediaUpload:i,post:void 0,pub:a,size:"sm",startTime:s,endTime:c?s+c:void 0})}),(0,n.BX)(d.gq,{paddingX:4,children:[(0,n.BX)(d.hs,{gap:8,alignItems:"center",children:[(0,n.tZ)(Q,{disableShortcuts:!0,disableTooltips:!0,isFocused:!1,mediaRef:t}),(0,n.tZ)(ej.Z,{disableShortcuts:!0,disableTooltips:!0,isFocused:!1,mediaRef:t}),(0,n.tZ)(H,{startTime:s,duration:null!=c?c:null,mediaRef:t})]}),(0,n.tZ)(d.hs,{flex:"grow"})]})]})})})]})})}},60651:function(e,t,i){i.d(t,{Z:()=>C});var n=i(16584),r=i(30396),l=i(74691),a=i.n(l),o=i(10844),d=i(89919),s=i(53239),c=i(21676),u=i(98422),v=i(19081),p=i(84370),m=i(87077),h=i(74571),g=i(63722);let f={volumeBarContainer:"volumeBarContainer-AVLNVa",volumeBar:"volumeBar-N1rUCF",mainContainer:"mainContainer-_32N5B",volumeLevel:"volumeLevel-VDMLnw"},C=e=>{let{mediaRef:t,isFocused:i,disableShortcuts:l,disableTooltips:C=!1,hideVolumeBar:y=!1}=e,{isMobile:Z}=(0,u.v9)(),[b,w]=(0,r.eJ)(0),[_,k]=(0,r.eJ)(!1),[x,I]=(0,r.eJ)(!1),T=(0,r.sO)(null),E=e=>{let i=0;if(T.current){var n;let r=T.current.getBoundingClientRect(),l=(e.clientX-r.left)/r.width;w(i=a()(l,0,1)),localStorage.setItem("video_player:volume",i.toString()),(null===(n=t.current)||void 0===n?void 0:n.player)&&(t.current.player.volume=i)}_&&i>0&&L()},B=e=>{I(!0),E(e)},S=()=>{I(!1),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",S),document.removeEventListener("selectstart",N)},N=e=>{x&&e.preventDefault()};(0,r.d4)(()=>{var e,i,n,r,l,o;let d=parseFloat(null!==(r=localStorage.getItem("video_player:volume"))&&void 0!==r?r:"");if(k(null!==(l=null===(i=t.current)||void 0===i?void 0:null===(e=i.player)||void 0===e?void 0:e.muted)&&void 0!==l&&l),isNaN(d))(null===(n=t.current)||void 0===n?void 0:n.player)&&w(t.current.player.volume);else{let e=a()(d,0,1);w(e),(null===(o=t.current)||void 0===o?void 0:o.player)&&(t.current.player.volume=e)}return()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",S),document.removeEventListener("selectstart",N)}},[]);let L=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&(t.current.player.muted=!_,k(!_))},P=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.muted!==_&&k(t.current.player.muted)};return(0,r.d4)(()=>{var e;return(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.addEventListener("volumechange",P),()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.removeEventListener("volumechange",P)}},[]),(0,h.Kr)("m",L,i&&!l),(0,n.BX)(v.gq,{className:f.mainContainer,justifyContent:"center",alignItems:"center",position:"relative",children:[(0,n.tZ)(m.u,{disabled:C,text:_?"Unmute":"Mute",trailing:l?void 0:(0,n.tZ)(p.T,{children:"M"}),children:(0,n.tZ)(g.Z,{onClick:L,children:_?(0,n.tZ)(o.Z,{size:18}):b>.6||Z?(0,n.tZ)(d.Z,{size:18}):b>.3?(0,n.tZ)(s.Z,{size:18}):(0,n.tZ)(c.Z,{size:18})})}),!Z&&!y&&(0,n.tZ)(v.gq,{className:f.volumeBarContainer,justifyContent:"center",alignItems:"center",onMouseDown:e=>{e.preventDefault(),I(!0),E(e),document.addEventListener("mousemove",B),document.addEventListener("mouseup",S),document.addEventListener("selectstart",N)},children:(0,n.tZ)("div",{className:f.volumeBar,ref:T,children:(0,n.tZ)("div",{className:f.volumeLevel,style:{width:"".concat(100*b,"%")}})})})]})}},49091:function(e,t,i){i.d(t,{X:()=>p});var n=i(7409),r=i(99282),l=i(23398),a=i(38927),o=i(22498);function d(e){let t=0;if(e){if(e.content&&e.content.length>0)for(let i of e.content)t+=d(i);else{var i,n;t+=null!==(n=null===(i=e.text)||void 0===i?void 0:i.length)&&void 0!==n?n:0}}return t}function s(e){let t=0;return(0,o.cb)(e,e=>{e.type&&a.t.includes(e.type)&&("codeBlock"===e.type&&e.content?e.content.forEach(e=>{if("text"===e.type){var i,n;t+=(null!==(n=(null!==(i=e.text)&&void 0!==i?i:"").match(/\n/g))&&void 0!==n?n:[]).length+1}}):t++)}),t}var c=i(84864);let u={medium:{desktop:{charactersTruncateTo:500,charactersTruncateIfOver:560,linesTruncateTo:6,linesTruncateIfOver:8},mobile:{charactersTruncateTo:320,charactersTruncateIfOver:420,linesTruncateTo:6,linesTruncateIfOver:8}},small:{desktop:{charactersTruncateTo:340,charactersTruncateIfOver:400,linesTruncateTo:4,linesTruncateIfOver:6},mobile:{charactersTruncateTo:210,charactersTruncateIfOver:210,linesTruncateTo:4,linesTruncateIfOver:4}}},v={desktop:{TRUNCATED_LINES:32,TRUNCATED_CHARACTERS:2400},mobile:{TRUNCATED_LINES:20,TRUNCATED_CHARACTERS:1e3}};function p(e,t){var i,o,p,m;let{truncationProfile:h="medium",isMobile:g}=t,{charactersTruncateTo:f,charactersTruncateIfOver:C,linesTruncateTo:y,linesTruncateIfOver:Z}=u[o=e,"small"!==(p=h)&&(null===(m=o.attachments)||void 0===m?void 0:m.length)?"small":p][g?"mobile":"desktop"],b=function e(t){let i=null;if(t){if(i=(0,r._)((0,n._)({},t),{content:void 0,text:void 0}),null==t?void 0:t.content)for(let n of(i.content=[],t.content)){let t=e(n);t&&i.content.push(t)}else{var a,o;let e=null===(a=t.marks)||void 0===a?void 0:a.find(e=>"link"===e.type);(null==e?void 0:null===(o=e.attrs)||void 0===o?void 0:o.href)?i.text=(0,l.u)(e.attrs.href):i.text=t.text}}return i}(null!==(i=null==e?void 0:e.body_json)&&void 0!==i?i:(null==e?void 0:e.body)?{type:"doc",attrs:{schemaVersion:"v1"},content:e.body.split("\n\n").map(e=>({type:"paragraph",content:[{type:"text",text:e}]}))}:null),w=d(b)>C,_=s(b)>Z;if(!b||!(w||_))return{bodyJson:b,truncatedBodyJson:b,isTruncated:!1,shouldExpandInline:!1};let k=b,x=!1,I=0;if(w){let e=function e(t){let{limit:i=420}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=null,a=0,o=!1;if(t){var d,s,u,v;if(i<=0)o=!0;else if(t.content&&t.content.length>0)for(let s of(l=(0,r._)((0,n._)({},t),{content:[]}),t.content)){let t=e(s,{limit:i-a});if(t.doc){if(null===(d=l.content)||void 0===d||d.push(t.doc),a+=t.length,t.isTruncated){o=!0;break}}else{o=!0;break}}else a+=null!==(v=null===(s=(l=(0,r._)((0,n._)({},t),{text:null!==(u=(0,c.truncateText)(t.text,i))&&void 0!==u?u:void 0})).text)||void 0===s?void 0:s.length)&&void 0!==v?v:0,t.text!==l.text&&(o=!0)}return{doc:l,length:a,isTruncated:o}}(k,{limit:f});k=e.doc,x=e.isTruncated,I=d(b)-d(k)}let T=!1,E=0;if(_&&k){let e=function e(t,i){var l;let o=[],d=!1,s=0;for(let n of null!==(l=t.content)&&void 0!==l?l:[]){if(n.type&&a.t.includes(n.type)){if(++s===i){d=!0,o.push(n);break}}else if(n.content){let t=e(n,i-s);if(s+=t.blockCount,t.isTruncated){o.push(t.doc),d=!0;break}}o.push(n)}let c=(0,r._)((0,n._)({},t),{content:o});return t.text&&(c.text=t.text.split(/\n/g).slice(0,i).join("\n")),{doc:c,blockCount:s,isTruncated:d}}(k,y);k=e.doc,T=e.isTruncated,E=s(b)-s(k)}return{bodyJson:b,truncatedBodyJson:k,isTruncated:x||T,shouldExpandInline:E<v[g?"mobile":"desktop"].TRUNCATED_LINES&&I<v[g?"mobile":"desktop"].TRUNCATED_CHARACTERS}}}}]);