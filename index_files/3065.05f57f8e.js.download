"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3065"],{86657:function(e,t,a){a.d(t,{Z:()=>S});var i=a(27412),s=a(7409),r=a(99282),n=a(16584),o=a(6400),l=a(94184),d=a.n(l),h=a(14293),p=a.n(h),c=a(36081),u=a(36813),y=a(36181),m=a(18389),g=a(97742),v=a(95441),b=a(30372),_=a(68833),T=a(55480),f=a(59176),k=a(98914),P=a(15771),M=a(24791),E=a(60308),Z=a(84864),N=a(47929);let w="AudioPlayer.playbackRate",C={utm_source:N.b3.twitter,utm_medium:N.lP.social,utm_campaign:N.VX.twitterEmbed};class D extends o.Component{shouldComponentUpdate(e){return this.props.currentPlaybackRate!==e.currentPlaybackRate||this.props.setPlaybackRate!==e.setPlaybackRate}render(){let{currentPlaybackRate:e,setPlaybackRate:t}=this.props;return(0,n.BX)("select",{className:"audio-player-playback-rate",dir:"rtl",onInput:e=>t(Number(e.target.value)),children:[(0,n.tZ)("option",{value:"1",selected:1===e,children:"1x"}),(0,n.tZ)("option",{value:"1.25",selected:1.25===e,children:"1.25x"}),(0,n.tZ)("option",{value:"1.5",selected:1.5===e,children:"1.5x"}),(0,n.tZ)("option",{value:"1.75",selected:1.75===e,children:"1.75x"}),(0,n.tZ)("option",{value:"2",selected:2===e,children:"2x"})]})}}class S extends o.Component{componentDidMount(){var e;null===k.sz||void 0===k.sz||k.sz.on("play",this._onGlobalPlay),document.body&&(document.body.addEventListener("mousemove",this._onMouseMove,!1),document.body.addEventListener("mouseup",this._onDragEnd,!1),document.body.addEventListener("touchmove",this._onTouchMove,{passive:!1}),document.body.addEventListener("touchend",this._onDragEnd,!1),document.body.addEventListener("touchcancel",this._onDragEnd,!1)),this.player&&(this.player.volume=1,this.player.playbackRate=this.state.playbackRate,this.player.addEventListener("canplay",this._onCanPlay),this.player.addEventListener("play",this._onPlay),this.player.addEventListener("pause",this._onPause),this.player.addEventListener("ended",this.onEnded),this.player.addEventListener("timeupdate",this._onTimeUpdate),this.player.addEventListener("ratechange",this._onRateChange),this.player.addEventListener("waiting",this._onWaiting),this.player.addEventListener("playing",this._onPlaying),this.player.addEventListener("seeked",this.onSeeked)),this.progressBar.current&&this.progressBar.current.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.onTimeUpdate();let t=null===(e=this.player)||void 0===e?void 0:e.duration;!this.props.onGetDuration||p()(t)||isNaN(Number(t))||this.props.onGetDuration(t),(0,k.pt)((0,E.zF4)("/img/audio-player-pause.png",96))}componentWillUnmount(){null===k.sz||void 0===k.sz||k.sz.off("play",this._onGlobalPlay),document.body&&(document.body.removeEventListener("mousemove",this._onMouseMove,!1),document.body.removeEventListener("mouseup",this._onDragEnd,!1),document.body.removeEventListener("touchmove",this._onTouchMove,!1),document.body.removeEventListener("touchend",this._onDragEnd,!1),document.body.removeEventListener("touchcancel",this._onDragEnd,!1)),this.player&&(this.player.removeEventListener("canplay",this._onCanPlay),this.player.removeEventListener("play",this._onPlay),this.player.removeEventListener("pause",this._onPause),this.player.removeEventListener("ended",this.onEnded),this.player.removeEventListener("timeupdate",this._onTimeUpdate),this.player.removeEventListener("ratechange",this._onRateChange),this.player.removeEventListener("waiting",this._onWaiting),this.player.removeEventListener("playing",this._onPlaying)),this.progressBar.current&&this.progressBar.current.removeEventListener("touchstart",this._onTouchStart)}componentDidUpdate(e,t){if(this.state.playing||"number"!=typeof this.state.waiting||"number"==typeof t.waiting||this.track(_.FP.AUDIO_BUFFERING_STARTED),!this.state.playing||t.playing||this.state.waiting||"number"!=typeof t.waiting||this.track(_.FP.AUDIO_BUFFERING_COMPLETED,{buffering_duration:Date.now()-t.waiting}),this.state.playing&&Math.floor(this.state.currentTime)!==Math.floor(t.currentTime)&&Math.floor(this.state.currentTime)%5==0){var a;if(this.trackMedia(_.FP.MEDIA_PLAYBACK_CONTINUED),(null===(a=this.props.metricsPost)||void 0===a?void 0:a.id)&&this.state.duration&&!this.props.feature){let e=Math.min(Math.max(0,this.state.currentTime/this.state.duration),1);(0,b.UO)(this.props.metricsPost.id,"audio",e)}}if(!this.state.playing&&t.playing&&this.player&&this.player.ended&&(this.props.onFinishAudio&&this.props.onFinishAudio(),this.trackMedia(_.FP.MEDIA_PLAYBACK_COMPLETED)),this.props.updateOnEveryFrame&&this.state.playing&&!t.playing){let e=()=>{this.onTimeUpdate(),this.loopId=requestAnimationFrame(e)};this.loopId=requestAnimationFrame(e)}this.props.updateOnEveryFrame&&!this.state.playing&&t.playing&&(p()(this.loopId)||cancelAnimationFrame(this.loopId)),this.progressBar.current&&(this.progressBar.current.removeEventListener("touchstart",this._onTouchStart),this.progressBar.current.addEventListener("touchstart",this._onTouchStart,{passive:!0}))}onCanPlay(){this.props.onGetDuration&&this.player&&this.props.onGetDuration(this.player.duration),this.onTimeUpdate()}onPlay(){null===k.sz||void 0===k.sz||k.sz.emit("play",this),this.setState({playing:!0}),this.trackMedia(_.FP.MEDIA_PLAYBACK_STARTED)}onPause(){var e;this.setState({playing:!1,waiting:!1}),(null===(e=this.player)||void 0===e?void 0:e.ended)||this.trackMedia(_.FP.MEDIA_PLAYBACK_PAUSED)}onTimeUpdate(){if(this.player&&isFinite(this.player.duration)){if(this.player.currentTime>this.player.duration){this.player.currentTime=this.player.duration;return}this.state.duration!==this.player.duration||this.state.currentTime!==this.player.currentTime?(this.setState({duration:this.player.duration||this.props.duration,currentTime:this.player.currentTime,waiting:!1}),this.props.onTimeUpdate&&this.props.onTimeUpdate({duration:Math.max(this.state.duration||0,this.player.duration||this.props.duration||0),currentTime:this.player.currentTime})):this.setState({waiting:!1})}}onRateChange(){this.player&&this.state.playbackRate!==this.player.playbackRate&&this.setState({playbackRate:this.player.playbackRate})}onWaiting(){this.setState({waiting:Date.now()})}onPlaying(){this.setState({playing:!0,waiting:!1})}onMouseDown(e){this.onDragStart(e.clientX)}onMouseMove(e){this.onDragMove(e.clientX)}onTouchStart(e){e.touches&&e.touches[0]&&this.onDragStart(e.touches[0].pageX)}onTouchMove(e){"number"==typeof this.state.dragTime&&e.preventDefault(),e.touches&&e.touches[0]&&this.onDragMove(e.touches[0].pageX)}onDragStart(e){"number"!=typeof this.state.dragTime&&this.setDragTime(e)}onDragMove(e){"number"==typeof this.state.dragTime&&this.setDragTime(e)}onDragEnd(){this.clearDragTime()}onGlobalPlay(e){if(this!==e&&this.player&&!this.player.paused){let t=e.player;t instanceof HTMLVideoElement&&t.muted||(this.track(_.FP.CLICKED_PAUSE_BUTTON,{implicit:!0,feature:this.props.feature}),this.player.pause())}}async togglePlayback(){let{iString:e}=this.context;if(this.player){if(this.player.paused){this.track(_.FP.CLICKED_PLAY_BUTTON,{feature:this.props.feature});try{await this.player.play()}catch(t){if("NotSupportedError"===t.name)alert(e("Failed to play this media: it may not be supported by this browser."));else throw t}}else this.track(_.FP.CLICKED_PAUSE_BUTTON,{feature:this.props.feature}),await this.player.pause()}}skipBack(){if(this.player){let e=Math.max(0,this.state.currentTime-15);this.player.currentTime=e}}skipForward(){if(this.player){var e;let t=Math.min(null!==(e=this.state.duration)&&void 0!==e?e:0,this.state.currentTime+30);this.player.currentTime=t}}setDragTime(e){if(!this.props.src||!this.state.duration||!this.player||!this.progressBar.current||!document.body||!document.body.getBoundingClientRect)return;let t=document.body.getBoundingClientRect(),a=this.progressBar.current.getBoundingClientRect(),i=a.left-t.left,s=a.right,r=(Math.max(i,Math.min(s,e))-i)/(s-i)*this.state.duration;this.isDragTimeCloseToCurrentTime(r)&&(r=this.state.currentTime),this.setState({dragTime:r})}clearDragTime(){if("number"!=typeof this.state.dragTime)return;let e=this.state.dragTime;this.isDragTimeCloseToCurrentTime(e)?this.setState({dragTime:null}):(this.setState({currentTime:e,dragTime:null,lastDragClearedAt:performance.now()}),this.player&&(this.player.currentTime=e))}isDragTimeCloseToCurrentTime(e){let t;return!this.props.preventSnappingToCurrentTime&&"number"==typeof this.state.currentTime&&(t=!p()(this.state.duration)&&this.state.duration<10?0:!p()(this.state.duration)&&this.state.duration<30?3:5,Math.abs(this.state.currentTime-e)<t)}track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.props.metricsPost;a&&(0,_.j)(e,Object.assign({post_id:a.id,publication_id:a.publication_id,is_podcast_free_preview:(0,M.dq)(a),current_time:this.state.currentTime?Math.floor(this.state.currentTime):0,duration:this.state.duration?Math.floor(this.state.duration):0,playback_rate:this.state.playbackRate},t))}trackMedia(e){var t,a,i,n,o;let{pub:l,mediaUpload:d,src:h,trackingProps:{feedItemTrackingParameters:p,surface:c,contentType:u,entityKey:y,entityType:m,primaryEntityKey:g,primaryEntityType:v}={}}=this.props;(0,_.j)(e,(0,r._)((0,s._)({},p),{media_type:"audio",video_upload_id:null!==(a=null==d?void 0:d.id)&&void 0!==a?a:"unknown",src_video_upload_id:null==d?void 0:d.src_media_upload_id,surface:c,content_type:u,primary_entity_key:String(null!==(i=null!=g?g:y)&&void 0!==i?i:"unknown"),primary_entity_type:null!=v?v:m,entity_key:String(y),entity_type:m,publication_id:null==l?void 0:l.id,display:"inline",muted:null===(t=this.player)||void 0===t?void 0:t.muted,captions_enabled:null,autoplay:!1,is_preview:!1,current_time:Math.floor(null!==(n=this.state.currentTime)&&void 0!==n?n:0),duration:Math.floor(null!==(o=this.state.duration)&&void 0!==o?o:0),src:h}))}render(e){let{addToPodcastLink:t,autoPlay:a,isFancy:i,isPaywalled:s,post:r,pub:o,render:l,showCTAs:d,skipPreloading:h,src:p}=e,{iString:c}=this.context;if(l){let{dragTime:e,duration:t,currentTime:i,playbackRate:r}=this.state,o="number"==typeof e?e:i;return(0,n.BX)(n.HY,{children:[l({isPaywalled:s,progress:t?("number"==typeof e?e:i)/t:0,currentTime:t?(0,Z.secondsToHHMMSS)(o):"--:--",dragTime:"number"==typeof e?(0,Z.secondsToHHMMSS)(e):null,duration:t,remainingTime:t?"-".concat((0,Z.secondsToHHMMSS)(t-Math.min(o,t))):"--:--",isPlaying:this.state.playing,playbackRate:r,progressBarOnMouseDown:e=>{this.onMouseDown(e)},progressBarRef:this.progressBar,setPlaybackRate:e=>{this.setPlaybackRate(e)},skipBack:()=>{this.skipBack()},skipForward:()=>{this.skipForward()},togglePlayback:()=>{this.togglePlayback()}}),p&&!s&&(0,n.tZ)("audio",{ref:this.assignPlayer,src:p,autoPlay:a,preload:h?"none":"auto",children:c("Audio playback is not supported on your browser. Please upgrade.")})]})}return i?this.renderFancy({src:p,autoPlay:a,pub:o,post:r,showCTAs:d}):this.renderOriginal({src:p,autoPlay:a,pub:o,addToPodcastLink:t})}renderFancy(e){var t,a;let{src:i,autoPlay:o,pub:l,post:d,showCTAs:h}=e,{iString:p}=this.context,c=(0,T.Tn)(l,d);return(0,n.tZ)(n.HY,{children:(0,n.tZ)("div",{className:"audio-player-wrapper-fancy",children:(0,n.BX)("div",{className:"audio-player",children:[(0,n.tZ)("div",{className:"audio-player-substack-logo audio-player-clickable",onClick:this.openEpisodePage,children:(0,n.tZ)(g.Z,{color:"#F8F8F8"})}),(0,n.tZ)("div",{className:"audio-player-hero-image-container audio-player-clickable",onClick:this.openEpisodePage,children:c&&(0,n.tZ)("img",{className:"audio-player-hero-image audio-player-clickable",src:(0,E.zF4)(c,500,{height:500,crop:"fill"}),onClick:this.openEpisodePage})}),(0,n.tZ)("div",{className:"audio-player-title audio-player-clickable",onClick:this.openEpisodePage,children:null!==(t=null==d?void 0:d.title)&&void 0!==t?t:""}),(0,n.tZ)("div",{className:"audio-player-subtitle audio-player-clickable",onClick:this.openEpisodePage,children:null!==(a=null==d?void 0:d.subtitle)&&void 0!==a?a:""}),i&&(0,n.tZ)("audio",{"data-testid":"audio-element",ref:this.assignPlayer,src:i,autoPlay:o,children:p("Audio playback is not supported on your browser. Please upgrade.")}),this.renderProgressFancy(this.props,this.state),this.renderButtonsFancy(this.props,this.state),h&&(0,n.BX)("div",{className:"btn-group",children:[(0,n.tZ)(P.zx,{priority:"secondary",newTab:!0,onClick:this.openEpisodePage,children:p("View post")}),(0,n.tZ)(P.zx,{priority:"primary",href:l?this.maybeAppendIframeVisitId((0,E.W1P)(l,(0,r._)((0,s._)({},C),{simple:!0,next:(0,E.uRy)(l,d)}))):void 0,newTab:!0,children:(0,Z.getSubscribeText)(l)})]})]})})})}renderOriginal(e){let{src:t,autoPlay:a,pub:i,addToPodcastLink:s}=e,{iString:r}=this.context;return(0,n.BX)("div",{className:"audio-player-wrapper",children:[(0,n.BX)("div",{className:"audio-player",children:[t&&(0,n.tZ)("audio",{ref:this.assignPlayer,src:t,autoPlay:a,children:r("Audio playback is not supported on your browser. Please upgrade.")}),this.renderButtons(this.props,this.state),this.renderProgress(this.props,this.state)]}),s&&i&&!i.hide_podcast_feed_link&&(0,n.tZ)("div",{className:"audio-player-add-to-podcast-link",children:(0,n.tZ)("a",{href:s,target:"_blank",rel:"noopener",children:r("Listen in podcast app")})})]})}renderButtonsFancy(e,t){let{playing:a,waiting:i}=t;return(0,n.BX)("div",{className:"audio-player-buttons",children:[(0,n.tZ)("button",{className:"audio-player-backward","aria-pressed":"false",onClick:()=>this.skipBack(),children:(0,n.tZ)(c.Z,{className:"skip-icon"})}),(0,n.tZ)("button",{className:d()("audio-player-play",{pause:"playing",waiting:i}),"aria-pressed":"false",onClick:()=>this.togglePlayback(),children:a?(0,n.tZ)(y.Z,{className:"playback-icon pause",fill:"#1C110B"}):(0,n.tZ)(m.Z,{className:"playback-icon play",fill:"#1C110B"})}),(0,n.tZ)("button",{className:"audio-player-forward","aria-pressed":"false",onClick:()=>this.skipForward(),children:(0,n.tZ)(u.Z,{className:"skip-icon"})})]})}renderButtons(e,t){let{src:a,href:i,isStatic:s}=e,{playing:r,waiting:o,playbackRate:l}=t;return(0,n.BX)("div",{className:"audio-player-buttons",children:[(0,n.tZ)("table",{className:"custom",children:(0,n.BX)("tr",{children:[(0,n.tZ)("td",{className:"audio-player-buttons-spacing",children:"\xa0"}),(0,n.tZ)("td",{className:"audio-player-backward",children:(0,n.tZ)("a",{role:"button",className:"button",tabIndex:0,"aria-pressed":"false",href:i||"javascript:void(0)",onClick:()=>this.skipBack(),children:(0,n.tZ)(c.Z,{className:"skip-icon",fill:"#3c3c3c",height:30,isStatic:s})})}),(0,n.tZ)("td",{className:"audio-player-play ".concat(r?"pause":""," ").concat(o?"waiting":""),children:(0,n.tZ)("a",{className:"button",role:"button",tabIndex:0,"aria-pressed":"false",href:i||"javascript:void(0)",onClick:()=>this.togglePlayback(),children:(0,n.tZ)("img",{src:(0,E.zF4)(r?"/img/audio-player-pause.png":"/img/audio-player-play.png",96)})})}),(0,n.tZ)("td",{className:"audio-player-forward",children:(0,n.tZ)("a",{role:"button",className:"button",tabIndex:0,"aria-pressed":"false",href:i||"javascript:void(0)",onClick:()=>this.skipForward(),children:(0,n.tZ)(u.Z,{className:"skip-icon",fill:"#3c3c3c",height:30,isStatic:s})})}),(0,n.tZ)("td",{className:"audio-player-buttons-spacing",children:"\xa0"})]})}),a&&(0,n.tZ)(D,{currentPlaybackRate:l,setPlaybackRate:this.setPlaybackRate})]})}renderProgress(e,t){let{duration:a,currentTime:i,dragTime:s}=t;return(0,n.tZ)("div",{className:"audio-player-progress",children:(0,n.tZ)("table",{className:"custom",children:(0,n.BX)("tr",{children:[(0,n.tZ)("td",{className:"audio-player-progress-past",children:a?(0,Z.secondsToHHMMSS)(i):"--:--"}),(0,n.BX)("td",{ref:this.progressBar,className:"audio-player-progress-bar",onMouseDown:e=>this.onMouseDown(e),children:[(0,n.tZ)("div",{className:"audio-player-progress-bar-track"}),(0,n.tZ)("div",{className:"audio-player-progress-bar-filled",style:"width:".concat(a?100*("number"==typeof s?s:i)/a:0,"%")}),(0,n.tZ)("div",{className:"audio-player-progress-bar-current",style:"left:".concat(a?100*i/a:0,"%")}),(0,n.tZ)("div",{className:"audio-player-progress-bar-button",style:"left:".concat(a?100*("number"==typeof s?s:i)/a:0,"%")}),"number"==typeof s&&(0,n.tZ)("div",{className:"audio-player-progress-bar-popup",style:"left:".concat(a?100*s/a:0,"%"),children:(0,Z.secondsToHHMMSS)(s)})]}),(0,n.tZ)("td",{className:"audio-player-progress-left",children:a?"-".concat((0,Z.secondsToHHMMSS)(a-Math.min(i,a))):"--:--"})]})})})}renderProgressFancy(e,t){let{duration:a,currentTime:i,dragTime:s,lastDragClearedAt:r}=t,o="number"==typeof s,l=!!r&&performance.now()-r<50;return(0,n.BX)(n.HY,{children:[(0,n.tZ)("div",{className:"audio-player-progress",children:(0,n.BX)("div",{ref:this.progressBar,className:"audio-player-progress-bar",onMouseDown:e=>this.onMouseDown(e),children:[(0,n.tZ)("div",{className:"audio-player-progress-bar-track"}),(0,n.tZ)("div",{className:"audio-player-progress-bar-filled",style:{width:"".concat(a?100*(o?s:i)/a:0,"%")}}),(0,n.tZ)("div",{className:d()("audio-player-progress-bar-current",{"audio-player-progress-bar-current-placeholder":o,"audio-player-progress-bar-current-disable-animations":l}),style:"left:".concat(a?100*i/a:0,"%")}),o&&(0,n.tZ)("div",{className:"audio-player-progress-bar-current audio-player-progress-bar-current-dragging",style:"left:".concat(a?100*s/a:0,"%")}),o&&(0,n.tZ)("div",{className:"audio-player-progress-bar-popup",style:"left:".concat(a?100*s/a:0,"%"),children:(0,Z.secondsToHHMMSS)(s)})]})}),(0,n.BX)("div",{className:"audio-player-time-wrapper",children:[(0,n.tZ)("div",{className:"audio-player-progress-past",children:a?(0,Z.secondsToHHMMSS)(i):"--:--"}),(0,n.tZ)("div",{className:"audio-player-progress-left",children:a?"-".concat((0,Z.secondsToHHMMSS)(a-Math.min(i,a))):"--:--"})]})]})}constructor(e,t){super(e,t),(0,i._)(this,"player",void 0),(0,i._)(this,"progressBar",(0,o.createRef)()),(0,i._)(this,"loopId",void 0),(0,i._)(this,"isShowingCaptionsElsewhere",!1),(0,i._)(this,"_onGlobalPlay",void 0),(0,i._)(this,"_onMouseMove",void 0),(0,i._)(this,"_onTouchStart",void 0),(0,i._)(this,"_onTouchMove",void 0),(0,i._)(this,"_onDragEnd",void 0),(0,i._)(this,"_onCanPlay",void 0),(0,i._)(this,"_onPlay",void 0),(0,i._)(this,"_onPause",void 0),(0,i._)(this,"_onTimeUpdate",void 0),(0,i._)(this,"_onRateChange",void 0),(0,i._)(this,"_onWaiting",void 0),(0,i._)(this,"_onPlaying",void 0),(0,i._)(this,"assignPlayer",e=>{this.player=e}),(0,i._)(this,"onEnded",()=>{this.setState({playing:!1,waiting:!1}),this.trackMedia(_.FP.MEDIA_PLAYBACK_PAUSED)}),(0,i._)(this,"onSeeked",()=>{this.trackMedia(_.FP.MEDIA_SEEKED)}),(0,i._)(this,"setPlaybackRate",e=>{this.state.playbackRate!==e&&(this.player&&(this.player.playbackRate=e),this.setState({playbackRate:e}),(0,f.ex)(w,e))}),(0,i._)(this,"maybeAppendIframeVisitId",e=>{let t=(0,_.A)(),a=t?t.id:null;return a&&(e=(0,E.rhs)(e,{src_iid:a})),e}),(0,i._)(this,"openEpisodePage",()=>{if(!this.props.post)return;let e=this.props.post.canonical_url;e=this.maybeAppendIframeVisitId(e),e=(0,E.rhs)(e,C),(0,k.uX)(e,{newTab:!0})}),this._onGlobalPlay=this.onGlobalPlay.bind(this),this._onMouseMove=this.onMouseMove.bind(this),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onDragEnd=this.onDragEnd.bind(this),this._onCanPlay=this.onCanPlay.bind(this),this._onPlay=this.onPlay.bind(this),this._onPause=this.onPause.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onRateChange=this.onRateChange.bind(this),this._onWaiting=this.onWaiting.bind(this),this._onPlaying=this.onPlaying.bind(this),this.state={playbackRate:e.playbackRate||(0,f.mM)(w,1),currentTime:0,waiting:!0,duration:e.duration||void 0,lastDragClearedAt:null}}}(0,i._)(S,"contextType",v.wj)},40225:function(e,t,a){a.d(t,{M:()=>v});var i=a(7409),s=a(99282),r=a(98848),n=a(16584),o=a(98661),l=a(94184),d=a.n(l),h=a(24840),p=a(71375),c=a(95441),u=a(15771),y=a(19081),m=a(51776),g=a(36827);let v=(0,o.forwardRef)((e,t)=>{var a,{className:l,error:v=!1,placeholder:b="Search...",showIcon:_=!0,showClear:T=!0,flex:f="auto",onChange:k}=e,P=(0,r._)(e,["className","error","placeholder","showIcon","showClear","flex","onChange"]);let{iString:M}=(0,c.M1)(),[E,Z]=(0,o.useState)(null!==(a=P.defaultValue)&&void 0!==a?a:"");return(0,n.tZ)(y.tu,{position:"relative",flex:f,children:(0,n.tZ)(m.oi,(0,s._)((0,i._)({},P),{leading:_?(0,n.tZ)(h.Z,{size:16}):null,trailing:T&&E?(0,n.tZ)(u.hU,{size:"xs",onClick:()=>{Z(""),k&&k("")},"aria-label":M("Clear"),priority:"quaternary",children:(0,n.tZ)(p.Z,{size:16})}):null,className:d()(l,g.Z.searchInput),error:v,disabled:P.disabled,placeholder:b,value:E,ref:t,flex:f,type:"search",onInput:e=>{let t=e.currentTarget.value;Z(t),k&&k(t.trim())}}))})})}}]);