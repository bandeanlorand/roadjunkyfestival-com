"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["4870"],{63018:function(e,t,r){r.d(t,{OV:()=>d,_I:()=>o,kp:()=>i.kp});var n=r(7409),a=r(98848),l=r(69241),i=r(48980);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;var{deps:o,auto:d=!0,massage:s=async e=>e,shouldRevalidate:c=!0}=t,u=(0,a._)(t,["deps","auto","massage","shouldRevalidate"]);return(0,l.ZP)(d?o?[...o,e]:e:null,()=>(0,i.rd)(e,u).then(s),(0,n._)({},c?null:{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1},r))}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var{deps:r}=t,n=(0,a._)(t,["deps"]);(0,l.MA)(r?[...r,e]:e,()=>(0,i.rd)(e,n))}},44424:function(e,t,r){if(r.d(t,{$j:()=>$,LF:()=>H,LY:()=>M,Mz:()=>I,dW:()=>E,ep:()=>N,sN:()=>X,v2:()=>k,xw:()=>z,yU:()=>Y}),!/^(1588|1691|4457)$/.test(r.j))var n=r(7409);if(!/^(1588|1691|4457)$/.test(r.j))var a=r(99282);if(!/^(1588|1691|4457)$/.test(r.j))var l=r(98848);var i=r(16584);if(!/^(1588|1691|4457)$/.test(r.j))var o=r(19425);var d=r(94184),s=r.n(d);if(!/^(1588|1691|2536|4457)$/.test(r.j))var c=r(2564);if(4716==r.j)var u=r(25380);var h=r(98661);if(!/^(1588|1691|2536|4457)$/.test(r.j))var p=r(62372);var f=r(60684),m=r(71068),v=r(15771),Z=r(61254),g=r(19081),_=r(10903),b=r(47295),w=r(50368),y=r(4615),C=r(58175),S=r(91400),j=r(42450);let k=/^(1588|1691|4457)$/.test(r.j)?null:(0,h.forwardRef)((e,t)=>{var{trigger:r,children:d,ariaLabel:s="View more",hideOnScroll:c,layerOptions:u,layerClassName:p,onOpen:m,onClose:v,useMobileBottomSheet:Z=!0,stopPropagation:g=!1,padding:b=4,disableMenu:y=!1,title:C,Theme:k,customShowClass:X,customHideClass:$}=e,O=(0,l._)(e,["trigger","children","ariaLabel","hideOnScroll","layerOptions","layerClassName","onOpen","onClose","useMobileBottomSheet","stopPropagation","padding","disableMenu","title","Theme","customShowClass","customHideClass"]);"function"!=typeof r&&"string"!=typeof r.type&&r.type.$$typeof!==Symbol.for("react.forward_ref")&&console.error("Menu trigger must be a valid component that forwards a ref that react-laag uses, or a native dom element. See Button/IconButton for example, and preferably use those.");let I=(0,S.XA)(),{triggerProps:M,layerProps:z,renderLayer:T,isOpen:P,setOpen:Y}=(0,_.x)({layerOptions:(0,n._)({auto:!0,possiblePlacements:["bottom-start","bottom-center","bottom-end","top-start","top-center","top-end"],preferY:"bottom"},u),hideOnScroll:c&&!(Z&&I),onClose:v}),[E,H]=(0,h.useState)(!1),R=()=>{Y(!1),v&&v()},L=h.Children.map(d,e=>(0,h.cloneElement)(e,{useMobileBottomSheet:Z,closeMenu:R})),A=(0,h.useMemo)(()=>({useMobileBottomSheet:Z,close:R}),[v,Z]),V=(0,a._)((0,n._)({},M),{ariaLabel:s,onClick:e=>{e.preventDefault(),g&&e.stopPropagation(),y||Y(!P),P?null==v||v():null==m||m()}});return(0,i.BX)(w.p.Provider,{value:A,children:["function"==typeof r?r(V):(0,h.cloneElement)(r,V),(P||E)&&T(Z&&I?(0,i.tZ)(o.u,{appear:!0,show:P,beforeEnter:()=>H(!0),afterLeave:()=>H(!1),className:j.Z.actionSheetTransition,enterFrom:j.Z.actionSheetHide,enterTo:j.Z.actionSheetShow,leaveFrom:j.Z.actionSheetShow,leaveTo:j.Z.actionSheetHide,children:(0,i.tZ)(F,{Theme:k,children:(0,i.tZ)("div",(0,a._)((0,n._)({},z,O),{children:(0,i.tZ)(f.V,{title:C,onClose:R,ref:t,className:p,children:L})}))})}):(0,i.tZ)(B,{isOpen:P,setAnimating:H,children:(0,i.tZ)(F,{Theme:k,children:(0,i.tZ)("div",(0,a._)((0,n._)({},z,O),{children:(0,i.tZ)(x,{isOpen:P,customHideClass:$,customShowClass:X,children:(0,i.tZ)(N,(0,a._)((0,n._)({className:p,ref:t,padding:b},!c&&{style:{overflowY:"auto"}}),{children:L}))})}))})}))]})});function x(e){let{isOpen:t,customHideClass:r,customShowClass:n,children:a}=e;return(0,i.tZ)(o.u,{appear:!0,unmount:!1,show:t,className:j.Z.transition,enterFrom:null!=r?r:j.Z.hide,enterTo:null!=n?n:j.Z.show,leaveFrom:null!=n?n:j.Z.show,leaveTo:null!=r?r:j.Z.hide,children:a})}function B(e){let{children:t,isOpen:r,setAnimating:n}=e;return(0,i.tZ)(o.u,{appear:!0,unmount:!1,show:r,beforeEnter:()=>n(!0),afterLeave:()=>n(!1),className:j.Z.transition,children:t})}let N=/^(1588|1691|4457)$/.test(r.j)?null:(0,h.forwardRef)((e,t)=>{var{className:r,padding:a=4}=e,o=(0,l._)(e,["className","padding"]);return(0,i.tZ)(y.Sf,{children:(0,i.tZ)(g.tu,(0,n._)({className:s()(j.Z.menu,"elevated",r),bg:"elevated",shadow:"md",border:"detail",radius:"sm",sizing:"border-box",showFocus:!0,gap:2,padding:a,ref:t},o))})}),X=/^(1588|1691|4457)$/.test(r.j)?null:(0,h.forwardRef)((e,t)=>{var r;return(0,i.tZ)(O,(0,a._)((0,n._)({},e),{className:s()(j.Z.menuItem,j.Z["priority_".concat(null!==(r=e.priority)&&void 0!==r?r:"primary")],e.className,{[j.Z.disabled]:!!e.disabled,[j.Z.relative]:!!e.hiddenInput}),children:e.children,ref:t}))}),$=(0,m.zo)({width:16,height:16}),O=/^(1588|1691|4457)$/.test(r.j)?null:(0,h.forwardRef)((e,t)=>{var{children:r,onClick:o,closeMenu:d,leading:s,trailing:c,priority:u="primary",className:p,disabled:f,href:m,download:Z,hiddenInput:g}=e,_=(0,l._)(e,["children","onClick","closeMenu","leading","trailing","priority","className","disabled","href","download","hiddenInput"]);let y=m?"a":v.kG,{close:C}=(0,w.X)();return(0,i.BX)(y,(0,a._)((0,n._)({className:p,resetCss:!0,onClick:e=>{!f&&(o&&o(e),!e.defaultPrevented&&(C?C():d&&d()))},href:f?"javascript:void(0)":m,download:Z,ref:t},_),{children:[s&&(0,i.tZ)(I,{children:(0,h.cloneElement)(s,{size:16})}),(0,i.tZ)(T,{priority:u,children:r}),c&&(0,i.tZ)(I,{children:(0,h.cloneElement)(c,{size:16})}),g&&(0,i.tZ)(b.U,{children:g})]}))}),I=(0,m.zo)({display:"flex",flex:"auto",width:24,height:24,alignItems:"center",justifyContent:"center"});function M(e){let{content:t,children:r,leading:l,trailing:o=(0,i.tZ)(c.Z,{size:20}),priority:d="primary"}=e,[s,u,h]=(0,p.XI)(),{triggerProps:f,layerProps:v,renderLayer:Z}=(0,p.sJ)({isOpen:s,onParentClose:h,auto:!0,snap:!0,placement:"right-start",possiblePlacements:["left-start","right-start","left-end","right-end"],triggerOffset:0});return(0,i.BX)(i.HY,{children:[(0,i.tZ)(X,(0,a._)((0,n._)({},u,f),{onClick:e=>{e.preventDefault()},leading:l,trailing:o,priority:d,children:t})),s&&Z((0,i.tZ)(m.xu,(0,a._)((0,n._)({"data-submenu-root":!0},v,u),{children:(0,i.tZ)(N,{className:j.Z.submenu,padding:4,bg:"elevated",children:r})})))]})}function z(e){let{title:t,children:r,isFirst:n=!1}=e;return(0,i.BX)(g.tu,{gap:2,children:[!n&&(0,i.tZ)(Z.iz,{paddingY:4,pullX:4}),t&&(0,i.tZ)(P,{children:t}),r]})}function T(e){let{priority:t,children:r}=e;return(0,i.tZ)(C.xv.B4,{color:"destructive"===t?"accent-red":"accent"===t?"pub-accent":t,weight:"medium",align:"left",flex:"grow",children:r})}function P(e){let{children:t}=e;return(0,i.tZ)(C.xv.B5,{transform:"uppercase",color:"secondary",weight:"regular",paddingX:4,paddingTop:4,children:t})}function Y(e){let{children:t}=e;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(g.tu,{paddingY:4,paddingX:8,children:(0,i.tZ)(C.xv.B4,{color:"secondary",children:t})}),(0,i.tZ)(Z.iz,{pullX:8})]})}function E(e){let{children:t}=e;return(0,i.tZ)(z,{children:(0,i.tZ)(g.tu,{paddingY:4,paddingX:8,children:(0,i.tZ)(C.xv.B5,{color:"secondary",children:t})})})}function F(e){let{Theme:t,children:r}=e;return t?(0,i.tZ)(t,{children:r}):r}function H(e){let{children:t,subtitle:r,onClick:n,onMouseEnter:a,closeMenu:l,leading:o,trailing:d,href:s,target:c,className:h,disabled:p=!1,selected:f=!1,native:m=!1,rel:v,download:Z,hiddenInput:_,ref:b,useMobileBottomSheet:w}=e;return(0,i.tZ)(X,{onClick:n,onMouseEnter:a,closeMenu:l,leading:o,trailing:f?(0,i.tZ)(u.Z,{}):d,href:s,target:c,className:h,disabled:p,native:m,rel:v,download:Z,hiddenInput:_,ref:b,useMobileBottomSheet:w,children:(0,i.BX)(g.sg,{alignItems:"start",children:[(0,i.tZ)(C.xv,{weight:"bold",color:"primary",children:t}),(0,i.tZ)(C.xv.B4,{color:"secondary",children:r})]})})}},20521:function(e,t,r){r.d(t,{k:()=>i,x:()=>l});var n=r(98012);function a(e){var t;let r=[e.is_primary,(null===(t=e.publication)||void 0===t?void 0:t.author_id)===e.user_id,"admin"===e.role,"contributor"===e.role].map(e=>e?"0":"1").join("");return"".concat(r,"-").concat((0,n.Z)(e.created_at).valueOf())}function l(e){return e.slice(0).sort((e,t)=>a(e)>a(t)?1:-1)}function i(e){let{ineligibilityReasons:t,isSelfOrGlobalAdmin:r}=e,n=!0;for(let e of t)switch(e){case"not_member_of_pub":return!1;case"not_primary_pub":case"primary_user_of_other_pub":n=n&&r}return n}}}]);