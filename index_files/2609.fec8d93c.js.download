"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2609"],{45537:function(e,t,n){n.d(t,{Z:()=>i});let i={webContainer:"webContainer-IIk356",container:"container-hh54mh",emailWrapper:"emailWrapper-NhzydE",text:"text-Fj8WVT",title:"title-RBoKZn",button:"button-hAEuwt"}},18427:function(e,t,n){n.d(t,{Z:()=>i});let i={container:"container-sfnj9V",emailWrapper:"emailWrapper-qwz6NP"}},81567:function(e,t,n){n.d(t,{Z:()=>i});let i={imageGallery:"imageGallery-npMLlr",static:"static-he6Urp",canEdit:"canEdit-MxZtx8",editGalleryWrap:"editGalleryWrap-GFPuXa",editGallery:"editGallery-Z5jDW6",imageCaption:"imageCaption-iHC8xR",image:"image-IE_pDY",zoom:"zoom-YdDT6p",imageRow:"imageRow-_Y6x8T","length-2":"length-2-inHdHY",length2:"length-2-inHdHY",inbox:"inbox-uLXwi5",imageGalleryWrap:"imageGalleryWrap-ICPFaM",imageWrap:"imageWrap-egM10V",small:"small-AA4Dt8",medium:"medium-ZeIdEU"}},60520:function(e,t,n){n.d(t,{Z:()=>i});let i={latexWrapper:"latexWrapper-xXiahu",latexEdit:"latexEdit-CT7sNA",emptyStateWrapper:"emptyStateWrapper-SwgxAc"}},71075:function(e,t,n){n.d(t,{Z:()=>i});let i={digestPostEmbed:"digestPostEmbed-flwiST",menu:"menu-juA09f",caption:"caption-QiPycG",captionEditor:"captionEditor-bK4vPR",smSquare:"smSquare-NGbPBa",mdSquare:"mdSquare-pPKPYa",fullWidth:"fullWidth-Ta6aEE",inheritColor:"inheritColor-WetTGJ",link:"link-HREYZo",disableLink:"disableLink-tkz2Oq"}},57747:function(e,t,n){n.d(t,{Z:()=>i});let i={mediaNodeView:"mediaNodeView-e5SnLi","align-left":"align-left-zBTRM0",alignLeft:"align-left-zBTRM0","align-center":"align-center-GLlHHY",alignCenter:"align-center-GLlHHY","align-right":"align-right-b0iEsr",alignRight:"align-right-b0iEsr",staticView:"staticView-rMg88c",staticImageWrap:"staticImageWrap-zeAxjE",left:"left-Pmbfny",right:"right-jUl_lm",imageContainer:"imageContainer-BFwwV8",large:"large-zd0XRW",full:"full-B7kzBg",caption:"caption-hKmpHN",placeholder:"placeholder-HWtRBz",static:"static-oTq1ez",inlineCaptionEditor:"inlineCaptionEditor-kbzlrs",horizontalResizeHandle:"horizontalResizeHandle-nC_iub",mediaControlButtons:"mediaControlButtons-lqBkgd",active:"active-jfe8JH",mediaControlTextEditor:"mediaControlTextEditor-oFhu3a",hasCaption:"hasCaption-A8cBUm",zoom:"zoom-zeAR_Z",pointer:"pointer-Hr6Xl2"}},24718:function(e,t,n){n.d(t,{Z:()=>i});let i={presentedBy:"presentedBy-B4Sz3Y",image:"image-JHUk8w",emailWrapper:"emailWrapper-LqRu0S",presentedByEmail:"presentedByEmail-OfmHXh",editorBorder:"editorBorder-I0g0rz",editorHelperText:"editorHelperText-PWUmEI"}},54991:function(e,t,n){n.d(t,{Z:()=>i});let i={avatar:"avatar-LanjdX",badge:"badge-Uvjr_O",container:"container-t1XakO",header:"header-MPtCPc",emailButton:"emailButton-TJW1DY",cta:"cta-htyRl8"}},12517:function(e,t,n){n.d(t,{Z:()=>i});let i={container:"container-ODcHQE",containerMultiply:"containerMultiply-l6GUkC",containerAnimated:"containerAnimated-jVAZvQ","silhouette-scroll":"silhouette-scroll-zaCEVB",silhouetteScroll:"silhouette-scroll-zaCEVB"}},19925:function(e,t,n){n.d(t,{A:()=>a});var i=n(16584),r=n(55679),o=n(62049);let a=e=>{let{node:t}=e,{attrs:n}=t;return(0,i.tZ)(r.T5,{children:(0,i.tZ)(o.V,{postId:n.postId})})}},52244:function(e,t,n){n.d(t,{v:()=>h});var i=n(16584),r=n(55679),o=n(19242),a=n(70843),l=n(95441),d=n(19081),s=n(58175),c=n(87077);let u="icon-goBaOg",h=e=>{let{}=e,{iString:t}=(0,l.M1)(),n=t("This may be a temporary error, please refresh the page to try again.");return(0,i.tZ)(r.T5,{children:(0,i.BX)(d.tu,{alignItems:"center",justifyContent:"center",className:"container-njkc6x",children:[(0,i.tZ)(o.Z,{className:u}),(0,i.BX)(d.gq,{alignItems:"center",gap:4,children:[(0,i.tZ)(s.xv.Meta,{translated:!0,color:"pub-accent",children:"Image not found"}),(0,i.tZ)(c.u,{text:n,children:(0,i.tZ)(a.Z,{size:12,className:u})})]})]})})}},81138:function(e,t,n){n.d(t,{t:()=>a});var i=n(16584),r=n(55679),o=n(22582);let a=e=>{let{node:t,editor:n}=e;return(0,i.tZ)(r.T5,{className:"image-gallery-embed","data-drag-handle":"",children:(0,i.tZ)(o.hJ,{node:t,editor:n})})}},2563:function(e,t,n){n.r(t),n.d(t,{ImageViewerContents:()=>C,ImageViewerModal:()=>f});var i=n(16584),r=n(30396),o=n(94184),a=n.n(o),l=n(2564),d=n(56743),s=n(71375),c=n(71212);n(98661);var u=n(98914),h=n(15771),p=n(19081),g=n(6490),m=n(98248),v=n(60308);let A={chrome:"chrome-_LLvs8",inactive:"inactive-_Lk_xA",modalImageButtonContainer:"modalImageButtonContainer-gaFoGh",modalImageSidebar:"modalImageSidebar-WtdDRF",imgContainer:"imgContainer-_cFpip",img:"img-nwpk1x",isLoading:"isLoading-siuKfF"};function f(e){let{showModal:t,modalContent:n,onClose:r,step:o,includeDownloadButton:a=!0}=e;return(0,i.tZ)(g.u_,{isOpen:t,onClose:r,position:"full",children:(0,i.tZ)(C,{modalContent:n,onClose:r,stepDefault:o,includeDownloadButton:a})})}function C(e){let{modalContent:t=[],onClose:n,stepDefault:o,includeDownloadButton:h}=e,[p,g]=(0,r.eJ)(o),[f,C]=(0,r.eJ)(!0),b=(0,u.K1)(),k=e=>{e.currentTarget===e.target&&n()},[Z,y]=(0,r.eJ)(!1);(0,r.d4)(()=>{if(!b){let e;let t=e=>{let{key:t}=e;["ArrowRight","ArrowDown"].includes(t)?(B(),e.stopPropagation()):["ArrowLeft","ArrowUp"].includes(t)&&(E(),e.stopPropagation())},n=n=>{(null==n?void 0:n.type)==="keydown"&&t(n),clearTimeout(e),y(!1),e=setTimeout(()=>{y(!0)},2e3)};return window.addEventListener("pointermove",n,{capture:!0,passive:!0}),window.addEventListener("pointerdown",n,{capture:!0,passive:!0}),window.addEventListener("keydown",n,{capture:!0,passive:!0}),n(),()=>{clearTimeout(e),window.removeEventListener("pointermove",n,{capture:!0}),window.removeEventListener("pointerdown",n,{capture:!0}),window.removeEventListener("keydown",n,{capture:!0})}}},[b,p]);let E=()=>{0!==p&&(g(p-1),C(!0))},B=()=>{p!==t.length-1&&(g(p+1),C(!0))},{attrs:{src:I,alt:T,title:x}}=t[p];(0,r.d4)(()=>{if(!f){var e;let n=null===(e=t[p+1])||void 0===e?void 0:e.attrs.src;n&&(new Image().src=(0,v.zF4)(n,void 0,{quality:"auto:good"}))}},[p,f]);let S=b?8:16;return(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{className:a()(A.chrome,Z&&A.inactive),children:[p<t.length-1&&(0,i.tZ)(w,{buttonFunction:B,style:{right:0,padding:S},isSidebar:!0,icon:(0,i.tZ)(l.Z,{size:20,strokeWidth:2})}),p>0&&(0,i.tZ)(w,{buttonFunction:E,style:{left:0,padding:S},isSidebar:!0,icon:(0,i.tZ)(d.Z,{size:20,strokeWidth:2})}),(0,i.tZ)(w,{buttonFunction:n,style:{position:"absolute",right:S,top:S},isSidebar:!1,icon:(0,i.tZ)(s.Z,{size:20})}),h&&(0,i.tZ)(w,{buttonFunction:e=>{e.stopPropagation(),function(e,t){let n=document.createElement("a");document.body.appendChild(n),n.href=t,n.target="_blank",n.click(),document.body.removeChild(n)}(0,I)},style:{position:"absolute",left:S,top:S},isSidebar:!1,icon:(0,i.tZ)(c.Z,{size:20})})]}),(0,i.tZ)("div",{className:A.imgContainer,onClick:k,children:(0,i.tZ)("img",{className:a()(A.img,f&&A.isLoading),onLoad:()=>{C(!1)},alt:null!=T?T:void 0,title:null!=x?x:void 0,src:(0,v.zF4)(I,void 0,{quality:"auto:good"}),onClick:k},I)}),f&&(0,i.tZ)("div",{style:{position:"absolute",top:"50%",left:"50%"},children:(0,i.tZ)(m.$j,{})})]})}function w(e){let{buttonFunction:t,style:n,isSidebar:r,icon:o,tetherRef:l}=e;return(0,i.tZ)(p.hs,{className:a()(A.modalImageButtonContainer,r?A.modalImageSidebar:null),style:n,alignItems:"center",justifyContent:"center",onClick:t,ref:l,children:(0,i.tZ)(h.GI,{priority:"secondary",rounded:!0,children:o})})}},17117:function(e,t,n){n.d(t,{Z:()=>u});var i=n(16584),r=n(30396),o=n(94184),a=n.n(o),l=n(80569),d=n.n(l),s=n(60308);let c=e=>parseFloat(e).toFixed(2),u=e=>{let{symbol:t,prependSymbol:n=!1,isStatic:o=!1}=e,l="/api/v1/price/".concat(t),[u,h]=(0,r.eJ)(null),[p,g]=(0,r.eJ)(null),[m,v]=(0,r.eJ)(!1);return((0,r.d4)(()=>{(async()=>{try{let e=await d().get(l);if(e.body){if("not_found"===e.body.status){v(!0);return}h(e.body.price),g(e.body.change_pct)}}catch(e){v(!0)}})()},[l]),!n&&t.startsWith("$")&&(t=t.slice(1)),o)?(0,i.tZ)("span",{children:(0,i.BX)("a",{"data-component-name":"CashtagStatic",href:"".concat((0,s.eSs)(t)),children:[t," "]})}):m?(0,i.BX)("span",{children:[t," "]}):(0,i.BX)("a",{className:a()("cashtag",{neutral:0==p,positive:p&&parseFloat(p)>0,negative:p&&0>parseFloat(p)}),target:"_blank",rel:"noopener",href:"".concat((0,s.eSs)(t)),"data-attrs":JSON.stringify({symbol:t}),"data-component-name":"Cashtag",children:["".concat(t.toUpperCase()," "),(0,i.tZ)("span",{children:(0,i.tZ)("span",{children:(0,i.BX)("span",{className:a()("delta"),children:["".concat(c(p||0),"%"),!p||parseFloat(p)>0?String.fromCharCode(8593):String.fromCharCode(8595)]})})})]})}},74204:function(e,t,n){n.d(t,{$:()=>a});var i=n(16584),r=n(55679),o=n(16564);let a=e=>{let{node:t}=e;return(0,i.tZ)(r.T5,{children:(0,i.tZ)(o.cM,{label:t.attrs.label,src:"/api/v1/audio/upload/".concat(t.attrs.mediaUploadId,"/src"),duration:t.attrs.duration})})}},19691:function(e,t,n){n.d(t,{Z:()=>m});var i=n(7409),r=n(99282),o=n(16584),a=n(30396),l=n(91036),d=n.n(l),s=n(42123),c=n(347),u=n(15771),h=n(19081),p=n(64300),g=n(71075);let m=e=>{let{initialCaption:t,onSave:n,onCancel:l}=e,m=t.replace(/<br\s*\/?>/gi,"\n"),[v,A]=(0,a.eJ)(m);return(0,o.tZ)(c.h,{children:(0,o.BX)(h.tu,{flex:"grow",gap:8,children:[(0,o.tZ)(p.g,(0,r._)((0,i._)({},s.H),{className:g.Z.captionEditor,maxLength:5e3,name:"description",placeholder:"Enter a caption...",rows:6,value:v,onChange:e=>{A(e.target.value)}})),(0,o.BX)(h.hs,{gap:8,justifyContent:"end",paddingY:8,children:[(0,o.tZ)(u.zx,{priority:"secondary",onClick:l,children:"Cancel"}),(0,o.tZ)(u.zx,{priority:"primary",onClick:()=>{let e=v.replace(/\n/g,"<br>");n(d()(e,(0,r._)((0,i._)({},d().defaults),{allowedTags:["br"]})))},children:"Save"})]})]})})}},89198:function(e,t,n){n.d(t,{X:()=>d});var i=n(7409),r=n(99282),o=n(16584),a=n(55679),l=n(17218);let d=e=>{let{node:t,editor:n,deleteNode:d,updateAttributes:s,getPos:c}=e,u=t.attrs,h=(0,r._)((0,i._)({},u),{isEditor:!!n});return(0,o.tZ)(a.T5,{className:"digestPostEmbed","data-drag-handle":"",children:(0,o.tZ)(l.F,(0,r._)((0,i._)({},h),{isEditor:!0,editor:n,updateAttributes:s,deleteNode:d,getPos:c}))})}},17218:function(e,t,n){n.d(t,{F:()=>F});var i=n(7409),r=n(99282),o=n(16584),a=n(30396),l=n(94184),d=n.n(l),s=n(66120),c=n(95441),u=n(15771),h=n(61254),p=n(19081),g=n(44424),m=n(71075);let v=e=>{let{enableExtraSmallOption:t,size:n,onOpen:i,onClose:r,onEditCaption:a,onSetLayout:l,onSetShowBylines:d,showBylines:v,onConvertToLink:A,onConvertToEmbeddedPost:f,onDelete:C,showBylinesOption:w}=e,{iString:b}=(0,c.M1)();return(0,o.tZ)(p.hs,{className:m.Z.menu,justifyContent:"end",children:(0,o.BX)(g.v2,{layerOptions:{placement:"bottom-end"},trigger:(0,o.tZ)(u.hU,{priority:"secondary-outline",children:(0,o.tZ)(s.Z,{size:20})}),onClose:r,onOpen:i,children:[t&&(0,o.tZ)(g.sN,{disabled:"xs"===n,onClick:()=>l("xs"),children:b("Extra small display")}),(0,o.tZ)(g.sN,{disabled:"sm"===n,onClick:()=>l("sm"),children:b("Small display")}),(0,o.tZ)(g.sN,{disabled:"md"===n,onClick:()=>l("md"),children:b("Medium display")}),(0,o.tZ)(g.sN,{disabled:"lg"===n,onClick:()=>l("lg"),children:b("Large display")}),(0,o.tZ)(h.iz,{}),w&&(0,o.tZ)(g.sN,{onClick:()=>d(!v),children:b(v?"Hide bylines":"Show bylines")}),("lg"===n||"md"===n)&&(0,o.tZ)(g.sN,{onClick:a,children:b("Edit caption")}),(0,o.tZ)(g.sN,{onClick:()=>f(),children:b("Convert to default")}),(0,o.tZ)(g.sN,{onClick:A,children:b("Convert to link")}),(0,o.tZ)(g.sN,{priority:"destructive",onClick:C,children:b("Remove")})]})})};var A=n(26522),f=n(77116),C=n(57219),w=n(42123),b=n(51776);let k=e=>{let{initialValue:t,placeholder:n,onSave:l,onCancel:d}=e,{iString:s}=(0,c.M1)(),[h,g]=(0,a.eJ)(t),m=(0,a.sO)(null);return(0,a.d4)(()=>{m.current&&(m.current.focus(),m.current.select())},[]),(0,o.BX)(p.tu,{gap:16,children:[(0,o.tZ)(b.oi,(0,r._)((0,i._)({},w.H),{ref:m,placeholder:n,value:h,onInput:e=>{g(e.target.value)}})),(0,o.BX)(p.hs,{gap:8,justifyContent:"end",children:[(0,o.tZ)(u.zx,{priority:"tertiary",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==d||d()},children:s("Cancel")}),(0,o.tZ)(u.zx,{priority:"primary",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==l||l(h.trim())},children:s("Save")})]})]})};var Z=n(620),y=n(4211);let E={link:"link-LXCHWO"},B=e=>{let{disableLinks:t,isEditingTitle:n,post:i,onEditTitle:r,onSaveTitle:a,onCancelTitle:l}=e,{iString:d}=(0,c.M1)(),{title:s,canonical_url:u}=i;return(0,o.tZ)(Z.l,{children:(0,o.BX)(p.tu,{gap:8,children:[(0,o.tZ)(y.Z,{color:"accent",preset:"detail-large",children:"Read"}),n?(0,o.tZ)(p.tu,{padding:8,children:(0,o.tZ)(k,{initialValue:s,placeholder:d("Edit title..."),onCancel:l,onSave:a})}):(0,o.tZ)("a",{href:u,rel:"noopener",target:"_blank",onClick:e=>{t&&e.preventDefault()},children:(0,o.tZ)(y.Z,{className:E.link,preset:"h7-serif",style:{cursor:"pointer"},onClick:null!=r?r:void 0,children:s})})]})})};var I=n(19691),T=n(20888),x=n(3900);let S={button:"button-PdemLh"},_=e=>{let{buttonSize:t,cta:n,disableLinks:i,handleCancelCta:r,handleEditCta:a,handleSaveCta:l,href:d,isEditingCta:s}=e,{iString:u}=(0,c.M1)();return(0,o.tZ)("div",{onClick:s?void 0:null!=a?a:void 0,children:s?(0,o.tZ)(k,{initialValue:n,placeholder:u("Edit CTA..."),onCancel:r,onSave:l}):(0,o.tZ)(x._,{className:S.button,href:d,justifyContent:"start",renderAsLink:!0,size:t,trailingIcon:"chevron-right",variant:"tertiary",onClick:i?e=>{e.preventDefault()}:void 0,children:n||u("Read full story")})})};var N=n(1548);let M=e=>{let{bylines:t}=e;return(null==t?void 0:t.length)?(0,o.tZ)(y.Z,{color:"tertiary",preset:"detail-large",children:(0,o.tZ)(N.M,{array:t||[],formatter:e=>{let{name:t}=e;return t},limit:3})}):null},D=e=>{let{caption:t,cta:n,disableLinks:i,isEditingCaption:r,isEditingTitle:a,isEditingCta:l,post:d,onCancelCaption:s,onCancelTitle:u,onCancelCta:h,onEditCaption:g,onEditTitle:m,onEditCta:v,onSaveCaption:A,onSaveTitle:f,onSaveCta:C,showBylines:w}=e,{iString:b}=(0,c.M1)(),{publishedBylines:E,title:B,canonical_url:x,cover_image:S,cover_image_alt:N}=d;return(0,o.tZ)(Z.l,{children:(0,o.BX)(p.tu,{children:[(0,o.tZ)(p.tu,{paddingBottom:12,children:a?(0,o.tZ)(p.tu,{padding:8,children:(0,o.tZ)(k,{initialValue:B,placeholder:b("Edit title..."),onCancel:u,onSave:f})}):(0,o.tZ)("a",{href:x,rel:"noopener",target:"_blank",onClick:e=>{i&&e.preventDefault()},children:(0,o.tZ)(y.Z,{preset:"h5-sans",onClick:null!=m?m:void 0,children:B})})}),(0,o.tZ)(p.tu,{paddingBottom:12,children:w&&(0,o.tZ)(M,{bylines:E})}),S&&(0,o.tZ)(p.tu,{paddingBottom:16,children:(0,o.tZ)("a",{href:x,rel:"noopener",target:"_blank",onClick:e=>{i&&e.preventDefault()},children:(0,o.tZ)(T.e,{alt:null!=N?N:B,imageProps:{height:Math.round(650),smartCrop:!0},maxWidth:1300,src:S})})}),(0,o.tZ)(p.hs,{flex:"grow",paddingBottom:8,children:(0,o.tZ)("div",{className:"captionContainer-e38vU2",children:r&&s&&A?(0,o.tZ)(p.tu,{paddingX:8,children:(0,o.tZ)(I.Z,{initialCaption:t,onCancel:s,onSave:A})}):(0,o.tZ)("p",{dangerouslySetInnerHTML:{__html:t},onClick:null!=g?g:void 0})})}),(0,o.tZ)(_,{cta:n,disableLinks:i,handleCancelCta:h,handleEditCta:v,handleSaveCta:C,href:x,isEditingCta:l})]})})};var L=n(98422);let j={imageLink:"imageLink-AC6EYn",image:"image-DiWGMJ",imageMobile:"imageMobile-PivMk8"},P=e=>{var t;let{disableLinks:n,post:i,isEditingTitle:r,onEditTitle:a,onSaveTitle:l,onCancelTitle:s,isEditingCta:u,onEditCta:h,onCancelCta:g,onSaveCta:m,cta:v,showBylines:A}=e,{iString:f}=(0,c.M1)(),{isMobile:C}=(0,L.v9)(),{publishedBylines:w,title:b,canonical_url:E,cover_image:B,cover_image_alt:I}=i;return(0,o.tZ)(Z.l,{children:(0,o.BX)(p.gq,{alignItems:"stretch",gap:16,children:[B&&(0,o.tZ)("a",{className:j.imageLink,href:E,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,o.tZ)(T.e,{alt:null!=I?I:b,className:d()(j.image,{[null!==(t=j.imageMobile)&&void 0!==t?t:""]:C}),imageProps:{height:C?180:300,smartCrop:!0,aspect:"1:1"},maxWidth:C?180:300,src:B})}),(0,o.BX)(p.tu,{flex:"grow",gap:8,children:[r?(0,o.tZ)(p.tu,{paddingRight:8,paddingY:8,children:(0,o.tZ)(k,{initialValue:b,placeholder:f("Edit title..."),onCancel:s,onSave:l})}):(0,o.tZ)("a",{href:E,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,o.tZ)(y.Z,{preset:"h5-sans",style:n?{}:{cursor:"pointer"},onClick:null!=a?a:void 0,children:b})}),A&&(0,o.tZ)(M,{bylines:w}),(0,o.tZ)(_,{cta:v,disableLinks:n,handleCancelCta:g,handleEditCta:h,handleSaveCta:m,href:E,isEditingCta:u})]})]})})},O=e=>{let{post:t,disableLinks:n,isEditingTitle:i,onEditTitle:r,onSaveTitle:a,onCancelTitle:l,onEditCta:d,onSaveCta:s,onCancelCta:u,isEditingCta:h,showBylines:g,cta:m}=e,{iString:v}=(0,c.M1)(),{publishedBylines:A,title:f,canonical_url:C}=t;return(0,o.tZ)(Z.l,{children:(0,o.BX)(p.tu,{gap:4,children:[(0,o.BX)(p.tu,{gap:8,children:[i?(0,o.tZ)(p.tu,{padding:8,children:(0,o.tZ)(k,{initialValue:f,placeholder:v("Edit title..."),onCancel:l,onSave:a})}):(0,o.tZ)("a",{href:C,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,o.tZ)(y.Z,{preset:"h5-sans",onClick:null!=r?r:void 0,children:f})}),g&&(0,o.tZ)(M,{bylines:A})]}),(0,o.tZ)(_,{buttonSize:"sm",cta:m,disableLinks:n,handleCancelCta:u,handleEditCta:d,handleSaveCta:s,href:C,isEditingCta:h})]})})};var R=n(6070);let X=e=>{document.dispatchEvent(new CustomEvent("updateDigestPostEmbed",{detail:e,bubbles:!0}))},z=e=>{document.dispatchEvent(new CustomEvent("convertDigestPostEmbedToLink",{detail:e,bubbles:!0}))},H=e=>{document.dispatchEvent(new CustomEvent("convertDigestPostEmbedToEmbeddedPost",{detail:e,bubbles:!0}))},Y=()=>{document.dispatchEvent(new CustomEvent("deleteDigestPostEmbed",{bubbles:!0}))},F=e=>{let{nodeId:t,caption:n,cta:l,size:s="lg",isEditor:c,showBylines:u,title:h,publishedBylines:p,post_date:g,cover_image:w,cover_image_alt:b,canonical_url:k,section_name:Z,id:y,type:E,reaction_count:I,comment_count:T,publication_name:x,publication_logo_url:S,editor:_,updateAttributes:N,deleteNode:M,getPos:L,pub:j}=e,[F,G]=(0,a.eJ)(!1),[U,W]=(0,a.eJ)(!1),[V,q]=(0,a.eJ)(!1),[J,Q]=(0,a.eJ)(!1),[K,$]=(0,a.eJ)(!1),ee=(0,R.HD)({pub:j}),et={title:h,publishedBylines:p,post_date:g,cover_image:w,cover_image_alt:b,canonical_url:k,section_name:Z,id:y,type:E,reaction_count:I,comment_count:T,publication_name:x,publication_logo_url:S},en=()=>{W(!0),G(!1),X({nodeId:t,shouldDisableDrag:!0})},ei={onCancelTitle:c?()=>{q(!1),X({nodeId:t,shouldDisableDrag:!1})}:null,onEditTitle:c?()=>{q(!0),G(!1),X({nodeId:t,shouldDisableDrag:!0})}:null,onSaveTitle:c?e=>{q(!1),N?N({title:e}):X({nodeId:t,title:e,shouldDisableDrag:!1})}:null,isEditingTitle:V},er={onCancelCaption:c?()=>{W(!1),X({nodeId:t,shouldDisableDrag:!1})}:null,onEditCaption:c?en:null,onSaveCaption:c?e=>{W(!1),N?N({caption:e}):X({nodeId:t,caption:e,shouldDisableDrag:!1})}:null,isEditingCaption:U},eo={onCancelCta:c?()=>{Q(!1),X({nodeId:t,shouldDisableDrag:!1})}:null,onEditCta:c?()=>{Q(!0),G(!1),X({nodeId:t,shouldDisableDrag:!0})}:null,onSaveCta:c?e=>{Q(!1),N?N({cta:e}):X({nodeId:t,cta:e,shouldDisableDrag:!1})}:null,isEditingCta:J};return(0,o.tZ)("div",{className:d()(m.Z.digestPostEmbed),"data-component-name":"DigestPostEmbed",onMouseEnter:()=>!U&&!V&&G(!0),onMouseLeave:()=>!K&&G(!1),children:(0,o.BX)(o.HY,{children:[c&&F&&(0,o.tZ)(v,{enableExtraSmallOption:ee,showBylines:u,showBylinesOption:ee,size:s,onClose:()=>$(!1),onConvertToEmbeddedPost:()=>{_&&L?_.commands.convertDigestPostEmbedToEmbeddedPostV2({pos:L(),attrs:(0,i._)({url:k},et)}):H({url:k})},onConvertToLink:()=>{_&&L?_.commands.convertDigestPostEmbedToLinkV2({pos:L(),url:k}):z({url:k})},onDelete:()=>{M?M():Y()},onEditCaption:en,onOpen:()=>$(!0),onSetLayout:e=>{N?N({size:e}):X((0,i._)({nodeId:t,caption:n,cta:l,size:e,shouldDisableDrag:!1},et))},onSetShowBylines:e=>{N?N({showBylines:e}):X((0,i._)({nodeId:t,showBylines:e,shouldDisableDrag:!1},et))}}),"xs"===s&&(ee?(0,o.tZ)(B,(0,r._)((0,i._)({},ei),{disableLinks:c,post:et})):(0,o.tZ)(C.u,{disableLinks:c,post:et})),"sm"===s&&(ee?(0,o.tZ)(O,(0,r._)((0,i._)({},ei,eo),{cta:l,disableLinks:c,post:et,showBylines:u})):(0,o.tZ)(C.u,{disableLinks:c,post:et})),"md"===s&&(ee?(0,o.tZ)(P,(0,r._)((0,i._)({},ei,eo),{cta:l,disableLinks:c,post:et,showBylines:u})):(0,o.tZ)(f.a,(0,r._)((0,i._)({},er),{caption:n,disableLinks:c,post:et}))),"lg"===s&&(ee?(0,o.tZ)(D,(0,r._)((0,i._)({},er,ei,eo),{caption:n,cta:l,disableLinks:c,post:et,showBylines:u})):(0,o.tZ)(A.c,(0,r._)((0,i._)({},er),{caption:n,disableLinks:c,post:et})))]})})}},42123:function(e,t,n){n.d(t,{H:()=>r});let i=e=>{e.stopPropagation()},r={onKeyPress:i,onCopy:i,onPaste:i,onKeyDown:i}},33730:function(e,t,n){n.d(t,{V:()=>h});var i=n(58865),r=n(16584),o=n(55679),a=n(28596),l=n(347),d=n(95441),s=n(15771),c=n(19081);function u(){let e=(0,i._)(["Message ",""]);return u=function(){return e},e}let h=e=>{let{node:t}=e,n=t.attrs,{iTemplate:i}=(0,d.M1)();return(0,r.tZ)(o.T5,{className:"directMessage","data-drag-handle":"",children:(0,r.tZ)(l.h,{children:(0,r.tZ)(c.tu,{alignItems:"center",justifyContent:"center",flex:"grow",style:{marginBottom:"20px"},children:(0,r.tZ)(s.zx,{priority:"primary",leading:(0,r.tZ)(a.Z,{size:20}),children:i(u(),n.userName)})})})})}},78532:function(e,t,n){let i;n.d(t,{_:()=>_});var r=n(16584),o=n(30396),a=n(55679),l=n(94184),d=n.n(l),s=n(25235),c=n(31992),u=n(29942),h=n(62686),p=n(40160),g=n(8700),m=n(99869),v=n(92027),A=n(2563),f=n(20888),C=n(95441),w=n(15771),b=n(19081),k=n(21685),Z=n(58175),y=n(51776),E=n(87077),B=n(60308),I=n(57747);let T={normal:"large",large:"full",full:"normal"},x=e=>{let{alt:t,onUpdateAlt:n}=e,{iString:i}=(0,C.M1)();return(0,r.tZ)(b.tu,{gap:8,justifyContent:"center",className:I.Z.mediaControlTextEditor,children:(0,r.BX)(b.tu,{gap:8,children:[(0,r.tZ)(Z.xv.B3,{translated:!0,font:"meta",color:"secondary",children:"Alt text"}),(0,r.tZ)(y.oi,{value:t,onChange:e=>n(e.currentTarget.value),placeholder:i("Describe images…")})]})})},S=e=>{let{href:t,onSave:n}=e,[i,a]=(0,o.eJ)(t||""),{iString:l}=(0,C.M1)();return(0,r.BX)(b.tu,{gap:8,justifyContent:"center",className:I.Z.mediaControlTextEditor,children:[(0,r.BX)(b.tu,{gap:4,children:[(0,r.tZ)(Z.xv.B3,{translated:!0,font:"meta",color:"secondary",children:"URL"}),(0,r.tZ)(y.oi,{placeholder:"Add image link…",value:i,onChange:e=>a(e.currentTarget.value)})]}),(0,r.BX)(b.gq,{gap:8,children:[t&&(0,r.tZ)(w.zx,{priority:"destructive",size:"sm",onClick:()=>n(null),children:l("Remove")}),(0,r.tZ)(w.zx,{priority:"primary",size:"sm",onClick:()=>{let e=(0,s.find)(i,"url");e.length?n(e[0].href.replace("http:","https:")):alert(l("Invalid url"))},disabled:t===i||!i.length,children:(null==t?void 0:t.length)?l("Update"):l("Save")})]})]})},_=e=>{var t;let{node:n,updateAttributes:l}=e,[s,Z]=(0,o.eJ)(!1),[y,_]=(0,o.eJ)(0),[N,M]=(0,o.eJ)(0),D=(0,o.sO)(null),{iString:L}=(0,C.M1)(),j=()=>{let e=document.querySelector(".ProseMirror");e&&M(null==e?void 0:e.clientWidth),D.current&&(D.current.onload=()=>{D.current&&_(D.current.naturalWidth/D.current.naturalHeight)})},P=e=>{i=e};(0,o.d4)(()=>{j()});let[O,R]=(0,o.eJ)(!1),X=e=>{let{width:t,height:n}=e;return t<50||n<50},z=e=>{e.preventDefault(),setTimeout(()=>F(e))},H=()=>{R(!1),i=-1,document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",H)},Y=(e,t)=>{var n,i;if(!D.current){console.error("Media ref is undefined|null",{resizableImg:D.current});return}let r={width:null===(n=D.current)||void 0===n?void 0:n.width,height:null===(i=D.current)||void 0===i?void 0:i.height},o={width:-1,height:-1};"left"===e?o.width=r.width-Math.abs(t):o.width=r.width+Math.abs(t),o.width>N&&(o.width=N),o.height=o.width/y,X(o)||l(o)},F=e=>{if(-1===i)return;let{clientX:t}=e,n=i-t;if(0===n)return;let r=n>0?"left":"right";setTimeout(()=>{Y(r,Math.abs(n)),i=t})},G=e=>{let t={size:e,width:"100%"};"normal"!==e&&(t.height="auto",t.align="center"),"large"===e&&(t.width=B.urw),"full"===e&&(t.width=B.hI6),l(t)};return(0,r.BX)(a.T5,{as:"figure",className:d()(I.Z.mediaNodeView,n.attrs.align&&I.Z["align-".concat(n.attrs.align)||""]),"data-drag-handle":"",children:[(0,r.BX)(b.gq,{className:d()(I.Z.imageContainer,I.Z[n.attrs.size]),children:[(0,r.BX)(b.tu,{gap:8,children:[(0,r.BX)(b.gq,{justifyContent:"center",style:{position:"relative"},children:[(0,r.tZ)(f.e,{className:I.Z[n.attrs.size],src:n.attrs.src,alt:n.attrs.alt,title:n.attrs.title,style:{pointerEvents:"none"},maxWidth:(()=>{switch(n.attrs.size){case"large":return B.urw;case"full":return window.innerWidth;default:if("100%"===n.attrs.width)return B.qN9;return n.attrs.width}})(),imageRef:D,useRetinaSizing:!0,imageIsFixedWidth:!1}),"normal"===n.attrs.size&&(0,r.tZ)("div",{className:d()(I.Z.horizontalResizeHandle),title:L("Resize"),onClick:e=>{let{clientX:t}=e;return P(t)},onPointerDown:e=>{R(!0),i=e.clientX,setTimeout(()=>{document.addEventListener("pointermove",z),document.addEventListener("pointerup",H)})},onPointerUp:H,children:(0,r.tZ)(w.hU,{priority:"secondary",children:(0,r.tZ)(c.Z,{height:18,color:"#2b2e3b"})})})]}),(0,r.BX)(b.gq,{justifyContent:"center",className:d()(I.Z.inlineCaptionEditor,{[I.Z.hasCaption]:null===(t=n.content)||void 0===t?void 0:t.size}),children:[(0,r.tZ)(a.ms,{as:"figcaption",className:I.Z.caption,contenteditable:!0}),!n.content.size&&(0,r.tZ)("div",{className:d()(I.Z.caption,I.Z.placeholder),children:"Add caption…"})]})]}),(0,r.BX)(b.gq,{gap:4,className:d()(I.Z.mediaControlButtons),children:[(0,r.tZ)(E.u,{text:L("Toggle standard, large, full-screen"),preferPlacement:"top-center",children:(0,r.tZ)(w.hU,{priority:"tertiary",onClick:()=>G(T[n.attrs.size]),children:(0,r.tZ)(u.Z,{height:18,color:"#2b2e3b"})})}),"normal"===n.attrs.size&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(E.u,{text:L("Align left"),preferPlacement:"top-center",children:(0,r.tZ)(w.hU,{priority:"tertiary",className:d()("left"===n.attrs.align&&I.Z.active),onClick:()=>l({align:"left"}),children:(0,r.tZ)(h.Z,{height:18,color:"#2b2e3b"})})}),(0,r.tZ)(E.u,{text:L("Align center"),preferPlacement:"top-center",children:(0,r.tZ)(w.hU,{priority:"tertiary",className:d()("center"===n.attrs.align&&I.Z.active),onClick:()=>l({align:"center"}),children:(0,r.tZ)(p.Z,{height:18,color:"#2b2e3b"})})}),(0,r.tZ)(E.u,{text:L("Align right"),preferPlacement:"top-center",children:(0,r.tZ)(w.hU,{priority:"tertiary",className:d()("right"===n.attrs.align&&I.Z.active),onClick:()=>l({align:"right"}),children:(0,r.tZ)(g.Z,{height:18,color:"#2b2e3b"})})})]}),(0,r.tZ)(E.u,{text:L("Add link"),preferPlacement:"top-center",children:(0,r.tZ)(k.J,{preferPlacement:"bottom-start",content:(0,r.tZ)(S,{href:n.attrs.href,onSave:e=>{var t;l({href:e}),null===(t=D.current)||void 0===t||t.click()}}),children:(0,r.tZ)(w.hU,{priority:"tertiary",children:(0,r.tZ)(m.Z,{height:18,color:"#2b2e3b"})})})}),(0,r.tZ)(E.u,{text:L("Edit alt text"),preferPlacement:"top-center",children:(0,r.tZ)(k.J,{preferPlacement:"bottom-start",content:(0,r.tZ)(x,{alt:n.attrs.alt,onUpdateAlt:e=>l({alt:e})}),children:(0,r.tZ)(w.hU,{priority:"tertiary",children:(0,r.tZ)(v.Z,{height:18,color:"#2b2e3b"})})})})]})]}),(0,r.tZ)(A.ImageViewerModal,{showModal:s,modalContent:[{attrs:n.attrs}],onClose:()=>Z(!1),step:0})]})}},72183:function(e,t,n){n.d(t,{Z:()=>B});var i=n(7409),r=n(58865),o=n(16584),a=n(30396),l=n(27194),d=n(78435),s=n(95441),c=n(14952),u=n(40647),h=n(15771),p=n(82402),g=n(19081),m=n(1844),v=n(68709),A=n(6490),f=n(17688),C=n(58175),w=n(51776),b=n(87077);function k(){let e=(0,r._)(["Each option must be between 1 and "," characters long."]);return k=function(){return e},e}function Z(){let e=(0,r._)(["The description must be less than "," characters long."]);return Z=function(){return e},e}let y=(e,t)=>{let{question:n,description:i,expiry:r,audience:o,options:a}=e,{iString:l,iTemplate:d}=I18N.i(t),s=a.filter(Boolean);if(n.length<1||n.length>255)return l("The question must be between 1 and 255 characters long.");if(s.length<2||s.length>5)return l("Your poll must have 2 to 5 options.");if(s.some(e=>e.length<1||e.length>35))return d(k(),35);if(!["all_subscribers","only_paid"].includes(o))return l("Your poll audience is invalid.");if(![1,24,72,168,999999].includes(r))return l("The length of your poll is invalid.");else if(i.length>250)return d(Z(),250);return null},E=e=>{let{index:t,text:n,onChange:i,onDelete:r,showDeleteButton:a,disabled:c}=e,{language:u}=(0,s.M1)();return(0,o.BX)(g.X2,{flex:"grow",gap:8,children:[(0,o.tZ)(w.oi,{disabled:c,flex:"grow",maxLength:35,placeholder:(0,d.v8)(t,u),value:n,onChange:e=>{i(t,e.currentTarget.value)}}),a&&(0,o.tZ)(h.hU,{disabled:c,priority:"tertiary",tabIndex:a?void 0:-1,onClick:()=>r(t),children:(0,o.tZ)(l.Z,{size:20})})]})},B=e=>{let{poll:t,isOpen:n,onClose:r,onSave:l,isPublished:d,shouldShowAudiencePicker:k}=e,Z=t.options.map(e=>e.label);Z.length>1?Z.length<5&&Z.push(""):Z=["",""];let{iString:B,language:I,iPlural:T}=(0,s.M1)(),{getConfigFor:x}=(0,u.xR)(),{payments_state:S}=(0,c.Ij)()||{},_=!!x("enable_description_on_polls"),N=k&&"enabled"===S?"only_paid":"all_subscribers",[M,D]=(0,a.eJ)(t.question||""),[L,j]=(0,a.eJ)(t.description||""),[P,O]=(0,a.eJ)(Z),[R,X]=(0,a.eJ)(t.expiry||24),[z,H]=(0,a.eJ)(t.audience||N),[Y,F]=(0,a.eJ)(!1),[G,U]=(0,a.eJ)(t.votes_hidden||!1),[W,V]=(0,a.eJ)(null),q=y({question:M,description:L,options:P,expiry:R,audience:z},I),J=(0,a.I4)(()=>{var e;D(t.question||""),j(t.description||""),O((null===(e=t.options)||void 0===e?void 0:e.map(e=>e.label))||["",""]),X(t.expiry||24),H(t.audience||N),U(t.votes_hidden||!1),V(null),r()},[t.question,t.description,t.options,t.expiry,t.audience,t.votes_hidden,N,r]),Q=(0,a.I4)(e=>{let{value:t}=e;["only_paid","all_subscribers"].includes(t)&&H(t)},[]),K=(0,a.I4)(e=>{let{value:t}=e,n=Number(t);[1,24,72,168,999999].includes(n)&&X(n)},[]),$=(0,a.I4)((e,t)=>{let n=[...P];n.splice(e,1,t),e===n.length-1&&n.length<5&&n.push(""),O(n)},[P]),ee=(0,a.I4)(e=>{var t;if(P.length<=2||e>=P.length)return;let n=[...P];n.splice(e,1),(null===(t=n[n.length-1])||void 0===t?void 0:t.length)&&n.push(""),O(n)},[P]),et=Array(Math.max(2,P.length||0)).fill("").map((e,t)=>P.length>t?P[t]:e),en=W||d&&t.total_votes>0&&T("This poll is part of a post that has already been published. If you modify it, 1 existing vote will be removed.","This poll is part of a post that has already been published. If you modify it, %1 existing votes will be removed.",t.total_votes);return(0,o.BX)(A.u_,{className:"poll-editor-modal",isOpen:n,onClose:r,children:[(0,o.tZ)(A.xB,{showClose:!0,showDivider:!0,title:B("Edit poll"),onClose:r}),(0,o.tZ)(A.fe,{children:(0,o.BX)(g.sg,{gap:20,children:[(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll question")}),(0,o.tZ)(w.oi,{disabled:Y,maxLength:255,placeholder:B("Enter your question..."),value:M,onChange:e=>D(e.currentTarget.value)})]}),_&&(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll description")}),(0,o.tZ)(w.oi,{disabled:Y,maxLength:250,placeholder:B("Enter your description..."),value:L,onChange:e=>j(e.currentTarget.value)})]}),(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll options")}),et.map((e,t)=>(0,o.tZ)(E,{disabled:Y,index:t,showDeleteButton:et.length>2&&(t<et.length-1||e&&e.length>0),text:e,onChange:$,onDelete:ee},t))]}),(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll duration")}),(0,o.BX)(f.i,{disabled:Y,value:String(R),onChange:e=>K({value:e.target.value}),children:[(0,o.tZ)("option",{value:"1",children:B("1 hour")}),(0,o.tZ)("option",{value:"24",children:B("1 day")}),(0,o.tZ)("option",{value:"72",children:B("3 days")}),(0,o.tZ)("option",{value:"168",children:B("1 week")}),(0,o.tZ)("option",{value:"999999",children:B("Forever")})]})]}),k&&"enabled"===S&&(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Who can vote?")}),(0,o.BX)(f.i,{disabled:Y,value:z,onChange:e=>Q({value:e.target.value}),children:[(0,o.tZ)("option",{value:"only_paid",children:B("Only paid subscribers")}),(0,o.tZ)("option",{value:"all_subscribers",children:B("All subscribers who can see this post")})]})]}),(0,o.tZ)("label",{children:(0,o.BX)(g.X2,{alignItems:"center",gap:12,children:[(0,o.tZ)(p.X,{checked:G,name:"votes-hidden",onChange:()=>U(!G)}),(0,o.tZ)(C.xv.B3,{children:B("Hide the total vote count from readers?")})]})}),en&&(0,o.tZ)(w.fv,{children:(0,o.tZ)(m.y,{children:en})})]})}),(0,o.tZ)(A.mz,{primaryButton:(0,o.tZ)(b.u,{disabled:null===q,text:null!=q?q:"",children:(0,o.tZ)(h.zx,{disabled:null!==q||Y,priority:"primary",onClick:async()=>{let e=y({question:M,description:L,options:P,expiry:R,audience:z},I);if(e){V(e);return}F(!0),V(null);try{await l((0,i._)({audience:z,question:M,options:P.filter(Boolean),expiry:R,votes_hidden:G},_?{description:L}:{}))}catch(e){V(B("An error occurred while saving this poll."))}finally{F(!1)}},children:B("Save")})}),secondaryButton:(0,o.tZ)(h.zx,{disabled:Y,priority:"secondary",onClick:J,children:B("Cancel")}),showDivider:!0})]})}},38724:function(e,t,n){n.d(t,{Z:()=>u});var i=n(7409),r=n(99282),o=n(16584),a=n(20253),l=n(93666),d=n(68833),s=n(60308),c=n(47929);class u extends l.p{onOpen(){var e;(0,d.j)(d.FP.POLL_SIGNUP_DIALOG_PRESENTED,{poll_id:this.props.pollId,post_id:null===(e=this.props.post)||void 0===e?void 0:e.id})}onClose(){var e;(0,d.j)(d.FP.POLL_SIGNUP_DIALOG_CLOSED,{poll_id:this.props.pollId,post_id:null===(e=this.props.post)||void 0===e?void 0:e.id})}renderChildren(){let{pub:e,post:t,user:n,audience:l,pollId:u}=this.props,{email:h}=this.state;return(0,o.BX)("div",{children:[(0,o.BX)("div",{className:"poll-signup-header",children:[(0,o.tZ)("div",{className:"poll-signup-title",children:"Subscribe to ".concat(null==e?void 0:e.name," to vote on this poll")}),(0,o.BX)("div",{className:"poll-signup-audience",children:["Only ","only_paid"===l?"paid subscribers":"subscribers"," can vote on this poll."]})]}),(0,o.BX)(a.ZP,{action:(0,s.n1t)("/api/v1/free"),autoLock:!0,loading:!1,method:"post",onSuccess:n=>{(0,d.IU)(),(0,d.j)(d.FP.POLL_SIGNUP_DIALOG_SUBMITTED,{poll_id:u,post_id:null==t?void 0:t.id}),e&&(e.plans||e.has_recommendations)?document.location.href=(0,s.W1P)(e,(0,r._)((0,i._)({utm_medium:c.lP.web,utm_source:c.b3.pollSubscribeModal,utm_content:t&&t.id,just_signed_up:!0,requires_confirmation:n.body.requires_confirmation?"true":""},n.body.subscription_id&&{subscription_id:n.body.subscription_id},n.body.referral_token&&{referral_token:n.body.referral_token}),{next:(0,s.uRy)(e,t)})):document.location.reload()},children:[(0,o.BX)("div",{className:"poll-signup",children:[(0,o.tZ)("input",{"aria-label":"Email",disabled:!!n.email,name:"email",placeholder:"Type your email...",tabIndex:0,type:"email",value:null!=h?h:void 0,onChange:e=>{this.setState({email:e.target.value})}}),(0,o.tZ)("input",{name:"source",type:"hidden",value:"poll-subscribe-modal"})]}),(0,o.tZ)("div",{id:"error-container"}),(0,o.tZ)("button",{className:"button primary",type:"submit",children:"Subscribe"})]}),!n.email&&(0,o.BX)("div",{className:"poll-signin-prompt",children:["Already a subscriber?"," ",(0,o.tZ)("a",{className:"poll-signin-link",href:(0,s.uXE)({for_pub:null==e?void 0:e.subdomain,redirect:(0,s.uRy)(e,t)}),children:"Sign in"})]})]})}constructor(e,t){var n,i;super(e,t),this.state.email=null!==(i=null===(n=this.props.user)||void 0===n?void 0:n.email)&&void 0!==i?i:null}}},77216:function(e,t,n){n.d(t,{Z:()=>d});var i=n(16584),r=n(13639),o=n(95441),a=n(19081),l=n(58175);let d=e=>{let{poll:t}=e,{iString:n}=(0,o.M1)(),d=null==t?void 0:t.audience,s=null==t?void 0:t.question,c=null==t?void 0:t.description;return(0,i.BX)(a.tu,{gap:4,children:[(0,i.tZ)(a.gq,{alignItems:"baseline",className:"poll-title",gap:4,children:"only_paid"===d?(0,i.BX)(i.HY,{children:[(0,i.tZ)(r.Z,{size:16}),(0,i.tZ)(l.xv.Meta,{className:"subscriber-only-poll",translated:!0,children:"SUBSCRIBER-ONLY POLL"})]}):(0,i.tZ)(l.xv.Meta,{translated:!0,children:"POLL"})}),(0,i.tZ)(l.xv.H3,{className:"poll-question",color:"pub-primary-text",children:s||n("New Poll")}),c&&(0,i.tZ)(l.xv.B3,{color:"pub-secondary-text",children:c})]})}},38735:function(e,t,n){n.d(t,{k:()=>h});var i=n(7409),r=n(58865),o=n(16584),a=n(95441),l=n(58175);function d(){let e=(0,r._)([""," DAYS REMAINING"]);return d=function(){return e},e}function s(){let e=(0,r._)(["1 DAY REMAINING"]);return s=function(){return e},e}function c(){let e=(0,r._)([""," HOURS REMAINING"]);return c=function(){return e},e}let u=e=>{let{isExpired:t,remainingHours:n,language:i}=e,{iString:r,iTemplate:o}=I18N.i(i);if(t)return r("POLL CLOSED");if(n>=168)return"";if(n>=48){let e=Math.floor(n/24);return o(d(),e)}return n>=24?o(s()):n>=2?o(c(),n):r(1==n?"1 HOUR REMAINING":"LESS THAN 1 HOUR REMAINING")},h=e=>{let{hasVoted:t,isExpired:n,poll:r,remainingHours:d,showResults:s,user:c,onToggleShowResults:h}=e,{iString:p,iPlural:g,language:m}=(0,a.M1)(),v=(0,i._)({is_contributor:!1,is_author:!1,is_admin:!1},c),A=v.is_contributor||v.is_admin||v.is_author,f=g("%1 VOTE","%1 VOTES",r.total_votes),C=u({isExpired:n,remainingHours:d,language:m});return(0,o.BX)(l.xv.Meta,{className:"poll-status",children:[(A||!r.votes_hidden)&&"".concat(f," \xb7 "),C,A&&!t&&!n&&(0,o.BX)(o.HY,{children:[" \xb7 ",(0,o.tZ)("span",{className:"poll-author-visibility-toggle",title:p("Only the author, contributors, and admins may view results before voting."),onClick:()=>{h()},children:p(s?"SHOW OPTIONS":"SHOW RESULTS")})]})]})}},52573:function(e,t,n){n.d(t,{w:()=>d});var i=n(16584),r=n(30396),o=n(94184),a=n.n(o),l=n(18693);let d=e=>{let{id:t,text:n,onVote:o,showVotes:d,currentVotes:s,totalVotes:c,myVote:u,canVote:h}=e,p=(0,r.I4)(async()=>{t&&h&&await o(t)},[t,o,h]),g=Math.round(100*(0===c?0:s/c));return(0,i.BX)("div",{className:a()("poll-option",{"show-votes":d,"hide-votes":!d,"can-vote":h,"my-vote":u}),onClick:p,children:[d&&(0,i.tZ)("div",{className:"poll-vote-background",style:{width:"".concat(g,"%")}}),(0,i.tZ)("div",{className:"poll-option-background",children:(0,i.BX)("div",{className:"poll-option-text",children:[n,d&&u&&(0,i.tZ)(l.Z,{className:"vote-icon"})]})}),d&&(0,i.BX)("div",{className:"poll-percentage-text",children:[g,"%"]})]})}},47906:function(e,t,n){n.d(t,{B:()=>c});var i=n(30396),r=n(80569),o=n.n(r),a=n(95441),l=n(60308),d=n(69332),s=n(84864);let c=e=>{let{isEditor:t,isVersionView:n,pollId:r,post:c,onFinishSaving:u}=e,{iString:h}=(0,a.M1)(),[p,g]=(0,i.eJ)(null!=n&&n),[m,v]=(0,i.eJ)(!0),[A,f]=(0,i.eJ)(null),[C,w]=(0,i.eJ)(null),b=(0,i.Ye)(()=>{let e={token:void 0,uuid:void 0};if("undefined"!=typeof window&&!t){var n;let t=(0,d.m)(window.location.href);if(t&&t.token&&(e.token=t.token),!e.token&&(null===(n=window._preloads)||void 0===n?void 0:n.original_url)){let t=(0,d.m)(window._preloads.original_url);t&&t.token&&(e.token=t.token)}}if("undefined"!=typeof window&&!t&&(null==c?void 0:c.is_draft)){let t=(0,l.RQ)(window.location.href);t&&(0,s.isUUID)(t)&&(e.uuid=t)}return e},[t,null==c?void 0:c.is_draft]),k=(0,i.I4)(async function(){let{shouldNotSetLoading:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldNotSetLoading:!1};e||v(!0);try{let e=await o()("/api/v1/poll/".concat(r)).query(b);f(e.body),w(null)}catch(e){w(h("We were unable to load this poll. Please refresh the page."))}v(!1)},[r,b,h]),Z=(0,i.I4)(async e=>{await o().put("/api/v1/poll/".concat(r)).send(e),v(!0),await k(),u()},[k,u,r]),y=(0,i.I4)(async e=>{if(!p){g(!0);try{await o().post("/api/v1/poll/".concat(r,"/vote")).send({poll_option_id:e}).query(b),w(null)}catch(e){w(h("We were unable to record your vote. Please refresh the page and try again.")),g(!1);return}await k({shouldNotSetLoading:!0}),g(!1)}},[p,k,r,b,h]);return(0,i.d4)(()=>{k()},[k]),{error:C,loading:m,poll:A,fetchPoll:k,savePoll:Z,voteForOption:y}}},84711:function(e,t,n){n.d(t,{d:()=>a});var i=n(16584),r=n(55679),o=n(92314);let a=e=>{let{node:t}=e;return(0,i.tZ)(r.T5,{children:(0,i.tZ)(o.c,{mediaUploadId:t.attrs.mediaUploadId,isEditor:!0,post:null,pub:null})})}},20145:function(e,t,n){n.d(t,{Z:()=>l});var i=n(7409),r=n(99282),o=n(16584),a=n(64515);let l=e=>(0,o.tZ)(a.l,(0,r._)((0,i._)({strokeLinecap:"round",strokeLinejoin:"round"},e),{name:"LucideStarIcon",svgParams:{height:24,width:24},children:(0,o.tZ)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}))},1467:function(e,t,n){n.d(t,{Z:()=>l});var i=n(7409),r=n(99282),o=n(16584),a=n(64515);let l=e=>(0,o.tZ)(a.l,(0,r._)((0,i._)({},e),{name:"NoteReplyIcon",svgParams:{height:24,width:24,stroke:e.stroke,strokeWidth:e.strokeWidth},children:(0,o.tZ)("path",{d:"M22 11.4445C22.0038 12.911 21.6612 14.3577 21 15.6667C20.216 17.2353 19.0108 18.5546 17.5194 19.477C16.0279 20.3993 14.3091 20.8882 12.5555 20.8889C11.089 20.8927 9.64234 20.5501 8.33332 19.8889L2 22L4.11111 15.6667C3.44992 14.3577 3.10729 12.911 3.11111 11.4445C3.11179 9.69086 3.60068 7.97208 4.52302 6.48064C5.44536 4.98919 6.76472 3.78399 8.33332 3.00003C9.64234 2.33884 11.089 1.99621 12.5555 2.00003H13.1111C15.427 2.1278 17.6145 3.10532 19.2546 4.74543C20.8947 6.38553 21.8722 8.57297 22 10.8889V11.4445Z","stroke-linecap":"round","stroke-linejoin":"round"})}))},54917:function(e,t,n){n.d(t,{y:()=>l});var i=n(16584),r=n(620),o=n(4211),a=n(19081);let l=e=>{let{poll:t}=e;return(0,i.tZ)(r.l,{children:(0,i.BX)(a.tu,{gap:16,children:[(0,i.tZ)(o.Z,{preset:"h5-sans",children:(null==t?void 0:t.question)||"New Poll"}),(null==t?void 0:t.description)&&(0,i.tZ)(o.Z,{preset:"d2-serif",children:t.description})]})})}},67434:function(e,t,n){n.d(t,{r:()=>l});var i=n(16584),r=n(620),o=n(4211),a=n(95441);let l=e=>{let{hasVoted:t,poll:n,user:l}=e,{iPlural:d}=(0,a.M1)();return(!n.votes_hidden||l.is_contributor)&&(t||l.is_contributor)?(0,i.tZ)(r.l,{children:(0,i.tZ)(o.Z,{color:"tertiary",preset:"detail-large",children:d("%1 VOTE","%1 VOTES",n.total_votes)})}):null}},60437:function(e,t,n){n.d(t,{g:()=>p});var i=n(16584),r=n(30396),o=n(94184),a=n.n(o),l=n(25380),d=n(620),s=n(4211),c=n(19081);let u={container:"container-ZEro8t",containerCanVote:"containerCanVote-zhAHHo",text:"text-QBNtOV",percentageBackground:"percentageBackground-AahPjX"},h=["#7491e3","#f69227","#f74701","#f3c82e","#2db750","#0366f3","#bebdb8"],p=e=>{var t;let{currentVotes:n,hasVoted:o,id:p,index:g,myVote:m,showVotes:v,text:A,totalVotes:f,onVote:C}=e,w=Math.round(100*(0===f?0:n/f)),b=h[g%h.length],k=(0,r.I4)(async()=>{!o&&p&&await C(p)},[o,p,C]);return(0,i.tZ)(d.l,{children:(0,i.BX)(c.gq,{className:a()(u.container,{[null!==(t=u.containerCanVote)&&void 0!==t?t:""]:!o}),cursor:o?void 0:"pointer",justifyContent:o?"space-between":"center",padding:16,position:"relative",onClick:k,children:[v&&(0,i.tZ)("div",{className:u.percentageBackground,style:{width:"".concat(w,"%"),backgroundColor:b}}),(0,i.tZ)(s.Z,{className:u.text,preset:"detail-large",children:A}),v&&(0,i.BX)(c.gq,{alignItems:"center",gap:8,children:[m&&(0,i.tZ)(c.gq,{alignItems:"center",className:u.text,children:(0,i.tZ)(l.Z,{size:16})}),(0,i.BX)(s.Z,{className:u.text,preset:"detail-large",children:[w,"%"]})]})]})})}},620:function(e,t,n){n.d(t,{l:()=>o});var i=n(16584),r=n(347);let o=e=>{let{children:t}=e;return(0,i.tZ)("div",{className:"the-free-press-theme",children:(0,i.tZ)(r.h,{children:t})})}},92314:function(e,t,n){n.d(t,{c:()=>b});var i=n(16584),r=n(30396),o=n(94184),a=n.n(o),l=n(98661),d=n(12281),s=n(95441),c=n(31098),u=n(29719),h=n(93687),p=n(98914),g=n(98422),m=n(70379),v=n(17564),A=n(18618),f=n(60308),C=n(63651);let w={editVideoEmbedWrap:"editVideoEmbedWrap-UANbdz",imageGallery:"imageGallery-W5xlEs",editVideoEmbed:"editVideoEmbed-nRUXQD",videoPlaceholder:"videoPlaceholder-F7Lub5",videoScrollTarget:"videoScrollTarget-SzB20Y",video:"video-P2qgwZ",videoPlayer:"videoPlayer-vlcedM",videoEmbed:"videoEmbed-_FycLU",videoPlaceholderSilhouette:"videoPlaceholderSilhouette-XopYyA"},b=e=>{var t,n,o,b;let{mediaUploadId:k,pub:Z,post:y,isEditor:E=!1}=e,B=(0,l.useRef)(),{iString:I}=(0,s.M1)(),{isMobile:T}=(0,g.v9)(),{mediaUpload:x,loading:S,error:_,refetch:N}=(0,h.z)({mediaUploadId:k}),[M,D]=(0,r.eJ)(!1),[L,j]=(0,r.eJ)(!1),[P,O]=(0,r.eJ)(!1),[R,X]=(0,r.eJ)(!1),[z,H]=(0,r.eJ)(null);(0,l.useEffect)(()=>()=>{"undefined"!=typeof window&&z&&window.clearTimeout(z)},[z]);let Y=()=>{var e;N(),x&&(0,p.pt)((0,f.kOB)(x)),(null===(e=B.current)||void 0===e?void 0:e.player)&&B.current.player.load(),D(!1)};return(0,l.useEffect)(()=>{var e;let t=e=>{e.preventDefault()};return"undefined"!=typeof window&&(null===(e=B.current)||void 0===e?void 0:e.player)&&M&&window.document.addEventListener("dragstart",t),()=>{var e;"undefined"!=typeof window&&(null===(e=B.current)||void 0===e?void 0:e.player)&&window.document.removeEventListener("dragstart",t)}},[M,B]),(0,i.tZ)("div",{"data-component-name":"VideoEmbedPlayer",id:(0,C.jnY)({mediaUploadId:k}),className:w.videoScrollTarget,onMouseEnter:()=>{z&&(clearTimeout(z),H(null)),j(!0)},onMouseLeave:()=>{"undefined"!=typeof window&&H(window.setTimeout(()=>{j(!1)},0))},children:S?(0,i.tZ)(v.S,{className:w.videoPlaceholderSilhouette}):_||!x?(0,i.tZ)("div",{className:w.videoPlaceholder,children:I("Could not load video.")}):(0,i.tZ)(i.HY,{children:(0,i.BX)("div",{className:a()(w.videoEmbed,E&&w.canEdit),children:[(0,i.tZ)(d.Z,{ref:B,mediaUpload:x,className:a()({[w.canEdit]:E}),pub:Z,noPreview:M,renderPlayButton:()=>(0,i.tZ)(A.f,{isPlaying:!1,size:T?56:72}),stopPropagation:!0,videoType:"embed",videoPlayerClassName:w.videoPlayer,videoClassName:w.video,surface:E?"editor":"post",entityKey:String(null!==(n=null==y?void 0:y.id)&&void 0!==n?n:x.post_id),entityType:"post",contentType:"embed"}),E&&(L||M||P||R)&&(0,i.BX)(m.VW,{children:[(0,i.tZ)(u.Z,{videoPlayer:null!==(o=B.current)&&void 0!==o?o:null,pub:null,postId:null!==(b=null==y?void 0:y.id)&&void 0!==b?b:null,mediaUpload:x,onOpenThumbnail:()=>D(!0),onOpenSettings:null,onThumbnailUpdated:Y,onOpenFreePreview:null,onRemoveFreePreview:null,onRemoveMedia:null,active:!M,onSelected:e=>e?O(!0):O(!1),onDownloadStarted:()=>X(!0),onDownloadFinished:()=>X(!1)},k),M&&(null===(t=B.current)||void 0===t?void 0:t.player)&&(0,i.tZ)(c.Z,{videoPlayerRef:B.current.player,videoUpload:x,active:M,onCancel:Y,onUpdate:Y})]})]})})})}},45823:function(e,t,n){n.d(t,{K:()=>s});var i,r,o=n(6400),a=n(30396);let l="undefined"!=typeof window&&null!==(r=null===(i=window._preloads)||void 0===i?void 0:i.freeSignup)&&void 0!==r&&r,d=(0,o.createContext)(l);function s(){return(0,a.qp)(d)}d.displayName="FreeSignupContext"},55918:function(e,t,n){n.r(t),n.d(t,{ImageActions:()=>d});var i=n(16584),r=n(74655),o=n(35588),a=n(71068),l=n(19081);function d(e){let{size:t}=e;return(0,i.BX)(l.X2,{gap:8,children:[(0,i.tZ)(a.xu,{className:"icon-container restack-image",children:(0,i.tZ)(r.Z,{size:t})}),(0,i.tZ)(a.xu,{className:"icon-container view-image",children:(0,i.tZ)(o.Z,{size:t})})]})}},64819:function(e,t,n){n.d(t,{n:()=>I});var i=n(7409),r=n(99282),o=n(16584),a=n(30396),l=n(57560),d=n(95441),s=n(19081),c=n(58175);let u=e=>{let{accept:t,onUploadClicked:n,onFileSelected:i,onRecord:r,hideRecorder:u=!1,hideReset:h=!0,onResetToDefault:p}=e,g=(0,a.sO)(null),{iString:m}=(0,d.M1)();return(0,o.BX)(s.gq,{gap:16,children:[(0,o.tZ)(s.hs,{radius:"xs",height:40,width:40,bg:"secondary",alignItems:"center",justifyContent:"center",children:(0,o.tZ)(l.Z,{size:24,color:"var(--color-fg-tertiary)"})}),(0,o.BX)(s.tu,{gap:4,children:[(0,o.tZ)(c.xv.B4,{color:"primary",weight:"semibold",children:m("Upload audio file")}),(0,o.BX)(s.gq,{gap:16,children:[(0,o.tZ)(c.xv.B4,{color:"pub-accent",weight:"semibold",decoration:"underline",cursor:"pointer",onClick:()=>{g.current&&(g.current.click(),n(g.current))},children:m("Select file")}),!u&&(0,o.tZ)(c.xv.B4,{weight:"semibold",decoration:"underline",cursor:"pointer",color:"secondary",onClick:r,children:m("Record audio")}),!h&&(0,o.tZ)(c.xv.B4,{color:"secondary",weight:"semibold",decoration:"underline",cursor:"pointer",onClick:p,children:m("Reset audio to default")})]}),(0,o.tZ)("input",{style:{display:"none"},ref:g,type:"file",accept:t,onChange:e=>{null!=e.target&&i(e.target.files[0])}})]})]})};var h=n(27412),p=n(6400),g=n(94184),m=n.n(g),v=n(71375),A=n(87515),f=n(68833),C=n(15771),w=n(84864);let b={outerRing:"outerRing-LiaIRq",innerRing:"innerRing-LAXmu7",accentRing:"accentRing-fxo2aG",accentBackgroundRing:"accentBackgroundRing-muyYxM"};class k extends p.Component{async componentDidMount(){if(!await this.recorder.startMicrophone()){var e,t;null===(e=(t=this.props).onCancel)||void 0===e||e.call(t)}}componentWillUnmount(){this.onCloseClicked()}onRecorderStarted(){var e,t;null===(e=(t=this.props).onRecorderStarted)||void 0===e||e.call(t),this.onRecorderChanged(null)}onRecorderChanged(e){if(this.setState({recorderState:this.recorder.state,recorderDuration:this.recorder.duration,recorderVolume:this.recorder.volume}),e){var t,n;null===(t=(n=this.props).onComplete)||void 0===t||t.call(n,e)}}render(e,t){var n;let{iString:i}=e,{recorderState:r,recorderDuration:a,countDown:l}=t;return(0,o.BX)(s.gq,{flex:"grow",gap:16,alignItems:"center",justifyContent:"space-between",children:[r===A.Z.STATE.STOPPED&&(0,o.BX)(s.hs,{alignItems:"center",justifyContent:"center",gap:16,children:[(0,o.tZ)(s.hs,{radius:"full",className:m()(b.outerRing),border:"detail",onClick:this.onButtonClick,cursor:"pointer",children:(0,o.tZ)(s.hs,{className:m()(b.innerRing,b.accentRing,b.accentBackgroundRing),bg:"accent-red",radius:"full"})}),(0,o.tZ)(c.xv.B3,{color:"primary",weight:"semibold",children:null!==(n=null==i?void 0:i("Start recording"))&&void 0!==n?n:"Start recording"})]}),[A.Z.STATE.STARTED,A.Z.STATE.STARTING].includes(r)&&(0,o.BX)(s.hs,{alignItems:"center",justifyContent:"center",gap:16,children:[(0,o.tZ)(s.hs,{radius:"full",className:m()(b.outerRing,b.accentRing),border:"detail",onClick:this.onButtonClick,cursor:"pointer",children:(0,o.tZ)(s.hs,{className:m()(b.innerRing,b.accentRing,b.accentBackgroundRing),bg:"accent-red"})}),r===A.Z.STATE.STARTING&&(0,o.BX)(c.xv.B3,{color:"primary",weight:"semibold",children:[l,"..."]}),r===A.Z.STATE.STARTED&&(0,o.tZ)(c.xv.B3,{color:"primary",weight:"semibold",children:(0,w.secondsToHHMMSS)(null!=a?a:0)})]}),(0,o.tZ)(C.hU,{priority:"quaternary",onClick:this.onCloseClicked,children:(0,o.tZ)(v.Z,{size:20})})]})}constructor(e,t){super(e,t),(0,h._)(this,"recorder",void 0),(0,h._)(this,"onButtonClick",()=>{this.recorder.state===A.Z.STATE.STOPPED?((0,f.j)(f.FP.AUDIO_PRESS_RECORD_CLICKED,{feature:this.props.feature}),this.setState({countDown:3}),setTimeout(()=>this.setState({countDown:2}),700),setTimeout(()=>this.setState({countDown:1}),1400),this.recorder.start({startAt:Date.now()+2100})):(this.recorder.state===A.Z.STATE.STARTING||this.recorder.state===A.Z.STATE.STARTED)&&this.recorder.stop()}),(0,h._)(this,"onCloseClicked",()=>{if(this.recorder.state===A.Z.STATE.STARTED){var e,t;if(this.recorder.suspend(),!confirm("Your recording will be discarded, are you sure?")){this.recorder.resume();return}this.recorder.stop({dropRecording:!0}),null===(e=(t=this.props).onRecorderStopped)||void 0===e||e.call(t)}else this.recorder.state===A.Z.STATE.STARTING?this.recorder.onStarted=()=>this.recorder.stop({dropRecording:!0}):this.recorder.state===A.Z.STATE.STOPPED&&this.recorder.stopMicrophone();this.props.onCancel&&this.props.onCancel()}),this.recorder=new A.Z({onStarting:()=>this.onRecorderChanged(),onStarted:()=>this.onRecorderStarted(),onChunk:()=>this.onRecorderChanged(),onStopping:()=>this.onRecorderChanged(),onStopped:e=>this.onRecorderChanged(e)}),this.state={countDown:3,recorderState:this.recorder.state,recorderDuration:this.recorder.duration,recorderVolume:this.recorder.volume}}}(0,h._)(k,"contextType",d.wj);let Z=(0,d.fz)(k);var y=n(21903),E=n(21680);let B=e=>{var t;let{iString:n}=(0,d.M1)(),i=(null!==(t=e.percentComplete)&&void 0!==t?t:0)*100;return(0,o.BX)(s.gq,{gap:16,flex:"grow",children:[(0,o.tZ)(s.hs,{radius:"xs",height:40,width:40,bg:"secondary",alignItems:"center",justifyContent:"center",children:(0,o.tZ)(l.Z,{size:24,color:"var(--color-fg-tertiary)"})}),(0,o.BX)(s.tu,{flex:"grow",gap:4,children:[(0,o.BX)(s.gq,{justifyContent:"space-between",alignItems:"center",children:[(0,o.tZ)(c.xv.B4,{color:"primary",weight:"semibold",children:n("Upload audio file")}),(0,o.tZ)(s.gq,{cursor:"pointer",onClick:e.onCancel,children:(0,o.tZ)(v.Z,{size:20,color:"var(--color-fg-secondary)"})})]}),(0,o.BX)(s.gq,{flex:"grow",alignItems:"center",gap:32,children:[(0,o.tZ)(s.gq,{flex:"grow",radius:"full",bg:"tertiary",style:{height:"6px"},children:(0,o.tZ)(s.gq,{radius:"full",style:{width:"".concat(i,"%"),backgroundColor:"var(--color-fg-primary)"}})}),(0,o.tZ)(s.gq,{width:32,justifyContent:"end",children:(0,o.BX)(c.xv.Digit,{color:"primary",children:[i.toFixed(0),"%"]})})]})]})]})};class I extends y.QM{trackUploadClicked(){(0,f.j)(f.FP.UPLOAD_EPISODE_AUDIO_CLICKED)}render(e,t){var n,a,l,d;let{onRecorderStarted:c,onRecorderStopped:h,feature:p,mediaUpload:g,removeUpload:m,hideRecorder:v,hideReset:A}=e,{preuploading:f,uploading:C,recording:w,percentComplete:b}=t,k=(null==g?void 0:g.state)==="uploaded",y=!w&&(C||f),{iString:I}=this.i18n,T=null!==(l=null===(n=this.props.components)||void 0===n?void 0:n.AudioDecider)&&void 0!==l?l:u,x=null!==(d=null===(a=this.props.components)||void 0===a?void 0:a.AudioRecorder)&&void 0!==d?d:Z;return(0,o.BX)(s.gq,{flex:"grow",border:"detail",radius:"sm",alignItems:"center",paddingY:16,paddingX:12,gap:8,children:[!w&&!y&&!k&&(0,o.tZ)(T,(0,r._)((0,i._)({},this.props),{accept:this.accepts,onUploadClicked:this.onUploadClicked,onFileSelected:this.onFileSelected,onRecord:()=>this.setState({recording:!0}),hideRecorder:v,hideReset:A,onResetToDefault:this.props.onResetToDefault})),w&&(0,o.tZ)(x,{feature:p,onComplete:e=>{this.setState({recording:!1}),e&&this.uploadToS3(e),null==h||h()},onCancel:()=>{this.setState({recording:!1})},onRecorderStarted:c,onRecorderStopped:h}),y&&(0,o.tZ)(B,{percentComplete:b,onCancel:()=>{if(confirm(I("Are you sure you want to cancel the upload?"))){var e,t;this.cancelUpload(),null===(e=(t=this.props).onUploadCanceled)||void 0===e||e.call(t)}}}),k&&(0,o.tZ)(E.O,{onCancel:m})]})}constructor(e,t){var n;super(e,t),this.state={recording:null!==(n=this.props.skipToRecordStep)&&void 0!==n&&n}}}},24763:function(e,t,n){n.d(t,{Z:()=>s});var i=n(16584),r=n(71375),o=n(16564),a=n(1055),l=n(15771);let d=e=>{let{isPlaying:t,togglePlayback:n}=e;return(0,i.tZ)("div",{className:"tw-relative tw-flex tw-h-10 tw-w-10 tw-shrink-0 tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid tw-border-pub-accent tw-transition-transform hover:tw-scale-105",onClick:n,role:"button",children:t?(0,i.BX)("div",{className:"tw-flex tw-h-4 tw-w-4 tw-justify-between",children:[(0,i.tZ)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"}),(0,i.tZ)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"})]}):(0,i.tZ)(a.Z,{className:"tw-relative tw-left-[.1rem] tw-fill-pub-accent ",stroke:"none",height:16})})},s=e=>{let{currentTime:t,isPlaying:n,progress:a,progressBarRef:s,progressBarOnMouseDown:c,remainingTime:u,togglePlayback:h,onRemove:p}=e;return(0,i.BX)("div",{className:"auditionPlayer-OkcpWn",children:[(0,i.tZ)(d,{togglePlayback:h,isPlaying:n}),(0,i.tZ)(o.ko,{currentTime:t,remainingTime:u,containerRef:s,progress:a,onMouseDown:c,theme:o._g.PubAccent}),p&&(0,i.tZ)(l.hU,{size:"sm",priority:"quaternary","aria-label":"Cancel",onClick:p,children:(0,i.tZ)(r.Z,{size:16,"aria-hidden":!0})})]})}},87515:function(e,t,n){n.d(t,{Z:()=>o});var i=n(27412);class r{append(e){let t=this.mp3encoder.encodeBuffer(function(e){let t=e.length,n=new Int16Array(t);for(let i=0;i<t;i++)n[i]=Math.max(-32768,Math.min(32768,e[i]*(e[i]<0?32768:32767)));return n}(e));if(t.length>0)return this.chunks.push(t),t}flush(){if(this.chunks.length>0){let e=new Blob(this.chunks,{type:"audio/mp3"});return this.chunks=[],e}}constructor({channels:e=1,sampleRate:t=44100,bitRate:n=192}={}){(0,i._)(this,"mp3encoder",void 0),(0,i._)(this,"chunks",void 0);let{Mp3Encoder:r}=window.lamejs;this.mp3encoder=new r(e,t,n),this.chunks=[]}}class o{static get STATE(){return{STOPPED:"stopped",STARTING:"starting",STARTED:"started",STOPPING:"stopping"}}static isSupported(){return"undefined"!=typeof window&&!!window.navigator&&!!window.navigator.mediaDevices&&!!window.navigator.mediaDevices.getUserMedia&&(!!window.AudioContext||!!window.webkitAudioContext)&&!!window.Float32Array&&!!window.Blob&&!!window.URL&&!!window.Worker||!1}get duration(){var e;return(null===(e=this.startedAts)||void 0===e?void 0:e.length)?this.startedAts.reduce((e,t,n)=>{let i=this.endedAts[n];return i?e+(i-t):e+(Date.now()-t)},0)/1e3:null}get volume(){if(this.state!==o.STATE.STARTED||!this.analyser)return 0;let e=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteFrequencyData(e),Math.max(...e)/255}async startMicrophone(){if(!o.isSupported())return alert("Recording is not supported on this device."),!1;if(this.microphone)try{return await this.microphone,!0}catch(e){return!1}try{this.microphone=navigator.mediaDevices.getUserMedia({audio:!0}),this.microphone=await this.microphone,this.microphone.getTracks().forEach(e=>{e.addEventListener("ended",()=>{this.state===o.STATE.STARTED&&this.stop()})})}catch(e){console.error(e),this.microphone=null}return!!this.microphone||(alert("Unable to access the microphone! Please check your browser settings."),!1)}async stopMicrophone(){if(this.microphone){if(!this.microphone.getTracks)try{await this.microphone}catch(e){return}if(this.state===o.STATE.STARTED){await this.stop();return}this.microphone.getTracks().forEach(e=>e.stop()),this.microphone=null}}async start(){let{startAt:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o.isSupported())throw Error("Recording is not supported on this device");if(this.state===o.STATE.STOPPING)throw Error("Currently stopping last recording");if([o.STATE.STARTING,o.STATE.STARTED].includes(this.state))return;if(clearTimeout(this.startingTimeout),this.state=o.STATE.STARTING,this.onStarting&&this.onStarting(),!await this.startMicrophone()){this.state=o.STATE.STOPPED,this.onStopped&&this.onStopped();return}let t=window.AudioContext||window.webkitAudioContext;try{if(this.audioContext=new t({sampleRate:this.sampleRate}),this.mp3encoder=new r({sampleRate:this.audioContext.sampleRate}),this.analyser=this.audioContext.createAnalyser(),this.analyser.smoothingTimeConstant=.2,this.analyser.fftSize=1024,this.audioContext.createJavaScriptNode)this.audioNode=this.audioContext.createJavaScriptNode(this.bufferSize,1,1);else if(this.audioContext.createScriptProcessor)this.audioNode=this.audioContext.createScriptProcessor(this.bufferSize,1,1);else throw Error("Unable to construct audio node");this.audioInput=this.audioContext.createMediaStreamSource(this.microphone),this.audioInput.connect(this.analyser),this.analyser.connect(this.audioNode),this.audioNode.connect(this.audioContext.destination),this.startingTimeout=setTimeout(()=>{this.audioNode.addEventListener("audioprocess",e=>this.onAudioProcess(e)),this.state=o.STATE.STARTED,this.startedAts=[Date.now()],this.endedAts=[],this.onStarted&&this.onStarted()},e?Math.max(Math.max(Date.now(),+e)-Date.now(),0):2e3)}catch(e){this.state=o.STATE.STOPPED,this.onStopped&&this.onStopped(),console.error("Unable to access the microphone!",e),alert("Unable to setup microphone!")}}async stop(){let{dropRecording:e=!1,stopMicrophone:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o.isSupported())throw Error("Recording is not supported on this device");if([o.STATE.STOPPING,o.STATE.STOPPED].includes(this.state))return;if(this.state===o.STATE.STARTING)throw Error("Currently starting new recording");clearTimeout(this.startingTimeout),this.state=o.STATE.STOPPING,this.onStopping&&this.onStopping(),this.audioInput.disconnect(),this.analyser.disconnect(),this.audioNode.disconnect(),this.audioContext.close(),this.audioContext=null,this.analyser=null,this.audioNode=null,this.audioInput=null,t&&await this.stopMicrophone();let n=this.mp3encoder.flush();this.mp3encoder=null,this.state=o.STATE.STOPPED,this.endedAts.push(Date.now()),this.onStopped&&this.onStopped(e?null:n)}async suspend(){this.audioContext&&(this.endedAts.push(Date.now()),this.audioContext.suspend())}async resume(){this.audioContext&&(this.startedAts.push(Date.now()),this.audioContext.resume())}onAudioProcess(e){if(this.state===o.STATE.STARTED&&this.mp3encoder.append(e.inputBuffer.getChannelData(0))){var t;null===(t=this.onChunk)||void 0===t||t.call(this)}}constructor(e={}){(0,i._)(this,"bufferSize",void 0),(0,i._)(this,"sampleRate",void 0),(0,i._)(this,"state",void 0),(0,i._)(this,"analyser",void 0),(0,i._)(this,"microphone",void 0),(0,i._)(this,"startedAts",void 0),(0,i._)(this,"endedAts",void 0),(0,i._)(this,"startingTimeout",void 0),(0,i._)(this,"onStarting",void 0),(0,i._)(this,"onStarted",void 0),(0,i._)(this,"onStopped",void 0),(0,i._)(this,"onStopping",void 0),(0,i._)(this,"onChunk",void 0),(0,i._)(this,"audioContext",void 0),(0,i._)(this,"mp3encoder",void 0),(0,i._)(this,"audioNode",void 0),(0,i._)(this,"audioInput",void 0),this.bufferSize=4096,this.sampleRate=44100,this.state=o.STATE.STOPPED,Object.assign(this,e)}}},14017:function(e,t,n){n.d(t,{WB:()=>_,rN:()=>N});var i=n(7409),r=n(60826),o=n(70232),a=n(68833),l=n(84864),d=n(5835),s=n(44262),c=n(82032),u=n(71993),h=n(88954),p=n(13991),g=n(72270),m=n(40924),v=n(86725),A=n(87413),f=n(57639),C=n(29511),w=n(99975),b=n(23431),k=n(53797),Z=n(44288),y=n(46393),E=n(79592),B=n(78483),I=n(84766),T=n(45913),x=n(32751);let S=[[f.N9,f.MQ,o.zF],[k.YT,k.vt,o.zF],[I.Pz,I.qK,l.TWEET_PLACEHOLDER_DATA_URI],[C.Dy,C.$p,l.TWEET_PLACEHOLDER_DATA_URI],[x.gp,x.o1,o.zF],[T.vR,T.Oy,o.zF],[E.qZ,E.W7,o.zF],[p.H6,p.yv,o.zF],[h.Z9,h.uL,o.zF],[u.aE,u.a7,l.TWEET_PLACEHOLDER_DATA_URI],[y.SH,y.kb,o.zF],[s.XC,s.bo,o.zF],[w.lA,w.aI,o.zF],[A.S,A.un,o.zF],[m.Ng,m.O5,o.zF],[v.t3,v.mt,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjAAAAEyCAYAAADk0er5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAooSURBVHgB7d1rbhvXGcfhw6slUYyFBHZiAwnsFcTdQZENpDtpV9A02UCbnTQraHeQ7EAGAsQ2bBiyJVIX3spDwIVhIICRD+L8Z54HoCiL+kKLHP34Ho5Or3zg119//fP26i/9fv/b7fWjAgCwH7/Uy7ZJvn/w4MHT92/ovfvk9PT05M6dO99tP/3b8fFxOTw8LMPhsAAA7MNisdhdzs/Py3q9/uf19fUPjx8/Pqu37QKmxst4PP7P0dHRk7t375Zer1cAAJpgGy+7iJnNZj/f3Nx8UyOmX2+ok5fJZPLk5OREvAAAjbJdQip1wLJdHfrTtln+Xr/We/bs2aNttJzev39fvAAAjVUnMS9evNisVqtv+tsP/5hOp+IFAGi0Ook5Pj6uwfJtfxsuX4/H4wIA0HRHR0c1ZL6t74F54mwjACDBYDCoV4/6BQAgjIABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIMC9Ap6/W6XFxclOVyWTabTUk3Ho/LZDIp/b7XY9AlnvHQITVezs7OymKxaEW8VDc3N7v7VO8b0B0CBjpkNpu1JlzeV+9TnSoB3SFgoEPqtKKt6pIY0B0CBmiFNk6WgN8nYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGOqTX6xWANhAw0CGDwaC01Xg8LkB3CBjokOl02sopTL1Pk8mkAN0hYKBD+v1+OTk5ac20oobLcDjc3ad634DuGBagU+ov+jqJAUjmJQsAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEGdYoKGurq7KmzdvymKxKOv1ugC3o9/vl9FoVI6Pj8tkMinQRAKGxqmx8vLly3J9fV2A21efg/X5Vy8XFxfls88+K8OhXxc0iyUkGqUeOJ8/fy5eoCHqc/HVq1emoDSOgKFR6pLRcrksQHPc3NyU8/PzAk0iYGiMGi4OktBM9blpCkOTCBgao75ZF2imGi+Xl5cFmkLA0Bh1TA00l+VdmkTAAABxBAyN4TRNaLb6t2GgKQQMjXF4eFh6vV4Bmmk8HhdoCgFDY9S//vnJJ58UoHmm06kpKY0iYGiUepA0poZmqeFy9+7dAk0iYGiUOoW5d+9eOTg4KMD+3blzp3zxxRe75yY0iXkgjVNf7d2/f3+3B8t8Pt+dXu0PaMHtebeZY526eDFBUwkYGqvuhFsvAPAhM0EAII6AAQDiCBgAII6AAQDiCBgAII6AAQDiCBgAII6AAQDiCBgAII6AAQDiCBgAII69kOicq6urcnl5aYNIWqFuvHh4eGjTRTpHwNApdXfrGi/QFjXEZ7NZWa1WZTKZFOgKS0h0Rj3Aixfaqk4WF4tFga4QMHTG9fV1gTZbLpcFukLA0Bn1vQLQZpvNpkBXOKLTGYPBoECbjcfjAl0hYOiM0WjkTA1aqz62h0PnZdAdHu10Sj1Lo05inEZNW9Sl0Rov9VRq6BIBQ+fUg71JDEA2S0gAQBwBAwDEETAAQBwBAwDEETAAQBwBAwDEETAAQBwBAwDEETAAQBwBAwDEETAAQBx7IdE5V1dXNnOkNepmjnUjR/t70TUChk6Zz+e7eIG2qCE+m83KarXa7bYOXWEJic6oB3jxQlvVyeJisSjQFQKGzri+vi7QZsvlskBXCBg6o75XANpss9kU6ApHdDpjMBgUaLPxeFygKwQMnTEajZypQWvVx/Zw6LwMusOjnU6pZ2nUSYzTqGmLujRa46WeSg1dImDonHqwN4kByGYJCQCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCIMyzsxdXVVTk/Py8AH2s+n+8uNMPR0VF5+PBhGY1GhdsnYPZgsVjsDkL37t0rAB/r5cuXAqZB6s/i9PS0fPXVV+Xg4KBwuywh7UE9CH366acFgGyr1aq8ePGicPsEzB4YNwK0h6nYfggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4giYPViv1wUA+OMEzB70+/7bAdri6OiocPv8Jt2D6XRaXr9+XQDIVl+QPnz4sHD7hoVbd3BwUAaDQfntt9921yYywMeYz+eFZqjH7Xos//zzz8toNCrcPgGzJ/UBr9oB4I/x0h8AiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4NWCerlarAgDQdIvFol790l+v1z/N5/MCANB0/w+Y7Yd/z2azstlsCgBAU9VWOT8/3/T7/R/6X3755X+Xy+W/zs7OCgBAU719+3azncD8+ODBg6e7N/FuA+b7y8vLn9+8eWMSAwA0Sm2T7aBls10x+rk2S/1a792Np6enJ8Ph8LvRaPTX6XTa216XegEA2IdtrJTtgKVcXFxsVqvVjzVeHj9+vFsy6n34zc+ePXu0/abver3e19t/PikAAPvxtJ5stL3+qb7l5f0b/gfSCexetgOUpQAAAABJRU5ErkJggg=="],[d.uF,d.ph,o.zF],[b.CA,b.Ee,o.zF],[g.vb,g.HL,o.zF],[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=t[0];return i?(0,Z.Gd)(i):null},Z.sv,o.zF],[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=t[0];return i?(0,B.od)(i):null},B.Ml,o.zF],[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=t[0];return i?(0,c.q7)(i):null},c.IS,o.zF],[e=>e===r.W.FIRST_NOTE_EMBED,u.Gq,l.TWEET_PLACEHOLDER_DATA_URI]],_=(e,t,n)=>{if(t.nodes.augmentation_placeholder)for(let[r,,o]of S){let a=r(e,(0,i._)({customSchema:t},n));if(a){let e=t.nodes.augmentation_placeholder.create({request_id:(0,l.randomString)(),url:a,src:o});return[a,e]}}return[null,null]},N=async(e,t,n,r)=>{let o,l;let{request_id:d,url:s}=e.attrs;try{for(let[t,l]of S)if(t(e.attrs.url,(0,i._)({customSchema:n},r))&&((0,a.j)(a.FP.EMBED_URL_ATTEMPTED,{url:s,source:"paste"}),o=await l(s,{customSchema:n}),(0,a.j)(a.FP.EMBED_URL_SUCCEEDED,{url:s,source:"paste"}),o))break}catch(t){(0,a.j)(a.FP.EMBED_URL_FAILED,{url:s,source:"paste"}),console.error("Failed to process augmentation placeholder:",e.attrs,t),400<=t.status&&t.status<600&&(l=t)}if(l){let i=(0,I.Pz)(e.attrs.url);if(setTimeout(()=>{M(d,t,n,(e,t,r)=>{i&&n.marks.link&&e.replaceRangeWith(t,t+r.nodeSize,n.text(r.attrs.url,[n.marks.link.create({title:r.attrs.url,href:r.attrs.url})])),e.delete(t,t+r.nodeSize)})},0),!i)throw l}else o?setTimeout(()=>{M(d,t,n,(e,t,n)=>{o&&e.setNodeMarkup(t,o.type,o.attrs,n.marks)})},0):setTimeout(()=>{M(d,t,n,(e,t,i)=>{e.replaceRangeWith(t,t+i.nodeSize,n.text(i.attrs.url))})},0)},M=(e,t,n,i)=>{let r=!1,o=t.state.tr;return t.state.doc.descendants((t,a)=>{t.type===n.nodes.augmentation_placeholder&&t.attrs.request_id===e&&!1!==i(o,a,t)&&(r=!0)}),r&&t.dispatch(o),r}},26805:function(e,t,n){n.d(t,{Z:()=>h});var i=n(16584),r=n(6400),o=n(92007),a=n(45901),l=n(1148),d=n(61301);let s=new o.H$("substack-placeholder");class c extends o.Sy{add(e,t,n){t=t||e.state.selection.from,n=n||d.Vk;let i={},r=e.state.tr;return r.setMeta(u,{add:{id:i,pos:t,url:n}}),e.dispatch(r),i}addFile(e,t,n){let{name:i,type:r}=n;t=t||e.state.selection.from;let o={},a=e.state.tr;return a.setMeta(u,{addFile:{id:o,pos:t,name:i,type:r}}),e.dispatch(a),o}remove(e,t){let n=u.getState(e.state).find(null,null,e=>e.id==t);if(n.length){let i=n[0].from,r=e.state.tr;return r.setMeta(u,{remove:{id:t}}),e.dispatch(r),i}return null}replace(e,t,n){let i=this.remove(e,t);return null!==i&&(e.dispatch(e.state.tr.insert(i-1,n)),!0)}}let u=new c({state:{init:()=>a.EH.empty,apply(e,t){t=t.map(e.mapping,e.doc);let n=e.getMeta(s);if(n&&n.add){let i=document.createElement("a");i.className="image-link placeholder",i.href="javascript:void(0)";let r=document.createElement("img");r.src=n.add.url,i.appendChild(r),i.ondrop=i.ondragstart=i.onmousedown=()=>!1;let o=a.p.widget(n.add.pos,i,{id:n.add.id});t=t.add(e.doc,[o])}else if(n&&n.addFile){let{name:o,type:d}=n.addFile,s=document.createElement("div");(0,r.render)((0,i.tZ)(l.H,{filename:o,filetype:d}),s);let c=a.p.widget(n.addFile.pos,s,{id:n.addFile.id});t=t.add(e.doc,[c])}else n&&n.remove&&(t=t.remove(t.find(void 0,void 0,e=>e.id==n.remove.id)));return t}},key:s,props:{decorations(e){return this.getState(e)}}}),h=u},11239:function(e,t,n){n.d(t,{aL:()=>s,jy:()=>o});let i=e=>{var t;let n=document.createElement("div");return n.innerHTML=e,{dom:null!==(t=n.querySelector("svg"))&&void 0!==t?t:document.createElement("div")}},r=(e,t)=>{if(!("dom"in e)||!e.dom)return{dom:document.createElement("div")};let n=document.createElement("div");n.className="dropdown-item-container";let i=document.createElement("span");i.innerText=t;let r=document.createElement("div");return r.className="dropdown-item-svg",r.appendChild(e.dom),n.appendChild(r),n.appendChild(i),{dom:n}};i('\n<svg class="editor-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M7.33334 4L3.33334 8L7.33334 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M11.3333 19H15.8182C17.2809 19 18.6837 18.4205 19.718 17.3891C20.7523 16.3576 21.3333 14.9587 21.3333 13.5C21.3333 12.0413 20.7523 10.6424 19.718 9.61091C18.6837 8.57946 17.2809 8 15.8182 8H4.33334" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),i('\n<svg class="editor-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M17.3334 4L21.3334 8L17.3334 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.3334 19H8.84853C7.38582 19 5.98302 18.4205 4.94873 17.3891C3.91443 16.3576 3.33337 14.9587 3.33337 13.5C3.33337 12.0413 3.91443 10.6424 4.94873 9.61091C5.98302 8.57946 7.38582 8 8.84853 8H20.3334" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M6.80005 5.60059H13.2C14.0487 5.60059 14.8627 5.93773 15.4628 6.53784C16.0629 7.13796 16.4 7.95189 16.4 8.80059C16.4 9.64928 16.0629 10.4632 15.4628 11.0633C14.8627 11.6634 14.0487 12.0006 13.2 12.0006H6.80005V5.60059Z" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M6.80005 12H14C14.8487 12 15.6627 12.3371 16.2628 12.9373C16.8629 13.5374 17.2 14.3513 17.2 15.2C17.2 16.0487 16.8629 16.8626 16.2628 17.4627C15.6627 18.0629 14.8487 18.4 14 18.4H6.80005V12Z" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n<path d="M17.2671 6.10059H10.0671" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.2659 18.8994H6.06592" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14.0666 6.10059L9.2666 18.9006" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n'),i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path fill="none" d="M14.866 5.60059H9.266C8.88195 5.60038 8.50345 5.69236 8.1623 5.86878C7.82116 6.04519 7.52734 6.30091 7.30552 6.61443C7.0837 6.92796 6.94036 7.29014 6.88755 7.67055C6.83473 8.05096 6.87399 8.43849 7.00201 8.80059" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M13.2667 12C14.1154 12 14.9293 12.3371 15.5294 12.9373C16.1296 13.5374 16.4667 14.3513 16.4667 15.2C16.4667 16.0487 16.1296 16.8626 15.5294 17.4627C14.9293 18.0629 14.1154 18.4 13.2667 18.4H6.8667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M4.1665 12L19.1665 12" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M17.6667 16.5L21.6667 12.5L17.6667 8.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.66675 8.5L1.66675 12.5L5.66675 16.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14.1667 4.5L9.16675 20.5" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n');let o=i('\n<svg class="link-item" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<g clip-path="url(#clip1)">\n<path d="M10.0671 13.3006C10.4107 13.7599 10.849 14.1399 11.3524 14.4149C11.8557 14.6899 12.4123 14.8535 12.9845 14.8944C13.5566 14.9354 14.1308 14.8529 14.6682 14.6524C15.2056 14.4519 15.6936 14.1382 16.0991 13.7326L18.4991 11.3326C19.2278 10.5781 19.6309 9.56774 19.6218 8.51895C19.6127 7.47017 19.192 6.46692 18.4504 5.72528C17.7088 4.98365 16.7055 4.56298 15.6567 4.55386C14.608 4.54475 13.5975 4.94793 12.8431 5.67656L11.4671 7.04456" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.2677 11.7008C12.9242 11.2415 12.4859 10.8614 11.9825 10.5864C11.4791 10.3114 10.9225 10.1479 10.3504 10.1069C9.7783 10.0659 9.20407 10.1485 8.66666 10.3489C8.12925 10.5494 7.64125 10.8631 7.23574 11.2688L4.83574 13.6688C4.10711 14.4232 3.70393 15.4336 3.71304 16.4824C3.72216 17.5312 4.14283 18.5344 4.88446 19.276C5.6261 20.0177 6.62935 20.4383 7.67813 20.4475C8.72692 20.4566 9.73733 20.0534 10.4917 19.3248L11.8597 17.9568" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</g>\n');i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n<path d="M7.66675 6.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M7.66675 12.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M7.66675 18.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 6.5H2.67633" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 12.5H2.67633" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 18.5H2.67633" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g fill="none">\n<path d="M9.66675 6.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9.66675 12.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9.66675 18.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3.66675 6.5H4.66675V10.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3.66675 10.5H5.66675" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.66675 18.4999H3.66675C3.66675 17.4999 5.66675 16.4999 5.66675 15.4999C5.66675 14.4999 4.66675 13.9999 3.66675 14.4999" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n');let a=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M5 15.5L5 18.5C5 19.0304 5.21071 19.5391 5.58579 19.9142C5.96086 20.2893 6.46957 20.5 7 20.5L18 20.5C18.5304 20.5 19.0391 20.2893 19.4142 19.9142C19.7893 19.5391 20 19.0304 20 18.5L20 7.5C20 6.96957 19.7893 6.46086 19.4142 6.08579C19.0391 5.71071 18.5304 5.5 18 5.5L16 5.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M9.5 10.5L12.5 7.5L9.5 4.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M5.5 4.5L2.5 7.5L5.5 10.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),l=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.7143 15C14.7143 14.4696 14.9401 13.9609 15.3419 13.5858C15.7438 13.2107 16.2888 13 16.8571 13C17.4255 13 17.9705 13.2107 18.3724 13.5858C18.7742 13.9609 19 14.4696 19 15C19 15.5304 18.7742 16.0391 18.3724 16.4142C17.9705 16.7893 17.4255 17 16.8571 17C16.2888 17 15.7438 16.7893 15.3419 16.4142C14.9401 16.0391 14.7143 15.5304 14.7143 15ZM14.7143 15L16.8571 7M5.5 15C5.5 14.4696 5.72577 13.9609 6.12763 13.5858C6.52949 13.2107 7.07454 13 7.64286 13C8.21118 13 8.75622 13.2107 9.15809 13.5858C9.55995 13.9609 9.78571 14.4696 9.78571 15C9.78571 15.5304 9.55995 16.0391 9.15809 16.4142C8.75622 16.7893 8.21118 17 7.64286 17C7.07454 17 6.52949 16.7893 6.12763 16.4142C5.72577 16.0391 5.5 15.5304 5.5 15ZM5.5 15L7.64286 7" stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="8" cy="15" r="1"stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="17" cy="15" r="1"stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="7.5" cy="15.5" r="0.5"stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="16.5" cy="15.5" r="0.5"stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n');i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M6.66699 8L2.66699 12L6.66699 16" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22 6H11" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22 12L16 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22 18H11" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M2.66699 8L6.66699 12L2.66699 16" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21 12L15 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21 6H10" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21 18H10" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n');let d=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g fill="none" clip-path="url(#clip0_6402:84637)">\n<path d="M5.74356 7.80138L1.55483 19.3174" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.74212 7.80082L9.92942 19.3177" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.0703 7.80493V19.3212" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M8.35986 16.1787H3.12519" stroke-linecap="round" stroke-linejoin="round"/>\n<ellipse cx="15.9501" cy="15.6565" rx="2.87907" ry="3.66427" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21.4465 5L21.4465 10.9463" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21.4465 5L19.3528 6.23506" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),s=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M8.5 10C9.32843 10 10 9.32843 10 8.5C10 7.67157 9.32843 7 8.5 7C7.67157 7 7 7.67157 7 8.5C7 9.32843 7.67157 10 8.5 10Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M21 15L16 10L5 21" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),c=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 13H21" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),u=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 1V23" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H12" fill="none" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M6 19H14.5C15.4283 19 16.3185 18.6313 16.9749 17.9749C17.6313 17.3185 18 16.4283 18 15.5C18 14.5717 17.6313 13.6815 16.9749 13.0251C16.3185 12.3687 15.4283 12 14.5 12H12" fill="none" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),h=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18 9L18 6C18 5.46957 17.7893 4.96086 17.4142 4.58579C17.0391 4.21072 16.5304 4 16 4L5 4C4.46957 4 3.96086 4.21071 3.58579 4.58579C3.21071 4.96086 3 5.46957 3 6L3 13C3 13.5304 3.21071 14.0391 3.58578 14.4142C3.96086 14.7893 4.46957 15 5 15L7 15" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9.03906 9.35059L14.0391 21.3506L15.8131 16.1246L21.0391 14.3506L9.03906 9.35059Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M16.1104 16.4214L20.3534 20.6644" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),p=i('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M19 12L12 5L15 2L22 9L19 12Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13 6L5.5 7.5L2 22L16.5 18.5L18 11L13 6Z"stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2 22L9.586 14.414" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13 13C13 11.8954 12.1046 11 11 11C9.89543 11 9 11.8954 9 13C9 14.1046 9.89543 15 11 15C12.1046 15 13 14.1046 13 13Z" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n');r(h,"Buttons..."),r(a,"Code block"),r(d,"Footnote"),r(c,"Divider"),r(u,"Paywall"),r(p,"Poetry block"),r(l,"Pullquote")},83857:function(e,t,n){n.d(t,{d:()=>T});var i=n(7409),r=n(99282),o=n(58865),a=n(92007),l=n(39693),d=n.n(l),s=n(23279),c=n.n(s),u=n(26805),h=n(11239),p=n(44369),g=n(70232),m=n(68833),v=n(98914),A=n(82167),f=n(40924),C=n(86725),w=n(53797),b=n(68303);function k(){let e=(0,o._)(["Link ","K"]);return k=function(){return e},e}function Z(){let e=(0,o._)(["There’s a fancier way to share Substack links with your readers:"]);return Z=function(){return e},e}function y(){let e=(0,o._)(["Convert your link into an embed"]);return y=function(){return e},e}let E=new Set,B=c()((e,t,n)=>{let i=t.trim();(0,C.l6)(i).then(r=>{r&&(E.add(i),t===e.target.value&&n.classList.add("has-substack-link"))})},250,{maxWait:1e3});function I(e,t){if("target"in e&&e.target&&"className"in e.target&&"url-input"===e.target.className&&"value"in e.target){let{value:n}=e.target,i=n.trim();if(E.has(i)||(0,f.Ng)(i)||(0,A.lQ)(i)){t.classList.add("has-substack-link");return}if((0,w.zb)(i)){t.classList.add("has-opensea-link");return}(0,C.t3)(i)&&B(e,n,t),t.classList.remove("has-substack-link"),t.classList.remove("has-opensea-link")}}function T(e){let{scrollParent:t,publication:n,language:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{iString:l,iTemplate:s}=I18N.i(null!=o?o:"en"),c=s(k(),(0,v.Mi)());return new p.$4({class:"mark-menu-item",title:c,icon:h.jy,active(t){let n=[];return t.schema.nodes.image2?n.push(t.schema.nodes.image2):console.warn("image2 node type not found in schema"),t.schema.nodes.image3?n.push(t.schema.nodes.image3):console.warn("image3 node type not found in schema"),!!((0,b.gR)(t,n)?(0,b.do)(t):(0,b.k)(t,e))||(0,p.vM)(t,e)},enable:()=>!0,run(h,k,B){let T,x,S,_;let N=(0,b.k)(h,e);N?(T=N.pos,x=N,S=(0,b.qe)(h,N.pos.from,N.pos.to,{allowedMarks:[e]}),_=N.node.textContent):(T=h.selection,x=(0,b.Dg)(h,e),S=(0,b.S7)(h,{allowedMarks:[e]}),_=h.doc.textBetween(h.selection.from,h.selection.to));let M=(0,b.gR)(h,d()([h.schema.nodes.captionedImage,h.schema.nodes.image2,h.schema.nodes.image3,h.schema.nodes.caption]).filter(Boolean)),D=M?(0,b.do)(h):null;S=S&&!M;let L=B.dom.parentNode,j={className:"create-link-menu",submitText:l("Link"),parent:c,title:l("Create a link"),fields:{},root:L,scrollParent:t,position:(e,t)=>(0,b.$_)(B,T,e,t),onInput:I,language:o};S&&j.fields&&(j.fields.text=new p.nv({label:l("Enter text…"),className:"text-input",value:_,required:!0})),j.fields&&(j.fields.href=new p.Sm(x,D,o)),j.onSubmit=t=>{let n=h.tr;if(M)(0,b.Wi)(h,n,t.href);else if(h.selection.empty&&!N){let i=h.selection.from,r=i+t.text.length;n.insertText(t.text),n.addMark(i,r,e.create(t)),n.setSelection(a.Bs.create(n.doc,i,r))}else t.text&&t.text!==_?(n.insertText(t.text,T.from),n.setSelection(a.Bs.create(n.doc,T.from,T.from+t.text.length)),n.deleteRange(T.from+t.text.length,T.to+t.text.length),n.addMark(T.from,T.from+t.text.length,e.create(t))):n.addMark(T.from,T.to,e.create(t));if(k)return B.dispatch(n),!0},j.onClose=()=>{B.focus()};let P=async e=>{let t;e.preventDefault();let o=document.querySelector(".create-link-menu .url-input");if(!o){console.warn("could not find input for creating link menu selecting for ['.create-link-menu .url-input']");return}let a=o.value.trim();(0,p.pA)(j);let d=u.Z.add(B,T.pos,g.zF);try{if((0,m.j)(m.FP.EMBED_URL_ATTEMPTED,{url:a,source:"link-menu"}),(0,w.zb)(a))t=await (0,w.vt)(a,{customSchema:B.state.schema});else if(E.has(a))t=await (0,C.mt)(a);else if((0,A.lQ)(a)&&B.state.schema.nodes.digestPostEmbed)try{let e=await (0,A.wM)(a);t=B.state.schema.nodes.digestPostEmbed.create((0,r._)((0,i._)({},e),{isEditorNode:!0,nodeId:(0,v.EH)()}))}catch(e){console.error(e),alert(l("Failed to find post. Please check the link and try again."))}else t=await (0,f.O5)(a,{customSchema:B.state.schema,language:null==n?void 0:n.language});if((0,m.j)(m.FP.EMBED_URL_SUCCEEDED,{url:a,source:"link-menu"}),t)u.Z.replace(B,d,t);else throw u.Z.remove(B,d),Error("No embed found")}catch(e){(0,m.j)(m.FP.EMBED_URL_FAILED,{url:a,source:"link-menu"}),alert(l("Embed failed. Please check the url and try again."))}},O=document.createElement("div");O.className="create-link-menu-footer";let R=new DocumentFragment;R.append(document.createTextNode(s(Z())));let X=document.createElement("a");X.innerText=s(y()),X.href="#",X.addEventListener("click",P),R.append(X),O.append(R),j.footer=O;let z=document.createElement("div");z.className="opensea-embed-footer";let H=new DocumentFragment,Y=document.createElement("b");Y.textContent="Tip: ",H.append(Y),H.append(document.createTextNode("You can also "));let F=document.createElement("a");F.innerText="embed your OpenSea NFT",F.href="#",F.addEventListener("click",P),H.append(F),H.append(document.createTextNode(" to give your readers a visual preview.")),z.append(H),j.openseaEmbedFooter=z,(0,p.cS)(j)}},"link")}},57796:function(e,t,n){n.d(t,{d:()=>I});var i=n(16584),r=n(30396),o=n(31131),a=n(666),l=n(50137),d=n(1467),s=n(347),c=n(92291),u=n(77338),h=n(5952),p=n(6246),g=n(25991),m=n(16451),v=n(76721),A=n(48980),f=n(7882),C=n(98750),w=n(19081),b=n(58175),k=n(55722),Z=n(15503),y=n(65575),E=n(63651);let B="note-Biuyq7";function I(e){let{commentId:t}=e,{isLoading:n,error:r,result:o}=(0,f.ib)({pathname:"/api/v1/reader/comment/".concat(t),auto:!0,deps:[t]});return r instanceof A.kp?(0,i.tZ)(i.HY,{children:r.getMessage()}):!o||n?(0,i.tZ)(S,{}):(0,i.tZ)(T,{feedItem:o.item})}function T(e){var t,n,p,A,f;let{feedItem:y}=e,{comment:I,parentComments:T}=y,{truncatedBodyJson:S,isTruncated:_}=(0,v.Z)(I),N=T[T.length-1],M=null===(t=I.attachments)||void 0===t?void 0:t.find(e=>"image"!==e.type),D=null===(n=I.attachments)||void 0===n?void 0:n.filter(e=>"image"===e.type),L=(0,r.sO)(null);return(0,C.UM)(L,()=>(0,Z.zi)(y,"post-embed",{extraEventProps:{isTruncated:_}}),{threshold:.2}),(0,i.tZ)(w.tu,{justifyContent:"center",alignItems:"center",paddingX:20,className:"container-g1JaM7",children:(0,i.tZ)(s.h,{children:(0,i.BX)(w.hs,{as:"a",target:"_blank",href:(0,E.Sgq)(I),gap:12,border:"detail",bg:"primary",radius:"md",padding:{mobile:16,desktop:20},style:{textDecoration:"none",width:"560px",maxWidth:"100%"},className:B,ref:L,children:[(0,i.tZ)(w.hs,{flex:"auto",children:(0,i.tZ)(m.Zb,{user:I})}),(0,i.BX)(w.tu,{minWidth:0,gap:8,flex:"grow",children:[(0,i.BX)(w.tu,{minWidth:0,flex:"grow",children:[(0,i.BX)(g.KF,{children:[(0,i.tZ)(b.xv,{color:"primary",as:"span",weight:"semibold",children:I.name}),(0,i.tZ)(k.o,{tier:I.user_bestseller_tier}),(0,i.tZ)(m.Ku,{timestamp:I.date})]}),N&&(0,i.BX)(b.xv.B5,{color:"secondary",children:["Replying to ",N.name]}),(0,i.BX)(w.tu,{gap:12,flex:"grow",children:[(0,i.tZ)(m.sP,{children:S&&(0,i.tZ)(u.x,{content:S,attachedLinks:(0,h.Bk)(I)})}),(0,i.tZ)(c.yd,{attachments:M?[M]:D||[],readOnly:!0,onAttachmentClick:function(){let{commentId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Z.rw)(y,"post-embed","attachment",{extraEventProps:{commentId:e}})},item:y,utm_content:y.entity_key})]})]}),(0,i.BX)(w.hs,{justifyContent:"space-between",alignItems:"center",children:[(0,i.tZ)(x,{icon:(0,i.tZ)(a.Z,{height:16,fill:"none",strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!==(p=I.reaction_count)&&void 0!==p?p:0}),(0,i.tZ)(x,{icon:(0,i.tZ)(d.Z,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!==(A=I.children_count)&&void 0!==A?A:0}),(0,i.tZ)(x,{icon:(0,i.tZ)(l.Z,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!==(f=I.restacks)&&void 0!==f?f:0}),(0,i.tZ)(x,{icon:(0,i.tZ)(o.Z,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:0})]})]})]})})})}function x(e){let{icon:t,count:n}=e;return(0,i.BX)(w.hs,{gap:8,paddingTop:6,flex:"grow",alignItems:"center",children:[t,(0,i.tZ)(b.xv.Digit,{color:"secondary",children:n>0&&(0,p.u)(n)})]})}function S(){return(0,i.tZ)(s.h,{children:(0,i.tZ)(w.tu,{justifyContent:"center",alignItems:"center",paddingX:20,style:{margin:"20px 0"},"data-component-name":"CommentViewPlaceholder",children:(0,i.BX)(w.hs,{gap:12,border:"detail",bg:"primary",radius:"md",padding:{mobile:16,desktop:20},style:{textDecoration:"none",width:"560px",maxWidth:"100%"},flex:"grow",className:B,children:[(0,i.tZ)(y.Vm,{type:"circle",size:48}),(0,i.BX)(w.tu,{gap:12,flex:"grow",children:[(0,i.tZ)(y.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,i.tZ)(y.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,i.tZ)(y.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,i.tZ)(y.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")})]})]})})})}},8072:function(e,t,n){n.d(t,{C:()=>a});var i=n(16584),r=n(55679),o=n(89716);let a=e=>{let{node:t,editable:n,staticData:a}=e;return(0,i.tZ)(r.T5,{children:(0,i.tZ)(o.k,{node:t,editable:n,staticData:a})})}},81355:function(e,t,n){n.d(t,{e:()=>o});var i=n(16584);n(30396);var r=n(52720);let o=e=>{let{children:t}=e;return(0,i.tZ)(r.Z,{version:3,config:{loader:{load:["ui/safe"]}},children:t})}},93903:function(e,t,n){n.d(t,{Z:()=>i});function i(e){return(e||"").replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))}},94826:function(e,t,n){n.d(t,{I:()=>l,P:()=>a});var i=n(92007),r=n(68303),o=n(80870);function a(e){let{paragraph:t,ordered_list:n,bullet_list:i,blockquote:o,orderedList:a,bulletList:l}=e.schema.nodes;return(0,r.$9)(e,[t,n,i,o,a,l])}function l(e,t){if(!a(e))return!1;let{schema:n}=e,r=n.nodes.footnote.create({number:1},n.nodes.paragraph.create()),l=n.nodes.footnoteAnchor.create({number:1}),d=e.tr,s=(0,o.dG)(d,n);d.replaceWith(s,s,r),d.replaceSelectionWith(l),(0,o.A0)(d,n);try{d.setSelection(i.Bs.create(d.doc,s+2,s+2)).scrollIntoView()}catch(e){return console.error("could not set footnote text selection"),!1}return t&&t(d),!0}},59383:function(e,t,n){n.d(t,{M:()=>a});var i=n(88897),r=n(68303);let o=e=>{let{label:t,mediaUploadId:n,duration:i}=e;return(e,o)=>(o&&o((0,r.o4)(e,e.schema.nodes.audio.create({label:t,mediaUploadId:n,duration:i,isEditorNode:!0}))),!0)},a=i.hj.create({name:"audioInsert",addCommands:()=>({insertAudio:e=>{let{label:t,mediaUploadId:n,duration:i}=e;return e=>{let{state:r,dispatch:a}=e;return o({label:t,mediaUploadId:n,duration:i})(r,a)}}})})},5660:function(e,t,n){n.d(t,{z:()=>s});var i=n(88897),r=n(86551),o=n(63651),a=n(47929),l=n(68303),d=n(39947);let s=i.hj.create({name:"buttonCustom",addCommands:()=>({insertSubscribeButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.tX)(e)(n,i)},insertSubscribeButtonWithPreamble:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.Ui)(e)(n,i)},insertCaptionedShareButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.T6)(e)(n,i)},insertSpecialOfferButton:e=>{let{couponPub:t,scrollParent:n,parentClass:i,get_coupons:o,insert_coupon:a,SelectField:l,openPrompt:d,closePrompt:s,getNetworkErrorMessage:c}=e;return e=>{let{state:u,dispatch:h,view:p}=e;return(0,r.pw)({couponPub:t,scrollParent:n,parentClass:i,get_coupons:o,insert_coupon:a,SelectField:l,openPrompt:d,closePrompt:s,getNetworkErrorMessage:c})(u,h,p)}},insertGroupSubscriptionButton:e=>{let{publication:t}=e;return e=>{let{state:n,dispatch:i}=e;return(0,r.Fp)({publication:t})(n,i)}},insertDonateButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.U0)(e)(n,i)},insertReferralButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.Lb)(e)(n,i)},insertCaptionedWriterReferralButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.HQ)({writerReferralCode:e.writerReferralCode,publication:e.publication,postId:e.postId})(n,i)},insertGiftButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.aZ)(e)(n,i)},insertCommentsButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.sj)(e)(n,i)},insertSurveyButton:(e,t,n)=>i=>{let{state:o,dispatch:a}=i;return(0,r.F2)(e,t,n)(o,a)},insertSharePubButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.S_)(e)(n,i)},insertSharePostButton:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.BN)(e)(n,i)},insertCustomButton:e=>{let{scrollParent:t,parentClass:n,TextField:i,openPrompt:o,publication:a}=e;return e=>{let{state:l,dispatch:d,view:s}=e;return(0,r.op)({scrollParent:t,parentClass:n,TextField:i,openPrompt:o,publication:a})(l,d,s)}},insertVisitThreadButton:e=>t=>{let n,i,{state:r,dispatch:s}=t;return n=r,i=s,n.schema.nodes.communityChat?!!(0,d.o)(n,n.schema.nodes.communityChat)&&(i&&i((0,l.o4)(n,n.schema.nodes.communityChat.create({url:(0,o.ZVW)({pubKey:e.subdomain,utm_source:a.b3.chatEmbed}),subdomain:e.subdomain,pub:{id:e.id,name:e.name,author_name:e.author_name,author_photo_url:e.author_photo_url}}))),!0):(console.error("insertCommunityChatEmbed: schema is missing communityChat node"),!1)}})})},98616:function(e,t,n){n.d(t,{l:()=>l});var i=n(88897),r=n(60308),o=n(68303);let a=e=>(t,n)=>{let i=(0,r.SVA)(e);return n&&n((0,o.o4)(t,t.schema.nodes.install_substack_app.create({logo_url:e.logo_url||"".concat(i,"/img/substack.png"),author_name:e.author_name,publication_subdomain:e.subdomain,publication_name:e.name,language:e.language}))),!0},l=i.hj.create({name:"embedContentCustom",addCommands:()=>({insertInstallSubstackAppEmbed:e=>t=>{let{state:n,dispatch:i}=t;return a(e)(n,i)}})})},82708:function(e,t,n){n.d(t,{k:()=>p});var i=n(88897),r=n(92007),o=n(14017),a=n(98914);let l=e=>{e.preventDefault()},d=(e,t,n)=>{let i=e.dom;if(i){let e=i.querySelector('[data-attrs*=\'{"nodeId":"'.concat(t,"\"']"));e&&(n?e.addEventListener("dragstart",l):e.removeEventListener("dragstart",l))}},s=(e,t)=>(n,i,r)=>{if(i){let o,a;if(n.doc.descendants((t,n)=>{if(t.attrs.nodeId===e.nodeId)return o=t,a=n,!1}),o&&void 0!==a){let l=n.tr;l.setNodeMarkup(a,o.type,Object.assign({},o.attrs,e)),d(r,e.nodeId,t),i(l)}}return!0},c=e=>{let{url:t}=e;return(e,n)=>{if(n){let i=e.tr,o=e.selection.from,a=o+t.length;i.deleteSelection(),i.insertText(t,o),i.addMark(o,a+1,e.schema.marks.link.create({text:t,href:t})),i.setSelection(r.Bs.create(i.doc,o,a+1)),n(i)}return!0}},u=e=>{let{url:t}=e;return(e,n,i)=>{if(n){let[,r]=(0,o.WB)(t,e.schema,{forceAllowOwnPub:!0});if(!r)return!0;(0,o.rN)(r,i,e.schema,{forceAllowOwnPub:!0}).catch(e=>alert((0,a.zx)(e))),n(e.tr.replaceSelectionWith(r))}return!0}},h=()=>(e,t)=>(t&&t(e.tr.deleteSelection()),!0),p=i.hj.create({name:"digestPostEmbedExtension",addCommands:()=>({updateDigestPostEmbed:(e,t)=>n=>{let{state:i,dispatch:r,view:o}=n;return s(e,!!t)(i,r,o)},convertDigestPostEmbedToLink:e=>t=>{let{state:n,dispatch:i}=t;return c(e)(n,i)},convertDigestPostEmbedToEmbeddedPost:e=>t=>{let{state:n,dispatch:i,view:r}=t;return u(e)(n,i,r)},deleteDigestPostEmbed:()=>e=>{let{state:t,dispatch:n}=e;return h()(t,n)}})})},73984:function(e,t,n){n.d(t,{w:()=>o});var i=n(88897),r=n(94826);let o=i.hj.create({name:"footnoteCustom",addCommands:()=>({insertFootnote:()=>e=>{let{state:t,dispatch:n}=e;return(0,r.I)(t,n)}})})},11105:function(e,t,n){n.d(t,{y:()=>h});var i=n(88897),r=n(11239),o=n(44369),a=n(68303);let l=e=>{let{gallery:t}=e;return(e,n)=>(n&&n((0,a.o4)(e,e.schema.nodes.imageGallery.create({gallery:t,isEditorNode:!0}))),!0)},d=e=>{let{gallery:t}=e;return(e,n)=>(n&&n((0,a.Hs)(e,e.schema.nodes.imageGallery.create({gallery:t,isEditorNode:!0}))),!0)},s=e=>{let{url:t,caption:n,width:i,height:r}=e;return(e,o)=>{if(!o)return!1;let l=e.schema;if(!l.nodes.image2||!l.nodes.captionedImage||!l.nodes.caption)return!1;let d=l.nodes.image2.create({src:t,imageSize:"normal",height:null!=r?r:512,width:null!=i?i:512});if(n){let t=l.nodes.caption.create(null,l.text(n)),i=l.nodes.captionedImage.create({},[d,t]);o((0,a.o4)(e,i))}else o((0,a.o4)(e,d));return!0}},c=e=>{let{url:t,width:n,height:i}=e;return(e,r)=>{let o=e.schema,l={alt:"TradingView chart",src:t,height:i,width:n,type:"image/jpg"};if(!o.nodes.image2||!o.nodes.captionedImage||!o.nodes.caption||!o.marks.link)return!1;let d=o.text("Created with "),s=o.text("TradingView",[o.marks.link.create({title:"TradingView",href:"https://tradingview.com"})]),c=o.nodes.captionedImage.create(l,[o.nodes.image2.create(l),o.nodes.caption.create(null,[d,s])]);return r&&r((0,a.o4)(e,c)),!0}},u=e=>{let{url:t,width:n,height:i,description:r,userName:o,userHref:l}=e;return(e,d)=>{let s=e.schema,c={alt:r,src:t,height:i,width:n,type:"image/jpg"},u=s.text("Photo by "),h=s.text(o,[s.marks.link.create({title:o,href:l})]),p=s.text(" on "),g=s.text("Unsplash",[s.marks.link.create({title:"Unsplash",href:"https://unsplash.com"})]),m=s.nodes.captionedImage.create(c,[s.nodes.image2.create(c),s.nodes.caption.create(null,[u,h,p,g])]);return d&&d((0,a.o4)(e,m)),!0}},h=i.hj.create({name:"imageInsert",addCommands:()=>({insertImage:e=>t=>{let{state:n,dispatch:i,view:a}=t;return n.schema.nodes.image2?(i&&(function(e,t){let{insertImageFile:n}=t,i=document.createElement("input");return i.type="file",i.accept="image/*,.heic,.heif",i.style.cssText="display:none;",i.onchange=()=>{i.files&&i.files.length>0&&i.files[0]&&n(i.files[0]),i.value=""},i.className="insert-image-menu-item-input",document.body.appendChild(i),new o.$4({title:"Insert image",icon:r.aL,active:()=>!1,enable:t=>(0,o.om)(t,e),run(){setTimeout(()=>{i.click()},0)}},"image")})(n.schema.nodes.image2,{insertImageFile:e}).spec.run(n,i,a,void 0),!0):(console.error("image2 node not enabled"),!1)},insertUnsplashImage:e=>t=>{let{state:n,dispatch:i}=t;return u(e)(n,i)},insertImageGallery:e=>t=>{let{state:n,dispatch:i}=t;return l(e)(n,i)},updateImageGallery:e=>t=>{let{state:n,dispatch:i}=t;return d(e)(n,i)},insertImageFromUrl:e=>{let{url:t,caption:n,width:i,height:r}=e;return e=>{let{state:o,dispatch:a}=e;return s({url:t,caption:n,width:i,height:r})(o,a)}},insertTradingViewImageFromUrl:e=>{let{url:t,width:n,height:i}=e;return e=>{let{state:r,dispatch:o}=e;return c({url:t,width:n,height:i})(r,o)}}})})},10218:function(e,t,n){n.d(t,{_:()=>l});var i=n(88897),r=n(41128),o=n(68303);let a=e=>{let{expression:t}=e;return(e,n)=>{let i=(0,r.Ox)();return n&&n((0,o.o4)(e,e.schema.nodes.latex_block.create({persistentExpression:t,id:i}))),!0}},l=i.hj.create({name:"latexInsert",addCommands:()=>({insertLatex:e=>{let{expression:t}=e;return e=>{let{state:n,dispatch:i}=e;return a({expression:t})(n,i)}}})})},81519:function(e,t,n){n.d(t,{r:()=>d});var i=n(88897),r=n(60308),o=n(63651),a=n(68303);let l=e=>{let{publication:t,meetingsConfig:n,usePublicationName:i}=e;return(e,l)=>{let d=(0,r.SMH)({id:n.user_id,photo_url:n.user_profile_photo_url});return i&&t.logo_url&&(d=(0,o.zF4)(t.logo_url,112)),l&&l((0,a.o4)(e,e.schema.nodes.meeting.create({name:i?t.name:n.user_name,avatarUrl:d,url:(0,o.szv)(t,{addBase:!0,params:{source:"embed"}}),isEditorNode:!0}))),!0}},d=i.hj.create({name:"meetingInsert",addCommands:()=>({insertMeeting:e=>{let{publication:t,meetingsConfig:n,usePublicationName:i}=e;return e=>{let{state:r,dispatch:o}=e;return l({publication:t,meetingsConfig:n,usePublicationName:i})(r,o)}}})})},59662:function(e,t,n){n.d(t,{f:()=>o});var i=n(88897),r=n(57208);let o=i.hj.create({name:"paywallCustom",addCommands:()=>({addPaywall:e=>t=>{let{state:n,dispatch:i}=t;return(0,r.f2)(e)(n,i)}})})},75837:function(e,t,n){n.d(t,{q:()=>a});var i=n(88897),r=n(68303);let o=e=>{let{id:t}=e;return(e,n)=>(n&&n((0,r.o4)(e,e.schema.nodes.poll.create({id:t}))),!0)},a=i.hj.create({name:"pollInsert",addCommands:()=>({insertPoll:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:i}=e;return o({id:t})(n,i)}}})})},29961:function(e,t,n){n.d(t,{R:()=>a});var i=n(88897),r=n(68303);let o=e=>{let{id:t}=e;return(e,n)=>(n&&n((0,r.o4)(e,e.schema.nodes.recipe.create({id:t}))),!0)},a=i.hj.create({name:"recipeInsert",addCommands:()=>({insertRecipe:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:i}=e;return o({id:t})(n,i)}}})})},80334:function(e,t,n){n.d(t,{a:()=>a});var i=n(88897),r=n(68303);let o=e=>{let{id:t}=e;return(e,n)=>{var i,o;return n&&(null==e?void 0:null===(o=e.schema)||void 0===o?void 0:null===(i=o.nodes)||void 0===i?void 0:i.sponsorshipCampaign)&&n((0,r.o4)(e,e.schema.nodes.sponsorshipCampaign.create({id:t}))),!0}},a=i.hj.create({name:"sponsorshipCampaignInsert",addCommands:()=>({insertSponsorshipCampaign:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:i}=e;return o({id:t})(n,i)}}})})},75970:function(e,t,n){n.d(t,{f:()=>a});var i=n(88897),r=n(68303);let o=e=>{let{mediaUploadId:t}=e;return(e,n)=>(n&&n((0,r.o4)(e,e.schema.nodes.video.create({mediaUploadId:t,isEditorNode:!0}))),!0)},a=i.hj.create({name:"videoInsert",addCommands:()=>({insertVideo:e=>{let{mediaUploadId:t}=e;return e=>{let{state:n,dispatch:i}=e;return o({mediaUploadId:t})(n,i)}}})})},64314:function(e,t,n){n.d(t,{N:()=>i});let i='!function(){"use strict";window.addEventListener("message",(function(e){if(void 0!==e.data["datawrapper-height"]){var t=document.querySelectorAll("iframe");for(var a in e.data["datawrapper-height"])for(var r=0;r<t.length;r++){if(t[r].contentWindow===e.source)t[r].style.height=e.data["datawrapper-height"][a]+"px"}}}))}();'},57125:function(e,t,n){n.d(t,{Op:()=>o});var i=n(78718),r=n.n(i);let o=e=>{let{attrs:t}=e,n={};for(let[e,i]of Object.entries(t))n[e]=r()(i,["default"]);return n}},99741:function(e,t,n){n.d(t,{$:()=>r,b:()=>o});var i=n(27412);let r={attrs:{},inline:!1,group:"block",atom:!0,selectable:!0,isolating:!1,defining:!1,draggable:!0,parseDOM:[{tag:".paywall-jump"}],toDOM:()=>["div",{class:"paywall-jump","data-component-name":"PaywallToDOM"}]};class o{constructor(){var e,t,n;(0,i._)(this,"dom",void 0);let r="undefined"!=typeof window&&null!==(n=null===(t=window._preloads)||void 0===t?void 0:null===(e=t.pub)||void 0===e?void 0:e.language)&&void 0!==n?n:"en",{iString:o}=I18N.i(r),a=document.createElement("div");a.className="paywall-editor",a.appendChild(document.createElement("hr"));let l=document.createElement("div");l.className="paywall-editor-pill";let d=document.createElement("span");d.innerText=o("Paid content below this line");let s=document.createElement("div");s.className="paywall-editor-pill-icon-container",s.innerHTML='\n<svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8.75439 4.33398V14.834" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3.50439 9.58398L8.7544 14.834L14.0044 9.58398" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',l.appendChild(d),l.appendChild(s),a.appendChild(l),a.appendChild(document.createElement("hr")),this.dom=a}}},3185:function(e,t,n){n.d(t,{Z:()=>o});var i=n(80508),r=n(54809);let o=new i.ZP({actionButtonAttr:"raw_href",substackType:"pdf",mimeTypesToSignature:r.Lz,actionButtonText:"Download"})},19520:function(e,t,n){n.d(t,{s:()=>r});var i=n(68833);function r(e){let{msg:t,node:n,err:r,group:a}=e;(0,i.j)(i.FP.EDITOR_NODE_RENDER_FAILED,{nodeType:n.type.name,nodeAttrs:n.attrs,errMsg:null==r?void 0:r.message});let l=null!=t?t:"Something went wrong";return"block"===a?function(e){let{msg:t}=e,n=document.createElement("div");n.className="blockContainer-sGUymL";let i=document.createElement("div");i.textContent=t,i.className="blockTitle-p5J1JM";let r=document.createElement("div");r.textContent="Try refreshing the page or try again later.",r.className="blockSubTitle-b49Pjc";let a=document.createElement("div");return a.className="blockTitleContainer-_ayaxc",a.appendChild(i),a.appendChild(r),n.appendChild(o({size:24})),n.appendChild(a),n}({msg:l}):function(e){let{msg:t}=e,n=document.createElement("span");n.className="inlineContainer-pdOZS_";let i=document.createElement("span");return i.className="inlineText-mmZJjI",i.textContent=t,n.appendChild(o({size:10})),n.appendChild(i),n}({msg:l})}function o(e){let{size:t}=e,n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg");i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(t)),i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("fill","none"),i.setAttribute("stroke","#363737"),i.setAttribute("stroke-width","2"),i.setAttribute("stroke-linecap","round"),i.setAttribute("stroke-linejoin","round");let r=document.createElementNS(n,"circle");r.setAttribute("d","M12 8V12M12 16H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z"),r.setAttribute("cx","12"),r.setAttribute("cy","12"),r.setAttribute("r","10");let o=document.createElementNS(n,"line");o.setAttribute("x1","12"),o.setAttribute("x2","12"),o.setAttribute("y1","8"),o.setAttribute("y2","12");let a=document.createElementNS(n,"line");return a.setAttribute("x1","12"),a.setAttribute("x2","12.01"),a.setAttribute("y1","16"),a.setAttribute("y2","16"),i.appendChild(r),i.appendChild(o),i.appendChild(a),i}},15233:function(e,t,n){n.d(t,{L:()=>r});var i=n(60308);let r=function(e,t,n,r){let{targetUrl:o}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=["td",{class:"audio-details","data-component-name":"AudioEmbedStatic"},["p",{class:"title"},t],["p",{class:"subtitle"},n]];r&&(a=[...a,["p",{class:"metadata"},r]]);let l=["table",{class:"audio-embed-static",cellspacing:"12","data-component-name":"AudioEmbedStaticTable"},["tr",{},["td",{class:"thumbnail-container"},["div",{class:"play-container"},["img",{class:"play",src:(0,i.zF4)("/img/thumbnail-play.png",72),height:36,width:36}]],["img",{class:"thumbnail",src:(0,i.zF4)(e,160),height:80,width:80}]],a]];return o?["a",{class:"audio-embed-static-outer",href:o,target:"_blank","data-component-name":"AudioEmbedStaticLink"},l]:l}},62645:function(e,t,n){n.d(t,{J:()=>i});let i={parseDOM:[{tag:"del"},{tag:"s"}],toDOM:()=>["s",0]}},42034:function(e,t,n){n.d(t,{l:()=>i});let i={parseDOM:[{tag:"sub"}],toDOM:()=>["sub",0]}},41505:function(e,t,n){n.d(t,{O:()=>i});let i={parseDOM:[{tag:"sup"}],toDOM:()=>["sup",0]}},39947:function(e,t,n){n.d(t,{o:()=>i});let i=(e,t)=>{if(!t)return!1;let n=e.selection.$from;for(let e=n.depth;e>=0;e--){let i=n.index(e);if(n.node(e).canReplaceWith(i,i,t))return!0}return!1}},30548:function(e,t,n){n.d(t,{S:()=>o});var i=n(88897);let r=e=>{let{attrs:t}=e,n={};if(!t)return n;for(let[e,r]of Object.entries(t)){var i;n[e]={default:null!==(i=r.default)&&void 0!==i?i:null,keepOnSplit:!1}}return n},o=e=>{let{name:t,nodeSpec:n,addNodeView:o,addCommands:a}=e;return i.NB.create({name:t,content:n.content,marks:n.marks,group:n.group,inline:n.inline,atom:n.atom,selectable:n.selectable,draggable:n.draggable,code:n.code,whitespace:n.whitespace,defining:n.defining,isolating:n.isolating,addNodeView:o,addCommands:a,renderHTML(e){return this.options.isStatic&&n.toDOMStatic?n.toDOMStatic(e.node):n.toDOM(e.node)},parseHTML:()=>n.parseDOM,addAttributes:()=>r({attrs:n.attrs})})}},88956:function(e,t,n){n.d(t,{Y:()=>function e(t,n){if(!t||((0,i.f5)(t)||(0,i.PH)(t))&&!n(t))return null;if((0,i.f5)(t)&&t.content&&t.content.length>0){if(t.content=t.content.filter(t=>e(t,n)),0===t.content.length)return null}else if((0,i.PH)(t)){let r=(0,i.yX)({fragment:t.content});if(r.length>0){let o=r.filter(t=>e(t,n));if(0===o.length)return null;(0,i.uR)({fragment:t.content,content:o})}}return t}});var i=n(62092)},22365:function(e,t,n){n.d(t,{e:()=>o});var i=n(88897),r=n(76405);let o=e=>{let{doc:t,extensions:n,customDocument:o}=e,a=(0,i.J1)(n),l=r.NB.fromJSON(a,t),d=document.createElement("div");return r.PW.fromSchema(a).serializeFragment(l.content,{document:o},d),d.innerHTML}},30837:function(e,t,n){n.d(t,{Y:()=>i});let i=e=>{try{if("string"!=typeof e){let t=e.getAttribute("data-attrs");if(t)return JSON.parse(t)}}catch(e){}return!1}},12076:function(e,t,n){n.d(t,{Z:()=>o});var i=n(80508),r=n(54809);let o=new i.ZP({actionButtonAttr:null,substackType:"xlsx",mimeTypesToSignature:r.Z$,actionButtonText:null})},81481:function(){},21361:function(){},53480:function(){},31337:function(){},17879:function(){},31384:function(){},24877:function(){}}]);