"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1516"],{82021:function(e,t,n){n.d(t,{Z:()=>i});let i={containerElevated:"containerElevated-R4qz8n",containerInline:"containerInline-L_YjpZ",videoTrimmerWrapper:"videoTrimmerWrapper-m8Tcry",videoTrimmerSlider:"videoTrimmerSlider-RWqSeS",videoTrimmerSliderVisible:"videoTrimmerSliderVisible-kDKdSk",durationContainer:"durationContainer-h05YYe",captionsAvailable:"captionsAvailable-C8g24C",captionsNotAvailable:"captionsNotAvailable-gazpbB"}},29439:function(e,t,n){n.d(t,{Z:()=>i});let i={link:"link-LIBpto"}},41302:function(e,t,n){n.d(t,{Z:()=>i});let i={reset:"reset-kAomxn","color-primary":"color-primary-S_7X35",colorPrimary:"color-primary-S_7X35","color-secondary":"color-secondary-vHUBzS",colorSecondary:"color-secondary-vHUBzS",overscrollTransition:"overscrollTransition-h5GdsE"}},87089:function(e,t,n){n.d(t,{Z:()=>i});let i={pill:"pill-KqexDs",pillSelected:"pillSelected-ngbq5t"}},73015:function(e,t,n){n.d(t,{Z:()=>i});let i={controlsCentered:"controlsCentered-TEIxxh",track:"track-pNMNGn"}},66861:function(e,t,n){n.d(t,{Z:()=>i});let i={playButton:"playButton-VfYy0S",playButtonIcon:"playButtonIcon-iVd8T6",videoIcon:"videoIcon-pEKkgy",pauseIconBar:"pauseIconBar-fixY8H",pauseIcon:"pauseIcon-bgib4b",videoPauseIconBar:"videoPauseIconBar-boRJoC",audioWaveform:"audioWaveform-K3CCe7",voiceAmplitude:"voiceAmplitude-Hp8N5A"}},73798:function(e,t,n){n.d(t,{Z:()=>i});let i={bottomControlsContainer:"bottomControlsContainer-kx5Iet",bottomInnerControlsContainer:"bottomInnerControlsContainer-nA_qdP",backDrop:"backDrop-OMzeTr",captionsContainer:"captionsContainer-sSAb5L",centerControlsContainer:"centerControlsContainer-CKUlUi",settingsControlsContainer:"settingsControlsContainer-V3A25d",settingsControlsBox:"settingsControlsBox-svKH2p",topOverlaysContainer:"topOverlaysContainer-xo1FwD",bottomOverControlsContainer:"bottomOverControlsContainer-FnhEyj",castStatus:"castStatus-Gq0e5M",spinner:"spinner-iKxsfj"}},95738:function(e,t,n){n.d(t,{Z:()=>i});let i={videoPlayer:"videoPlayer-AdXrEr",videoPlayerContainer:"videoPlayerContainer-rPl28G",tagContainer:"tagContainer-S_oHWt"}},51938:function(e,t,n){n.d(t,{V:()=>s});var i=n(16584),r=n(30396),l=n(94184),a=n.n(l),o=n(24202),d=n(19081),c=n(54796);function s(e){let{className:t,assets:n,readOnly:l,onClick:s,maxHeight:m=420,children:p}=e,v=(0,o.dz)(n),[h,g]=(0,r.eJ)(null),f=(0,r.sO)(null),Z=(0,o.yU)(f,0),[y,C]=v;if(!y||!C)return null;let b=y.width&&y.height?y.width/y.height:1,w=C.width&&C.height?C.width/C.height:1,_=b+w,k=Z-6,x=Math.min(m,k/_),I=[k*b/_,k*w/_];return(0,i.BX)(d.hs,{ref:f,className:a()(c.Z.imageDiptych,t),gap:6,overflow:"hidden",children:[v.map((e,t)=>(0,i.tZ)(u,{asset:e.src,explicit:e.explicit,readOnly:l,width:I[t],height:x,index:t,onClick:l?void 0:n=>{n.preventDefault(),s&&s({attachmentId:e.id,attachmentType:"image"}),g({index:t})},children:p},e.src)),!l&&(0,i.tZ)(o.$9,{assets:v,imageViewer:h,setImageViewer:g,readOnly:l})]})}function u(e){let{asset:t,explicit:n,onClick:r,readOnly:l,width:d=500,height:s,children:u,index:m}=e;return(0,i.tZ)(o.Z4,{asset:t,explicit:n,onClick:r,readOnly:l,width:d,height:s,className:a()(c.Z.diptychImage,c.Z["index-".concat(m+1)]),children:u})}},31122:function(e,t,n){n.d(t,{Y:()=>E});var i=n(7409),r=n(16584),l=n(98661),a=n(94184),o=n.n(a),d=n(23260),c=n(45790),s=n(29032),u=n(47348),m=n(60807),p=n(69181),v=n(98914),h=n(98422),g=n(71068),f=n(19081),Z=n(58175),y=n(75822),C=n(92039),b=n(18618),w=n(74571),_=n(60651),k=n(63651),x=n(47929);let I={backDrop:"backDrop-FxvQIL",liveStreamTitle:"liveStreamTitle-xahUfX",liveStreamContainer:"liveStreamContainer-NKIioJ",viewerCountContainer:"viewerCountContainer-uxBWdH",endedMessage:"endedMessage-Z3p5RL",endedMessageContent:"endedMessageContent-d_enFy",liveStreamExplicitLabel:"liveStreamExplicitLabel-roJA52",liveStreamThumbnail:"liveStreamThumbnail-uER3zj",explicit:"explicit-tw5du6",liveStreamVideoPlayer:"liveStreamVideoPlayer-tm5aYT"},E=e=>{var t,n;let{activeLiveStream:a,fromPub:E=!1,listenForViewerCount:B=!0,isFeedItem:S=!1,videoPlayerProps:N,startMuted:L=!1}=e,P=(0,l.useRef)(null),T=(0,l.useRef)(null),[M,D]=(0,l.useState)(!S);(0,y.KS)({videoPlayerRef:P,showPaywall:!1,disable:M}),(0,l.useEffect)(()=>{setTimeout(()=>{D(!1)},500)},[]),(0,l.useEffect)(()=>{var e;let t=null===(e=P.current)||void 0===e?void 0:e.player,n=()=>{t&&t.duration&&t.duration>1&&!isNaN(t.duration)&&(t.currentTime=t.duration-1),t&&(t.playbackRate=1)};return t&&t.addEventListener("play",n),()=>{null==t||t.removeEventListener("play",n)}},[P.current]);let X=(0,w.Ml)(T),[z,R]=(0,l.useState)(a.liveStreamInformation.currentViewerCount),[O,A]=(0,l.useState)(!1),{isMobile:F}=(0,h.v9)(),U=(0,m.Fl)().autoPlayVideo,[V,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e;return V&&(e=setTimeout(()=>{j(!1)},4e3)),()=>{clearTimeout(e)}},[V]);let q=(0,C.rG)();(0,l.useEffect)(()=>{if(B)return null==q?void 0:q.listen({["live-stream:".concat(a.liveStream.id)]:e=>{var t,n;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:viewer-count-updated"&&R(i.message.current_viewer_count),(null==i?void 0:null===(n=i.message)||void 0===n?void 0:n.type)==="live-stream:ended"&&A(!0)}})},[q,B]);let H=a.liveStreamInformation.isExplicit||"active"!==a.liveStream.status;return O?null:(0,r.BX)(f.hs,{position:"relative",overflow:"hidden",radius:"sm",ref:T,className:I.liveStreamContainer,onClick:e=>{if(e.stopPropagation(),"active"===a.liveStream.status){let e=(0,v.K1)()?(0,k.bHR)({liveStreamId:a.liveStream.id,utm_campaign:x.VX.substackProfile,params:(0,i._)({utm_medium:x.lP.web},E&&{fromPub:E})}):(0,k.UDR)({noBase:!0,liveStreamId:a.liveStream.id,params:(0,i._)({utm_campaign:x.VX.substackProfile,utm_medium:x.lP.web},E&&{fromPub:E})});(0,v.K1)()?document.location.href=e:(0,v.uX)(e)}else j(!0)},cursor:"pointer",children:[H?(0,r.BX)(r.HY,{children:[a.liveStreamInformation.isExplicit&&(0,r.tZ)(g.xu,{position:"absolute",inset:0,zIndex:1,children:(0,r.BX)(f.tu,{className:I.liveStreamExplicitLabel,alignItems:"center",justifyContent:"center",gap:4,children:[(0,r.tZ)(d.Z,{color:"white",size:24}),(0,r.tZ)(Z.xv.B5,{color:"white",textAlign:"center",translated:!0,children:"May contain sensitive content"})]})}),(0,r.tZ)("img",{className:o()(I.liveStreamThumbnail,a.liveStreamInformation.isExplicit&&I.explicit),src:a.liveStreamInformation.desktopThumbnailGifUrl,alt:"Live stream thumbnail"})]}):(0,r.tZ)(u.j,(0,i._)({className:I.liveStreamVideoPlayer,ref:P,liveStreamId:a.liveStream.id,noKeyboardShortcuts:!0,noControls:!0,autoPlay:U,pub:a.pub||null,mediaUpload:{id:"ls-".concat(a.liveStream.id),width:1920,height:1080},noJoin:!0,thumbnailUrl:a.liveStreamInformation.desktopThumbnailPhotoUrl,isLive:!0,renderPlayButton:S?()=>(0,r.tZ)(b.fI,{isPlaying:!1,size:F?40:56}):void 0,startMuted:L},N),!0),"active"===a.liveStream.status?(0,r.BX)(f.gq,{gap:8,className:I.viewerCountContainer,children:[(0,r.tZ)(p.Qn,{}),(0,r.tZ)(p.C,{viewerCount:z})]}):(0,r.tZ)(f.gq,{className:I.viewerCountContainer,children:(0,r.tZ)(p.j0,{})}),V&&(0,r.tZ)(f.gq,{className:I.endedMessage,children:(0,r.BX)(f.tu,{className:I.endedMessageContent,padding:12,radius:"md",alignItems:"center",justifyContent:"center",gap:4,children:[(0,r.tZ)(c.Z,{size:24,stroke:"white"}),(0,r.tZ)(Z.xv.B3,{color:"white",children:"Live video has ended"})]})}),(0,r.tZ)("div",{className:I.backDrop}),(0,r.BX)(f.gq,{position:"absolute",style:{left:0,right:0,bottom:0,width:"100%",pointerEvents:"none"},direction:"row-reverse",alignItems:"end",children:[!H&&(0,r.tZ)(g.xu,{padding:12,onClick:e=>{e.stopPropagation()},style:{pointerEvents:"auto"},children:(0,r.tZ)(_.Z,{hideVolumeBar:!0,disableShortcuts:!1,disableTooltips:!1,isFocused:X,mediaRef:P})}),(0,r.tZ)(s.C,{children:(0,r.tZ)(f.tu,{className:I.liveStreamTitle,gap:4*!S,padding:S?12:16,style:{pointerEvents:"none"},children:S?(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv.B3,{weight:"semibold",color:"vibrance-primary",children:a.liveStream.title}),(0,r.tZ)(Z.xv.B4,{color:"vibrance-secondary",children:null===(t=a.pub)||void 0===t?void 0:t.name})]}):(0,r.BX)(r.HY,{children:[(0,r.tZ)(Z.xv.H4,{color:"vibrance-primary",children:a.liveStream.title}),(0,r.tZ)(Z.xv.B3,{color:"vibrance-secondary",children:null===(n=a.pub)||void 0===n?void 0:n.name})]})})})]})]})}},73649:function(e,t,n){n.d(t,{AM:()=>v,RF:()=>h,wb:()=>g});var i=n(16584);n(6400);var r=n(30396),l=n(94184),a=n.n(l),o=n(74691),d=n.n(o),c=n(61649),s=n(19081),u=n(98248),m=n(93370),p=n(33942);let v=e=>{let{videoElement:t,start:n,setStart:l,end:a,setEnd:o,storyboard:d,maxDuration:m,minDuration:v,maxTimelineDuration:h=360,minTimelineDuration:g=360,looping:Z,zoom:y,setZoom:C}=e,[b,w]=(0,r.eJ)(!1),[_,k]=(0,r.eJ)(0),[x,I]=(0,r.eJ)(Math.max(0,n-c.Zl)),[E,B]=(0,r.eJ)(0),[S,N]=(0,r.eJ)(0),L=(0,r.sO)(0),[P,T]=(0,r.eJ)({isDragging:!1,element:void 0});return(0,r.d4)(()=>{let e=()=>{if(t){k(t.duration);let e=[360,t.duration];h&&e.push(h),B(Math.min(...e))}};return t&&t.addEventListener("loadedmetadata",e),(null==t?void 0:t.duration)&&e(),()=>{t&&t.removeEventListener("loadedmetadata",e)}},[h,t]),(0,r.d4)(()=>{let e=()=>{t&&N(t.currentTime)};if(t)return t.addEventListener("timeupdate",e),()=>{t.removeEventListener("timeupdate",e)}},[t]),(0,r.d4)(()=>{if(!b)return;let e=Math.abs(S-L.current);if(L.current=S,e<1){Z&&t&&!P.isDragging&&(S>a||S<n)&&(t.currentTime=n);return}if(!P.isDragging&&(S>E||S<x)){let e=E-x,t=Math.min(S,_-e);I(t),B(t+e)}},[S,b]),(0,r.d4)(()=>{if(!_||P.isDragging)return;if(n>x&&a<E){w(!0);return}let e=a-n,t=Math.min(_,a+e);I(Math.max(0,n-e)),B(t);let i=(0,c.MZ)(e);(!y||i<y)&&C(i),w(!0)},[n,a,_]),(0,r.d4)(()=>{if(!b)return;let e=E-x,t=(0,c.AO)(y),i=isNaN(e)||e<c.Zl?.5:(n-x)/e,r=x+i*e,l=r-i*t,a=r+(1-i)*t,o=l,d=a;l<0?d=Math.min(_,(o=0)+t):a>_&&(o=Math.max(0,(d=_)-t)),(!h||!(d-o>h))&&(!g||!(d-o<g))&&(B(d),I(o))},[y,h,g,_,b]),(0,i.tZ)("div",{className:p.Z.timeline,children:_>0?(0,i.tZ)(f,{startTimeline:x,setStartTimeline:I,endTimeline:E,setEndTimeline:B,startPosition:n,setStartPosition:e=>{if(v&&e+v>=a){l(a-v);return}if(m&&e+m<=a){l(a-m);return}l(e)},endPosition:a,setEndPosition:e=>{if(v&&e-v<=n){o(n+v);return}if(m&&e-m>=n){o(n+m);return}o(e)},setPosition:(e,t)=>{l(e),o(t)},playerPosition:S,setPlayback:e=>{t&&(t.currentTime=e)},duration:_,onDragging:e=>{T(e)},storyboard:d}):(0,i.tZ)(s.gq,{alignItems:"center",justifyContent:"center",children:(0,i.tZ)(u.$j,{})})})},h=e=>{let{storyboard:t,imageUrl:n,x:r,y:l,displayWidth:a,displayHeight:o,className:d}=e,c=(r?r/t.tile_width:0)*a,s=(l?l/t.tile_height:0)*o,u={width:"".concat(a,"px"),height:"".concat(o,"px"),backgroundImage:"url(".concat(n,")"),backgroundPosition:"-".concat(c,"px -").concat(s,"px"),backgroundSize:"500%"};return(0,i.tZ)("div",{className:d,style:u})};function g(e,t){return e.reduce((e,n)=>Math.abs(n.start-t)<Math.abs(e.start-t)?n:e)}let f=e=>{let{startTimeline:t,setStartTimeline:n,endTimeline:l,setEndTimeline:o,startPosition:c,setStartPosition:u,endPosition:v,setEndPosition:f,setPosition:C,playerPosition:b,setPlayback:w,duration:_,storyboard:k,onDragging:x}=e,I=(0,r.sO)(null),E=(0,r.sO)(null),B=(0,r.sO)(v-c),S=(0,r.sO)(null),[N,L]=(0,r.eJ)({isDragging:!1,element:void 0}),P=l-t,T=(0,r.Ye)(()=>v-c,[v,c]),M=c-t,D=v-t,X=b-t,z=t<1,R=1>Math.abs(l-_),O=(0,r.Ye)(()=>M/P*100,[P,M]),A=(0,r.Ye)(()=>D/P*100,[D,P]),F=(0,r.Ye)(()=>X/P*100,[X,P]),U="linear-gradient(to right, \n    rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.5) calc(".concat(O,"% - 6px), \n    rgba(0,0,0,0) calc(").concat(O,"% - 6px), rgba(0,0,0,0) calc(").concat(A,"% + 6px), \n    rgba(0,0,0,0.5) calc(").concat(A,"% + 6px), rgba(0,0,0,0.5) 100%)"),V=(0,r.I4)(e=>{u(Math.max(0,e/100*P+t))},[P,u,t]),j=(0,r.I4)(e=>{f(Math.min(_,e/100*P+t))},[_,P,f,t]);(0,r.d4)(()=>{x(N)},[N]);let q=()=>{document.addEventListener("selectstart",J)},H=()=>{document.removeEventListener("selectstart",J)},J=e=>{e.preventDefault(),e.stopPropagation()},K=()=>{setTimeout(()=>{L({isDragging:!1,element:void 0})},300),E.current=null,S.current=null,H(),document.removeEventListener("mousemove",W),document.removeEventListener("mouseup",K),document.removeEventListener("pointerup",K)},W=e=>{if(null===E.current)return;let i=e.clientX-E.current;if(L({isDragging:!0,element:"interval"}),!I.current)return;let r=i/I.current.getBoundingClientRect().width*P,a=c+r,d=a+B.current;S.current?a<0?(C(0,B.current),n(0)):d>_?(C(_-B.current,_),o(_)):C(a,d):t-r>0&&l-r<=_&&(n(Math.max(0,t-r)),o(Math.min(_,l-r)))};return(0,i.tZ)("div",{className:p.Z.railContainer,children:(0,i.BX)("div",{className:p.Z.rail,ref:I,onMouseDown:e=>{if(!I.current)return;q(),E.current=e.clientX,B.current=v-c;let t=I.current.getBoundingClientRect().left,n=(e.clientX-t)/I.current.getBoundingClientRect().width*100,i=n>=O&&n<=A;S.current=i,document.addEventListener("mousemove",W),document.addEventListener("mouseup",K),document.addEventListener("pointerup",K)},onClick:e=>{if(e.stopPropagation(),e.preventDefault(),N.isDragging||!I.current)return;E.current=e.clientX,B.current=v-c;let n=I.current.getBoundingClientRect().left,i=(e.clientX-n)/I.current.getBoundingClientRect().width*100,r=i>=O&&i<=A,l=t+i/100*P;if(r)w(l);else{let e=d()(l,0,_-B.current),t=e+B.current;C(e,t)}},children:[(()=>{var e,n;if(!k)return null;let r=null!==(n=null==I?void 0:null===(e=I.current)||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==n?n:0;if(0===r)return null;let a=(function(e,t,n){let i=[],r=Math.floor(e/n)*n,l=Math.ceil(t/n)*n;for(let e=r;e<=l;e+=n)i.push(e);return i})(t,l,P/r*(60*(k.tile_width/k.tile_height))).map(e=>({time:e,tile:g(k.tiles,e)}));return(0,i.tZ)(s.gq,{className:p.Z.storyboard,children:a.map((e,n)=>{let{time:r,tile:l}=e,a=(r-t)/P*100;return(0,i.tZ)("div",{style:{position:"absolute",left:"calc(".concat(a,"% + 6px)")},children:(0,i.tZ)(h,{storyboard:k,imageUrl:k.url,displayHeight:60,displayWidth:k.tile_width/k.tile_height*60,x:l.x,y:l.y},"".concat(l.x,"-").concat(l.y,"-").concat(n))})})})})(),(0,i.tZ)("div",{className:p.Z.nonSelectable,style:{background:U,position:"absolute",top:0,bottom:0,left:0,right:0}}),(0,i.BX)("div",{className:a()(p.Z.handles,p.Z.nonSelectable),children:[(0,i.tZ)("div",{className:p.Z.selection,style:{left:"calc(".concat(O,"% - 6px)"),width:"calc(".concat(A-O,"% + 12px)")}}),!z&&(0,i.tZ)("div",{className:p.Z.selectionFadeLeft}),!R&&(0,i.tZ)("div",{className:p.Z.selectionFadeRight})]}),(0,i.tZ)(y,{divRef:I,startTimeline:t,railDuration:l-t,active:!N.isDragging}),(0,i.BX)("div",{className:p.Z.handles,children:[(0,i.tZ)(Z,{className:"".concat(p.Z.draggable," ").concat(p.Z.draggableLeft),railRef:I,label:(0,m.DL)(null!=T?T:0,!0),position:O,maxPosition:A,setPosition:V,isDragging:"start"===N.element,setIsDragging:e=>e?L({isDragging:!0,element:"start"}):L({isDragging:!1,element:void 0})}),(0,i.tZ)(Z,{className:"".concat(p.Z.draggable," ").concat(p.Z.draggableRight),railRef:I,label:(0,m.DL)(null!=T?T:0,!0),position:A,minPosition:O,setPosition:j,isDragging:"end"===N.element,setIsDragging:e=>e?L({isDragging:!0,element:"end"}):L({isDragging:!1,element:void 0})}),(0,i.tZ)(Z,{className:p.Z.playback,railRef:I,label:(0,m.DL)(T,!0),position:F,isDragging:N.isDragging,disabled:!0})]})]})})};p.Z.lgTick,p.Z.lgTick,p.Z.smTick,p.Z.smTick;let Z=e=>{let{railRef:t,position:n,disabled:l,setPosition:a,label:o,maxPosition:d,minPosition:c,className:s,onDragStart:u,onDragEnd:m,showIcon:v=!0,setIsDragging:h}=e,g=(0,r.sO)(null),[f,Z]=(0,r.eJ)(!1),y=()=>{document.addEventListener("selectstart",b)},C=()=>{document.removeEventListener("selectstart",b)},b=e=>{e.preventDefault(),e.stopPropagation()},w=()=>{setTimeout(()=>{null==h||h(!1)},0),Z(!1),C(),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",w),document.removeEventListener("pointerup",w),m&&m()},_=e=>{if(null==h||h(!0),!t.current||!g.current)return;let n=t.current.getBoundingClientRect().left,i=t.current.getBoundingClientRect().width,r=(e.clientX-n)/i*100;a&&(void 0!==d&&void 0!==c?a(Math.min(d,Math.max(c,r))):void 0!==d?a(Math.min(d,r)):void 0!==c?a(Math.max(c,r)):a(r))};return(0,i.BX)("div",{className:s,ref:g,style:{left:"".concat(n,"%")},onMouseDown:e=>{!l&&(null==h||h(!1),e.stopPropagation(),Z(!0),y(),document.addEventListener("mousemove",_),document.addEventListener("mouseup",w),document.addEventListener("pointerup",w),u&&u())},children:[v&&(0,i.tZ)("div",{className:p.Z.handle}),(0,i.tZ)("div",{className:"".concat(p.Z.tooltip," ").concat(f?p.Z.visible:p.Z.hidden," ").concat(p.Z.nonSelectable),children:o})]})},y=e=>{let{divRef:t,startTimeline:n,railDuration:l,active:o}=e,[d,c]=(0,r.eJ)(null),[s,u]=(0,r.eJ)(!1),v=e=>{if(t.current){let i=t.current.getBoundingClientRect(),{left:r,width:a}=i,o=e.clientX-r;c({x:e.clientX-i.left,time:n+o/a*100/100*l})}},h=()=>u(!0),g=()=>u(!1);return((0,r.d4)(()=>(t.current&&(t.current.addEventListener("mousemove",v),t.current.addEventListener("mouseenter",h),t.current.addEventListener("mouseleave",g)),()=>{t.current&&(t.current.removeEventListener("mousemove",v),t.current.removeEventListener("mouseenter",h),t.current.removeEventListener("mouseleave",g))}),[n,l]),o&&d&&s)?(0,i.BX)("div",{className:a()(p.Z.shadowContainer,p.Z.nonSelectable),style:{left:d.x},children:[(0,i.tZ)("div",{className:p.Z.shadow}),(0,i.tZ)("div",{className:a()(p.Z.tooltip,p.Z.mouseTracker),children:(0,m.DL)(d.time,!0)})]}):null}},46543:function(e,t,n){n.d(t,{i:()=>D});var i=n(7409),r=n(99282),l=n(98848),a=n(16584),o=n(30396),d=n(94184),c=n.n(d),s=n(71212),u=n(80569),m=n.n(u),p=n(61649),v=n(45582),h=n(14068),g=n(7654),f=n.n(g),Z=n(23493),y=n.n(Z),C=n(75697),b=n(68833),w=n(19081),_=n(43681);let k=e=>{let{clipEnd:t,clipStart:n,post:r,pub:l}=e,o={t:n.toFixed(1),d:(t-n).toFixed(1)},d={variant:"icon",url:(0,C.O1)(null,{post:r,pub:l,useCustomDomainOverOpen:!0,params:o}),onLinkClicked:e=>{(0,b.j)(b.FP.SHARE_LINK_CLICKED,(0,i._)({is_clip:!0,type:e,post_id:r.id},o)),(0,b.j)(b.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"share_to_".concat(e),source:"video clipper"})}},c=(0,_.LM)(d),s=(0,_.oy)(d),u=(0,_.gY)(d),m=(0,_.Wh)(d),p=(0,_.kB)(d);return(0,a.BX)(w.gq,{alignItems:"center",gap:16,children:[c,u,s,m,p]})};var x=n(33804),I=n(73649),E=n(95441),B=n(15771),S=n(82021);function N(e){var t,n,i;let{hideBottomControls:r,initialEnd:l,initialStart:d,isInline:s,videoPlayerRef:u,videoUpload:v,post:h,pub:g,onCancel:Z,onSubmit:C,onSubmitLabel:b,minClipDuration:_=1,maxClipDuration:N=Number.MAX_VALUE,minTimelineDuration:L=0,maxTimelineDuration:P=Number.MAX_VALUE}=e,{clipTimes:T,setClipEnd:M,setClipStart:D,zoom:X,setZoom:z}=(0,p.Sr)(),{start:R,end:O}=null!=T?T:{start:null!=d?d:0,end:null!=l?l:Math.min(p.ss,null!==(i=null==v?void 0:v.duration)&&void 0!==i?i:p.ss)};(0,o.d4)(()=>{setTimeout(()=>{var e,t;!T&&(null==u?void 0:null===(t=u.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.duration)&&(D(R),M(O))},1e3)},[]);let[A,F]=(0,o.eJ)(),[U,V]=(0,o.eJ)(!1),{iString:j}=(0,E.M1)(),q=(0,o.Ye)(()=>y()(e=>{var t;let{time:n}=e;!(null==u?void 0:null===(t=u.current)||void 0===t?void 0:t.player)||f()(n)||(u.current.player.currentTime=n)},10),[u]);(0,o.d4)(()=>{u&&q({time:O})},[O,q,u]),(0,o.d4)(()=>{u&&q({time:R})},[R,q,u]),(0,o.d4)(()=>{let e=async e=>{let{body:{src:t}}=await m().get("/api/v1/video/upload/".concat(e,"/storyboard"));F((await m().get(t)).body)};(null==v?void 0:v.id)&&e(v.id)},[v]);let H=async()=>{V(!0),await (null==C?void 0:C({start:R,duration:O-R,render_transcript_as:void 0})),V(!1)};return u?(0,a.tZ)(x.w,{children:(0,a.tZ)(w.hs,{bg:"primary",className:c()(S.Z.containerElevated,{[S.Z.containerInline]:s}),children:(0,a.BX)(w.tu,{gap:16,flex:"grow",children:[(0,a.tZ)(w.gq,{className:S.Z.videoTrimmerWrapper,children:(null===(t=u.current)||void 0===t?void 0:t.player)&&(0,a.tZ)(I.AM,{videoElement:null===(n=u.current)||void 0===n?void 0:n.player,start:R,setStart:e=>{D(e)},end:O,setEnd:e=>{M(e)},minDuration:_,maxDuration:N,maxTimelineDuration:P,minTimelineDuration:L,storyboard:A,looping:!0,zoom:X,setZoom:z})}),!r&&(0,a.BX)(w.gq,{justifyContent:"space-between",alignItems:"center",gap:16,opacity:U?50:100,children:[(0,a.tZ)(p.l7,{}),(0,a.BX)(w.gq,{alignItems:"center",gap:16,children:[h&&g&&(0,a.tZ)(k,{clipEnd:O,clipStart:R,post:h,pub:g}),Z&&(0,a.tZ)(B.zx,{priority:"secondary",onClick:Z,disabled:U,children:j("Cancel")}),"string"==typeof b?(0,a.tZ)(B.zx,{priority:"primary",onClick:H,disabled:U,children:b}):null==b?void 0:b(H)]})]})]})})}):null}var L=n(97490),P=n(98914),T=n(70379),M=n(60308);let D=e=>{var t;let{postId:n,visible:d,videoPlayerRef:s}=e,u=(0,l._)(e,["postId","visible","videoPlayerRef"]),{onCancelClipping:m}=(0,p.Sr)(),[v,g]=(0,o.eJ)(!1),[f,Z]=(0,o.eJ)(),y=()=>{if(d){var t,i,r,l;null===(i=s.current)||void 0===i||null===(t=i.player)||void 0===t||t.pause(),(0,b.j)(b.FP.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:null!=n?n:null===(r=e.post)||void 0===r?void 0:r.id}),u.hideBottomControls||(0,b.j)(b.FP.MEDIA_CLIP_CREATE_MODAL_CLOSED,{video_upload_id:u.videoUpload.id,post_id:null!=n?n:null===(l=e.post)||void 0===l?void 0:l.id,is_post_editor:!1})}m()},C=async e=>{var t,n;Z({id:(0,P.EH)(),created_at:new Date,media_upload_id:u.videoUpload.id,title:null!==(n=null===(t=u.post)||void 0===t?void 0:t.slug)&&void 0!==n?n:"",start_time:e.start,duration:e.duration,source:"user",assets:[],user_id:null,description:""}),g(!0)};return((0,h.Z)(e.containerRef,y),d)?(0,a.BX)(w.gq,{className:c()(S.Z.videoTrimmerSlider,{[S.Z.videoTrimmerSliderVisible]:d}),children:[(0,a.tZ)(X,(0,r._)((0,i._)({},u),{videoPlayerRef:s,onCancel:y,onSubmit:C})),f&&(0,a.tZ)(L._,{videoUpload:u.videoUpload,transcription:null===(t=u.videoUpload.extractedAudio)||void 0===t?void 0:t.transcription,isOpen:v,onClose:()=>{g(!1),m()},clip:f,useDownloadsCenter:!0,surface:"post_view"})]}):null},X=e=>{let{hideBottomControls:t,isInline:n,videoPlayerRef:l,videoUpload:d,post:c,pub:u,onCancel:h,onSubmit:g}=e,f=(0,T.pm)(),Z=(0,v.Gi)(),{iString:y}=(0,E.M1)();(0,o.d4)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);let C=async e=>{var t,n;(0,b.j)(b.FP.VIDEO_CLIP_CREATE_BUTTON_CLICKED,{post_id:null==c?void 0:c.id,media_upload_id:null==c?void 0:null===(t=c.videoUpload)||void 0===t?void 0:t.id,start_time:e.start,end_time:e.start+e.duration}),l&&setTimeout(()=>{var e,t;return null===(t=l.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.pause()},100);try{let t=await m().post("/api/v1/video/assets/".concat(null==d?void 0:d.id,"/clips")).send(e);return Z.addMediaUpload({mediaUpload:t.body.mediaUpload,thumbnailUrl:(0,M.kOB)(d),title:null!==(n=null==c?void 0:c.title)&&void 0!==n?n:y("Download"),source:"user"}),h(),e}catch(e){console.error(e),f.popToast(e=>(0,a.tZ)(T.FN,(0,r._)((0,i._)({},e),{text:y("Error creating clip")})))}};return(0,a.tZ)(N,{hideBottomControls:t,isInline:n,videoPlayerRef:l,videoUpload:d,post:c,pub:u,onSubmit:null!=g?g:C,onSubmitLabel:e=>(0,a.tZ)(B.zx,{leading:(0,a.tZ)(s.Z,{size:20}),onClick:e,children:y("Create clip")}),minClipDuration:p.AT,maxClipDuration:p.ar,minTimelineDuration:p.Zl,maxTimelineDuration:p.eD})}},48083:function(e,t,n){n.d(t,{Z:()=>r});var i=n(30396);let r=e=>{let[t,n]=(0,i.eJ)(0);return(0,i.d4)(()=>{let t=()=>{e&&n(e.currentTime)};if(e)return e.addEventListener("timeupdate",t),()=>{e.removeEventListener("timeupdate",t)}},[e]),t}},52842:function(e,t,n){n.d(t,{Z:()=>o});var i=n(7409),r=n(99282),l=n(16584),a=n(64515);let o=e=>(0,l.tZ)(a.l,(0,r._)((0,i._)({},e),{name:"PauseIconRounded",svgParams:{height:16,width:16},stroke:"none",children:(0,l.tZ)("path",{d:"M3.43396 16C2.47491 16 1.99064 15.5157 2.00014 14.5757V1.42433C2.00014 0.484273 2.48441 0 3.43396 0L5.7034 0C6.65296 0.00949555 7.13723 0.465282 7.13723 1.42433V14.5757C7.13723 15.5157 6.65296 16 5.7034 16H3.43396ZM10.831 16C9.87195 16 9.40666 15.5157 9.40666 14.5757V1.42433C9.40666 0.484273 9.89094 0 10.831 0L13.1004 0C14.05 0 14.5343 0.465282 14.5343 1.42433V14.5757C14.5343 15.5157 14.05 16 13.1004 16H10.831Z"})}))},97490:function(e,t,n){n.d(t,{_:()=>A});var i=n(7409),r=n(99282),l=n(16584),a=n(30396),o=n(39693),d=n.n(o),c=n(71375),s=n(22885),u=n(46299),m=n(71212),p=n(61649),v=n(45582),h=n(33804),g=n(95441),f=n(14952),Z=n(40647),y=n(60807),C=n(12281),b=n(48083),w=n(83617);let _=e=>{var t,n;let{videoRef:o,mediaUpload:d,showCaptions:c,maxLineWidth:s=48,CaptionsComponent:u}=e,[m,p]=(0,a.eJ)([]),[v,h]=(0,a.eJ)({segment:null,wordIndex:-1}),{segment:g,wordIndex:f}=v,Z=(0,b.Z)(null!==(n=null===(t=o.current)||void 0===t?void 0:t.player)&&void 0!==n?n:null);(0,a.d4)(()=>{var e,t;if(null===(e=o.current)||void 0===e?void 0:e.player){let e=o.current.player.currentTime,n=null!==(t=y.find(t=>e>=t.start&&e<=t.end))&&void 0!==t?t:null;if(n){let t=-1;for(let i=0;i<n.words.length;i++){let r=n.words[i];if(r){if(e>=r.start&&e<=r.end){t=i;break}if(e<r.start)break;t=i}}h({wordIndex:t,segment:n})}else h({wordIndex:-1,segment:n})}},[o.current,m.length,Z]),(0,a.d4)(()=>{var e,t;(null==d?void 0:null===(e=d.transcription)||void 0===e?void 0:e.cdn_url)&&fetch(null==d?void 0:null===(t=d.transcription)||void 0===t?void 0:t.cdn_url).then(e=>e.json()).then(e=>{p(e.map(e=>(0,r._)((0,i._)({},e),{words:e.words?e.words:[]})))}).catch(e=>console.error("Error fetching transcription:",e))},[d,c]);let y=(0,a.Ye)(()=>(0,w.B)(m,{max_line_width:s}),[m,s]);return c&&y.length&&g?(0,l.tZ)(u,{segment:g,currentWordIndex:f}):null},k=e=>{let{segment:t}=e;return(0,l.tZ)("div",{className:"container-GCnHIT",children:(0,l.tZ)("div",{className:"text-XHqLyz",children:(0,l.tZ)("div",{children:null==t?void 0:t.words.map((e,t)=>(0,l.tZ)("span",{children:e.word.startsWith(" ")?e.word:" ".concat(e.word)},t))})})})},x=e=>{let{segment:t}=e;return(0,l.tZ)("div",{className:"container-OtABFE",children:(0,l.tZ)("div",{className:"text-Qzw72N",children:(0,l.tZ)("div",{children:null==t?void 0:t.words.flatMap((e,t)=>[t>0&&" ",(0,l.tZ)("span",{children:e.word.trim().replace(/[,.]+$/,"")},t)])})})})};var I=n(19081),E=n(61527);let B=e=>{var t,n,i;let{videoUpload:r,clip:o,showCaptions:d=!1,captionsStyle:c="classic",aspectRatio:s="landscape"}=e,u=(0,f.Ij)(),m=(0,a.sO)(null),p=(0,a.sO)(null),[v,h]=(0,a.eJ)(!1),g=(0,a.sO)();(0,a.d4)(()=>{var e;let t=p.current,n=null==m?void 0:null===(e=m.current)||void 0===e?void 0:e.player;if(!t||!n)return;let i=t.getContext("2d");if(!i)return;let r=!1,l=()=>{if(!r||!n)return;if(n.paused||n.ended){r=!1;return}i.clearRect(0,0,t.width,t.height),i.fillStyle="rgb(22, 23, 24)",i.fillRect(0,0,t.width,t.height);let{videoWidth:e,videoHeight:a}=n;if(e&&a){if("vertical_fill"===s){let r,l,o,d;let c=9/16,s=t.height*c,u=e/a;u>c?(r=(e-(l=a*c))/2,d=s,o=(t.width-s)/2):(l=e,r=0,d=t.height*u,o=(t.width-d)/2);let m=t.height;i.drawImage(n,r,0,l,a,o,0,d,m)}else if("vertical_fit"===s){let r,l,o,d;let c=9/16,s=t.height,u=s*c,m=e/a;m>c?(r=u,l=u/m,o=(t.width-u)/2,d=(t.height-l)/2):(l=s,r=s*m,o=(t.width-r)/2,d=(t.height-s)/2),i.fillStyle="black",i.fillRect(o,0,r,t.height),i.drawImage(n,0,0,e,a,o,d,r,l)}else{let r=e*(t.height/a),l=t.height,o=(t.width-r)/2;i.drawImage(n,0,0,e,a,o,0,r,l)}}g.current=requestAnimationFrame(l)},a=()=>{r||(r=!0,l())},d=()=>{r=!1,g.current&&(cancelAnimationFrame(g.current),g.current=void 0)},c=()=>{d();let e=t.parentElement;if(!e)return;let n=e.clientWidth,r=e.clientHeight;if(t.width===n&&t.height===r){a();return}t.width=n,t.height=r,i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),a()},u=()=>{a()},v=()=>{n.currentTime!==o.start_time?d():n.play()};n.addEventListener("play",u),n.addEventListener("pause",v),n.addEventListener("ended",v);let h=()=>{c(),a()};n.addEventListener("loadedmetadata",h);let f=t.parentElement;if(f){let e=new ResizeObserver(()=>{c()});return e.observe(f),()=>{n.removeEventListener("play",u),n.removeEventListener("pause",v),n.removeEventListener("ended",v),n.removeEventListener("loadedmetadata",h),e.disconnect(),d()}}},[s,r.id,c,d]);let Z=["social","advanced_captions"].includes(null!=c?c:""),{width:y,height:b}=r,w="portrait"==(void 0!=y&&void 0!=b&&y/b>=1?"landscape":"portrait"),B=(null!==(n=null===(t=r.liveStream)||void 0===t?void 0:t.joinedOrCompletedLiveStreamInvites)&&void 0!==n?n:[]).length>0,S=(w||["vertical_fill","vertical_fit"].includes(null!=s?s:""))&&B&&"social"===c;return(0,l.BX)(I.tu,{className:"container-G3tbl8",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,l.BX)(I.tu,{className:"absolute-dkdKY4",children:[(0,l.tZ)("div",{style:{display:"none"},children:(0,l.tZ)(C.Z,{ref:m,mediaUpload:r,pub:u,autoPlay:!0,surface:"editor",contentType:"clip",entityType:"post",entityKey:null!==(i=r.post_id)&&void 0!==i?i:"unknown"})}),(0,l.tZ)("canvas",{width:1024,height:576,ref:p,className:"canvas-sv7jC_"})]}),r.extractedAudio&&(0,l.tZ)(I.gq,{style:{position:"absolute",left:"50%",transform:"translateX(-50%) translateY(-50%) ".concat("landscape"!==s||w?"scale(calc(9 / 16))":""),top:S?"50%":"90%"},children:(0,l.tZ)(_,{videoRef:m,mediaUpload:r.extractedAudio,showCaptions:d,maxLineWidth:Z?16:48,CaptionsComponent:Z?x:k})}),(0,l.tZ)(E.ql,{mediaRef:m,mediaUpload:r,isActive:v,startTime:o.start_time,duration:o.duration,hoverOptions:{transition:0,transitionDelay:0}})]})};var S=n(54687),N=n(89871),L=n(93862),P=n(68833),T=n(15771),M=n(61254),D=n(6490),X=n(58175),z=n(6630),R=n(60308),O=n(66824);let A=e=>{let{videoUpload:t,clip:n,isOpen:o,onClose:C,transcription:b,useDownloadsCenter:w=!1,surface:_,onSave:k}=e,x=(0,y.aF)(),E=(0,f.Ij)(),{iString:A}=(0,g.M1)(),[F,U]=(0,a.eJ)(!1),V=(0,v.Gi)(),{syncClips:j}=(0,N.z)(),{clipTitle:q,setClipTitle:H}=(0,p.Sr)(),{getConfigFor:J}=(0,Z.xR)(),K=J("use_captions_library"),W=(null==b?void 0:b.status)==="transcribed",[Y,G]=(0,a.eJ)("landscape"),[Q,$]=(0,a.eJ)("classic"),[ee,et]=(0,a.eJ)(!1),en=null!==Q,ei="landscape";(null==t?void 0:t.height)&&(null==t?void 0:t.width)&&(ei=t.height>t.width?"portrait":"landscape");let er=(e,n)=>{(0,P.j)(e,(0,r._)((0,i._)({},n),{is_post_editor:"media_drawer"===_,video_upload_id:t.id}))};(0,a.d4)(()=>{o&&er(P.FP.MEDIA_CLIP_EXPORT_MODAL_OPENED,{button:"cancel",source:"export_modal"})},[o]);let el=async()=>{var e,i,r;let l=null===(e=n.assets)||void 0===e?void 0:e.find(e=>{var t,n,i,r,l,a,o,d,c,s,u,m;return("landscape"===ei?"landscape"===Y&&(null===(t=e.mediaUpload)||void 0===t?void 0:t.height)&&(null===(n=e.mediaUpload)||void 0===n?void 0:n.width)&&(null===(i=e.mediaUpload)||void 0===i?void 0:i.height)<(null===(r=e.mediaUpload)||void 0===r?void 0:r.width):(null===(l=e.mediaUpload)||void 0===l?void 0:l.height)&&(null===(a=e.mediaUpload)||void 0===a?void 0:a.width)&&(null===(o=e.mediaUpload)||void 0===o?void 0:o.height)>(null===(d=e.mediaUpload)||void 0===d?void 0:d.width))&&(en?(null===(c=e.asset_metadata)||void 0===c?void 0:c.caption_style)===Q:!(null===(s=e.asset_metadata)||void 0===s?void 0:s.captions_enabled))&&(null===(u=e.asset_metadata)||void 0===u?void 0:u.captions_version)===2&&(null===(m=e.mediaUpload)||void 0===m?void 0:m.state)==="transcoded"});if(l&&l.mediaUpload){C(!0),er(P.FP.MEDIA_CLIP_DOWNLOAD_REQUESTED,{video_upload_id:t.id,is_post_editor:!1,type:n.source,media_clip_id:n.id,asset_media_upload_id:l.mediaUpload.id}),V.addMediaUpload({mediaUpload:l.mediaUpload,thumbnailUrl:(0,R.kOB)(t),title:null!==(i=n.title)&&void 0!==i?i:A("Download"),source:n.source});return}try{U(!0),C(!0);let e=n;if(e.id||(e=await (0,L.C)({videoUpload:t,start:n.start_time,duration:n.duration,title:null!=q?q:A("Untitled")})),!e)return;er(P.FP.MEDIA_CLIP_DOWNLOAD_REQUESTED,{video_upload_id:t.id,is_post_editor:!1,type:e.source,media_clip_id:e.id});let{mediaUpload:i}=await (0,L.O)({clip:e,useCaptions:en,captionsStyle:Q,showLiveOverlay:ee,aspectRatio:Y,videoUpload:t,pub:E});j(),U(!1),w&&V.addMediaUpload({mediaUpload:i,thumbnailUrl:(0,R.kOB)(t),title:null!==(r=e.title)&&void 0!==r?r:A("Download"),source:e.source}),null==k||k({mediaUpload:i,videoUpload:t,aspectRatio:Y})}catch(e){console.error(e)}finally{U(!1)}},ea=()=>{er(P.FP.MEDIA_CLIP_EXPORT_MODAL_CLOSED,{button:"cancel",source:"export_modal"}),C(!1)},eo=()=>{er(P.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"cancel",source:"export_modal"}),ea()};return(0,l.tZ)(D.u_,{width:720,isOpen:o,onClose:ea,children:(0,l.BX)(h.w,{children:[q?(0,l.BX)(I.gq,{flex:"grow",paddingLeft:20,paddingRight:20,paddingTop:20,gap:12,alignItems:"center",children:[(0,l.tZ)(S.U,{clipTitle:null!=q?q:A("Untitled Clip"),onSaveTitle:H}),(0,l.tZ)(T.hU,{priority:"quaternary",size:"sm",title:"Close",onClick:eo,"aria-label":"close",className:O.Z.closeButton,children:(0,l.tZ)(c.Z,{size:20})})]}):(0,l.tZ)(D.xB,{title:A("Download clip"),showClose:!0,onClose:eo,showDivider:!0}),(0,l.BX)(D.fe,{className:O.Z.downloadModal,children:[(0,l.tZ)(B,{videoUpload:t,clip:n,aspectRatio:Y,showCaptions:en,captionsStyle:Q}),(0,l.BX)(I.tu,{gap:24,paddingTop:24,children:[(0,l.BX)(I.gq,{gap:32,style:{overflowY:"auto"},children:["landscape"===ei&&(0,l.BX)(I.tu,{gap:8,children:[(0,l.tZ)(X.xv.B4,{weight:"semibold",children:A("Aspect ratio")}),(0,l.tZ)(z.Z,{options:[{label:A("Landscape"),value:"landscape",icon:(0,l.tZ)(s.Z,{size:16})},{label:A("Vertical Fit"),value:"vertical_fit",icon:(0,l.tZ)(u.Z,{size:16})},{label:A("Vertical Fill"),value:"vertical_fill",icon:(0,l.tZ)(u.Z,{size:16})}],value:Y,onChange:e=>G(e)})]}),W&&(0,l.BX)(I.tu,{gap:8,children:[(0,l.tZ)(X.xv.B4,{weight:"semibold",children:A("Captions Style")}),(0,l.tZ)(z.Z,{options:d()([{label:A("Classic"),value:"classic"},...K?[{label:A("Social"),value:"advanced_captions"}]:[{label:A("Social"),value:"social"}],{label:A("None"),value:null}]),value:Q,onChange:e=>$(e)})]}),(null==x?void 0:x.is_global_admin)&&(0,l.BX)(I.tu,{gap:8,children:[(0,l.tZ)(X.xv.B4,{weight:"semibold",children:A("Live Overlay")}),(0,l.tZ)(z.Z,{options:[{label:A("Show"),value:!0},{label:A("Hide"),value:!1}],value:ee,onChange:e=>et(e)})]})]}),(0,l.tZ)(M.iz,{}),(0,l.tZ)(T.zx,{leading:(0,l.tZ)(m.Z,{}),onClick:()=>{er(P.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"complete_download_export",source:"export_modal"}),el()},disabled:F,children:A("Download")})]})]})]})})}},54687:function(e,t,n){n.d(t,{U:()=>s});var i=n(16584),r=n(30396),l=n(23279),a=n.n(l),o=n(19081),d=n(440);let c={editIcon:"editIcon-P5YgXz",title:"title-VzicoP",input:"input-hzxurD"},s=e=>{let{clipTitle:t,onSaveTitle:n}=e,[l,s]=(0,r.eJ)(t),u=a()(e=>{n(e)},200);return(0,r.d4)(()=>{u(l)},[l]),(0,i.tZ)(o.gq,{flex:"grow",className:c.inputContainer,children:(0,i.tZ)(d.l,{className:c.input,value:l,maxLength:125,onChange:e=>{s(e.currentTarget.value)},defaultRows:1,maxRows:2,onKeyDown:e=>{e.stopPropagation()}})})}},93862:function(e,t,n){n.d(t,{C:()=>a,O:()=>o});var i=n(80569),r=n.n(i),l=n(12988);let a=async e=>{let{videoUpload:t,start:n,duration:i,title:l}=e;try{let{body:{mediaClip:e}}=await r().post("/api/v1/video/assets/".concat(t.id,"/media_clips")).send({title:l,start:n,duration:i});return e}catch(e){return console.error(e),null}},o=async e=>{let{aspectRatio:t,clip:n,useCaptions:i,captionsStyle:a,videoUpload:o,shareToNotes:d,showLiveOverlay:c,pub:s}=e,u=(0,l.Ws)(o,{showLiveOverlay:c,aspectRatio:t,pub:s}),m={start:n.start_time,duration:n.duration,render_transcript_as:i||null!==a?"subtitles":void 0,aspect_ratio:t,captions_style:null!=a?a:void 0,media_clip_id:n.id,sync:!1,share_to_notes:d,features:u};return{mediaUpload:(await r().post("/api/v1/video/assets/".concat(null==o?void 0:o.id,"/clips")).send(m)).body.mediaUpload}}},27966:function(e,t,n){n.d(t,{g:()=>d,j:()=>u});var i=n(16584),r=n(95441),l=n(71068),a=n(19081),o=n(5749);function d(e){let{country:t,type:n,id:l}=e,{iString:d}=(0,r.M1)(),s="https://embed.music.apple.com/".concat(t,"/").concat(n,"/").concat(l,"?theme=auto&app=music");return(0,i.tZ)(a.hs,{radius:"md",outline:"detail",overflow:"hidden",className:o.Z.appleMusic,children:(0,i.tZ)(c,{src:s,height:"song"===n?"175":"450",frameBorder:0,allow:"encrypted-media *",title:d("Apple Music player"),sandbox:"allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"})})}let c=(0,l.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),s=["album","playlist","song","artist","station"];function u(e){if(!e)return null;try{let t=new URL(e);if(!["music.apple.com","www.music.apple.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<3)return null;let[i,r,...l]=n,a=l[l.length-1];if(!i||!r||!a)return null;if("album"===r&&t.searchParams.has("i")){let e=t.searchParams.get("i");if(e)return{country:i,type:"song",id:e}}if(!s.includes(r))return null;return{country:i,type:r,id:a}}catch(e){return null}}},72572:function(e,t,n){n.d(t,{N:()=>v});var i=n(16584),r=n(94184),l=n.n(r),a=n(99869),o=n(20160),d=n(20888),c=n(27625),s=n(19081),u=n(58175),m=n(91400),p=n(5749);function v(e){let{image:t,title:n,url:r,host:v,readOnly:h,isExplicit:g,onClick:f}=e,Z=(0,m.XA)(),{isHidden:y,onShow:C}=(0,c.Sl)(!!g);return(0,i.tZ)(o.W,{children:(0,i.BX)(s.hs,{className:l()(p.Z.postAttachment,h&&p.Z.readOnly),position:"relative",padding:12,gap:12,as:h?"div":"a",bg:"primary",radius:"md",href:h?void 0:r,onClick:f,rel:"nofollow noopener ugc",target:"_blank",draggable:!1,showFocus:!0,animate:!0,children:[(0,i.BX)(s.tu,{gap:2,flex:"grow",minWidth:0,children:[v&&(0,i.tZ)(u.xv.B4,{as:"p",color:"secondary",clamp:Z?1:2,children:v}),(0,i.tZ)(u.xv.B3,{clamp:Z?1:2,color:"primary",weight:"medium",children:n})]}),t?(0,i.tZ)(d.e,{className:l()(p.Z.linkImage),src:null!=t?t:"",useRetinaSizing:!0,imageIsFixedWidth:!0,maxWidth:64,imageProps:{smartCrop:!0,aspect:"1:1"}}):(0,i.tZ)(s.hs,{width:64,height:64,bg:"secondary",radius:"md",alignItems:"center",justifyContent:"center",children:(0,i.tZ)(a.Z,{stroke:"var(--color-fg-secondary)"})}),y&&(0,i.tZ)(c.HU,{onShow:C})]})})}},25827:function(e,t,n){n.d(t,{W:()=>p});var i=n(16584),r=n(30396),l=n(31122),a=n(98914),o=n(19081),d=n(76820),c=n(24054),s=n(63651),u=n(47929),m=n(5749);function p(e){let{activeLiveStream:t,onAttachmentClick:n,maxWidth:p,videoPlayerProps:v}=e,h=(0,a.K1)(),g=(0,r.sO)(null),f=(0,d.Qz)(g,p),Z=c.Sb/c.rx,y={};if(h){let e=null!=f?f:d.YQ;y={width:"".concat(e,"px"),height:"".concat(e/Z,"px")}}else{let e=null!=f?f:d.PJ;y={width:"".concat(e,"px"),height:"".concat(e/Z,"px")}}return(0,i.tZ)(o.tu,{width:"100%",ref:g,onClick:()=>{null==n||n({attachmentType:"live_stream",attachmentId:t.liveStream.id.toString()});let e=h?(0,s.bHR)({liveStreamId:t.liveStream.id,utm_campaign:u.VX.substackProfile,params:{utm_medium:u.lP.web,appStoreRedirect:!!h}}):(0,s.UDR)({noBase:!0,liveStreamId:t.liveStream.id,params:{utm_campaign:u.VX.substackProfile,utm_medium:u.lP.web}});h?document.location.href=e:(0,a.uX)(e)},children:(0,i.tZ)(o.tu,{style:y,radius:"md",overflow:"hidden",position:"relative",className:m.Z.videoPlayerContainer,children:(0,i.tZ)(l.Y,{activeLiveStream:t,listenForViewerCount:!1,isFeedItem:!0,videoPlayerProps:v,startMuted:!0})})})}},58998:function(e,t,n){n.d(t,{h:()=>p});var i=n(16584),r=n(30396),l=n(20160),a=n(95441),o=n(92291),d=n(15771),c=n(19081),s=n(58175),u=n(15503),m=n(23854);function p(e){let{attachment:t,readOnly:n,isRestack:p,onAttachmentClick:v,utm_content:h}=e,g=[m.sC.YouBlocked,m.sC.YouMuted].includes(t.reason)&&!!t.hidden_attachment,[f,Z]=(0,r.eJ)(!1),{iString:y}=(0,a.M1)();return f&&t.hidden_attachment?(0,i.tZ)(o.Mk,{attachment:t.hidden_attachment,readOnly:n,isRestack:p,onAttachmentClick:v,utm_content:h}):(0,i.tZ)(l.W,{children:(0,i.BX)(c.hs,{bg:"primary",border:"detail",justifyContent:g?"space-between":"center",alignItems:"center",radius:"md",padding:16,children:[(0,i.tZ)(s.xv.B4,{color:"secondary",align:"center",children:t.reason===m.sC.YouBlocked?"This note is from someone you blocked.":t.reason===m.sC.YouMuted?"This note is from someone you muted.":"This attachment is not available."}),g&&(0,i.tZ)(d.kG,{resetCss:!0,onClick:()=>{var e;(0,u.Kr)(t.id,t.reason,{noteId:null===(e=t.hidden_attachment)||void 0===e?void 0:e.id}),Z(!0)},children:(0,i.tZ)(s.xv,{weight:"bold",size:14,color:"secondary",children:y("Show")})})]})})}},60225:function(e,t,n){n.d(t,{U:()=>E});var i=n(7409),r=n(99282),l=n(16584),a=n(94184),o=n.n(a),d=n(29032),c=n(20888),s=n(95441),u=n(60807),m=n(98170),p=n(3411),v=n(71068),h=n(15771),g=n(19081),f=n(10510),Z=n(58175),y=n(65575),C=n(32189),b=n(91400),w=n(64172),_=n(60308),k=n(84864),x=n(47929);let I={attachment:"attachment-E9mJrI",logoContainer:"logoContainer-vqxwR7",bgImage:"bgImage-OTU5LC",header:"header-d8U2_d",gradientBG:"gradientBG-jbdaN9",gradientBg:"gradientBG-jbdaN9",button:"button-uDQ6x4"};function E(e){var t;let{publication:n,readOnly:i,onClick:r}=e,a=null!==(t=n.logoPalette)&&void 0!==t?t:null;return(0,l.tZ)(B,{readOnly:i,onClick:r,publication:n,palette:a,children:(0,l.BX)(g.sg,{children:[(0,l.tZ)(S,{pub:n,palette:a}),(0,l.tZ)(L,{pub:n,readOnly:i,palette:a})]})})}let B=e=>{let{readOnly:t,onClick:n,publication:i,palette:r,children:a}=e,d=(0,m.UO)(r);return(0,l.tZ)(g.sg,{as:t?"div":"a",className:o()(I.attachment,t&&I.readOnly),position:"relative",bg:"secondary",radius:"md",target:"_blank",rel:"noopener noreferrer",minWidth:0,onClick:n,href:t?void 0:(0,_.TJI)(i),draggable:!1,showFocus:!0,animate:!0,style:d,children:a})};function S(e){var t;let{pub:n,palette:a}=e,o=a?(0,i._)({},(0,p.LE)({palette:a,defaultColor:"var(--color-dark-bg-primary)"})):void 0;return(0,l.BX)(g.M5,{gap:12,padding:12,alignItems:"center",className:I.header,sizing:"border-box",position:"relative",style:(0,r._)((0,i._)({},o),{"--glow-color":(0,p.zn)(null==a?void 0:null===(t=a.Vibrant)||void 0===t?void 0:t.rgb,.5)}),overflow:"hidden",children:[(0,l.tZ)(v.xu,{className:I.logoContainer,radius:"sm",children:(0,l.tZ)(f.wk,{pub:n,size:144,outline:"detail",shadow:"lg"})}),(0,l.tZ)(N,{pub:n})]})}function N(e){var t;let{pub:n}=e;return(0,l.tZ)(c.e,{imageProps:{aspect:"1.91:1",crop:"fill"},src:null!==(t=n.logo_url)&&void 0!==t?t:"",maxWidth:568,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1,className:I.bgImage})}function L(e){let{pub:t,readOnly:n,palette:i}=e;return(0,l.BX)(g.hs,{gap:12,padding:12,alignItems:"center",borderTop:"detail",children:[(0,l.tZ)(P,{pub:t,readOnly:n,palette:i}),!n&&(0,l.tZ)(M,{pub:t})]})}function P(e){let{pub:t,readOnly:n,palette:i}=e;return(0,l.BX)(g.sg,{gap:2,minWidth:0,flex:"grow",children:[(0,l.tZ)(Z.xv.B4,{color:i?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,children:(0,l.tZ)(T,{pub:t,readOnly:n})}),(0,l.tZ)(Z.xv.B3,{clamp:2,color:i?"vibrance-primary":"primary",weight:"medium",children:t.name})]})}function T(e){let{pub:t,readOnly:n}=e;return n?(0,l.tZ)(l.HY,{children:t.subdomain}):(0,l.tZ)(y.zr,{href:(0,_.TJI)(t),draggable:!1,children:t.subdomain})}function M(e){let{pub:t}=e,{iString:n}=(0,s.M1)(),i=(0,b.XA)(),r=(0,u.aF)(),a=(null==t?void 0:t.payments_state)==="enabled",{isFreeSubscribed:o,isPaid:c,isAuthor:m,isPledged:p,isFounding:v}=(0,w.Y0)(t.id),g=(0,C.x)({surface:"pub-attachment"}),f=(0,w.Th)(),Z=!(a?c:c||o);return t?m?(0,l.tZ)(d.C,{children:(0,l.tZ)(h.zx,{size:"sm",priority:"secondary-outline",newTab:!0,href:(0,_.TJI)(t),className:I.button,children:n("View now")})}):(0,l.tZ)(d.C,{children:(0,l.tZ)(h.zx,{size:"sm",priority:Z?"primary":"secondary-outline",newTab:!0,className:I.button,href:(0,_.W1P)(t,{user:r,addBase:!0,params:{utm_source:x.b3.substack,utm_medium:x.lP.web,utm_campaign:x.VX.notesPubAttachment}}),onClick:e=>{if(!r&&t){g(t)(e);return}setTimeout(()=>{f.refetchPublication(t.id)},5e3)},children:Z?(0,k.getSubscribeText)(t,{isFreeSubscribed:o,isPledged:p,isFoundingSubscribed:v,isMobile:i}):n("Subscribed")})}):null}},71576:function(e,t,n){n.d(t,{w:()=>h});var i=n(7409),r=n(99282),l=n(16584),a=n(20160),o=n(98170),d=n(26049),c=n(80878),s=n(80026),u=n(19081),m=n(2009),p=n(63651),v=n(47929);let h=e=>{let{readOnly:t,attachment:n,onClick:i,utm_content:r,onSavePostClick:d}=e,{post:c,publication:s,postImageSelection:u}=n,m=function(e){var t,n,i,r,l;let a=(null!==(t=e.width)&&void 0!==t?t:520)/(null!==(n=e.height)&&void 0!==n?n:450);if(a>1){let t=!e.img_width||(null==e?void 0:e.img_width)>520?520:null!==(i=e.width)&&void 0!==i?i:520;return{height:t/a,width:t}}let o=(null!==(r=e.height)&&void 0!==r?r:0)>450?450:null!==(l=e.height)&&void 0!==l?l:450;return{height:o,width:o*a}}(u);return(0,l.tZ)(a.W,{children:(0,l.BX)(g,{readOnly:t,onClick:i,publication:s,post:c,postImageSelection:u,size:m,utm_content:r,children:[(0,l.tZ)(f,{postImageSelection:u,size:m}),(0,l.tZ)(o.Q9,{post:c,publication:s,onSavePostClick:d,compact:!1,readOnly:t,palette:u.imagePalette})]})})},g=e=>{let{readOnly:t,children:n,publication:r,postImageSelection:a,post:d,onClick:s,size:h,utm_content:g}=e,f=(0,o.UO)(a.imagePalette),Z=t?void 0:(0,p.uRy)(r,d,{feedViewer:!1,urlParams:{imgSelection:null==a?void 0:a.id,utm_content:v.fZ.substackFeedItem,utm_source:null!=g?g:void 0}});return(0,l.tZ)(u.tu,{className:"container-ruacmA",as:t?"div":"a",position:"relative",onClick:e=>{s&&s(),m.L&&!t&&(0,c.Q)(e,(0,p.uRy)(r,d,{noBase:!0,feedViewer:!0,urlParams:{imgSelection:null==a?void 0:a.id,utm_content:v.fZ.substackFeedItem,utm_source:null!=g?g:void 0}}))},href:Z,draggable:!1,showFocus:!0,animate:!0,bg:"primary",radius:"md",overflow:"hidden",style:(0,i._)({width:a?h.width:void 0},f),children:n})};function f(e){var t,n;let{postImageSelection:a,size:o}=e,c=(t=a.img_src,n=o,{backgroundImage:(0,d._)(t,n),backgroundSize:"cover",backgroundPosition:"center"});return(0,l.tZ)(s.xu,{style:(0,r._)((0,i._)({},c),{width:o.width,height:o.height})})}},86301:function(e,t,n){n.d(t,{J:()=>d,N:()=>s});var i=n(16584),r=n(95441),l=n(71068),a=n(19081),o=n(5749);function d(e){let{url:t,type:n}=e,{iString:l}=(0,r.M1)(),d=encodeURIComponent(t);return(0,i.tZ)(a.hs,{radius:"md",outline:"detail",overflow:"hidden",className:o.Z.soundcloud,children:(0,i.tZ)(c,{src:"https://w.soundcloud.com/player/?url=".concat(d,"&color=%23ff6719&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false&visual=true"),height:"track"===n?"166":"300",frameBorder:0,scrolling:"no",title:l("Soundcloud player"),allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",sandbox:"allow-scripts allow-same-origin"})})}let c=(0,l.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe");function s(e){if(!e)return null;try{let t=new URL(e);if(!["soundcloud.com","www.soundcloud.com","m.soundcloud.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let i="track";return n.includes("sets")?i="set":n.length>=2&&(i="track"),{url:e,type:i}}catch(e){return null}}},73544:function(e,t,n){n.d(t,{R:()=>u,n:()=>d});var i=n(16584),r=n(95441),l=n(71068),a=n(19081),o=n(5749);function d(e){let{embedType:t,resourceId:n}=e,{iString:l}=(0,r.M1)();if(!n)return null;let d="https://open.spotify.com/embed/".concat(t,"/").concat(n);return(0,i.tZ)(a.hs,{radius:"md",outline:"detail",overflow:"hidden",className:o.Z.spotify,children:(0,i.tZ)(c,{src:d,height:"playlist"===t||"album"===t?"352":"152",frameBorder:0,allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",title:l("Spotify player"),sandbox:"allow-scripts allow-same-origin"})})}let c=(0,l.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),s=["track","playlist","show","episode","artist","album"];function u(e){if(!e)return null;try{let t=new URL(e);if(!["spotify.com","www.spotify.com","open.spotify.com","play.spotify.com","embed.spotify.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let[i,r]=n;if(!s.includes(i))return null;return{embedType:i,resourceId:r}}catch(e){return null}}},79251:function(e,t,n){n.d(t,{Mi:()=>u});var i=n(16584),r=n(98170),l=n(53678),a=n(58175),o=n(2009),d=n(23398),c=n(23854),s=n(63651);function u(e){let{attachments:t,readOnly:n,onAttachmentClick:r,utm_content:l}=e;if(0===t.length)return null;let a=t.filter(e=>"image"!==e.type&&"video"!==e.type&&!("post"===e.type&&e.postSelection));return(0,i.tZ)(i.HY,{children:a.map(e=>(0,i.tZ)(m,{attachment:e,readOnly:n,onAttachmentClick:r,utm_content:l},e.id))})}function m(e){let{attachment:t,readOnly:n,onAttachmentClick:r,utm_content:l}=e,o=null;return(0,c.bP)(t)?null:("textlink"===t.type&&(o=(0,i.tZ)(p,{url:t.url,readOnly:n,onClick:()=>{null==r||r()}})),"link"===t.type&&(o=(0,i.tZ)(v,{readOnly:n,onClick:r,url:t.linkMetadata.url},t.id)),"post"===t.type&&(o=(0,i.tZ)(h,{readOnly:n,post:t.post,publication:t.publication,onClick:r},t.id)),"comment"===t.type&&(o=(0,i.tZ)(f,{comment:t.comment,readOnly:n,onAttachmentClick:r,utm_content:l},t.id)),"publication"===t.type&&(o=(0,i.tZ)(g,{readOnly:n,publication:t.publication,onClick:r},t.id)),o?(0,i.tZ)(a.xv.B4,{color:"accent-cyan",children:o}):null)}function p(e){let{url:t,readOnly:n,onClick:r}=e;return(0,i.tZ)(l.hh,{onClick:r,href:n?void 0:t,rel:"nofollow noopener ugc",target:"_blank",className:"note-link",color:"accent-cyan",fontSize:14,children:(0,d.u)(t,48)})}function v(e){let{url:t,readOnly:n,onClick:r}=e;return(0,i.tZ)(p,{url:t,readOnly:n,onClick:r})}function h(e){let{post:t,publication:n,readOnly:l,onClick:a}=e,o=(0,s.uRy)(n,t,{feedViewer:!1}),d=(0,r.vE)({post:t,publication:n,readOnly:l,onClick:a});return(0,i.tZ)(p,{url:o,readOnly:l,onClick:()=>{d(new MouseEvent("click"))}})}function g(e){let{publication:t,readOnly:n,onClick:r}=e;return(0,i.tZ)(p,{url:t.base_url,readOnly:n,onClick:r})}function f(e){let{comment:t,readOnly:n,onAttachmentClick:r,utm_content:l}=e,a=(0,s.Sgq)(t,{noBase:o.L,urlParams:{utm_content:null!=l?l:void 0}});return(0,i.tZ)(p,{url:a,readOnly:n,onClick:()=>null==r?void 0:r({commentId:String(t.id)})})}},68710:function(e,t,n){n.d(t,{D:()=>o});var i=n(16584),r=n(71068),l=n(19081),a=n(5749);function o(e){let{videoId:t}=e;return(0,i.tZ)(l.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.tiktok,children:(0,i.tZ)(d,{src:"https://www.tiktok.com/player/v1/".concat(t,"?").concat("volume_control=0&loop=1&timestamp=0&closed_caption=0&play_button=1&fullscreen_button=0"),frameBorder:0})})}let d=(0,r.zo)({className:a.Z.tiktokIframe,border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe")},60735:function(e,t,n){n.d(t,{n:()=>o});var i=n(16584),r=n(71068),l=n(19081),a=n(5749);function o(e){let{videoId:t}=e;return(0,i.tZ)(l.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.youtube,children:(0,i.tZ)(d,{src:"https://www.youtube.com/embed/".concat(t),frameBorder:0})})}let d=(0,r.zo)({className:a.Z.youtubeIframe,border:"unset",bg:"black",flex:"grow"},"iframe")},69181:function(e,t,n){n.d(t,{C:()=>Z,Qn:()=>g,j0:()=>f,u0:()=>y});var i=n(16584),r=n(30396),l=n(2564),a=n(60129),o=n(64729),d=n(95441),c=n(42375),s=n(98170),u=n(85527),m=n(63474),p=n(43570),v=n(15503),h=n(20063);let g=()=>{let{iString:e}=(0,d.M1)();return(0,i.tZ)(p.Vp,{theme:"error",priority:"primary",className:h.Z.livePill,children:e("LIVE")})},f=()=>{let{iString:e}=(0,d.M1)();return(0,i.tZ)(o.i,{children:(0,i.tZ)(p.D7,{priority:"primary",children:e("WAS LIVE")})})},Z=e=>{let{viewerCount:t}=e;return(0,i.tZ)(p.D7,{priority:"primary",leading:(0,i.tZ)(a.Z,{size:18}),children:t})},y=e=>{let{item:t,pub:n,post:a,onViewEpisodeClick:o}=e,{iString:m}=(0,d.M1)(),h=(0,s.vE)({post:a,publication:n}),g=(0,c.rI)(),f=(0,r.qp)(u.q);return(0,i.tZ)(p.D7,{priority:"primary",onClick:e=>{t&&(0,v.rw)(t,g,"watch_full_episode",{tabId:f}),null==o||o(),h(e)},trailing:(0,i.tZ)(l.Z,{size:16}),children:m("View full episode")})};(0,m.zo)({display:"flex",direction:"row",gap:8,alignItems:"center",className:h.Z.viewerCountContainer})},59488:function(e,t,n){n.d(t,{c:()=>a});var i=n(30396),r=n(23493),l=n.n(r);let a=e=>{let{idleAfter:t=3e3,element:n}=e,[r,a]=(0,i.eJ)(!1);return(0,i.d4)(()=>{let e;let i=null!=n?n:window,r=()=>{a(!0)},o=l()(()=>{a(!1),clearTimeout(e),e=setTimeout(r,t)},500),d=()=>{document.hidden||o()};return e=setTimeout(r,t),i.addEventListener("mousemove",o),i.addEventListener("mousedown",o),i.addEventListener("resize",o),i.addEventListener("keydown",o),i.addEventListener("touchstart",o),i.addEventListener("wheel",o),n||document.addEventListener("visibilitychange",d),()=>{i.removeEventListener("mousemove",o),i.removeEventListener("mousedown",o),i.removeEventListener("resize",o),i.removeEventListener("keydown",o),i.removeEventListener("touchstart",o),i.removeEventListener("wheel",o),n||document.removeEventListener("visibilitychange",d),clearTimeout(e)}},[n,t]),{isIdle:r}}},440:function(e,t,n){n.d(t,{l:()=>p});var i=n(7409),r=n(99282),l=n(98848),a=n(16584),o=n(94184),d=n.n(o),c=n(98661),s=n(64300),u=n(51776),m=n(68686);let p=(0,c.forwardRef)((e,t)=>{var{className:n,error:o=!1,defaultRows:p=4,maxRows:v,value:h,onChange:g}=e,f=(0,l._)(e,["className","error","defaultRows","maxRows","value","onChange"]);let{innerRef:Z,combinedRef:y}=(0,u.ts)(t),{value:C,handleChange:b}=(0,s.y)({value:h,onChange:g}),w=()=>{let e=Z.current;if(!e)return;let t=window.getComputedStyle(e),n=parseInt(t.borderTopWidth)+parseInt(t.borderBottomWidth),i=parseInt(t.paddingTop)+parseInt(t.paddingBottom),r=parseInt(t.lineHeight);e.style.height="auto";let l=r*p+n+i,a=Math.min(Math.max(e.scrollHeight+n,l),v?r*v+n+i:1/0);e.style.height="".concat(a,"px")};return(0,c.useEffect)(()=>(w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)),[]),(0,a.tZ)(s.g,(0,r._)((0,i._)({},f),{value:C,onChange:e=>{b(e),w()},rows:p,className:d()(n,m.Z.autogrowing),ref:y,error:o}))})},9459:function(e,t,n){n.d(t,{L:()=>I});var i=n(7409),r=n(99282),l=n(16584),a=n(30396),o=n(94184),d=n.n(o),c=n(10120),s=n(61649),u=n(12281),m=n(46543),p=n(95441),v=n(69181),h=n(59488),g=n(98422),f=n(71068),Z=n(75822),y=n(18618),C=n(74571),b=n(28226),w=n(70958),_=n(61527),k=n(31377);let x={"preview-label-container":"preview-label-container-Y88jiD",previewLabelContainer:"preview-label-container-Y88jiD","live-stream-tag-container":"live-stream-tag-container-MWmvAX",liveStreamTagContainer:"live-stream-tag-container-MWmvAX","media-clip-tag-container":"media-clip-tag-container-FbCpZr",mediaClipTagContainer:"media-clip-tag-container-FbCpZr",videoContainer:"videoContainer-wF4DEO",overflow:"overflow-ns9Lj9",notesVideoContainer:"notesVideoContainer-XgGhEY"},I=e=>{var t,n,o,I,E;let{clipInfo:B,disableAutoPlay:S=!1,forceAutoPlay:N=!1,isFreeSubscribed:L,isSubscribed:P,isLiveStream:T=!1,mediaUpload:M,post:D,pub:X,startMuted:z,variant:R="notes",videoPlayerRef:O,videoType:A="post",entityKey:F,entityType:U,primaryEntityType:V,primaryEntityKey:j,surface:q,contentType:H,feedItemTrackingParameters:J}=e,{isClipping:K}=(0,s.Sr)(),{iString:W}=(0,p.M1)(),{isMobile:Y}=(0,g.v9)(),[G,Q]=(0,a.eJ)(!1),$=(0,k.isPaidAudience)(D.audience)&&!P,ee=(null!==(n=M.preview_duration)&&void 0!==n?n:0)>0,et=$&&(!ee||G),en=!1;if(B&&ee&&$){let e=null!==(o=M.preview_start)&&void 0!==o?o:0,t=e+(null!==(I=M.preview_duration)&&void 0!==I?I:0),n=B.startTime,i=n+B.duration;en=n<e||i>t}(0,Z.KS)({videoPlayerRef:O,showPaywall:et,disable:S});let ei=(0,a.sO)(null),[er,el]=(0,a.eJ)(!1),{isIdle:ea}=(0,h.c)({idleAfter:2e3,element:ei.current}),eo=(0,c.r)(),ed=(0,C.Ml)(ei),ec={mediaRef:O,pub:X,post:D,mediaUpload:M,podcastUpload:null==M?void 0:M.extractedAudio,isActive:null!==(E=er||!ea||K)&&void 0!==E&&E,isFocused:ed,handle:eo,hasPaywall:$,hideNextVideoButton:!0,showPaywall:et,onShareMenuOpen:()=>el(!0),onShareMenuClose:()=>el(!1),disableShortcuts:!0,size:"notes"===R?"sm":"md",hideSettings:!!B,hidePip:!!B};return(0,l.tZ)(f.xu,{ref:ei,position:"relative",onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,l.BX)(c.I,{handle:eo,className:x.fullScreenContainer,children:[(0,l.BX)("div",{className:d()(x.videoContainer,{[x.overflow]:K,[x.notesVideoContainer]:"notes"===R,[x.inboxVideoContainer]:"inbox"===R}),children:[(0,l.tZ)(u.Z,{ref:O,doNotResetOnEnd:!0,hidePlayButton:et,mediaUpload:M,noControls:!0,noKeyboardShortcuts:!0,post:D,pub:X,startMuted:z,onFinishVideo:()=>{Q(!0)},renderPlayButton:()=>(0,l.tZ)(y.fI,{isPlaying:!1,size:Y?40:56}),isClipping:K,videoType:A,usePreview:$&&ee,videoPlayerClassName:x.videoPlayer,autoPlay:N&&!et,entityKey:F,entityType:U,primaryEntityKey:j,primaryEntityType:V,surface:q,contentType:H,feedItemTrackingParameters:J}),B&&!B.isAutoSelected?(0,l.tZ)(_.to,(0,r._)((0,i._)({},ec),{startTime:B.startTime,duration:B.duration})):(0,l.tZ)(_.Vo,(0,i._)({},ec))]}),(null===(t=O.current)||void 0===t?void 0:t.player)&&"post"===A&&(0,l.tZ)(m.i,{visible:K,videoPlayerRef:O,containerRef:ei,videoUpload:M,post:D}),ee&&!et&&!P&&(0,l.tZ)("div",{className:x["preview-label-container"],children:(0,l.tZ)(w.l,{children:W("Preview")})}),!(ee&&!et&&!P)&&T&&(0,l.tZ)("div",{className:x["live-stream-tag-container"],children:(0,l.tZ)(v.j0,{})}),et&&(0,l.tZ)(b.Y,{post:D,pub:X,isFreeSubscribed:L,isPaidClip:en,medium:"video",variant:"dialog",onRestart:ee&&!en?()=>{var e;(null===(e=O.current)||void 0===e?void 0:e.player)&&(Q(!1),O.current.player.currentTime=0,O.current.player.play())}:void 0})]})})}},54480:function(e,t,n){n.d(t,{n:()=>z});var i=n(58865),r=n(16584),l=n(36081),a=n(36813),o=n(95441),d=n(98422),c=n(19081),s=n(58175),u=n(18618),m=n(30396),p=n(85200),v=n(71212),h=n(51043),g=n(45609),f=n(67358),Z=n(80569),y=n.n(Z),C=n(49995),b=n(68833),w=n(49762),_=n(98914),k=n(71068),x=n(15771),I=n(61254),E=n(44424),B=n(21685),S=n(43905),N=n(60308);let L=e=>{let{audioFileUrl:t,feedUrl:n,isPrivateFeed:i,sectionId:l,user:a}=e,{iString:d}=(0,o.M1)();return(0,r.tZ)(B.J,{className:"popoverContainer-jZEE00",layerClassName:"popoverLayer-gOi2YH",content:(0,r.tZ)(P,{audioFileUrl:t,feedUrl:n,isPrivateFeed:i,sectionId:l,user:a}),preferPlacement:"bottom-start",children:(0,r.tZ)(p.Z,{className:"icon-vlW9ea",size:24,"aria-label":d("More options"),role:"button"})})},P=e=>{let{audioFileUrl:t,feedUrl:n,isPrivateFeed:i,sectionId:l,user:a}=e,{iString:d}=(0,o.M1)(),[u,p]=(0,m.eJ)(!1),[Z,B]=(0,m.eJ)(null),S=(0,w.default)("hide_media_download_option"),L=async()=>{try{(0,b.j)(b.FP.PODCAST_EMAIL_LINK_CLICKED),await y().post("/api/v1/subscription/send_podcast_email").send({section_id:l}),(0,C.ZP)(d("Email sent")),p(!0)}catch(e){B(e)}},P=()=>{(0,b.j)(b.FP.PODCAST_FEED_URL_COPIED),(0,_.vQ)(n),(0,C.ZP)(d("RSS feed copied"))};return(0,r.BX)(k.xu,{style:{maxWidth:285},children:[(0,r.BX)(E.xw,{isFirst:!0,children:[t&&!S&&(0,r.tZ)(E.sN,{leading:(0,r.tZ)(v.Z,{size:16}),onClick:()=>{(0,_.Hl)((0,N.rhs)(t,{download:!0}))},children:d("Download MP3")}),n&&(0,r.tZ)(E.sN,{leading:(0,r.tZ)(h.Z,{size:16}),onClick:P,children:i?d("Your private RSS feed"):d("RSS feed")})]}),a&&n&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(I.iz,{paddingY:8}),(0,r.BX)(c.tu,{gap:12,padding:8,children:[(0,r.BX)(s.xv.B4,{color:"pub-primary-text",children:[d("Copy your RSS link and paste it in your podcast app.")," ",(0,r.tZ)(T,{})]}),(0,r.BX)(c.gq,{gap:8,children:[(0,r.tZ)(x.zx,{leading:(0,r.tZ)(g.Z,{size:16}),priority:"secondary-outline",onClick:P,children:d("Copy link")}),(0,r.tZ)(x.zx,{disabled:u,leading:(0,r.tZ)(f.Z,{size:16}),priority:"secondary-outline",onClick:L,children:d("Email link")})]}),Z&&(0,r.tZ)(s.xv.B4,{color:"error",children:(0,_.zx)(Z)})]})]})]})},T=()=>{let{iString:e}=(0,o.M1)();return(0,r.tZ)(s.xv.B4,{as:"a",href:S.ty,target:"_blank",rel:"noopener",color:"accent-themed",children:e("Learn about RSS.")})},M={"skip-button":"skip-button-jgLOBO","skip-icon":"skip-icon-YsbexL",playbackRate:"playbackRate-o33VkZ"};function D(){let e=(0,i._)(["Change playback speed. Current speed is "," times"]);return D=function(){return e},e}let X=[{value:1,display:"1"},{value:1.25,display:"1.25"},{value:1.5,display:"1.5"},{value:1.75,display:"1.75"},{value:2,display:"2"}],z=e=>{var t,n;let{audioFileUrl:i,feedUrl:m,isPlaying:p,isPrivateFeed:v,playbackRate:h,sectionId:g,user:f,onChangePlaybackRate:Z,onSkipBack:y,onSkipForward:C,onTogglePlayback:b}=e,{isMobile:w}=(0,d.v9)(),_=w?28:32,{iString:k,iTemplate:x}=(0,o.M1)(),I=X.findIndex(e=>{let{value:t}=e;return t===h}),E=(null===(t=X[I])||void 0===t?void 0:t.display)?x(D(),null===(n=X[I])||void 0===n?void 0:n.display):k("Change playback speed");return(0,r.BX)(c.gq,{gap:20,alignItems:"center",justifyContent:"space-between",children:[(0,r.tZ)(c.gq,{style:{width:60},justifyContent:"center",role:"button","aria-label":E,onClick:()=>{let e=(I+1)%X.length;Z(X[e].value)},children:(0,r.BX)(s.xv.B2,{className:M.playbackRate,color:"vibrance-secondary",weight:"medium","aria-hidden":!0,children:[X[I].display,"\xd7"]})}),(0,r.BX)(c.gq,{gap:w?20:32,alignItems:"center",children:[y&&(0,r.tZ)("div",{onClick:y,role:"button",className:M["skip-button"],"aria-label":k("Skip backward 15 seconds"),children:(0,r.tZ)(l.Z,{className:M["skip-icon"],height:_})}),(0,r.tZ)(u.DN,{size:w?56:72,isPlaying:p,onTogglePlayback:b}),C&&(0,r.tZ)("div",{onClick:C,role:"button",className:M["skip-button"],"aria-label":k("Skip forward 30 seconds"),children:(0,r.tZ)(a.Z,{className:M["skip-icon"],height:_})})]}),(0,r.tZ)(c.gq,{style:{width:60},justifyContent:"center",alignItems:"center",children:(0,r.tZ)(L,{audioFileUrl:i,feedUrl:m,isPrivateFeed:v,sectionId:g,user:f})})]})}},3486:function(e,t,n){n.d(t,{p:()=>s});var i=n(16584),r=n(94184),l=n.n(r),a=n(71068),o=n(10510),d=n(43905),c=n(24791);let s=e=>{let t,{border:n,isFreemail:r,isStatic:s,post:u,pub:m,section:p,size:v=48,url:h,useSection:g}=e,f=(0,c.sv)({post:u}),{artUrl:Z,paidArtUrl:y,url:C}=(0,d.Mv)({pub:m,section:p,useSection:g}),b=(0,a.oB)({outline:"detail"});return t=s&&f&&u?r?Z:null!=y?y:Z:g?null!=Z?Z:null==u?void 0:u.podcast_episode_image_url:u&&((null==u?void 0:u.podcastUpload)||(null==u?void 0:u.videoUpload)||(null==u?void 0:u.podcast_url))?u.podcast_episode_image_url:Z,(0,i.tZ)(o.nZ,{className:l()(b,"pub-logo-m0IFm6",{"pub-logo--border-white-M0Tr8T":"white"===n}),href:null!=h?h:C,pub:m,logoUrl:t,size:v})}},28226:function(e,t,n){n.d(t,{Y:()=>K});var i=n(7409),r=n(99282),l=n(58865),a=n(16584),o=n(30396),d=n(94184),c=n.n(d),s=n(13639),u=n(25425),m=n(84488),p=n(98661),v=n(80569),h=n.n(v),g=n(83034),f=n(45530),Z=n(95441),y=n(56629),C=n(60807),b=n(68833),w=n(98914),_=n(98422),k=n(94874),x=n(15771),I=n(19081),E=n(58175),B=n(70379),S=n(24791),N=n(60308),L=n(47929);let P={"container--dialog":"container--dialog-IFBVqS",containerDialog:"container--dialog-IFBVqS","container--overlay":"container--overlay-NodljG",containerOverlay:"container--overlay-NodljG","container--animated":"container--animated-lBR5nE",containerAnimated:"container--animated-lBR5nE","container--animated-in":"container--animated-in-AmGha2",containerAnimatedIn:"container--animated-in-AmGha2","icon-container":"icon-container-XN2D7I",iconContainer:"icon-container-XN2D7I","content-top":"content-top-eM6ECM",contentTop:"content-top-eM6ECM","content-bottom":"content-bottom-VxiZOP",contentBottom:"content-bottom-VxiZOP",icon:"icon-k4eGDx",inlineIconContainer:"inlineIconContainer-fljw1h","restart-button":"restart-button-XCv0DP",restartButton:"restart-button-XCv0DP"};function T(){let e=(0,l._)(["Available now for iOS and Android"]);return T=function(){return e},e}function M(){let e=(0,l._)(["Continue watching this video for free in the Substack app"]);return M=function(){return e},e}function D(){let e=(0,l._)(["Continue watching this video for free, courtesy of ","."]);return D=function(){return e},e}function X(){let e=(0,l._)(["Continue listening for free in the Substack app"]);return X=function(){return e},e}function z(){let e=(0,l._)(["Continue listening for free, courtesy of ","."]);return z=function(){return e},e}function R(){let e=(0,l._)(["Watch this video for free in the Substack app"]);return R=function(){return e},e}function O(){let e=(0,l._)(["Watch this video for free, courtesy of ","."]);return O=function(){return e},e}function A(){let e=(0,l._)(["Listen to this episode for free in the Substack app"]);return A=function(){return e},e}function F(){let e=(0,l._)(["Listen to this episode for free, courtesy of ","."]);return F=function(){return e},e}function U(){let e=(0,l._)([""," episode"]);return U=function(){return e},e}function V(){let e=(0,l._)(["The full episode is only available to "," subscribers"]);return V=function(){return e},e}function j(){let e=(0,l._)(["The full episode is only available to paid subscribers of ",""]);return j=function(){return e},e}function q(){let e=(0,l._)([""," clip"]);return q=function(){return e},e}function H(){let e=(0,l._)(["This clip is only available to "," subscribers"]);return H=function(){return e},e}function J(){let e=(0,l._)(["This clip is only available to paid subscribers of ",""]);return J=function(){return e},e}let K=e=>{var t,n,l,d;let{disableButtons:v,medium:f,inlineIcon:K,isFreeSubscribed:Y,isPaidClip:G,post:Q,pub:$,variant:ee,onRestart:et,magicToken:en}=e,{iString:ei,iTemplate:er}=(0,Z.M1)(),{isMobile:el}=(0,_.v9)(),[ea,eo]=(0,o.eJ)(!1),{getSettingFor:ed}=(0,y.So)(),ec=(0,C.aF)(),{popToast:es}=(0,B.pm)(),eu=!!(ed("paywall_unlock_tokens")&&"only_paid"===Q.audience&&Q.teaser_post_eligible)&&!(null==ec?void 0:ec.is_subscribed)&&Y&&!(null==ec?void 0:ec.has_redeemed_post_unlock_token),em=null==ec?void 0:ec.reader_installed_at,{modal:ep,open:ev}=(0,g.useAppModal)({utm_campaign:L.VX.paywallPostUnlockPrompt,utm_source:L.b3.substack,overrideCTA:null!==(t=em&&ei("Open in app"))&&void 0!==t?t:void 0,overrideTitle:em?ei("Unlock your free post in the Substack app"):ei("Get the free Substack app to unlock this post"),subTitle:er(T()),openUrl:null!==(n=em&&(0,N.K8_)($.subdomain,Q.slug))&&void 0!==n?n:void 0}),eh=(0,p.useCallback)(async()=>{(0,b.j)(b.FP.PAYWALL_UNLOCK_CTA_CLICKED,{post_id:Q.id,publication_id:$.id,medium:f});try{await h().post("/api/v1/post_unlock_token").send({post_id:Q.id,token:en}),el?window.location.href=em?(0,N.K8_)($.subdomain,Q.slug,{redirect:"app-store",params:{utm_campaign:L.VX.paywallPostUnlockPrompt,utm_source:L.b3.paywall,utm_medium:f}}):(0,N.D4e)({utm_campaign:L.VX.paywallPostUnlockPrompt,utm_source:L.b3.paywall,utm_medium:f}):ev()}catch(e){es(e=>(0,a.tZ)(B.FN,(0,r._)((0,i._)({},e),{text:ei("Teaser posts are not currently available for this content")})))}},[Q.id,Q.slug,$.id,$.subdomain,f,en,em,ev,es,ei,el]),eg=!!et,ef=null!==(l=(0,S.H$)($))&&void 0!==l?l:"Founding Member",eZ=eu?et?"video"===f?el?er(M()):er(D(),$.author_name||$.name):el?er(X()):er(z(),$.author_name||$.name):"video"===f?el?er(R()):er(O(),$.author_name||$.name):el?er(A()):er(F(),$.author_name||$.name):"founding"===Q.audience?er(U(),ef):ei("Paid episode"),ey="founding"===Q.audience?er(V(),ef):er(j(),$.name);2309160===$.id?(eZ=ei("Watch the film"),ey="Subscribe or purchase as a 1-month rental to continue."):G&&(eZ="founding"===Q.audience?er(q(),ef):ei("Paid clip"),ey="founding"===Q.audience?er(H(),ef):er(J(),$.name));let eC="video"===f?ei("Subscribe to watch"):ei("Subscribe to listen"),eb=eu?ei("Claim my free episode"):"video"===f?ei("Upgrade to watch"):ei("Upgrade to listen"),ew=eu?()=>{eh()}:()=>{(0,w.uX)((0,N.Zs0)($,{simple:!0,next:document.location.href,utm_source:L.b3.showsPaywall,utm_medium:L.lP.web,utm_content:Q.id}),{local_navigation:!1})},e_=Y?eb:eC;return(0,o.d4)(()=>{(0,b.j)(b.FP.FREE_PREVIEW_PAYWALL_SHOWN,{post_id:Q.id,medium:f})},[Q.id,f]),(0,o.d4)(()=>{eg&&setTimeout(()=>{eo(!0)},10)},[eg]),(0,a.BX)(I.gq,{className:c()(P.container,{[P["container--dialog"]]:"dialog"===ee,[P["container--overlay"]]:"overlay"===ee,[P["container--animated"]]:eg,[P["container--animated-in"]]:ea}),inset:0,justifyContent:"center",alignItems:"center",position:"absolute",onClick:e=>{e.stopPropagation(),e.preventDefault()},"data-testid":"paywall",children:[ep,"dialog"===ee?(0,a.tZ)(W,{showUnlockPrompt:eu,description:ey,headerText:eZ,post:Q,pub:$,primaryCta:e_,primaryCtaClick:ew,onRestart:et}):(0,a.BX)(I.tu,{alignItems:"center",gap:el?12:16,paddingX:24,children:[(0,a.BX)(I.tu,{alignItems:"center",className:P["content-top"],gap:el?12:16,children:[!K&&(eu?(0,a.tZ)(k.qE,{photoUrl:null!==(d=$.author_photo_url)&&void 0!==d?d:void 0,size:64}):(0,a.tZ)(I.gq,{className:P["icon-container"],alignItems:"center",color:"white",justifyContent:"center",radius:"sm",children:(0,a.tZ)(s.Z,{size:el?16:24})})),(0,a.BX)(I.tu,{alignItems:"center",gap:4*!el,children:[(0,a.BX)(I.gq,{alignItems:"center",gap:8,children:[K&&(0,a.tZ)(I.gq,{className:P.inlineIconContainer,alignItems:"center",justifyContent:"center",radius:"sm",children:(0,a.tZ)(s.Z,{size:16})}),(0,a.tZ)(E.xv.B3,{as:"h3",color:"white",weight:"semibold",fontSize:eu?20:15,textAlign:"center",children:eZ})]}),!eu&&(0,a.tZ)(E.xv.B4,{color:"white",opacity:80,align:"center",children:ey})]})]}),(0,a.BX)(I.gq,{className:P["content-bottom"],gap:16,children:[et&&(0,a.tZ)(x.zx,{className:P["restart-button"],disabled:v,priority:"secondary-outline",onClick:()=>{(0,b.j)(b.FP.FREE_PREVIEW_PAYWALL_RESTART_BUTTON_CLICKED,{post_id:Q.id}),et()},children:(0,a.BX)(I.gq,{alignItems:"center",gap:12,children:[(0,a.tZ)(u.Z,{size:16}),ei("Restart")]})}),(0,a.BX)(x.zx,{priority:"primary",onClick:ew,disabled:v,children:[eu&&(0,a.tZ)(m.Z,{className:"icon",size:20,stroke:"#fff",fill:"none",strokeWidth:2}),e_]})]})]})]})},W=e=>{var t;let{description:n,headerText:i,post:r,pub:l,primaryCtaClick:o,primaryCta:d,onRestart:c,showUnlockPrompt:u}=e,{iString:m}=(0,Z.M1)();return(0,a.BX)(I.tu,{bg:"glass-inverted-medium",padding:16,gap:16,radius:"md",maxWidth:320,children:[(0,a.BX)(I.tu,{gap:4,alignItems:"center",children:[u&&(0,a.tZ)(k.qE,{photoUrl:null!==(t=l.author_photo_url)&&void 0!==t?t:void 0,size:64}),(0,a.BX)(I.gq,{alignItems:"center",color:"white",gap:8,children:[!u&&(0,a.tZ)(s.Z,{size:16}),(0,a.tZ)(E.xv.B2,{as:"h3",color:"white",weight:"semibold",textAlign:u?"center":"left",children:i})]}),!u&&(0,a.tZ)(E.xv.B4,{color:"white",opacity:80,align:"center",children:n})]}),(0,a.BX)(I.tu,{gap:8,children:[c&&(0,a.tZ)(x.zx,{priority:"primary-mono",onClick:()=>{(0,b.j)(b.FP.FREE_PREVIEW_PAYWALL_RESTART_BUTTON_CLICKED,{post_id:r.id}),c()},children:m("Replay")}),(0,a.BX)(x.zx,{onClick:o,priority:"secondary",children:[u&&(0,a.tZ)(f.Z,{size:18,className:P.icon}),d]})]})]})}},70958:function(e,t,n){n.d(t,{l:()=>a});var i=n(16584),r=n(19081),l=n(58175);let a=e=>{let{children:t,avoidBackgroundBlur:n}=e;return(0,i.tZ)(r.gq,{alignItems:"center",bg:n?void 0:"glass-inverted-medium",color:"white",gap:6,height:24,paddingX:8,radius:"sm","data-testid":"audio-player-preview-label",style:n?{background:"var(--color-light-primary)"}:void 0,children:(0,i.tZ)(l.xv.B5,{weight:"medium",color:"white",children:t})})}},61404:function(e,t,n){n.d(t,{w:()=>m});var i=n(58865),r=n(16584),l=n(94184),a=n.n(l),o=n(95441),d=n(19081),c=n(58175);let s={timestamp:"timestamp-FzOPmB","track-container":"track-container-Ycx4d5","track-container-dragging":"track-container-dragging-oDgpWK","track-handle":"track-handle-Ko3Wwm",track:"track-AtNL73","track-played":"track-played-VpPIlb","track-drag-time":"track-drag-time-QOxM_w","sr-progress":"sr-progress-gt0aLk"};function u(){let e=(0,i._)([""," with "," remaining"]);return u=function(){return e},e}let m=e=>{let{containerRef:t,currentTime:n,dragTime:i,hideStartingTimestamp:l,remainingTime:m,progress:p,onMouseDown:v}=e,{iString:h,iTemplate:g}=(0,o.M1)();return(0,r.BX)(d.gq,{alignItems:"center",flex:"grow",gap:12,children:[!l&&(0,r.tZ)(c.xv.B5,{className:s.timestamp,color:"vibrance-primary",children:n}),(0,r.BX)("div",{ref:t,className:a()(s["track-container"],i&&s["track-container-dragging"]),onMouseDown:v,role:"slider","aria-label":h("Seek progress"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":100*p,"aria-valuetext":g(u(),n,m),tabIndex:0,children:[(0,r.BX)("div",{className:s["sr-progress"],"aria-hidden":!0,children:[h("Current time"),": ",n," / ",h("Total time"),": ",m]}),(0,r.tZ)("div",{className:s.track}),(0,r.tZ)("div",{className:s["track-played"],style:{width:"".concat(100*p,"%")}}),i&&(0,r.tZ)(c.xv.B5,{className:s["track-drag-time"],style:{left:"".concat(100*p,"%")},"aria-hidden":!0,children:i}),(0,r.tZ)("div",{className:s["track-handle"],style:{left:"".concat(100*p,"%")},"aria-hidden":!0})]}),(0,r.tZ)(c.xv.B5,{className:s.timestamp,color:"vibrance-secondary",children:m})]})}},4158:function(e,t,n){n.d(t,{z:()=>c});var i=n(7409),r=n(16584),l=n(3411),a=n(19081),o=n(60308);let d={backgroundImage:"backgroundImage-Eijlhi",backgroundDarkenRight:"backgroundDarkenRight-DYlB0F"},c=e=>{let{backgroundUrl:t,blurAmount:n,isBlurred:c,palette:s,radius:u="md"}=e,m="none"===u?void 0:u;return(0,r.BX)(r.HY,{children:[t&&(0,r.tZ)(a.hs,{className:d.backgroundImage,inset:0,position:"absolute",radius:m,style:t?{backgroundImage:"url(".concat((0,o.zF4)(t),")")}:void 0}),c?(0,r.tZ)(a.hs,{inset:0,position:"absolute",radius:m,style:(0,i._)({backdropFilter:"blur(".concat(n,"px)"),WebkitBackdropFilter:"blur(".concat(n,"px)"),WebkitFilter:"brightness(0.7)",filter:"brightness(0.7)"},(0,l.mX)({palette:s}))}):(0,r.tZ)(a.hs,{className:d.backgroundDarkenRight,inset:0,position:"absolute",radius:m})]})}},14283:function(e,t,n){n.d(t,{o:()=>g});var i=n(7409),r=n(99282),l=n(16584),a=n(2564),o=n(95441),d=n(68833),c=n(15771),s=n(19081),u=n(58175),m=n(3486),p=n(60308),v=n(47929);let h={header:"header-PjQum5",vibranceIcon:"vibranceIcon-a9wDjU"},g=e=>{let{explicitPodcastUrl:t,isDisabled:n,post:g,postTitle:f,pub:Z,section:y,showTitle:C,showUpgradeButton:b,variant:w}=e,{iString:_}=(0,o.M1)();return(0,l.BX)(s.gq,{className:h.header,flex:"grow",alignItems:"center",alignSelf:"start",gap:"mini"===w||"notes-embed"===w?12:16,opacity:n?20:void 0,pointerEvents:n?"none":void 0,children:[(0,l.tZ)(m.p,{post:g,pub:Z,section:y,size:"mini"===w?32:"notes-embed"===w?48:76,url:t}),(0,l.BX)(s.tu,{minWidth:0,gap:4,flex:"grow",children:["mini"!==w&&(0,l.tZ)(u.xv.B4,{color:"vibrance-secondary",ellipsis:!0,overflow:"hidden",children:C}),(0,l.tZ)(u.xv.B3,(0,r._)((0,i._)({color:"vibrance-primary",ellipsis:!0,overflow:"hidden",weight:"medium"},"mini"===w?{size:14,lineHeight:20}:null),{style:{maxWidth:460},children:f})),b&&"mini"!==w&&"notes-embed"!==w&&(0,l.tZ)(s.gq,{paddingTop:4,children:(0,l.tZ)(c.zx,{"data-testid":"free-podcast-url-cta",href:(0,p.Zs0)(Z,{simple:!0,next:"undefined"!=typeof document?document.location.href:"",utm_source:v.b3.showsAudioPlayerHeader,utm_medium:v.lP.web,utm_content:null==g?void 0:g.id}),localNavigation:!1,priority:"primary-mono",size:"sm",onClick:()=>{(0,d.j)(d.FP.LISTEN_AD_FREE_CLICKED,{post_id:null==g?void 0:g.id,section_id:null==y?void 0:y.id,source:"audio-player"})},children:_("Listen ad-free")})})]}),"notes-embed"===w&&(0,l.tZ)(a.Z,{className:h.vibranceIcon,size:20})]})}},28797:function(e,t,n){n.d(t,{Z:()=>p});var i=n(7409),r=n(99282),l=n(16584),a=n(30396),o=n(94184),d=n.n(o),c=n(85277),s=n(48083);let u={container:"container-zAxsTa",text:"text-Mt4veX","container-full-screen":"container-full-screen-mK397L","text-full-screen":"text-full-screen-BX6VEN","highlight-word":"highlight-word-YsKp8Q","captions-small":"captions-small-CavdhE","text-small":"text-small-boKa5D"},m=new c.WebVTTParser,p=e=>{var t,n;let{videoEle:o,mediaUpload:c,handle:p,subtitles:v,showCaptions:h,withHighlight:g,size:f="md",captionsStyle:Z}=e,[y,C]=(0,a.eJ)([]),[b,w]=(0,a.eJ)({segment:null,wordIndex:-1}),{segment:_,wordIndex:k}=b,x=(0,s.Z)(o);return((0,a.d4)(()=>{if(o){let e=o.currentTime,t=y.find(t=>e>=t.start&&e<=t.end),n=null!=t?t:null;if(!g){w({wordIndex:-1,segment:n});return}if(n){let t=-1;for(let i=0;i<n.words.length;i++){let r=n.words[i];if(r){if(e>=r.start&&e<=r.end){t=i;break}if(e<r.start)break;t=i}}w({wordIndex:t,segment:n})}else w({wordIndex:-1,segment:n})}},[o,v,y.length,x]),(0,a.d4)(()=>{var e,t,n,l;let a=(null!==(n=null==c?void 0:null===(e=c.transcription)||void 0===e?void 0:e.signed_captions)&&void 0!==n?n:[]).find(e=>e.language===v);(null==a?void 0:a.original)?(null==c?void 0:null===(t=c.transcription)||void 0===t?void 0:t.cdn_url)&&fetch(null==c?void 0:null===(l=c.transcription)||void 0===l?void 0:l.cdn_url).then(e=>e.json()).then(e=>{C(e.map(e=>(0,r._)((0,i._)({},e),{words:e.words?e.words:[]})))}).catch(e=>console.error("Error fetching transcription:",e)):(null==a?void 0:a.url)&&fetch(a.url).then(e=>e.text()).then(e=>{C(m.parse(e,"metadata").cues.map(e=>({text:e.text,start:e.startTime,end:e.endTime,words:[]})))}).catch(e=>console.error("Error fetching transcription:",e))},[c,v,h]),h&&y.length)?_?(0,l.tZ)("div",{className:d()(u.container,{[u["container-full-screen"]]:p.active,[u["captions-small"]]:"sm"===f}),style:Z,children:_&&(0,l.tZ)("div",{className:d()(u.text,{[u["text-full-screen"]]:p.active,[u["text-small"]]:"sm"===f}),children:(null==_?void 0:null===(t=_.words)||void 0===t?void 0:t.length)?(0,l.tZ)("div",{children:null==_?void 0:_.words.map((e,t)=>(0,l.tZ)("span",{className:d()({[u["highlight-word"]]:t<=k&&g||!g}),children:e.word.startsWith(" ")?e.word:" ".concat(e.word)},t))}):(0,l.tZ)("span",{className:u["highlight-word"],children:function(e){var t;let n=e.match(/<v [^>]+>(.*?)(<\/v>|$)/);return n?null===(t=n[1])||void 0===t?void 0:t.replace(/<\/v>$/,""):""}(null!==(n=null==_?void 0:_.text)&&void 0!==n?n:"")})})}):null:null}},49233:function(e,t,n){n.d(t,{Z:()=>h});var i=n(16584),r=n(30396),l=n(7409),a=n(99282),o=n(64515);let d=e=>(0,i.tZ)(o.l,(0,a._)((0,l._)({name:"ClosedCaptionsFilledIcon",svgParams:{height:16,width:20,stroke:"#808080"}},e),{children:(0,i.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 2.51429C0 1.12568 1.14532 0 2.55814 0H17.4419C18.8547 0 20 1.12568 20 2.51429V13.4857C20 14.8743 18.8547 16 17.4419 16H2.55814C1.14532 16 0 14.8743 0 13.4857V2.51429ZM12.6776 7.9987V8.60503C12.6776 8.91696 12.7142 9.17954 12.7874 9.3928C12.8638 9.60605 12.972 9.76837 13.1121 9.87977C13.2553 9.98799 13.4272 10.0421 13.6277 10.0421C13.8251 10.0421 13.9906 9.99436 14.1242 9.89887C14.2579 9.8002 14.3582 9.66811 14.425 9.5026C14.4919 9.3371 14.5253 9.1509 14.5253 8.94401H16.4207V9.09201V9.23524C16.4207 9.7254 16.2997 10.1535 16.0578 10.5195C15.8191 10.8824 15.4881 11.1641 15.0648 11.3646C14.6415 11.5651 14.1561 11.6654 13.6086 11.6654C12.9657 11.6654 12.4214 11.538 11.9758 11.2834C11.5334 11.0288 11.1976 10.6723 10.9684 10.214C10.7393 9.75246 10.6247 9.21137 10.6247 8.59071V8.00347C10.6247 7.37963 10.7393 6.83854 10.9684 6.38021C11.1976 5.92188 11.5334 5.56699 11.9758 5.31554C12.4214 5.06091 12.9657 4.93359 13.6086 4.93359C14.0192 4.93359 14.3964 4.99089 14.7401 5.10547C15.0839 5.21687 15.3799 5.3792 15.6281 5.59245C15.8796 5.8057 16.0737 6.06192 16.2106 6.36111C16.3507 6.6603 16.4207 6.99609 16.4207 7.36849V7.51172V7.65017H14.5253C14.5253 7.44329 14.4919 7.25709 14.425 7.09158C14.3582 6.92607 14.2579 6.79557 14.1242 6.70009C13.9906 6.6046 13.8251 6.55686 13.6277 6.55686C13.4272 6.55686 13.2553 6.61256 13.1121 6.72396C12.972 6.83218 12.8638 6.99291 12.7874 7.20616C12.7142 7.41942 12.6776 7.68359 12.6776 7.9987ZM6.23177 8.60503V7.9987C6.23177 7.68359 6.26837 7.41942 6.34158 7.20616C6.41797 6.99291 6.52619 6.83218 6.66623 6.72396C6.80946 6.61256 6.98134 6.55686 7.18186 6.55686C7.3792 6.55686 7.5447 6.6046 7.67839 6.70009C7.81207 6.79557 7.91233 6.92607 7.97917 7.09158C8.04601 7.25709 8.07943 7.44329 8.07943 7.65017H9.97483V7.51172V7.36849C9.97483 6.99609 9.9048 6.6603 9.76476 6.36111C9.62789 6.06192 9.43374 5.8057 9.18229 5.59245C8.93403 5.3792 8.63802 5.21687 8.29427 5.10547C7.95052 4.99089 7.57335 4.93359 7.16276 4.93359C6.51982 4.93359 5.97555 5.06091 5.52995 5.31554C5.08753 5.56699 4.75174 5.92188 4.52257 6.38021C4.2934 6.83854 4.17882 7.37963 4.17882 8.00347V8.59071C4.17882 9.21137 4.2934 9.75246 4.52257 10.214C4.75174 10.6723 5.08753 11.0288 5.52995 11.2834C5.97555 11.538 6.51982 11.6654 7.16276 11.6654C7.71021 11.6654 8.1956 11.5651 8.61892 11.3646C9.04225 11.1641 9.37326 10.8824 9.61198 10.5195C9.85388 10.1535 9.97483 9.7254 9.97483 9.23524V9.09201V8.94401H8.07943C8.07943 9.1509 8.04601 9.3371 7.97917 9.5026C7.91233 9.66811 7.81207 9.8002 7.67839 9.89887C7.5447 9.99436 7.3792 10.0421 7.18186 10.0421C6.98134 10.0421 6.80946 9.98799 6.66623 9.87977C6.52619 9.76837 6.41797 9.60605 6.34158 9.3928C6.26837 9.17954 6.23177 8.91696 6.23177 8.60503Z",fill:"white",strokeWidth:.25})})),c=e=>(0,i.BX)(o.l,(0,a._)((0,l._)({name:"ClosedCaptionsIcon",svgParams:{height:16,width:20,stroke:"#808080"}},e),{children:[(0,i.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 2.51429C0 1.12568 1.14532 0 2.55814 0H17.4419C18.8547 0 20 1.12568 20 2.51429V13.4857C20 14.8743 18.8547 16 17.4419 16H2.55814C1.14532 16 0 14.8743 0 13.4857V2.51429ZM2.55814 1.37143C1.91595 1.37143 1.39535 1.8831 1.39535 2.51429V13.4857C1.39535 14.1169 1.91595 14.6286 2.55814 14.6286H17.4419C18.0841 14.6286 18.6047 14.1169 18.6047 13.4857V2.51429C18.6047 1.8831 18.0841 1.37143 17.4419 1.37143H2.55814Z",fill:"white","stroke-width":"0.25"}),(0,i.tZ)("path",{d:"M12.1858 7.94143V8.6719C12.1858 9.03793 12.2336 9.34826 12.329 9.60289C12.4277 9.85752 12.5694 10.0501 12.754 10.1806C12.9418 10.3111 13.1661 10.3763 13.4271 10.3763C13.6563 10.3763 13.8536 10.3286 14.0192 10.2331C14.1878 10.1344 14.3183 10.0008 14.4106 9.83206C14.5029 9.66337 14.5555 9.4708 14.5682 9.25437H16.0626C16.0626 9.2862 16.0626 9.31802 16.0626 9.34985C16.0626 9.38168 16.0626 9.41192 16.0626 9.44057C16.053 9.88617 15.9321 10.2777 15.6997 10.615C15.4705 10.9492 15.1586 11.2102 14.7639 11.398C14.3693 11.5826 13.9205 11.6749 13.4176 11.6749C12.8097 11.6749 12.294 11.5524 11.8707 11.3073C11.4506 11.0622 11.1307 10.7153 10.9111 10.2665C10.6946 9.81774 10.5864 9.2846 10.5864 8.66713V7.94143C10.5864 7.32077 10.6962 6.78605 10.9159 6.33727C11.1355 5.8853 11.4553 5.53677 11.8755 5.29169C12.2988 5.04661 12.8128 4.92407 13.4176 4.92407C13.7964 4.92407 14.1449 4.97818 14.4632 5.0864C14.7814 5.19143 15.0584 5.34421 15.2939 5.54473C15.5294 5.74525 15.714 5.98556 15.8477 6.26565C15.9846 6.54256 16.0562 6.85289 16.0626 7.19664C16.0626 7.22847 16.0626 7.2603 16.0626 7.29213C16.0626 7.32077 16.0626 7.34942 16.0626 7.37807H14.5682C14.5555 7.15526 14.5014 6.95633 14.4059 6.78128C14.3136 6.60622 14.1847 6.46936 14.0192 6.37069C13.8536 6.26883 13.6563 6.21791 13.4271 6.21791C13.1661 6.21791 12.9433 6.28634 12.7587 6.4232C12.5741 6.55688 12.4325 6.75104 12.3338 7.00567C12.2352 7.2603 12.1858 7.57222 12.1858 7.94143Z",fill:"white","stroke-width":"0.25"}),(0,i.tZ)("path",{d:"M5.87381 7.94143V8.6719C5.87381 9.03793 5.92155 9.34826 6.01704 9.60289C6.1157 9.85752 6.25734 10.0501 6.44195 10.1806C6.62974 10.3111 6.85413 10.3763 7.11513 10.3763C7.34429 10.3763 7.54163 10.3286 7.70714 10.2331C7.87583 10.1344 8.00633 10.0008 8.09863 9.83206C8.19094 9.66337 8.24345 9.4708 8.25618 9.25437H9.75054C9.75054 9.2862 9.75054 9.31802 9.75054 9.34985C9.75054 9.38168 9.75054 9.41192 9.75054 9.44057C9.74099 9.88617 9.62004 10.2777 9.3877 10.615C9.15853 10.9492 8.84661 11.2102 8.45193 11.398C8.05726 11.5826 7.60847 11.6749 7.10558 11.6749C6.49765 11.6749 5.98202 11.5524 5.5587 11.3073C5.13856 11.0622 4.81868 10.7153 4.59907 10.2665C4.38263 9.81774 4.27441 9.2846 4.27441 8.66713V7.94143C4.27441 7.32077 4.38422 6.78605 4.60384 6.33727C4.82346 5.8853 5.14334 5.53677 5.56348 5.29169C5.9868 5.04661 6.50083 4.92407 7.10558 4.92407C7.48434 4.92407 7.83286 4.97818 8.15115 5.0864C8.46944 5.19143 8.74635 5.34421 8.98188 5.54473C9.21741 5.74525 9.40202 5.98556 9.5357 6.26565C9.67256 6.54256 9.74418 6.85289 9.75054 7.19664C9.75054 7.22847 9.75054 7.2603 9.75054 7.29213C9.75054 7.32077 9.75054 7.34942 9.75054 7.37807H8.25618C8.24345 7.15526 8.18934 6.95633 8.09386 6.78128C8.00156 6.60622 7.87265 6.46936 7.70714 6.37069C7.54163 6.26883 7.34429 6.21791 7.11513 6.21791C6.85413 6.21791 6.63133 6.28634 6.44672 6.4232C6.26212 6.55688 6.12048 6.75104 6.02181 7.00567C5.92314 7.2603 5.87381 7.57222 5.87381 7.94143Z",fill:"white","stroke-width":"0.25"})]}));var s=n(95441),u=n(84370),m=n(87077),p=n(74571),v=n(63722);let h=e=>{let{showCaptions:t,setShowCaptions:n,isFocused:l,disabled:a,disableShortcuts:o,disableTooltips:h=!1}=e,{iString:g}=(0,s.M1)(),f=e=>{n({showCaptions:e,userInitiated:!0}),e?localStorage.setItem("video_player:show_captions","true"):localStorage.removeItem("video_player:show_captions")};return(0,r.d4)(()=>{let e="true"===localStorage.getItem("video_player:show_captions");t!==e&&n({showCaptions:e,userInitiated:!1})},[]),(0,p.Kr)("c",()=>f(!t),l&&!o),(0,i.tZ)(m.u,{disabled:h,text:g("Closed captions / subtitles"),trailing:o?void 0:(0,i.tZ)(u.T,{children:"C"}),children:(0,i.tZ)(v.Z,{onClick:()=>f(!t),disabled:a,children:t?(0,i.tZ)(d,{}):(0,i.tZ)(c,{})})})}},90630:function(e,t,n){n.d(t,{Z:()=>s});var i=n(16584),r=n(27299),l=n(83502),a=n(84370),o=n(87077),d=n(74571),c=n(63722);let s=e=>{let{disableShortcuts:t=!1,disableTooltips:n=!1,handle:s,isFocused:u}=e,m=()=>{s.active?s.exit():s.enter()};return(0,d.Kr)("f",m,u&&!t),(0,i.tZ)(o.u,{disabled:n,text:s.active?"Exit full screen":"Full screen",trailing:t?void 0:(0,i.tZ)(a.T,{children:"F"}),children:(0,i.tZ)(c.Z,{onClick:m,children:s.active?(0,i.tZ)(r.Z,{size:18}):(0,i.tZ)(l.Z,{size:18})})})}},63587:function(e,t,n){n.d(t,{Z:()=>C});var i=n(16584),r=n(30396),l=n(2564),a=n(33979),o=n(80569),d=n.n(o),c=n(20888),s=n(68833),u=n(98914),m=n(33870),p=n(71068),v=n(19081),h=n(58175),g=n(74571),f=n(63722),Z=n(84864);let y={fullWidth:"fullWidth-KNhzK0",container:"container-djeVTw","thumbnail-duration":"thumbnail-duration-CaP985",space:"space-NQlvsK"},C=e=>{var t,n,o,C;let{pub:b,postId:w,isFocused:_,disableShortcuts:k=!1}=e,[x,I]=(0,r.eJ)(!1),[E,B]=(0,r.eJ)(null),S=e=>{if(!E||!b)return;(0,s.j)(s.FP.VIDEO_NEXT_VIDEO_BUTTON_CLICKED,{postId:E.id,pubId:b.id});let t=(0,m.zV)({linkToComments:!1,post:E,pub:b,utm:"next-episode"});(0,u.uX)(t,{event:e})};(0,r.d4)(()=>{(async()=>{var e,t,n;let i=await d().get("/api/v1/recent_posts").query({episodes_only:!0}),r=(null!==(t=i.body)&&void 0!==t?t:[]).findIndex(e=>e.id===w);B(null!==(n=null===(e=i.body)||void 0===e?void 0:e[r+1])&&void 0!==n?n:void 0)})()},[]),(0,g.Kr)("shift+n",()=>S(),_&&!k);let N=(null==E?void 0:E.cover_image)||(null==E?void 0:E.podcast_episode_image_url);return(0,i.BX)("div",{style:{position:"relative"},onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[x&&N&&(0,i.BX)(v.tu,{position:"absolute",className:y.container,children:[(0,i.BX)(v.tu,{bg:"glass-inverted-medium",radius:"sm",style:{cursor:"pointer"},paddingY:8,paddingX:12,gap:4,onClick:S,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[(0,i.BX)(v.gq,{gap:16,children:[(0,i.BX)(v.tu,{gap:2,flex:"grow",children:[(0,i.tZ)(h.xv.Meta,{color:"white",opacity:80,children:"Next Up"}),(0,i.tZ)(h.xv.B4,{color:"white",children:E.title})]}),(0,i.tZ)(v.gq,{alignItems:"center",children:(0,i.tZ)(l.Z,{color:"white",size:24})})]}),(0,i.BX)("div",{style:{position:"relative"},children:[(0,i.tZ)(c.e,{className:y.fullWidth,src:N,alt:E.title,maxWidth:200,imageProps:{height:112.5,smartCrop:!0},radius:"sm"}),(0,i.tZ)(v.gq,{className:y["thumbnail-duration"],bg:"glass-inverted-medium",position:"absolute",radius:"sm",children:(0,i.tZ)(h.xv.Meta,{color:"white",lineHeight:20,children:(0,Z.secondsToHHMMSS)(null!==(C=null!==(o=null===(t=E.videoUpload)||void 0===t?void 0:t.duration)&&void 0!==o?o:null===(n=E.podcastUpload)||void 0===n?void 0:n.duration)&&void 0!==C?C:0)})})]})]}),(0,i.tZ)(p.xu,{className:y.space})]}),(0,i.tZ)(f.Z,{disabled:!E,children:(0,i.tZ)(a.Z,{size:18,fill:"white",onClick:S})})]})}},32782:function(e,t,n){n.d(t,{Z:()=>s});var i=n(16584),r=n(30396),l=n(37474),a=n(84370),o=n(87077),d=n(74571),c=n(63722);let s=e=>{let{disableShortcuts:t,disableTooltips:n,isFocused:s,mediaRef:u}=e,[m,p]=(0,r.eJ)(!1),v=async()=>{if(u.current)try{document.pictureInPictureElement?await document.exitPictureInPicture():u.current.player&&"requestPictureInPicture"in u.current.player&&await u.current.player.requestPictureInPicture()}catch(e){console.error("Failed to toggle PiP mode:",e)}};return(0,r.d4)(()=>{let e=()=>p(!0),t=()=>p(!1);if(u.current){var n,i;null===(n=u.current.player)||void 0===n||n.addEventListener("enterpictureinpicture",e),null===(i=u.current.player)||void 0===i||i.addEventListener("leavepictureinpicture",t)}return()=>{if(u.current){var n,i;null===(n=u.current.player)||void 0===n||n.removeEventListener("enterpictureinpicture",e),null===(i=u.current.player)||void 0===i||i.removeEventListener("leavepictureinpicture",t)}}},[u]),(0,d.Kr)("i",v,s&&!t),(0,i.tZ)(o.u,{disabled:n,text:"Picture-in-picture",trailing:t?void 0:(0,i.tZ)(a.T,{children:"I"}),children:(0,i.tZ)(c.Z,{onClick:v,children:(0,i.tZ)(l.Z,{size:18})})})}},76671:function(e,t,n){n.d(t,{Z:()=>u});var i=n(16584),r=n(44276),l=n(77475),a=n(53030),o=n(84370),d=n(87077),c=n(74571),s=n(63722);let u=e=>{let{mediaRef:t,isFocused:n,disableShortcuts:u,disableTooltips:m=!1}=e,p=(0,a.On)(t),v=()=>{var e,n;return null===(n=t.current)||void 0===n?void 0:null===(e=n.player)||void 0===e?void 0:e.play()},h=()=>{var e,n;return null===(n=t.current)||void 0===n?void 0:null===(e=n.player)||void 0===e?void 0:e.pause()},g=()=>p?h():v();return(0,c.Kr)("k",g,n&&!u),(0,c.Kr)(" ",g,n&&!u),(0,i.tZ)(d.u,{disabled:m,text:p?"Pause":"Play",trailing:u?void 0:(0,i.tZ)(o.T,{children:"K"}),children:(0,i.tZ)(s.Z,{onClick:g,children:p?(0,i.tZ)(r.Z,{fill:"white",size:18}):(0,i.tZ)(l.Z,{fill:"white",size:18})})})}},63722:function(e,t,n){n.d(t,{Z:()=>s});var i=n(7409),r=n(99282),l=n(98848),a=n(16584),o=n(94184),d=n.n(o),c=n(15771);let s=e=>{var{children:t,className:n}=e,o=(0,l._)(e,["children","className"]);return(0,a.tZ)(c.kG,(0,r._)((0,i._)({resetCss:!0,className:d()("playerButton-qCsqQJ",n)},o),{children:t}))}},84945:function(e,t,n){n.d(t,{L:()=>s,Z:()=>u});var i=n(16584),r=n(30396),l=n(19081),a=n(58175),o=n(43905);let d=e=>{let{startTime:t,mediaRef:n}=e,[l,d]=(0,r.eJ)(0);return(0,r.d4)(()=>{let e;let t=()=>{var i;(null===(i=n.current)||void 0===i?void 0:i.player)&&(d(n.current.player.currentTime),e=requestAnimationFrame(t))};return n.current&&(e=requestAnimationFrame(t)),()=>{cancelAnimationFrame(e)}},[n]),(0,i.tZ)(a.xv.Digit,{size:14,color:"white",children:t?l-t<0?null:(0,o.mr)(l-t):(0,o.mr)(l)})},c=e=>{var t;let{duration:n,mediaRef:l}=e,d=null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.player,[c,s]=(0,r.eJ)(null!=n?n:(null==d?void 0:d.duration)?d.duration:0);return(0,r.d4)(()=>{let e=()=>{var e;(null==l?void 0:null===(e=l.current)||void 0===e?void 0:e.player)&&!isNaN(l.current.player.duration)&&s(l.current.player.duration)};if(null==l?void 0:l.current){var t,n;null===(n=l.current)||void 0===n||null===(t=n.player)||void 0===t||t.addEventListener("durationchange",e)}return e(),()=>{if(null==l?void 0:l.current){var t,n;null===(n=l.current)||void 0===n||null===(t=n.player)||void 0===t||t.removeEventListener("durationchange",e)}}},[d]),(0,i.tZ)(a.xv.Digit,{size:14,color:"white",children:(0,o.mr)(c)})},s=e=>{let{startTime:t,duration:n,mediaRef:r}=e;return(0,i.BX)(l.gq,{justifyContent:"center",alignItems:"center",gap:4,children:[(0,i.tZ)(d,{mediaRef:r,startTime:t}),(0,i.tZ)(a.xv.Digit,{size:14,color:"white",children:"/"}),(0,i.tZ)(c,{duration:n})]})},u=e=>{let{duration:t,mediaRef:n}=e;return(0,i.BX)(l.gq,{justifyContent:"center",alignItems:"center",gap:4,children:[(0,i.tZ)(d,{startTime:null,mediaRef:n}),(0,i.tZ)(a.xv.Digit,{size:14,color:"white",children:"/"}),(0,i.tZ)(c,{duration:t,mediaRef:n})]})}},68260:function(e,t,n){n.d(t,{Z:()=>d});var i=n(16584),r=n(2647),l=n(95441),a=n(87077),o=n(63722);let d=e=>{let{disableTooltips:t=!1,isSettingsOpen:n,setIsSettingsOpen:d}=e,{iString:c}=(0,l.M1)();return n?(0,i.tZ)(o.Z,{children:(0,i.tZ)(r.Z,{size:18,onClick:()=>d(!n)})}):(0,i.tZ)(a.u,{disabled:t,text:c("Settings"),children:(0,i.tZ)(o.Z,{children:(0,i.tZ)(r.Z,{size:18,onClick:()=>d(!n)})})})}},30730:function(e,t,n){n.d(t,{Z:()=>I});var i=n(7409),r=n(16584),l=n(6400),a=n(30396),o=n(94184),d=n.n(o),c=n(25380),s=n(53961),u=n(48619),m=n(31131),p=n(48083),v=n(14068),h=n(75697),g=n(95441),f=n(68833),Z=n(19081),y=n(58175),C=n(40949);let b={seetingsMenu:"seetingsMenu-zc8kI3",menuItem:"menuItem-Z86vY3"},w=e=>{let{mediaRef:t,dismiss:n}=e,i=e=>{var i;(null===(i=t.current)||void 0===i?void 0:i.player)&&(t.current.player.playbackRate=e,localStorage.setItem("video_player:playbackRate",e.toString())),n()};return(0,r.tZ)(Z.tu,{gap:4,flex:"grow",children:[.25,.5,.75,1,1.25,1.5,1.75,2].map(e=>{var n,l;return(0,r.BX)(Z.gq,{className:b.menuItem,padding:8,justifyContent:"space-between",alignItems:"center",onClick:()=>i(e),children:[(0,r.BX)(y.xv.B4,{font:"text",size:12,lineHeight:16,weight:"regular",color:"white",children:[e,"\xd7"]}),e===(null===(l=t.current)||void 0===l?void 0:null===(n=l.player)||void 0===n?void 0:n.playbackRate)&&(0,r.tZ)(c.Z,{size:16,color:"white"})]})})})},_={en:"English",es:"Spanish",it:"Italian",de:"German",pt:"Portuguese",fr:"French"},k=e=>{let{options:t=[],subtitles:n,setSubtitles:i,dismiss:l}=e,a=e=>{i(e),localStorage.setItem("video_player:subtitles",e||""),l()};return(0,r.tZ)(Z.tu,{gap:4,flex:"grow",children:[null,...t].map(e=>{var t;return(0,r.BX)(Z.gq,{className:b.menuItem,paddingY:8,paddingX:16,justifyContent:"space-between",alignItems:"center",onClick:()=>a(e),children:[(0,r.tZ)(y.xv.B4,{font:"text",size:12,lineHeight:16,weight:"regular",color:"white",children:null!==(t=_[null!=e?e:""])&&void 0!==t?t:"None"}),n===e&&(0,r.tZ)(c.Z,{size:16,color:"white"})]})})})},x=e=>{let{title:t,icon:n,selection:i,onClick:l}=e;return(0,r.BX)(Z.gq,{className:b.menuItem,padding:8,justifyContent:"space-between",alignItems:"center",onClick:l,children:[(0,r.BX)(Z.gq,{gap:8,alignItems:"center",children:[n,(0,r.tZ)(y.xv.B4,{color:"white",font:"text",size:12,lineHeight:16,weight:"regular",children:t})]}),(0,r.tZ)(Z.gq,{children:(0,r.tZ)(y.xv.B4,{color:"white",font:"text",size:12,lineHeight:16,weight:"regular",children:i})})]})},I=e=>{var t,n,o;let{hideSharePostAtCurrentTime:c,mediaRef:y,post:I,pub:E,podcastUpload:B,subtitles:S,setSubtitles:N,setIsSettingsOpen:L}=e,{iString:P}=(0,g.M1)(),[T,M]=(0,a.eJ)(!1),[D,X]=(0,a.eJ)(!1),z=(0,l.createRef)(),R=(0,p.Z)(null===(t=y.current)||void 0===t?void 0:t.player),O=(0,C.y)(),[A,F]=(0,a.eJ)([]);return(0,a.d4)(()=>{N(localStorage.getItem("video_player:subtitles")||null)},[]),(0,a.d4)(()=>{var e,t;if(null==B?void 0:null===(e=B.transcription)||void 0===e?void 0:e.signed_captions){let e=(null!==(t=B.transcription.signed_captions)&&void 0!==t?t:[]).map(e=>e.language);F(e),S&&!e.includes(S)&&N(null)}},[B,S]),(0,a.d4)(()=>{var e,t;let n=parseFloat(localStorage.getItem("video_player:playbackRate")||"1"),i=()=>{var e;(null===(e=y.current)||void 0===e?void 0:e.player)&&(y.current.player.playbackRate=n)};return(null===(e=y.current)||void 0===e?void 0:e.player)&&(null===(t=y.current.player)||void 0===t||t.addEventListener("loadedmetadata",i)),()=>{if(y.current){var e;null===(e=y.current.player)||void 0===e||e.removeEventListener("loadedmetadata",i)}}},[y]),(0,v.Z)(z,()=>{M(!1),X(!1),L(!1)}),(0,r.BX)(Z.tu,{paddingY:8,ref:z,gap:4,flex:"grow",className:d()(b.seetingsMenu,{[b.slideOut]:T}),children:[T&&(0,r.tZ)(w,{mediaRef:y,dismiss:()=>M(!1)}),D&&(0,r.tZ)(k,{options:A,subtitles:S,setSubtitles:N,dismiss:()=>X(!1)}),!T&&!D&&(0,r.BX)(Z.tu,{gap:4,flex:"grow",children:[(0,r.tZ)(x,{title:P("Playback speed"),icon:(0,r.tZ)(s.Z,{size:16,color:"white"}),onClick:()=>M(!0),selection:(0,r.BX)(r.HY,{children:[null===(o=y.current)||void 0===o?void 0:null===(n=o.player)||void 0===n?void 0:n.playbackRate,"\xd7"]})}),A.length>0&&(0,r.tZ)(x,{title:P("Subtitles"),icon:(0,r.tZ)(u.Z,{size:16,color:"white"}),onClick:()=>X(!0),selection:_[null!=S?S:""]}),I&&E&&(0,r.BX)(l.Fragment,{children:[(0,r.tZ)(x,{title:P("Share post"),icon:(0,r.tZ)(m.Z,{size:16,color:"white"}),onClick:()=>{I&&E&&(O((0,h.O1)(null,{post:I,pub:E,useCustomDomainOverOpen:!0})),(0,f.j)(f.FP.SHARE_LINK_CLICKED,{name:"copy",source:"player",post_id:I.id}))}}),!c&&(0,r.tZ)(x,{title:P("Share post at current time"),icon:(0,r.tZ)(m.Z,{size:16,color:"white"}),onClick:()=>{if(!I||!E)return;let e=R?{timestamp:R.toFixed(1)}:{};O((0,h.O1)(null,{post:I,pub:E,useCustomDomainOverOpen:!0,params:e})),(0,f.j)(f.FP.SHARE_LINK_CLICKED,(0,i._)({name:"copy",source:"player",post_id:I.id},e))}})]})]})]})}},27420:function(e,t,n){n.d(t,{T:()=>q});var i=n(16584),r=n(30396),l=n(94184),a=n.n(l),o=n(74691),d=n.n(o),c=n(31131),s=n(61649),u=n(95441),m=n(53030),p=n(68833),v=n(19081),h=n(58175),g=n(74571),f=n(43905);let Z=()=>{let e=new URL(window.location.href);e.searchParams.delete("t"),e.searchParams.delete("d"),window.history.replaceState({},"",e.toString())},y=()=>{if("undefined"==typeof window)return null;let e=new URLSearchParams(window.location.search),t=e.get("t"),n=e.get("d");if(!t||!n)return null;let i=parseInt(t),r=parseInt(n);return isNaN(i)||isNaN(r)?(Z(),null):{start:i,end:i+d()(r,s.AT,s.ar)}},C=()=>{let[e]=(0,r.eJ)(y());return{clipTimes:e}};var b=n(40423),w=n(93370);let _=e=>{let{clipDuration:t,isMinimized:n,onClick:r}=e;return n?(0,i.tZ)(k,{onClick:r}):(0,i.BX)(v.gq,{alignItems:"center",bg:"glass-inverted-thick",gap:6,padding:6,paddingRight:8,radius:"full",onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),r()},children:[(0,i.tZ)("div",{className:"iconContainer-RgovDu",children:(0,i.tZ)(b.Z,{size:12,color:"white"})}),(0,i.tZ)(h.xv.Meta,{color:"white",children:(0,w.DL)(t)})]})},k=e=>{let{onClick:t}=e;return(0,i.tZ)("div",{className:"iconContainerMarker-qBRnT3",onMouseDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),t()},children:(0,i.tZ)(b.Z,{size:12,color:"white"})})};var x=n(7409),I=n(39693),E=n.n(I),B=n(71212),S=n(42042),N=n(67203),L=n(75697),P=n(15771),T=n(61254),M=n(44424),D=n(43681),X=n(33884);function z(e){var t,n,l,a;let{duration:o,pub:d,post:c,trigger:m,timestamp:v,onShareMenuOpen:h,onShareMenuClose:g,size:f}=e,[Z,y]=(0,r.eJ)(v),{onStartClipping:C}=(0,s.Sr)(),b=Z&&o,w=b?{t:Z.toFixed(1),d:o.toFixed(1)}:Z?{timestamp:Z.toFixed(1)}:{};(0,r.d4)(()=>{y(v)},[v]);let _=(0,L.O1)(null,{post:c,pub:null!=d?d:void 0,useCustomDomainOverOpen:!0,params:w}),{iString:k}=(0,u.M1)(),I={variant:"menu",url:_,onLinkClicked:e=>{(0,p.j)(p.FP.SHARE_LINK_CLICKED,(0,x._)({is_clip:b,type:e,post_id:null==c?void 0:c.id},w)),(0,p.j)(p.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"share_to_".concat(e),source:"playback timeline"})}},S=(0,D.LM)(I),P=(0,D.gY)(I),X=(0,D.oy)(I),z=(0,D.Wh)(I),O=R(I),A=E()([z,"sm"!==f?(0,i.tZ)(M.sN,{leading:(0,i.tZ)(B.Z,{}),onClick:()=>{(0,p.j)(p.FP.SHARE_LINK_CLICKED,(0,x._)({is_clip:b,type:"download_clip",post_id:null==c?void 0:c.id},w)),(0,p.j)(p.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"playback timeline"}),C({source:"video-timeline",title:null})},children:k("Download clip")}):null,(0,i.tZ)(N.O0,{url:I.url,onShare:()=>{var e;null===(e=I.onLinkClicked)||void 0===e||e.call(I,"chat")}}),(0,i.tZ)(T.iz,{paddingX:8}),O,S,P,X]);return(0,i.BX)(M.v2,{trigger:m,title:k("Share"),maxHeight:350,layerOptions:{placement:"top-center"},onOpen:h,onClose:g,children:[A,!b&&(0,i.BX)(i.HY,{children:[(0,i.tZ)(T.iz,{}),(0,i.tZ)(N.YY,{initialTime:null!=Z?Z:0,onChange:y,maxTime:null!==(a=null!==(l=null==c?void 0:null===(t=c.videoUpload)||void 0===t?void 0:t.duration)&&void 0!==l?l:null==c?void 0:null===(n=c.podcastUpload)||void 0===n?void 0:n.duration)&&void 0!==a?a:null})]})]})}let R=e=>{let{variant:t,url:n,onLinkClicked:r}=e,{iString:l}=(0,u.M1)(),a=()=>{window.open((0,X.TK)({message:null!=n?n:""}),"_blank"),null==r||r("notes")};return"icon"===t?(0,i.tZ)(P.hU,{onClick:a,children:(0,i.tZ)(S.Z,{})}):(0,i.tZ)(M.sN,{leading:(0,i.tZ)(S.Z,{}),onClick:a,children:l("Share to Notes")})};var O=n(73649);let A={timelineThumbnail:"timelineThumbnail-sJc0Xj",timelineThumbnailSmall:"timelineThumbnailSmall-FCvVQ9"},F=e=>{var t;let{children:n,showTooltip:r,size:l,setIsHovering:o,storyboard:d,videoTime:c}=e,s="sm"===l?75:100,u=null!==(t=null==d?void 0:d.tiles)&&void 0!==t?t:[],m=u.length?(0,O.wb)(u,c):null;return(0,i.BX)(v.tu,{bg:r?"glass-inverted-medium":void 0,radius:"sm"===l?"xs":"sm",padding:8*("sm"!==l),gap:4,opacity:100*!!r,children:[(0,i.tZ)(v.gq,{justifyContent:"center",alignItems:"center",onMouseEnter:()=>o(!1),children:(0,i.tZ)("div",{style:{position:"relative"},children:d&&m&&(0,i.tZ)(O.RF,{storyboard:d,imageUrl:d.url,displayHeight:s,displayWidth:d.tile_width/d.tile_height*s,x:m.x,y:m.y,className:a()(A.timelineThumbnail,{[A.timelineThumbnailSmall]:"sm"===l})})})}),n]})},U={container:"container-S0aAZ3",track:"track-FYojQC",trackClippedPlayed:"trackClippedPlayed-cnYlGh",trackClippedUnplayed:"trackClippedUnplayed-km4zul",trackFilled:"trackFilled-gbOxAX",trackExpanded:"trackExpanded-_EdObk"},V=e=>{let{clipTimes:t,duration:n,isHovering:l,isPlayingClippedSegment:o,post:d,pub:s,progress:m,setIsHovering:g,storyboard:f,onClickBubble:Z,onPause:y,onShareMenuOpen:C,onShareMenuClose:b}=e,{iString:w}=(0,u.M1)(),[k,x]=(0,r.eJ)(!1),[I,E]=(0,r.eJ)(!0),B=!o&&m>t.start/n*100,S=!o&&m>t.end/n*100;return(0,r.d4)(()=>{(0,p.j)(p.FP.MEDIA_CLIP_SEEN,{start_time:t.start,duration:t.end-t.start})},[t.end,t.start]),(0,i.BX)("div",{className:U.container,children:[(0,i.tZ)("div",{className:a()(U.track,U.trackUnclipped,{[U.trackFilled]:B,[U.trackExpanded]:B&&l}),style:{left:0,width:"calc(".concat(t.start/n*100,"% - 2px)")}}),(0,i.tZ)("div",{className:a()(U.track,{[U.trackClippedUnplayed]:o,[U.trackFilled]:S,[U.trackExpanded]:S&&l}),style:{left:"".concat(t.start/n*100,"%"),width:"".concat((t.end-t.start)/n*100,"%")}}),(0,i.tZ)("div",{className:a()(U.track),style:{right:0,width:"calc(".concat((1-t.end/n)*100,"% - 2px)")}}),o?(0,i.tZ)("div",{className:a()(U.track,U.trackClippedPlayed,{[U.trackExpanded]:l}),style:{left:"".concat(t.start/n*100,"%"),width:"".concat(m-t.start/n*100,"%")}}):m<t.start/n*100?(0,i.tZ)("div",{className:a()(U.track,U.trackFilled,{[U.trackExpanded]:l}),style:{left:0,width:"".concat(m,"%")}}):(0,i.tZ)("div",{className:a()(U.track,U.trackFilled,{[U.trackExpanded]:l}),style:{left:"calc(".concat(t.end/n*100,"% + 2px)"),width:"calc(".concat(m-t.end/n*100,"% - 2px)")}}),(0,i.BX)(v.tu,{alignItems:"center",position:"absolute",gap:8,style:{bottom:16,left:o?"".concat(Math.max(t.start/n*100,3.5),"%"):"".concat(Math.max(.5*(t.start+t.end)/n*100,1.5),"%"),transform:"translateX(-50%)"},onMouseEnter:()=>{x(!0)},onMouseLeave:()=>{I&&(E(!0),x(!1))},children:[k&&(0,i.tZ)(F,{setIsHovering:g,showTooltip:I,size:"md",storyboard:f,videoTime:t.start,children:(0,i.tZ)(z,{onShareMenuOpen:()=>{E(!1),null==C||C(),(0,p.j)(p.FP.POST_SHARE_BUTTON_CLICKED,{position:"video_timeline",post_id:null==d?void 0:d.id})},onShareMenuClose:()=>{E(!0),null==b||b()},timestamp:t.start,duration:t.end-t.start,pub:s,post:d,size:"md",trigger:(0,i.tZ)("div",{onMouseDown:e=>e.stopPropagation(),children:I&&(0,i.BX)(v.gq,{cursor:"pointer",gap:8,flex:"grow",paddingY:4,onClick:y,justifyContent:"center",children:[(0,i.tZ)(c.Z,{color:"white",size:20}),(0,i.tZ)(h.xv.B4,{color:"white",weight:"semibold",children:w("Share clip")})]})})})}),(0,i.tZ)(_,{clipDuration:t.end-t.start,isMinimized:!o,onClick:Z})]})]})},j={timelineContainer:"timelineContainer-QAunx2",timeline:"timeline-nCVBQY",timelineHover:"timelineHover-G7eFow",progress:"progress-K0IenH",progressHover:"progressHover-Cm9xTr",thumbnailContainer:"thumbnailContainer-vAgzNA"},q=e=>{var t;let{disableSharing:n,mediaRef:l,mediaUpload:o,post:Z,pub:y,size:b,startTime:w=0,endTime:_,onShareMenuOpen:k,onShareMenuClose:x}=e,{iString:I}=(0,u.M1)(),{isClipping:E}=(0,s.Sr)(),{currentTime:B}=(0,m.FI)(l),{clipTimes:S}=C(),N=!!(S&&B>=S.start&&B<=S.end),[L,P]=(0,r.eJ)(!0),[T,M]=(0,r.eJ)(null),[D,X]=(0,r.eJ)(0),[R,O]=(0,r.eJ)(!1),[A,U]=(0,r.eJ)(!1),[q,H]=(0,r.eJ)(0),[J,K]=(0,r.eJ)(0),[W,Y]=(0,r.eJ)(0),[G,Q]=(0,r.eJ)(0),$=(0,r.sO)(null),ee=(0,r.sO)(null),et=(0,r.sO)(null),en=(0,g.lg)(o),ei=(_||q)-w,er=(0,r.I4)(()=>{var e;if(null===(e=l.current)||void 0===e?void 0:e.player){let e=l.current.player;X(d()(e.currentTime-w,0,null!=ei?ei:e.duration-w)/(null!=ei?ei:e.duration)*100),_&&e.currentTime>=_&&(e.currentTime=w,e.pause())}$.current=requestAnimationFrame(er)},[l,w,ei,_]),el=(0,r.I4)(e=>{var t;if(et.current&&(null===(t=l.current)||void 0===t?void 0:t.player)){let t=et.current.getBoundingClientRect(),n=(e.clientX-t.left)/t.width;l.current.player.currentTime=d()(w+n*ei,0,q),X(100*n)}},[l,w,q,ei]),ea=(0,r.I4)(e=>{el(e)},[el]),eo=(0,r.I4)(e=>{R&&e.preventDefault()},[R]),ed=(0,r.I4)(()=>{O(!1),document.removeEventListener("mousemove",ea),document.removeEventListener("selectstart",eo)},[ea,eo]),ec=(0,r.I4)(e=>{e.preventDefault(),O(!0),el(e),document.addEventListener("mousemove",ea),document.addEventListener("mouseup",ed),document.addEventListener("selectstart",eo)},[el,ea,ed,eo]),es=()=>{Math.abs(J-G)>.1?(Q(e=>e+(J-e)*.1),ee.current=window.requestAnimationFrame(es)):(Q(J),ee.current&&window.cancelAnimationFrame(ee.current))};(0,r.d4)(()=>($.current=window.requestAnimationFrame(er),()=>{null!==$.current&&window.cancelAnimationFrame($.current),null!==ee.current&&window.cancelAnimationFrame(ee.current)}),[er]),(0,r.d4)(()=>{let e=()=>{var e;(null===(e=l.current)||void 0===e?void 0:e.player)&&!isNaN(l.current.player.duration)&&H(l.current.player.duration)};if(l.current){var t;null===(t=l.current.player)||void 0===t||t.addEventListener("durationchange",e)}return e(),()=>{if(l.current){var t;null===(t=l.current.player)||void 0===t||t.removeEventListener("durationchange",e)}}},[null===(t=l.current)||void 0===t?void 0:t.player]);let eu=T?T/ei*100:J*ei/100;return(0,i.BX)(v.gq,{ref:et,onMouseDown:ec,onMouseEnter:()=>U(!0),onMouseLeave:()=>U(!1),onClick:ed,onMouseMove:e=>{var t,n,i,r;let{x:l,width:a}=null!==(i=null===(t=et.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==i?i:{x:0,width:0};K((e.clientX-l)/a*100);let o=en?en.tile_width/en.tile_height*100:100,c=((null!=o?o:0)+10)/2/(null!==(r=null===(n=et.current)||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==r?r:1)*100,s=T?T/ei*100:null;Y(d()(null!=s?s:J,c,100-c)),ee.current||es()},flex:"grow",position:"relative",className:j.timelineContainer,cursor:"pointer",children:[S&&q&&Z&&y&&!E?(0,i.tZ)(V,{clipTimes:S,duration:q,isHovering:A,isPlayingClippedSegment:null!=N&&N,post:Z,pub:y,progress:D,setIsHovering:U,storyboard:en,onClickBubble:()=>{var e,t,n;(null===(e=l.current)||void 0===e?void 0:e.player)&&S&&(l.current.player.currentTime=S.start,l.current.player.paused&&(null===(t=(n=l.current.player).play)||void 0===t||t.call(n)))},onPause:()=>{var e,t,n;(null===(e=l.current)||void 0===e?void 0:e.player)&&(null===(t=(n=l.current.player).pause)||void 0===t||t.call(n))},onShareMenuOpen:k,onShareMenuClose:x}):(0,i.BX)("div",{className:j.timeline,children:[A&&(0,i.tZ)("div",{className:j.timelineHover,style:{width:"".concat(J,"%"),height:"100%"}}),(0,i.tZ)("div",{className:a()(j.progress,{[j.progressHover]:A&&!S}),style:{width:"".concat(D,"%"),height:"100%"}})]}),!E&&!n&&!S&&Z&&y&&x&&k&&(0,i.tZ)(v.tu,{position:"absolute",className:j.thumbnailContainer,style:{position:"absolute",left:"".concat(W,"%"),opacity:+!!A},children:(0,i.tZ)(F,{setIsHovering:U,showTooltip:L,size:null!=b?b:"md",storyboard:en,videoTime:eu,children:"sm"!==b&&(0,i.tZ)(z,{onShareMenuOpen:()=>{P(!1),null==k||k(),(0,p.j)(p.FP.POST_SHARE_BUTTON_CLICKED,{position:"video_timeline",post_id:null==Z?void 0:Z.id})},onShareMenuClose:()=>{P(!0),M(null),null==x||x()},timestamp:T,pub:y,post:Z,size:b,trigger:(0,i.tZ)(v.gq,{children:L&&(0,i.BX)(v.gq,{cursor:"pointer",gap:8,flex:"grow",paddingY:4,onClick:()=>{var e,t,n,i;(null===(t=l.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.paused)||null===(i=l.current)||void 0===i||null===(n=i.player)||void 0===n||n.pause(),M(eu)},justifyContent:"center",children:[(0,i.tZ)(c.Z,{color:"white",size:20}),(0,i.BX)(h.xv.B4,{color:"white",weight:"semibold",children:[I("Share from "),(0,f.mr)(eu)]})]})})})})})]})}},91189:function(e,t,n){n.d(t,{Z:()=>s});var i=n(16584),r=n(56687),l=n(95441),a=n(84370),o=n(87077),d=n(74571),c=n(63722);let s=e=>{let{isFocused:t,disabled:n,disableShortcuts:s,disableTooltips:u=!1,onToggleShowTranscript:m}=e,{iString:p}=(0,l.M1)();return(0,d.Kr)("t",m,t&&!s),(0,i.tZ)(o.u,{disabled:u,text:p("Transcripts"),trailing:s?void 0:(0,i.tZ)(a.T,{children:"T"}),children:(0,i.tZ)(c.Z,{onClick:m,disabled:n,children:(0,i.tZ)(r.Z,{size:18})})})}},60651:function(e,t,n){n.d(t,{Z:()=>Z});var i=n(16584),r=n(30396),l=n(74691),a=n.n(l),o=n(10844),d=n(89919),c=n(53239),s=n(21676),u=n(98422),m=n(19081),p=n(84370),v=n(87077),h=n(74571),g=n(63722);let f={volumeBarContainer:"volumeBarContainer-AVLNVa",volumeBar:"volumeBar-N1rUCF",mainContainer:"mainContainer-_32N5B",volumeLevel:"volumeLevel-VDMLnw"},Z=e=>{let{mediaRef:t,isFocused:n,disableShortcuts:l,disableTooltips:Z=!1,hideVolumeBar:y=!1}=e,{isMobile:C}=(0,u.v9)(),[b,w]=(0,r.eJ)(0),[_,k]=(0,r.eJ)(!1),[x,I]=(0,r.eJ)(!1),E=(0,r.sO)(null),B=e=>{let n=0;if(E.current){var i;let r=E.current.getBoundingClientRect(),l=(e.clientX-r.left)/r.width;w(n=a()(l,0,1)),localStorage.setItem("video_player:volume",n.toString()),(null===(i=t.current)||void 0===i?void 0:i.player)&&(t.current.player.volume=n)}_&&n>0&&P()},S=e=>{I(!0),B(e)},N=()=>{I(!1),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",N),document.removeEventListener("selectstart",L)},L=e=>{x&&e.preventDefault()};(0,r.d4)(()=>{var e,n,i,r,l,o;let d=parseFloat(null!==(r=localStorage.getItem("video_player:volume"))&&void 0!==r?r:"");if(k(null!==(l=null===(n=t.current)||void 0===n?void 0:null===(e=n.player)||void 0===e?void 0:e.muted)&&void 0!==l&&l),isNaN(d))(null===(i=t.current)||void 0===i?void 0:i.player)&&w(t.current.player.volume);else{let e=a()(d,0,1);w(e),(null===(o=t.current)||void 0===o?void 0:o.player)&&(t.current.player.volume=e)}return()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",N),document.removeEventListener("selectstart",L)}},[]);let P=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&(t.current.player.muted=!_)},T=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&k(t.current.player.muted)};return(0,r.d4)(()=>{var e;return(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.addEventListener("volumechange",T),()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.removeEventListener("volumechange",T)}},[]),(0,h.Kr)("m",P,n&&!l),(0,i.BX)(m.gq,{className:f.mainContainer,justifyContent:"center",alignItems:"center",position:"relative",children:[(0,i.tZ)(v.u,{disabled:Z,text:_?"Unmute":"Mute",trailing:l?void 0:(0,i.tZ)(p.T,{children:"M"}),children:(0,i.tZ)(g.Z,{onClick:P,children:_?(0,i.tZ)(o.Z,{size:18}):b>.6||C?(0,i.tZ)(d.Z,{size:18}):b>.3?(0,i.tZ)(c.Z,{size:18}):(0,i.tZ)(s.Z,{size:18})})}),!C&&!y&&(0,i.tZ)(m.gq,{className:f.volumeBarContainer,justifyContent:"center",alignItems:"center",onMouseDown:e=>{e.preventDefault(),I(!0),B(e),document.addEventListener("mousemove",S),document.addEventListener("mouseup",N),document.addEventListener("selectstart",L)},children:(0,i.tZ)("div",{className:f.volumeBar,ref:E,children:(0,i.tZ)("div",{className:f.volumeLevel,style:{width:"".concat(100*b,"%")}})})})]})}},21666:function(e,t,n){n.d(t,{e:()=>l,k:()=>function e(t){let n=0;if(t){if(t.content&&t.content.length>0)for(let i of t.content)n+=e(i);else{var i,r;n+=null!==(r=null===(i=t.text)||void 0===i?void 0:i.length)&&void 0!==r?r:0}}return n}});var i=n(38927),r=n(22498);function l(e){let t=0;return(0,r.cb)(e,e=>{e.type&&i.t.includes(e.type)&&("codeBlock"===e.type&&e.content?e.content.forEach(e=>{if("text"===e.type){var n,i;t+=(null!==(i=(null!==(n=e.text)&&void 0!==n?n:"").match(/\n/g))&&void 0!==i?i:[]).length+1}}):t++)}),t}},76324:function(e,t,n){n.d(t,{$:()=>function e(t){let{limit:n=420}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=null,o=0,d=!1;if(t){var c,s,u,m;if(n<=0)d=!0;else if(t.content&&t.content.length>0)for(let a of(l=(0,r._)((0,i._)({},t),{content:[]}),t.content)){let t=e(a,{limit:n-o});if(t.doc){if(null===(c=l.content)||void 0===c||c.push(t.doc),o+=t.length,t.isTruncated){d=!0;break}}else{d=!0;break}}else o+=null!==(m=null===(s=(l=(0,r._)((0,i._)({},t),{text:null!==(u=(0,a.truncateText)(t.text,n))&&void 0!==u?u:void 0})).text)||void 0===s?void 0:s.length)&&void 0!==m?m:0,t.text!==l.text&&(d=!0)}return{doc:l,length:o,isTruncated:d}},p:()=>function e(t,n){var a;let o=[],d=!1,c=0;for(let i of null!==(a=t.content)&&void 0!==a?a:[]){if(i.type&&l.t.includes(i.type)){if(++c===n){d=!0,o.push(i);break}}else if(i.content){let t=e(i,n-c);if(c+=t.blockCount,t.isTruncated){o.push(t.doc),d=!0;break}}o.push(i)}let s=(0,r._)((0,i._)({},t),{content:o});return t.text&&(s.text=t.text.split(/\n/g).slice(0,n).join("\n")),{doc:s,blockCount:c,isTruncated:d}}});var i=n(7409),r=n(99282),l=n(38927),a=n(84864)}}]);