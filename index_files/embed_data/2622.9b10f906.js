"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2622"],{22233:function(e,t,i){i.d(t,{Z:()=>n});let n=2787!=i.j?{icon:"icon-JCPlCw",toggleSetting:"toggleSetting-UDN_Qn",transcriptionPlayer:"transcriptionPlayer-eiECcl",hidePlayer:"hidePlayer-TfzId9",nonActiveText:"nonActiveText-JfTKb8",transcriptionChunk:"transcriptionChunk-bCQeJ2",editableChunk:"editableChunk-k4Fatu",startTime:"startTime-tjpyBE",text:"text-Ou5QC2",activeStartTime:"activeStartTime-ozZC_j",chunkWithSpeaker:"chunkWithSpeaker-iYPDkU",speaker:"speaker-GFTaOB",transcription:"transcription-hfRyWl",popover:"popover-tZdxdX",divider:"divider-ah0vWs",resultsValue:"resultsValue-uYlTxH",searchResult:"searchResult-_1_8Y9",isFocused:"isFocused-CIwNEb",searchForm:"searchForm-gEUJ79"}:null},12936:function(e,t,i){i.d(t,{S$:()=>C,Su:()=>b,_e:()=>_});var n=i(16584),r=i(6400),a=i(30396),l=i(53836),o=i.n(l),s=i(97742);i(70522);var d=i(57391),c=i(95441),u=i(68833);i(62981);var p=i(98914);i(15771),i(19081),i(58175);var h=i(66611),v=i(60308);if(/^(3154|6909)$/.test(i.j))var Z=i(26111);if(i(63651),/^(3154|6909)$/.test(i.j))var m=i(81821);if(/^(3154|6909)$/.test(i.j))var f=i(47929);let g=(0,r.createContext)({hidden:!1});function b(){let{setHidden:e}=(0,a.qp)(g);return()=>null==e?void 0:e(!0)}function _(e){let{children:t}=e,[i,r]=(0,a.eJ)(!1);return(0,n.tZ)(g.Provider,{value:{hidden:i,setHidden:r},children:t})}function C(e){let{post:t,subdomain:i,readerInstalled:r,isContributor:l}=e,s=(0,m.s)()?"ios":(0,m.Dt)()?"android":null,{iString:h}=(0,c.M1)(),{hidden:b}=(0,a.qp)(g),{exposeExperiment:_,getExperimentVariant:C}=(0,d.jc)(),P=b||!s;if((0,a.d4)(()=>{P||!r||l||t.is_draft||(0,Z.x)("triedRedirect")||(0,p.AE)()?P||_("app_install_prompts"):(0,p.uX)((0,v.K8_)(i,t.slug,{params:{utm_medium:f.lP.web,utm_campaign:f.VX.postsOpenInApp,utm_source:f.b3.postBanner}}))},[]),P)return null;let S=C("app_install_prompts")||"none";if(!["our_banner","native_banner_if_supported"].includes(S))return null;let x=h("Read in the Substack app");"podcast"==t.type?x=h("Listen in the Substack app"):"video"==t.type&&(x=h("Watch in the Substack app"));let I=(0,v.K8_)(i,t.slug,{redirect:"app-store",source:f.b3.postBanner});return(0,m.IT)()&&"native_banner_if_supported"===S?(0,n.BX)(n.HY,{children:[(0,n.tZ)(o(),{meta:[{name:"apple-itunes-app",content:"app-id=1581650857, app-argument=".concat(I)}]}),(0,n.tZ)(y,{surface:"post",bannerType:"safari-native-app-banner"})]}):(0,n.BX)(w,{className:"app-banner-post",children:[(0,n.tZ)(y,{surface:"post"}),(0,n.tZ)(N,{}),(0,n.tZ)(k,{children:(0,n.tZ)("div",{children:x})}),(0,n.tZ)("a",{className:"app-banner-cta",href:I,onClick:()=>{(0,u.j)(u.FP.APP_BANNER_TAPPED,{surface:"post",type:"header"})},children:h("Open app")})]})}function y(e){let{surface:t,bannerType:i}=e;return(0,a.d4)(()=>{(0,u.j)(u.FP.APP_BANNER_VIEWED,{surface:t,bannerType:i})},[]),null}let w=(0,h.L)("app-banner"),k=(0,h.L)("app-banner-text");function N(){return(0,n.tZ)("div",{className:"app-banner-icon",children:(0,n.tZ)(s.Z,{height:16})})}},72508:function(e,t,i){i.d(t,{ZP:()=>M,ml:()=>F,sZ:()=>W});var n=i(7409),r=i(99282),a=i(16584),l=i(30396),o=i(94184),s=i.n(o),d=i(74691),c=i.n(d),u=i(18029),p=i.n(u),h=i(44908),v=i.n(h),Z=i(40423),m=i(96862),f=i(3039),g=i(19298),b=i(80569),_=i.n(b),C=i(61649),y=i(29032),w=i(93678),k=i(44881),N=i(95441),P=i(57952),S=i(96904),x=i(53030),I=i(68833),T=i(33224),B=i(71068),E=i(19081),R=i(58175),O=i(17564),D=i(74571),j=i(61468),A=i(84864),X=i(93370),L=i(24271),U=i(63523);function M(e){var t,i;let{disableSelection:o,player:s,postId:d,renderTranscriptionChunk:u,transcription:p,onUpdateActiveRowIndex:h}=e,{iString:Z}=(0,N.M1)(),{onStartClipping:m}=(0,C.Sr)(),f=(0,l.sO)(null),{selection:g,clearSelection:b,selectEndRef:y,selectStartRef:w}=(0,D.LW)({containerRef:f,disable:null!=o&&o,playerRef:s}),[B,O]=(0,l.eJ)(!0),[A,X]=(0,l.eJ)(),[L,M]=(0,l.eJ)(["nick","mills"]),[F,W]=(0,l.eJ)({}),[G,H]=(0,l.eJ)(!1),[J,Y]=(0,l.eJ)(!1),[q,K]=(0,l.eJ)(),{currentTime:Q,isPlaying:ee}=(0,x.FI)(s),et=F?Object.values(F).filter(e=>e):[],ei=!!((null==L?void 0:L.length)&&et.length),{setItems:en}=(0,P.pH)(),er=null==A?void 0:A.findIndex(e=>e.start<=Q&&e.end>Q);if((0,l.d4)(()=>{h&&void 0!==er&&-1!==er&&h(er)},[er,h]),(0,l.d4)(()=>{O(!0),p.cdn_url&&_().get(p.cdn_url).then(e=>{if(!e.text)return;let t=JSON.parse(e.text),i=(0,j.Ap)({rows:t});X(i),en(i);let n=v()(i.map(e=>{var t;return null!==(t=e.speaker)&&void 0!==t?t:""})).filter(e=>e).sort();n.length&&M(n)}).finally(()=>{O(!1)}),p.speaker_map&&Object.values(p.speaker_map).length&&W(p.speaker_map)},[null==A?void 0:A.length,en,p.cdn_url,p.cdn_unaligned_url,p.speaker_map]),B)return(0,a.tZ)(z,{});if(!(null==A?void 0:A.length))return(0,a.tZ)("div",{className:U.Z.transcriptionStatus,children:(0,a.tZ)(R.xv.Meta,{children:Z((null==p?void 0:p.status)==="in_progress"?"Transcription in progress...":"No transcript...")})});let ea=(null==s?void 0:null===(i=s.current)||void 0===i?void 0:null===(t=i.player)||void 0===t?void 0:t.tagName)==="VIDEO",el=ea?"videogram":"audiogram";return(0,a.BX)(E.tu,{ref:f,children:[g&&(0,a.tZ)($,{isVideo:ea,selection:g,onSelect:ea?()=>{if(!g||!A||!w.current||!y.current)return;let e=w.current,t=y.current;(e.rowIndex>t.rowIndex||e.rowIndex===t.rowIndex&&e.offset>t.offset)&&([e,t]=[t,e]);let i=(0,T.xm)({startRow:A[e.rowIndex],endRow:A[t.rowIndex],startOffset:e.offset,endOffset:t.offset,startNodeText:e.text,endNodeText:t.text});b(),m((0,r._)((0,n._)({},i),{source:"transcription",title:null}))}:function(){if(g&&y.current&&w.current&&A){let e=(0,n._)({},w.current),t=(0,n._)({},y.current),[i,r]=(0,T.lF)({selectStart:e,selectEnd:t,alignedRows:A});i>r&&([i,r]=[r,i]),H(!0),_().post("/api/v1/audiogram").send({post_id:d,start_idx:i,end_idx:r,use_draft:!1}).then(e=>{var t,i;(null===(t=e.body)||void 0===t?void 0:t.data)&&(K(e.body.data),b(),(null==s?void 0:null===(i=s.current)||void 0===i?void 0:i.player)&&s.current.player.pause())}).finally(()=>H(!1))}}}),u&&A.map((e,t)=>{var i;return u({isPlaying:ee,row:e,rowIndex:t,words:e.words,showSpeaker:(0===t?void 0:null===(i=A[t-1])||void 0===i?void 0:i.speaker)!==e.speaker,speakerName:ei&&e.speaker?F[e.speaker]:void 0,onPause:()=>{var e;(null==s?void 0:null===(e=s.current)||void 0===e?void 0:e.player)&&s.current.player.pause()},onPlay:()=>{var t;(null==s?void 0:null===(t=s.current)||void 0===t?void 0:t.player)&&(s.current.player.currentTime=e.start+1e-4,s.current.player.play())}})}),!u&&A.map((e,t)=>(0,a.tZ)(V,{idx:t,row:e,rows:A,speakerName:ei&&e.speaker?F[e.speaker]:void 0,onReassign:()=>Y(!0),currentTime:Q,isPlaying:ee,isSelected:!!(g&&y.current&&w.current&&t===c()(t,Math.min(w.current.rowIndex,y.current.rowIndex),Math.max(w.current.rowIndex,y.current.rowIndex))),onClick:()=>{b()},onPause:()=>{var e;(null==s?void 0:null===(e=s.current)||void 0===e?void 0:e.player)&&s.current.player.pause()},onPlay:()=>{var t;(null==s?void 0:null===(t=s.current)||void 0===t?void 0:t.player)&&(s.current.player.currentTime=e.start+1e-4,s.current.player.play())}},t)),(0,a.tZ)(S.G,{isOpen:!!(G||q),onClose:()=>K(void 0),isGenerating:G,finishedGram:q,noun:el,postId:d,onDownload:function(e){return(0,I.j)(I.FP.AUDIOGRAM_DOWNLOAD_CLICKED,{post_id:d,audiogram_id:null==q?void 0:q.id,media_upload_id:p.media_upload_id}),fetch(e,{method:"GET"}).then(e=>e.blob()).then(e=>{var t;let i=null==q?void 0:null===(t=q.video_url)||void 0===t?void 0:t.split("/").pop(),n=null==i?void 0:i.match(/^([^-]+-[^_]+)_/),r=(null==n?void 0:n[1])||"",a=URL.createObjectURL(e),l=document.createElement("a");l.href=a,l.download="substack-".concat(el,"-").concat(d,"-").concat(r,".mp4"),document.body.appendChild(l),l.click(),URL.revokeObjectURL(a),l.remove()})}}),(0,a.tZ)(k.O,{isOpen:L&&!!L.length&&!!J,onClose:()=>Y(!1),speakers:L,speakerMap:F,onChangeSpeakerMap:W,postId:d})]})}function $(e){var t,i;let{isVideo:n,selection:r,onSelect:l}=e,{iString:o}=(0,N.M1)(),d=null===(i=r.anchorNode)||void 0===i?void 0:null===(t=i.parentElement)||void 0===t?void 0:t.getBoundingClientRect();return d?(0,a.tZ)(y.C,{children:(0,a.tZ)(E.tu,{style:{top:(0,A.isTouchDevice)()?Math.max(d.y,0)+d.height+12:Math.max(d.bottom,0)+12,left:d.x+d.width/2,transform:"translateX(-50%)",pointerEvents:"auto",maxWidth:240},justifyContent:"center",outline:"detail",shadow:"md",radius:"md",className:s()(L.Z.popover,L.Z.mounted),padding:4,gap:4,children:n?(0,a.BX)(w.O7,{onClick:l,children:[(0,a.tZ)(Z.Z,{color:"var(--color-utility-white)",size:20}),(0,a.tZ)(R.xv.B4,{color:"white",weight:"medium",children:o("Create clip")})]}):(0,a.BX)(w.O7,{onClick:l,children:[(0,a.tZ)(m.Z,{color:"var(--color-utility-white)",size:20}),(0,a.tZ)(R.xv.B4,{color:"white",weight:"medium",children:o("Make audiogram")})]})})}):null}function z(){return(0,a.BX)(a.HY,{children:[(0,a.tZ)(O.S,{width:"80%",height:"24px",className:U.Z.loadingSilhouette}),(0,a.tZ)(O.S,{width:"34%",height:"24px",className:U.Z.loadingSilhouette}),(0,a.tZ)(O.S,{width:"75%",height:"24px",className:U.Z.loadingSilhouette}),(0,a.tZ)(O.S,{width:"100%",height:"24px",className:U.Z.loadingSilhouette}),(0,a.tZ)(O.S,{width:"68%",height:"24px",className:U.Z.loadingSilhouette})]})}function F(e){if(!e)return"Unknown Speaker";let t=e.split("_"),i=parseInt(t[1]);return"".concat(p()(t[0])," ").concat(i+1)}function V(e){let{row:t,currentTime:i,onPlay:o,isPlaying:d,onPause:c,isSelected:u,onClick:p,idx:h,rows:v,onReassign:Z,speakerName:m}=e,[b,_]=(0,l.eJ)(!1),C=(0,l.sO)(null),y=t.start<=i&&t.end>=i,w=t.words.map(e=>e.start<=i&&e.end>=i?(0,a.BX)(a.HY,{children:[(0,a.tZ)("span",{className:U.Z.activeWord,children:e.word})," "]}):"".concat(e.word," "));w.length||(w=t.text.split(" ").map(e=>(0,a.BX)("span",{children:[e," "]})));let k=null;if(t.speaker&&m){var N;let e=0===h?void 0:null===(N=v[h-1])||void 0===N?void 0:N.speaker;t.speaker!==e&&(k=(0,a.tZ)("div",{className:U.Z.speakerText,onClick:Z,children:m}))}return(0,a.BX)("div",{ref:C,onClick:p,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),style:{display:"flex",width:"100%",alignItems:"center"},children:[d&&(!b||y)?(0,a.tZ)(g.Z,{onClick:c,size:24,className:U.Z.playCircle,style:(0,r._)((0,n._)({},b&&{color:"var(--color-accent-themed)"}),{visibility:y||b?"visible":"hidden"})}):(0,a.tZ)(f.Z,{onClick:o,size:24,className:U.Z.playCircle,style:(0,r._)((0,n._)({},b&&{color:"var(--color-accent-themed)"}),{visibility:y||b?"visible":"hidden"})}),(0,a.BX)("div",{className:s()(U.Z.transcriptionChunk,{[U.Z.activeRow]:y||u,[U.Z.hoverChunk]:b}),"data-chunk-index":h,children:[(0,a.tZ)("div",{className:s()(U.Z.rowIndicator,{[U.Z.hoverRow]:b})}),(0,a.BX)("div",{style:{display:"flex",flexDirection:"column",flex:1,padding:"5px 0"},children:[k,(0,a.tZ)("div",{className:U.Z.rowText,"data-chunk-index":h,children:w})]})]})]})}let W=e=>{let{isActiveRow:t,isPlaying:i,row:n,rowIndex:r,onPause:l,onPlay:o,postId:d,children:c,className:u,activeClassName:p,editable:h}=e,v=t&&i;return(0,a.tZ)(B.xu,{id:"transcription-".concat(r),paddingRight:16,className:s()(u,{[null!=p?p:""]:v}),onClick:()=>{var e;(null===(e=window.getSelection())||void 0===e||!e.toString())&&!h&&((0,I.j)(I.FP.TRANSCRIPTION_TIMESTAMP_CLICKED,{post_id:d,timestamp:(0,X.DL)(n.start)}),v?l():o())},children:c})}},2689:function(e,t,i){if(i.d(t,{Z:()=>s}),/^(3154|6909)$/.test(i.j))var n=i(7409);if(/^(3154|6909)$/.test(i.j))var r=i(99282);if(/^(3154|6909)$/.test(i.j))var a=i(98848);var l=i(16584),o=i(64515);let s=/^(3154|6909)$/.test(i.j)?e=>{var{size:t=20,fill:i="var(--color-fg-primary)"}=e,s=(0,a._)(e,["size","fill"]);return(0,l.tZ)(o.l,(0,r._)((0,n._)({},s),{name:"PauseIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:(0,l.tZ)("path",{stroke:"none",d:"M5.29883 17.9082H7.52539C8.375 17.9082 8.82422 17.459 8.82422 16.5996V3.29883C8.82422 2.41016 8.375 2 7.52539 2H5.29883C4.44922 2 4 2.44922 4 3.29883V16.5996C4 17.459 4.44922 17.9082 5.29883 17.9082ZM12.3984 17.9082H14.6152C15.4746 17.9082 15.9141 17.459 15.9141 16.5996V3.29883C15.9141 2.41016 15.4746 2 14.6152 2H12.3984C11.5391 2 11.0898 2.44922 11.0898 3.29883V16.5996C11.0898 17.459 11.5391 17.9082 12.3984 17.9082Z"})}))}:null},9970:function(e,t,i){if(i.d(t,{Z:()=>s}),/^(3154|6909)$/.test(i.j))var n=i(7409);if(/^(3154|6909)$/.test(i.j))var r=i(99282);if(/^(3154|6909)$/.test(i.j))var a=i(98848);var l=i(16584),o=i(64515);let s=/^(3154|6909)$/.test(i.j)?e=>{var{size:t=20,fill:i="var(--color-fg-primary)"}=e,s=(0,a._)(e,["size","fill"]);return(0,l.tZ)(o.l,(0,r._)((0,n._)({},s),{name:"PlayIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:(0,l.tZ)("path",{stroke:"none",d:"M5.04688 18.5527C5.4375 18.5527 5.76953 18.3965 6.16016 18.1719L17.5469 11.5898C18.3574 11.1113 18.6406 10.7988 18.6406 10.2812C18.6406 9.76367 18.3574 9.45117 17.5469 8.98242L6.16016 2.39063C5.76953 2.16602 5.4375 2.01953 5.04688 2.01953C4.32422 2.01953 3.875 2.56641 3.875 3.41602V17.1465C3.875 17.9961 4.32422 18.5527 5.04688 18.5527Z"})}))}:null},55438:function(e,t,i){i.d(t,{Z:()=>d});var n=i(7409),r=i(99282),a=i(98848),l=i(16584),o=i(64515),s=i(90406);let d=e=>{var{svgParams:t}=e,i=(0,a._)(e,["svgParams"]);return(0,l.BX)(o.l,(0,r._)((0,n._)({},i),{name:"SubstackIcon",svgParams:(0,n._)({height:1e3,width:1e3,fill:s.Hu,stroke:"none"},t),children:[(0,l.tZ)("path",{d:"M764.166 348.371H236.319V419.402H764.166V348.371Z"}),(0,l.tZ)("path",{d:"M236.319 483.752V813.999L500.231 666.512L764.19 813.999V483.752H236.319Z"}),(0,l.tZ)("path",{d:"M764.166 213H236.319V284.019H764.166V213Z"})]}))}},30363:function(e,t,i){i.d(t,{ZP:()=>c});var n=i(16584),r=i(94184),a=i.n(r),l=i(55438),o=i(90406),s=i(10510);let d=e=>{let{publication:t,logo_size:i=60,className:r="",children:d}=e;return(0,n.tZ)("table",{role:"presentation",className:a()("publication","card",r,t.logo_url?"has-logo":"no-logo"),width:"auto",cellpadding:0,cellspacing:0,border:"0",children:(0,n.BX)("tr",{cellpadding:"0",height:"100%",children:[i&&(0,n.tZ)("td",{rowspan:3,className:"logo",children:(0,n.tZ)("figure",{className:"logo",children:t.logo_url?(0,n.tZ)(s.CN,{pub:t,size:i}):(0,n.tZ)(l.Z,{isStatic:!0,fill:t.theme_var_background_pop||o.Hu,width:i,height:i})})}),(0,n.tZ)("td",{children:(0,n.BX)("table",{cellpadding:"0",cellspacing:"0",children:[(0,n.tZ)("tr",{children:(0,n.tZ)("td",{className:"title",children:t.name})}),(0,n.tZ)("tr",{cellpadding:"0",height:"80%",children:(0,n.tZ)("td",{className:"description",children:t.hero_text})}),d]})})]})})},c=e=>{let{publication:t,logo_size:i=60,isStatic:r=!1,children:a}=e;return r?(0,n.tZ)(d,{publication:t,logo_size:i,children:a}):(0,n.BX)("div",{className:"publication card",children:[i&&(0,n.tZ)("figure",{className:"logo",children:(0,n.tZ)(s.wk,{pub:t,size:i})}),(0,n.BX)("div",{className:"title",children:[(0,n.tZ)("div",{className:"name",children:t.name}),(0,n.tZ)("div",{className:"description",children:t.hero_text}),a]})]})}},8845:function(e,t,i){i.d(t,{C:()=>d,T:()=>s});var n=i(16584),r=i(6400),a=i(30396),l=i(6070);let o=(0,r.createContext)({theme:null,setTheme:()=>void 0}),s=()=>(0,a.qp)(o),d=e=>{var t;let{pub:i,post:r,children:s}=e,[d,c]=(0,a.eJ)(null!==(t=null==r?void 0:r.postTheme)&&void 0!==t?t:null);return(0,l.HD)({pub:i})?(0,n.tZ)(o.Provider,{value:{theme:d,setTheme:c},children:s}):(0,n.tZ)(n.HY,{children:s})}},96904:function(e,t,i){i.d(t,{G:()=>v});var n=i(58865),r=i(16584),a=i(71212),l=i(33804),o=i(95441),s=i(68833),d=i(15771),c=i(6490),u=i(98248);function p(){let e=(0,n._)(["Generating ","..."]);return p=function(){return e},e}function h(){let e=(0,n._)(["Shareable ",""]);return h=function(){return e},e}function v(e){let{isOpen:t,onClose:i,isGenerating:n,finishedGram:v,noun:Z,postId:m,onDownload:f}=e,{iString:g,iTemplate:b}=(0,o.M1)();return(0,r.tZ)(c.u_,{isOpen:t,onClose:i,children:(0,r.BX)(l.w,{children:[(0,r.tZ)(c.xB,{title:b(n?p():h(),Z),showClose:!0,showDivider:!0,onClose:i}),(0,r.tZ)(c.fe,{children:v?(0,r.tZ)("video",{src:v.cdn_url,style:{borderRadius:12},controls:!0,download:!0,width:400}):(0,r.tZ)(u.$j,{alignItems:"center",justifyContent:"center",minHeight:220})}),v&&(0,r.tZ)(c.mz,{direction:"column",primaryButton:(0,r.tZ)(d.zx,{priority:"primary",leading:(0,r.tZ)(a.Z,{size:20}),onClick:()=>{(0,s.j)(s.FP.AUDIOGRAM_DOWNLOAD_CLICKED,{post_id:m,audiogram_id:null==v?void 0:v.id,media_upload_id:null==v?void 0:v.media_upload_id}),f(v.cdn_url)},children:g("Download")})})]})})}},55014:function(e,t,i){i.d(t,{G:()=>v});var n=i(16584),r=i(30396),a=i(94184),l=i.n(a);if(2787!=i.j)var o=i(11043);var s=i(95441),d=i(15771),c=i(19081),u=i(58175);if(2787!=i.j)var p=i(81821);var h=i(52478);let v=e=>{let{onFileSelected:t,dropCTA:i,pickCTA:a,pickCTAHandler:v,acceptableTypes:Z,loading:m,className:f,multiple:g=!1,addMode:b=!1,onDrop:_,onPick:C,info:y}=e,[w,k]=(0,r.eJ)(!1),N=(0,r.sO)(null),{iString:P}=(0,s.M1)();a||v||(a=(0,n.tZ)(d.zx,{size:"sm",priority:"secondary-outline",children:g?P("Choose files"):P("Choose file")})),i||(i=P("Drop file here"));let S=e=>{e.preventDefault(),k(!0)},x=async e=>{var i,n,r,a;let l,o;if(e.preventDefault(),k(!1),(null===(n=e.dataTransfer)||void 0===n?void 0:null===(i=n.items)||void 0===i?void 0:i.length)>0){let t=Array.from(e.dataTransfer.items);for(let e of t)if("file"!==e.kind){alert(P("Please only drag files!"));return}l=e.dataTransfer.items[0].getAsFile(),o=t.map(e=>e.getAsFile())}else if((null===(a=e.dataTransfer)||void 0===a?void 0:null===(r=a.files)||void 0===r?void 0:r.length)>0)l=e.dataTransfer.files[0],o=e.dataTransfer.files;else{alert(P("Something went wrong!"));return}g?await t(o):await t(l),null==_||_(g?o:l)};return(0,n.BX)(n.HY,{children:[(0,n.BX)(c.sg,{alignItems:"center",justifyContent:"center",gap:12,radius:"md",className:l()(h.Z.dragArea,f,{[h.Z.dragActive]:w,"test-drag-active":w}),onDragEnter:S,onDragOver:S,onDragLeave:e=>{e.preventDefault(),k(!1)},onDrop:x,"aria-label":P("File Picker"),onClick:()=>{if(!v){var e;null===(e=N.current)||void 0===e||e.click()}},children:[!b&&(0,n.tZ)(o.Z,{size:32,strokeWidth:1.5}),!p.tq&&(0,n.tZ)("p",{className:h.Z.text,children:m?P("Loading..."):w?P("Release to upload"):b?P("Add another image"):(0,n.BX)(n.HY,{children:[i," ",P("or")," "]})}),(0,n.BX)(c.sg,{gap:4,children:[(0,n.tZ)(u.xv.B3,{color:"primary",weight:"medium",children:b?P("Add another file"):P("Drag files here to upload")}),y?"string"==typeof y?(0,n.tZ)(u.xv.B4,{color:"secondary",children:y}):y:null]}),a||(v?v(()=>{var e;null===(e=N.current)||void 0===e||e.click()}):null)]}),(0,n.tZ)("input",{className:l()(h.Z.file,"file-picker-input"),ref:N,type:"file",name:"file",accept:Z,multiple:g,onInput:async e=>{let i=e.target,n=i.files;n&&n[0]&&(g?await t(n):await t(n[0]),null==C||C(g?n:n[0])),i.value=""}})]})}},17564:function(e,t,i){i.d(t,{S:()=>o});var n=i(16584),r=i(94184),a=i.n(r),l=i(12517);let o=e=>{let{animated:t=!0,width:i,height:r,aspectRatio:o,className:s,multiply:d}=e,c=a()(l.Z.container,s,{[l.Z.containerAnimated]:t,[l.Z.containerMultiply]:d});return o?(0,n.tZ)("div",{style:"aspect-ratio:".concat(o),children:(0,n.tZ)("div",{className:c,style:{width:i,height:null!=r?r:"100%"}})}):(0,n.tZ)("div",{className:c,style:{width:i,height:r}})}},78118:function(e,t,i){i.r(t),i.d(t,{ReaderOnboardingModal:()=>D,ReaderOnboardingModalWithUserContext:()=>j,TwitterStage:()=>E});var n=i(27412),r=i(7409),a=i(99282),l=i(98848),o=i(16584),s=i(98661),d=i(30396),c=i(97742),u=i(93666),p=i(32582),h=i(57391),v=i(60807),Z=i(68833),m=i(98914),f=i(341),g=i(57601),b=i(64799),_=i(14861),C=i(4564),y=i(45930),w=i(76971),k=i(48146),N=i(48450),P=i(7759),S=i(29191),x=i(76560),I=i(60308),T=i(63651),B=i(81821);let E=e=>{let{user:t,useProfilePrefix:i}=e;return(null==t?void 0:t.has_linked_twitter)?(0,o.tZ)(O,{user:t,useProfilePrefix:i}):(0,o.tZ)(R,{})},R=()=>{let[e,t]=(0,d.eJ)(!0);return(0,o.BX)("div",{className:"inbox-access-form link-twitter",children:[(0,o.tZ)(c.Z,{className:"onboarding-main-icon",width:38,height:43}),(0,o.tZ)("h2",{children:"Find writers you follow"}),(0,o.tZ)("section",{className:"twitter-description",children:"Find writers you know on Substack, and let your Twitter followers find you. We’ll never post without your permission."}),(0,o.tZ)("p",{children:(0,o.BX)("label",{className:"let-others-find-me",children:[(0,o.tZ)("input",{type:"checkbox",checked:e,onChange:()=>t(!e)}),"Let others find me via Twitter"]})}),(0,o.tZ)(p.PH,{linkType:"reader",discoverable:e,icon:!1,text:"Connect Twitter"}),(0,o.tZ)("a",{className:"skip",href:"".concat((0,I.ZJn)(),"/profile/fill"),native:!0,children:"Skip for now"})]})},O=e=>{let{user:t,useProfilePrefix:i}=e;return(0,o.tZ)(p.G6,{user:t,onSignup:()=>{let e=(null==t?void 0:t.profile_set_up_at)?(0,I.HMK)():"".concat((0,I.ZJn)(),"/profile/fill");(0,m.uX)(e)},buttonText:"Continue",requireSignup:!1,needsEmailConfirm:!1,useProfilePrefix:i})};class D extends u.p{componentDidMount(){super.componentDidMount(),(0,B.tq)()&&(this.context.exposeExperiment("reader_onboarding_app_first"),this.inAppExperimentTreatment())}componentWillReceiveProps(e){this.setState({skipRedirectOnExit:e.skipRedirectOnExit,zIndex:e.zIndex,entry:e.entry,onBeforeClose:e.onBeforeClose})}getDefaultStep(){return this.state.appOnboardingTreatment?x.c.APP_UPSELL:x.c.CATEGORIES}inAppExperimentTreatment(){if(this.state.appOnboardingTreatment)return this.state.appOnboardingTreatment;let e=(0,B.tq)()&&["treatment","treatment_no_skip"].includes(this.context.getExperimentVariant("reader_onboarding_app_first"));return e&&this.setState({step:x.c.APP_UPSELL,appOnboardingTreatment:!0}),e}openForPub(e,t){this.setState({pub:e,profile:t,step:t?this.props.user?x.c.CATEGORIES:x.c.PUB_SIGNUP:x.c.PUB_LANDING}),this.open()}openToPubSignup(e){this.setState({pub:e,step:x.c.PUB_SIGNUP,profile:null}),this.open()}setStep(e){if(e===x.c.APP_UPSELL&&this.state.appOnboardingTreatment&&this.state.previousStepData[x.c.APP_UPSELL]&&(e=x.c.WELCOME),(0,Z.j)(Z.FP.READER_ONBOARDING_STEP_CHANGED,{from_step:this.state.step,to_step:e,modal:!0}),e===x.c.EXIT){if(this.state.skipRedirectOnExit)this.close();else{var t;let e=null!==(t=this.redirect)&&void 0!==t?t:this.state.pub&&"reader2"===this.state.entry?(0,I.SVA)(this.state.pub):(0,T.E2n)();document.location.href=e}}else setTimeout(()=>this.setState({step:e}),0)}setPreviousStepData(e,t){this.setState({previousStepData:(0,a._)((0,r._)({},this.state.previousStepData),{[e]:t})})}getClassName(){return"reader-onboarding-modal wide"}onClose(){(0,Z.j)(Z.FP.READER_ONBOARDING_MODAL_CLOSED,{entry:this.props.entry,step:this.state.step}),this.setStep(this.getDefaultStep())}onOpen(){var e;(0,Z.j)(Z.FP.READER_ONBOARDING_MODAL_OPENED,{entry:this.props.entry,step:this.state.step,for_pub_id:null===(e=this.state.pub)||void 0===e?void 0:e.id})}handleError(e){let{ignore:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{step:i}=this.state;console.error("Error in reader onboarding ".concat(i," step: ").concat(e)),(0,Z.j)(Z.FP.READER_ONBOARDING_ERROR,{step:i,entry:this.props.entry,ignore:t}),t||this.setStep(x.c.ERROR)}renderStep(){let e=this.props,{ref:t}=e,i=(0,l._)(e,["ref"]),{step:n,open:s,pub:d,profile:c,previousStepData:u,appOnboardingTreatment:p}=this.state,h={setStep:this.setStep,handleError:this.handleError,close:this.close,setPreviousStepData:this.setPreviousStepData,appOnboardingTreatment:p};if(!s)return null;switch(n){case x.c.SIGNUP:return(0,o.tZ)(N.Z,(0,a._)((0,r._)({},i,h),{previousStepData:u}));case x.c.PUB_LANDING:return(0,o.tZ)(w.Z,(0,a._)((0,r._)({},i,h),{pub:d}));case x.c.PUB_SIGNUP:return(0,o.tZ)(k.Z,(0,a._)((0,r._)({},i,h),{pub:d,profile:null!=c?c:null}));case x.c.CATEGORIES:return(0,o.tZ)(C.r,(0,a._)((0,r._)({},i,h),{pub:d}));case x.c.PROFILE:return(0,o.tZ)(y.Z,(0,r._)({},i,h));case x.c.START_WRITING:return(0,o.tZ)(P.Z,(0,r._)({},i,h));case x.c.CREATE_PUBLICATION:return(0,o.tZ)(g.Z,(0,r._)({},i,h));case x.c.CREATE_PUBLICATION_SUCCESS:return(0,o.tZ)(b.Z,(0,a._)((0,r._)({},i,h),{previousStepData:u}));case x.c.ERROR:return(0,o.tZ)(_.Z,(0,r._)({},i,h));case x.c.APP_UPSELL:return(0,o.tZ)(f.Z,{onComplete:()=>{this.setPreviousStepData(x.c.APP_UPSELL,!0),p?this.setStep(x.c.CATEGORIES):this.setStep(x.c.WELCOME)}});case x.c.WELCOME:default:return(0,o.tZ)(S.Z,(0,a._)((0,r._)({},i,h),{pub:d,profile:null!=c?c:null}))}}renderChildren(){return(0,o.tZ)("div",{className:"reader-onboarding-modal-container",children:this.renderStep()})}constructor(e,t){var i;super(e,t),(0,n._)(this,"redirect",void 0),this.setStep=this.setStep.bind(this),this.state.pub=e.pub||null,this.handleError=this.handleError.bind(this),this.state.previousStepData={},this.setPreviousStepData=this.setPreviousStepData.bind(this),this.state.skipRedirectOnExit=null!==(i=e.skipRedirectOnExit)&&void 0!==i&&i,this.redirect=e.redirect&&"/"!==e.redirect?e.redirect:null,this.state.appOnboardingTreatment=!1,this.state.step=e.step||this.getDefaultStep()}}(0,n._)(D,"contextType",h.kx);let j=(0,s.forwardRef)((e,t)=>{let i=(0,v.SE)(),n=e.onBeforeClose,l=n?()=>n(i.user):void 0,s=(0,a._)((0,r._)({},e),{onBeforeClose:l,user:i.user});return(0,o.tZ)(D,(0,a._)((0,r._)({},s),{ref:t}))})},3573:function(e,t,i){i(16584),i(30396),i(94184),i(78718),i(98585),i(9682),i(80026),i(91400),i(60308)},58432:function(e,t,i){if(i.d(t,{Cu:()=>eh,zM:()=>ev,C$:()=>ew}),/^(3154|6909)$/.test(i.j))var n=i(7409);if(/^(3154|6909)$/.test(i.j))var r=i(99282);if(/^(3154|6909)$/.test(i.j))var a=i(98848);var l=i(16584);i(98661);var o=i(30396),s=i(94184),d=i.n(s),c=i(27484),u=i.n(c);if(i(43174),i(89734),/^(3154|6909)$/.test(i.j))var p=i(32224);if(/^(3154|6909)$/.test(i.j))var h=i(47976);if(/^(3154|6909)$/.test(i.j))var v=i(24840);if(/^(3154|6909)$/.test(i.j))var Z=i(38464);if(/^(3154|6909)$/.test(i.j))var m=i(85200);if(/^(3154|6909)$/.test(i.j))var f=i(5281);if(/^(3154|6909)$/.test(i.j))var g=i(72910);if(/^(3154|6909)$/.test(i.j))var b=i(98643);if(/^(3154|6909)$/.test(i.j))var _=i(25380);var C=i(56232);i(83034),i(12936),i(42694);var y=i(20160),w=i(83320),k=i(22259),N=i(87698),P=i(46411),S=i(85626),x=i(89320),I=i(60982),T=i(9997),B=i(890);i(4473);var E=i(78327),R=i(30979);i(12757);var O=i(98585),D=i(95441),j=i(99259),A=i(36518),X=i(85095),L=i(40647),U=i(60807),M=i(68833),$=i(49762);i(7882);var z=i(9682),F=i(98914),V=i(94874),W=i(15771),G=i(80026),H=i(19081);i(84370);var J=i(44424),Y=i(91246);i(10510),i(78096);var q=i(58175);i(70379);var K=i(87077);i(78118),i(69891),i(74949),i(83010);var Q=i(50312),ee=i(60308),et=i(97842);i(3573);var ei=i(88817),en=i(75419),er=i(50167),ea=i(65575);i(86657),i(56219),i(14293),i(2689),i(9970),i(20888),i(80878);var el=i(71068);i(63474),i(2009),i(5623);var eo=i(63651);i(84864),(0,el.zo)({display:"flex",direction:"row",flex:"grow",alignItems:"center",justifyContent:"space-between",paddingX:8,gap:16}),i(44312),i(41233),i(91400),i(64172),i(20521);var es=i(33884);if(/^(3154|6909)$/.test(i.j))var ed=i(47929);var ec=i(59570);function eu(e){let{onNoteClick:t,profile:i,publicationUser:n}=e,r=(0,L.xR)().getConfigFor("show_simple_post_editor");return(0,l.BX)(Y.V,{trigger:(0,l.tZ)(W.hU,{priority:"primary",size:"lg",className:ec.Z.cta,"aria-label":"New post",children:(0,l.tZ)(p.Z,{size:24})}),placement:"right",children:[(0,l.tZ)(Y.u,{onClick:t,leading:(0,l.tZ)(h.Z,{}),children:"Note"}),r&&(0,l.tZ)(Y.u,{onClick:()=>t({isPost:!0}),leading:(0,l.tZ)(h.Z,{}),children:"Short post"}),(0,l.tZ)(er._T,{profile:i,publicationUser:n}),(0,l.tZ)(er.hC,{profile:i,publicationUser:n})]})}function ep(e){var t,i,n,r,a;let{chatLastClicked:l}=e,o=(0,et.RN)(),s=(0,j.M$)().isOnDestination,d=(0,et.WG)({},{focusThrottleInterval:3e5});if(!s)return{chatUnreadCount:null!==(n=null===(i=d.data)||void 0===i?void 0:i.unreadCount)&&void 0!==n?n:0,useChatBadge:!1};let c=null!==(r=o.inbox.directMessagesUnreadCount)&&void 0!==r?r:0,p=null!==(a=null==o?void 0:null===(t=o.inbox)||void 0===t?void 0:t.pubChatUnreadCount)&&void 0!==a?a:0,h=0===c&&p>0&&o.inbox.mostRecentChatTimestamp&&(!l||l.isBefore(u()(o.inbox.mostRecentChatTimestamp)));return{chatUnreadCount:c,useChatBadge:h}}function eh(e){var t,i;let{requireLogin:n,setDrawer:r,drawer:a,native:s}=e,d=(0,U.aF)(),{viewerProfile:c}=(0,X.Un)(),[p]=(0,z.tv)(),{activityUnreadCount:h}=(0,A.lR)(),Z=(0,j.M$)().isOnDestination,[m,f]=(0,o.eJ)(null),g={urlParams:{utm_content:ed.fZ.islandDesktopNavSidebar}},b=Z?es.Ds:(0,eo.n1t)((0,eo.SVA)(),{utm_content:ed.fZ.islandDesktopNavSidebar}),_=Z?null:(0,eo.ze_)(g);(0,o.d4)(()=>{if("undefined"!=typeof window){let e=window.localStorage.getItem("chatLastClicked");e&&f(u()(e))}},[]);let C=(null==c?void 0:null===(t=c.publicationUsers)||void 0===t?void 0:t.find(e=>"admin"===e.role||"contributor"===e.role))||{publication:null==d?void 0:null===(i=d.dashboard_pubs)||void 0===i?void 0:i[0]},y=(0,en.i3)(),{chatUnreadCount:S,useChatBadge:E}=ep({chatLastClicked:m}),{open:R}=(0,O.Dr)();return(0,l.tZ)(G.sg,{role:"navigation","aria-label":"Main navigation","aria-direction":"vertical",className:Z?"":ec.Z.profileSideNavContainer,children:(0,l.tZ)(G.sg,{position:"fixed",bg:"primary",className:ec.Z.sideNav,children:(0,l.tZ)(G.sg,{flex:"grow",children:(0,l.BX)(G.sg,{flex:"grow",sizing:"border-box",borderRight:"detail",width:72,children:[(0,l.BX)(G.sg,{padding:8,gap:8,justifyContent:"center",flex:"grow",children:[(0,l.tZ)(ef,{href:b,icon:(0,l.tZ)(x.Z,{}),activeIcon:(0,l.tZ)(I.Z,{}),label:"Home",native:!!s,isActive:!a&&void 0}),(0,l.tZ)(ef,{href:Z?eo.Gfh:(0,eo.ozY)(g),icon:(0,l.tZ)(T.Z,{}),activeIcon:(0,l.tZ)(B.Z,{}),requireLogin:n,label:"Subscriptions",native:!!s,isActive:!a&&void 0}),(0,l.tZ)(ef,{href:Z?eo.Don:(0,eo.Cnj)(g),icon:(0,l.tZ)(N.Z,{}),activeIcon:(0,l.tZ)(P.Z,{}),requireLogin:n,badge:S,dot:!!E,native:!!s,label:"Chat",onClick:()=>{r&&r(null),f(u()()),window.localStorage.setItem("chatLastClicked",u()().toISOString())},isActive:!a&&void 0}),(0,l.tZ)(ef,{onClick:()=>{r?r("activity"===a?null:"activity"):_&&(0,F.uX)(_)},isActive:"activity"===a,icon:(0,l.tZ)(w.Z,{}),activeIcon:(0,l.tZ)(k.Z,{}),requireLogin:n,badge:h,label:"Activity"}),(0,l.tZ)(ef,{onClick:()=>{Z?R():(0,F.uX)((0,eo.k7R)(g))},icon:(0,l.tZ)(v.Z,{}),label:"Search"}),(0,l.tZ)(G.sg,{alignItems:"center",paddingY:8,children:(0,l.tZ)(eu,{onNoteClick:e=>{let{isPost:t}=e;r&&r(null),y.open({onCompose:()=>{(0,es.Z2)(p.path)?((0,F.uX)("/inbox",{replace:!0}),setTimeout(()=>{(0,F.uX)(es.Ds,{replace:!0})},0)):(0,F.uX)(b)},isPost:t})},profile:c,publicationUser:C})})]}),(0,l.tZ)(G.sg,{padding:8,gap:8,justifyContent:"center",children:d&&(0,l.tZ)(eC,{})})]})})})})}function ev(e){let{requireLogin:t}=e,i=(0,j.M$)().isOnDestination,{chatUnreadCount:n}=ep({}),r={noBase:!1,urlParams:{utm_content:ed.fZ.islandDesktopNavSidebar}},a=i?es.Ds:(0,eo.n1t)((0,eo.SVA)(),{utm_content:ed.fZ.islandDesktopNavSidebar});return(0,l.tZ)(H.hs,{className:ec.Z.mobileNavContainer,children:(0,l.BX)(H.hs,{className:d()(ec.Z.mobileNav,i?null:ec.Z.mobileNavOnIsland),flex:"grow",alignItems:"center",justifyContent:"space-between",borderTop:"detail",paddingX:64,children:[(0,l.tZ)(eZ,{href:a,icon:(0,l.tZ)(x.Z,{}),activeIcon:(0,l.tZ)(I.Z,{}),requireLogin:t,native:!i}),(0,l.tZ)(eZ,{href:i?eo.Gfh:(0,eo.ozY)(r),icon:(0,l.tZ)(T.Z,{}),activeIcon:(0,l.tZ)(B.Z,{}),requireLogin:t,native:!i}),(0,l.tZ)($.SiteConfigGate,{configKey:"web_reader_podcasts_tab",children:(0,l.tZ)(eZ,{href:"/podcasts-player",icon:(0,l.tZ)(Z.Z,{strokeWidth:1.8*26/30,size:30,stroke:"var(--color-fg-primary)"}),activeIcon:(0,l.tZ)(S.Z,{strokeWidth:1.8*26/30,size:30,stroke:"var(--color-fg-primary)"}),requireLogin:t})}),(0,l.tZ)(eZ,{href:i?(0,eo.Cnj)():(0,eo.Cnj)(r),icon:(0,l.tZ)(N.Z,{}),activeIcon:(0,l.tZ)(P.Z,{}),requireLogin:t,badge:n,native:!i,className:ec.Z.reader2MobileNavIcon})]})})}function eZ(e){let{href:t,children:i,requireLogin:n,badge:r,icon:a,activeIcon:o,native:s,className:c}=e,u="undefined"!=typeof location?location.pathname:"",p=o?t&&(eb(u,t)?o:a):a,h=ew(n);return(0,l.BX)(eg,{className:d()("reader2-mobile-nav-icon",c),href:n?null:"".concat(t,"?").concat(new URLSearchParams({utm_source:u,utm_medium:ed.lP.reader2Nav})),native:s,onClick:null!=h?h:void 0,onPointerDown:()=>{},children:[p,i,r?(0,l.tZ)(E.V,{count:r,className:ec.Z.badge}):null]})}function em(e){let{className:t,href:i,matchSubpaths:n,icon:r,isActive:a,activeIcon:o=r,native:s,badge:c,dot:u,forwardedRef:p,requireLogin:h,onClick:v,label:Z}=e,m="undefined"!=typeof location?location.pathname:"",f=h?e=>{e.preventDefault(),h()}:null,g=void 0!==a?a:i&&(n?eb(m,i):e_(m,i));return(0,l.BX)(eg,{className:d()(ec.Z.navItem,t),href:h?null:i&&"".concat(i,"?").concat(new URLSearchParams({utm_source:m,utm_medium:ed.lP.reader2Nav})),tabIndex:0,matchSubpaths:n,native:!!h||s,onClick:v||f||void 0,forwardedRef:p,height:56,width:56,showFocus:!0,animate:!0,"aria-current":g?"page":void 0,"aria-label":Z,children:[g?(0,l.tZ)(H.hs,{children:o}):(0,l.tZ)(H.hs,{className:ec.Z.navIcon,children:r}),c?(0,l.tZ)(E.V,{className:ec.Z.badge,count:c}):null,u&&!c&&(0,l.tZ)(R.D,{className:ec.Z.dot})]})}function ef(e){var{matchSubpaths:t=!0}=e,i=(0,a._)(e,["matchSubpaths"]);return(0,l.tZ)(C.Match,{children:()=>(0,l.tZ)(K.u,{text:i.label?i.label:"",layerOptions:{placement:"right-center",triggerOffset:8},disabled:!i.label,children:(0,l.tZ)(em,(0,r._)((0,n._)({},i),{matchSubpaths:t}))})})}function eg(e){var{forwardedRef:t,href:i,onClick:o}=e,s=(0,a._)(e,["forwardedRef","href","onClick"]);let{onRefresh:d}=(0,ei.SJ)();return(0,l.tZ)(C.Match,{children:e=>{let{path:a}=e,c=i&&e_(a,i);return s.native?(0,l.tZ)(H.hs,(0,r._)((0,n._)({as:"a"},s),{href:!c||s.native?i:void 0,onClick:c&&d?d:o,ref:t})):(0,l.tZ)(Q.r,(0,r._)((0,n._)({},s),{role:"button",href:c?void 0:i,onClick:c&&d?d:o,ref:t}))}})}function eb(e,t){return e.startsWith(t.replace(/\?.*$/,""))}function e_(e,t){return e.replace(/\?.*$/,"")===t.replace(/\?.*$/,"")}function eC(){var e;let t=(0,U.aF)(),{iString:i}=(0,D.M1)(),n=(0,j.M$)().isOnDestination,r=ed.b3.userMenu,a="https://support.substack.com/hc/en-us/?utm_source=".concat(r),o=(null==t?void 0:t.subdomain)&&(null==t?void 0:null===(e=t.dashboard_pubs)||void 0===e?void 0:e.length)!==1;return t?(0,l.BX)(J.v2,{trigger:(0,l.tZ)(W.kG,{className:ec.Z.navItem,height:56,width:56,tabIndex:0,animate:!0,resetCss:!0,children:t?(0,l.tZ)(V.qE,{user:t,size:36,"aria-hidden":!0}):(0,l.tZ)(m.Z,{size:24,"aria-hidden":!0})}),ariaLabel:"Profile and settings",className:ec.Z.profileMenu,maxHeight:"none",layerOptions:{placement:"right-end",triggerOffset:16},children:[(0,l.tZ)(y.W,{children:(0,l.tZ)(J.sN,{href:t.profile_set_up_at?(0,eo.NNq)(t,{noBase:n,utm_source:r,utm_content:n?void 0:ed.fZ.islandDesktopNavSidebar}):(0,eo.Nhr)({utm_source:"substack",utm_campaign:"left-nav",redirect:document.location.href}),native:!t.profile_set_up_at,children:(0,l.BX)(H.hs,{gap:12,alignItems:"center",className:ec.Z.profileCard,children:[(0,l.tZ)(V.qE,{user:t,size:40}),(0,l.BX)(ea.tu,{flex:"grow",children:[(0,l.tZ)(q.xv.B4,{weight:"semibold",children:t.name}),(0,l.tZ)(q.xv.B4,{color:"secondary",children:i("View profile")})]})]})})}),(0,l.BX)(J.xw,{children:[o&&(null==t?void 0:t.subdomain)&&(0,l.tZ)(J.sN,{leading:(0,l.tZ)(f.Z,{}),href:(0,ee.c0Q)(t.subdomain,{params:{utm_source:r}}),native:!0,children:i("Dashboard")}),(0,l.tZ)(J.sN,{leading:(0,l.tZ)(g.Z,{}),href:(0,eo.ekm)(),children:i("History")}),(0,l.tZ)(J.sN,{leading:(0,l.tZ)(b.Z,{}),href:"/archive",children:i("Archive")})]}),(0,l.BX)(J.xw,{children:[n&&(0,l.tZ)(ey,{}),(0,l.tZ)(J.sN,{href:(0,ee.v3t)({utm_source:r}),onClick:()=>(0,M.j)(M.FP.USER_MENU_ACCOUNT_SETTINGS_CLICKED),priority:"secondary",native:!0,children:i("Settings")}),(0,l.tZ)(J.sN,{href:a,priority:"secondary",children:i("Support")}),(0,l.tZ)(J.sN,{href:(0,ee.ZPN)({utm_source:r}),priority:"secondary",native:!0,children:i("Sign out")})]})]}):null}function ey(){let[e,t]=(0,o.eJ)(localStorage.getItem("colorScheme")),{iString:i}=(0,D.M1)(),n=e=>{document.documentElement.classList.toggle("dark-mode",e)},r=e=>i=>{i.preventDefault(),i.stopPropagation(),localStorage.setItem("colorScheme",e),n("dark"===e),t(e)},a=e=>{e.preventDefault(),e.stopPropagation(),localStorage.removeItem("colorScheme"),n(window.matchMedia("(prefers-color-scheme: dark)").matches),t(null)};return(0,l.BX)(J.LY,{content:i("Appearance"),priority:"secondary",children:[(0,l.tZ)(J.sN,{trailing:null==e?(0,l.tZ)(_.Z,{}):void 0,onClick:e=>a(e),children:i("Auto")}),(0,l.tZ)(J.sN,{trailing:"light"===e?(0,l.tZ)(_.Z,{}):void 0,onClick:e=>r("light")(e),children:i("Light")}),(0,l.tZ)(J.sN,{trailing:"dark"===e?(0,l.tZ)(_.Z,{}):void 0,onClick:e=>r("dark")(e),children:i("Dark")})]})}function ew(e){return e?t=>{t.preventDefault(),e()}:null}},5623:function(e,t,i){i.d(t,{R5:()=>eI});var n=i(7409),r=i(99282),a=i(98848);if(/^(3154|6909)$/.test(i.j))var l=i(58865);var o=i(16584),s=i(98661),d=i(30396),c=i(94184),u=i.n(c);if(/^(3154|6909)$/.test(i.j))var p=i(18693);if(/^(3154|6909)$/.test(i.j))var h=i(84967);if(/^(3154|6909)$/.test(i.j))var v=i(49336);if(/^(3154|6909)$/.test(i.j))var Z=i(71375);if(/^(3154|6909)$/.test(i.j))var m=i(8618);if(/^(3154|6909)$/.test(i.j))var f=i(7617);if(/^(3154|6909)$/.test(i.j))var g=i(31131);if(/^(3154|6909)$/.test(i.j))var b=i(13808);if(/^(3154|6909)$/.test(i.j))var _=i(85200);if(/^(3154|6909)$/.test(i.j))var C=i(99869);if(/^(3154|6909)$/.test(i.j))var y=i(77600);if(/^(3154|6909)$/.test(i.j))var w=i(44276);if(/^(3154|6909)$/.test(i.j))var k=i(77475);if(/^(3154|6909)$/.test(i.j))var N=i(47655);if(/^(3154|6909)$/.test(i.j))var P=i(20817);if(/^(3154|6909)$/.test(i.j))var S=i(98643);if(/^(3154|6909)$/.test(i.j))var x=i(59543);if(/^(3154|6909)$/.test(i.j))var I=i(7073);var T=i(61649),B=i(59708),E=i(51455),R=i(50137),O=i(2689),D=i(9970),j=i(26582),A=i(51534),X=i(96726),L=i(56219),U=i(94442),M=i(67203),$=i(10878),z=i(51014),F=i(75697),V=i(72392),W=i(95441),G=i(93155),H=i(40647),J=i(60807),Y=i(6246),q=i(68833),K=i(48980),Q=i(7882),ee=i(21599);i(9682);var et=i(32129),ei=i(94874),en=i(15771),er=i(19081),ea=i(84370),el=i(44424),eo=i(98248),es=i(10510),ed=i(58175),ec=i(70379),eu=i(87077),ep=i(40949),eh=i(74312),ev=i(88817),eZ=i(65575),em=i(44312),ef=i(32189),eg=i(39493),eb=i(61412),e_=i(91400),eC=i(64172),ey=i(60308),ew=i(63651),ek=i(84864);if(/^(3154|6909)$/.test(i.j))var eN=i(47929);var eP=i(78691);function eS(){let e=(0,l._)(["You subscribed to "," by "," because it was recommended by ","."]);return eS=function(){return e},e}function ex(){let e=(0,l._)(["You subscribed to "," because it was recommended by ","."]);return ex=function(){return e},e}function eI(e){var t;let i=(0,ev.SJ)();return(0,d.d4)(()=>()=>{var e;null===(e=i.setDrawer)||void 0===e||e.call(i,null)},[]),i.setDrawer&&null!==(t=i.setDrawer((0,o.tZ)(eB,(0,n._)({},e))))&&void 0!==t?t:null}function eT(e){var t,i,a,l,s,c,m,f,g,b,_,C,y;let w,{postId:k,post:N,publication:P,videoPlayerRef:S,onClose:x,onPrevious:I,onNext:T,onSave:E,onArchive:R,onLike:X,onLoad:U,isArchived:M,publicationSettings:z,referringRecommendation:G,referringPub:H}=e,[Y,et]=(0,d.eJ)(!1),[el,eh]=(0,d.eJ)(!1),eg=(0,eC.Th)(),eb=(0,ef.x)({surface:"post-viewer"}),ey=(0,J.aF)(),eI=(0,e_.XA)(),eT=(0,ec.pm)(),{iString:eB,iTemplate:eR}=(0,W.M1)(),ej=(0,d.sO)(null);(0,d.d4)(()=>{(0,q.j)(q.FP.POST_VIEWER_VIEWED,{post_id:k})},[k]);let eL=(0,ep.y)(),eU=(0,d.I4)(()=>{(0,q.j)(q.FP.POST_VIEWER_CLOSED,{post_id:k}),x()},[x,k]),eM=R&&(e=>{(0,q.j)(q.FP.POST_ARCHIVED,{post_id:e,surface:"post viewer"}),R(e)});N&&P&&z&&(w={post:N,publication:P,publicationSettings:z,referringRecommendation:G,referringPub:H});let e$=new URLSearchParams(document.location.search),{result:ez,isLoading:eF}=(0,Q.ib)({pathname:"/api/v1/posts/by-id/".concat(k),query:{preview:null!==(m=e$.get("postPreview"))&&void 0!==m?m:void 0},deps:[k],auto:!w,initialResult:w});(0,d.d4)(()=>{ez&&eg.updatePublication(ez.publication.id,ez)},[ez]);let eV=(0,ee.S2)(null,{ignoreSafari:!0});(0,d.d4)(()=>{U&&ez&&U(ez)},[ez]),(0,d.d4)(()=>{ez&&eV.postSelection&&eV.highlightSelection()},[ez,eV.postSelection]);let eW=null!==(f=null==ez?void 0:ez.publication)&&void 0!==f?f:P,eG=null!==(g=null==ez?void 0:ez.publicationSettings)&&void 0!==g?g:{},eH=(null==eW?void 0:eW.payments_state)==="enabled",{subscription:eJ,publicationUser:eY,isFreeSubscribed:eq,isPaid:eK,isAuthor:eQ,isPledged:e0}=(0,eC.Y0)(null!==(b=null==ez?void 0:null===(t=ez.post)||void 0===t?void 0:t.publication_id)&&void 0!==b?b:0),e1=!(eH?eK:eK||eq),[e9,e4]=(0,d.eJ)(!1),e8=(0,d.sO)(0),{setIsReading:e6}=(0,ev.SJ)(),e2=async e=>{let{reportCategory:t,details:i}=e;await (0,K.rd)("/api/v1/publications/".concat(null==eW?void 0:eW.id,"/posts/").concat(k,"/report"),{method:"POST",json:{details:i,reportCategory:t}}),et(!1),eT.popToast(e=>(0,o.tZ)(ec.FN,(0,r._)((0,n._)({},e),{text:eB("We received your report"),Icon:p.Z})))},e5=ez&&(C=ez.post,y=N,(0,n._)({},C,Object.fromEntries(Object.entries(null!=y?y:{}).filter(e=>{let[t,i]=e;return null!=i})))),e3=(0,B.N1)(null!==(_=null==ez?void 0:null===(i=ez.post)||void 0===i?void 0:i.body_html)&&void 0!==_?_:""),e7=ez&&(null===(a=ez.publication)||void 0===a?void 0:a.id)?null===(l=eg.result)||void 0===l?void 0:l.publicationUserMap.get(ez.publication.id):void 0,te=ez&&e7&&["admin","contributor"].includes(e7.role)?()=>{(0,q.j)(q.FP.READER_EDIT_POST_BUTTON_CLICKED,{publication_id:ez.publication.id,post_id:ez.post.id}),location.href=(0,ew.ANx)(ez.publication,ez.post.id,{addBase:!0})}:void 0,{activePost:tt,isPlaying:ti,onToggle:tn,onPlay:tr}=(0,em.G)(),ta=!!(ti&&tt&&tt.id===(null==ez?void 0:ez.post.id)),tl=(null==ez?void 0:ez.post)&&(0,L.sY)(ez.post);return(0,o.BX)(er.hs,{id:"post-viewer",className:eP.Z.viewerContainer,padding:12*!eI,minWidth:0,children:[(0,o.tZ)($.u,{isOpen:Y,onSubmit:e2,onClose:()=>et(!1)}),(0,o.BX)(er.tu,(0,r._)((0,n._)({className:u()(eP.Z.viewer,e9&&eP.Z.isReading),bg:"primary",flex:"grow",position:"relative",minWidth:0},eI?null:{border:"detail",radius:"md"}),{children:[(0,o.BX)(er.tu,{className:eP.Z.viewerOffset,flex:"grow",children:[(0,o.BX)(er.hs,{className:eP.Z.nav,justifyContent:"space-between",paddingY:16,alignItems:"center",children:[(0,o.tZ)(er.hs,{className:eP.Z.logoContainer,justifyContent:"center",zIndex:-1,children:eF?(0,o.tZ)(eZ.Vm,{size:40}):eW&&(0,o.tZ)(er.hs,{as:"a",href:(0,ew.SVA)(eW),children:(0,o.tZ)(es.wk,{pub:eW,size:40,shadow:"sm",radius:"sm"})})}),(0,o.tZ)(er.hs,{gap:8,children:(0,o.tZ)(eX,{onClick:eU})}),(0,o.BX)(er.hs,{gap:8,children:[!eI&&!eQ&&eW&&(0,o.tZ)(en.zx,{priority:e1?"primary":"secondary",rounded:!0,newTab:!0,href:(0,ew.W1P)(eW,{user:ey,addBase:!0,params:{utm_source:eN.b3.substack,utm_medium:eN.lP.web,utm_campaign:eN.VX.postViewer}}),onClick:e=>{if(!ey&&eW){eb(eW)(e);return}setTimeout(()=>{eg.refetchPublication(eW.id)},5e3)},children:(0,o.tZ)(er.gq,{alignItems:"center",gap:8,children:e1?(0,ek.getSubscribeText)(eW,{isFreeSubscribed:eq}):"Subscribed"})}),(null==ez?void 0:ez.post)&&(0,L.a7)(ez.post)&&(0,o.tZ)(eu.u,{leading:tl?(0,o.tZ)(A.Z,{size:12}):void 0,text:tl?"Paid subscribers only":"Play audio",preferPlacement:"bottom-center",hoverOptions:{delayEnter:0,delayLeave:0},children:(0,o.tZ)(en.hU,{onClick:()=>{!tl&&(ta?tn():tr({post:ez.post,publication:ez.publication}))},disabled:tl,children:tl?(0,o.tZ)(j.Z,{size:20,fill:"var(--color-fg-secondary)"}):ta?(0,o.tZ)(O.Z,{size:20}):(0,o.tZ)(D.Z,{size:20})})}),eF?(0,o.tZ)(eZ.Vm,{radius:"sm",size:40}):ez&&(0,o.tZ)(eA,{post:ez.post,publication:eW,onArchive:eM,onSavePost:E,onCopyLink:()=>{eL((0,F.O1)(null,{post:N,pub:eW,user:ey,useCustomDomainOverOpen:!0}))},onReport:()=>et(!0),onEditPost:te,isArchived:M})]})]}),(0,o.BX)(er.tu,{className:eP.Z.content,flex:"grow",children:[(T||I)&&(0,o.BX)(er.tu,{gap:8,className:eP.Z.navArrows,children:[(0,o.tZ)(eu.u,{text:"Previous post",trailing:(0,o.tZ)(ea.T,{children:"K"}),preferPlacement:"right-center",children:(0,o.tZ)(en.hU,{onClick:null!=I?I:void 0,disabled:!I,tabIndex:2,className:eP.Z.navArrow,children:(0,o.tZ)(h.Z,{size:20})})}),(0,o.tZ)(eu.u,{text:"Next post",trailing:(0,o.tZ)(ea.T,{children:"J"}),preferPlacement:"right-center",children:(0,o.tZ)(en.hU,{onClick:null!=T?T:void 0,disabled:!T,tabIndex:1,className:eP.Z.navArrow,children:(0,o.tZ)(v.Z,{size:20})})})]}),(0,o.tZ)(er.tu,{className:eP.Z.post,flex:"grow",onScroll:e=>{let t=e.currentTarget,i=t.scrollTop;i>t.scrollHeight-t.offsetHeight-100?(e4(!1),null==e6||e6(!1)):i>e8.current?(e4(!0),null==e6||e6(!0)):(e4(!1),null==e6||e6(!1)),e8.current=i},ref:ej,children:eF?(0,o.tZ)(er.tu,{flex:"grow",alignItems:"center",justifyContent:"center",children:(0,o.tZ)(eo.$j,{})}):ez&&ez.post.id===k&&(0,o.BX)(o.HY,{children:[!el&&!!ez.referringPub&&(0,o.BX)(er.hs,{position:"relative",className:u()(!eI&&"container",eP.Z.referringPubContainer),radius:"md",shadow:"sm",border:"detail",gap:16,padding:16,children:[(0,o.tZ)(er.hs,{className:eP.Z.close,position:"absolute",cursor:"pointer",onClick:async()=>{await (0,K.rd)("/api/v1/publication_user_settings/user",{method:"PUT",json:{publication_id:ez.publication.id,type:"hide_referring_recommendation",value:!0}}),eh(!0)},children:(0,o.tZ)(Z.Z,{size:16,strokeWidth:1})}),!eI&&(0,o.tZ)(ei.qE,{user:{id:ez.referringPub.author_id,name:ez.referringPub.author_name},photoUrl:ez.referringPub.author_photo_url,size:56}),(0,o.tZ)(er.tu,{alignItems:"start",gap:16,className:eP.Z.referringPubTextContainer,children:(0,o.BX)(er.tu,{gap:4,paddingRight:24,children:[(0,o.BX)(ed.xv.B3,{fontWeight:"semibold",children:[ez.publication.author_name?eR(eS(),ez.publication.name,ez.publication.author_name,ez.referringPub.author_name||ez.referringPub.name):eR(ex(),ez.publication.name,ez.referringPub.author_name||ez.referringPub.name)," ",(0,o.BX)(ed.xv.B3,{as:"span",translated:!0,children:["Manage your subscription"," ",(0,o.tZ)(ed.xv.B3,{as:"a",href:(0,ew.zRj)(ez.publication),decoration:"underline",children:"here"}),"."]})]}),(null===(s=ez.referringRecommendation)||void 0===s?void 0:s.description)&&(0,o.BX)(ed.xv.B4,{color:"secondary",children:["“",null===(c=ez.referringRecommendation)||void 0===c?void 0:c.description,"”"," ","–"," ",ez.referringPub.author_name||ez.referringPub.name]})]})})]}),(0,o.tZ)(eE,{post:e5,publication:ez.publication,publicationUser:eY,subscription:eJ,publicationSettings:eG,isPledged:e0,postContainerRef:ej,videoPlayerRef:S})]})})]}),(0,o.tZ)(er.hs,{className:eP.Z.bottomNav,justifyContent:"center",borderTop:"detail",children:(0,o.tZ)(er.hs,{className:eP.Z.ufi,justifyContent:"space-between",alignItems:"center",gap:32,children:eF?(0,o.tZ)(eD,{}):ez&&e5&&(0,o.tZ)(eO,{publication:ez.publication,post:e5,user:ey,onLike:X})})})]}),e3&&(0,o.tZ)(V.o,{toc:e3,position:"absolute"})]}))]})}let eB=e=>{let t=(0,d.sO)(null);return(0,o.tZ)(T.BY,{postId:e.postId,videoPlayerRef:t,children:(0,o.tZ)(eT,(0,r._)((0,n._)({},e),{videoPlayerRef:t}))})};function eE(e){let{post:t,publication:a,publicationUser:l,subscription:s,publicationSettings:d,isPledged:c,postContainerRef:u,videoPlayerRef:p}=e,h=(0,H.xR)(),v=(0,J.aF)(),Z=v?(0,r._)((0,n._)({},v),{is_contributor:(null==l?void 0:l.role)==="contributor",is_admin:(null==l?void 0:l.role)==="admin",is_public_admin:!!(null==l?void 0:l.public),is_subscribed:(null==s?void 0:s.membership_state)==="subscribed",is_free_subscribed:(null==s?void 0:s.membership_state)==="free_signup",is_pledged:c}):null;return(0,o.BX)(J.dr,{defaultValue:Z,children:[(0,o.tZ)(et.PostMetaTags,{post:t,publication:a,siteConfigs:h.allConfigs}),(0,o.tZ)(eh.cr,{module:"@/frontend/reader2/PostRenderer",onRequest:()=>i.e("2926").then(i.bind(i,81033)),resolve:e=>e.ReaderPost,post:t,pub:a,user:Z,publicationSettings:d,postContainerRef:u,videoPlayerRef:p})]})}let eR=(0,s.forwardRef)((e,t)=>{var{count:i,children:l,tooltipText:s,tooltipTrailing:d,disabled:c}=e,u=(0,a._)(e,["count","children","tooltipText","tooltipTrailing","disabled"]);return(0,o.tZ)(er.hs,{justifyContent:"center",alignItems:"center",ref:t,children:(0,o.tZ)(eu.u,{preferPlacement:"top-center",text:null!=s?s:"",trailing:d,disabled:c,children:(0,o.BX)(en.hU,(0,r._)((0,n._)({priority:"tertiary",disabled:c},u),{children:[l,null!=i&&i>0&&(0,o.tZ)(ed.xv.B4,{weight:"bold",color:c?"tertiary":"primary",children:null!=i?(0,Y.T)(i):"0"})]}))})})});function eO(e){var t;let{publication:i,post:n,user:r,onLike:a}=e,l=(0,d.sO)(),s=!!n.reaction,c=null!==(t=n.reactions["❤"])&&void 0!==t?t:0,p=!r||!i.community_enabled,h=(0,ek.showCommentsOnPost)({publication:i,post:n});return(0,eb.B)({name:"share",action:()=>{var e;null===(e=l.current)||void 0===e||e.open()}}),(0,o.BX)(o.HY,{children:[(0,o.tZ)(eR,{className:u()(eP.Z.ufiButton,eP.Z.likeButton,s&&eP.Z.isLiked),onClick:a?()=>a(n.id,!s):void 0,count:c,disabled:p,tooltipText:"Like",tooltipTrailing:(0,o.tZ)(ea.T,{children:"L"}),children:(0,o.tZ)(m.Z,{size:20})}),(0,o.tZ)(eR,{href:"profile"===i.homepage_type?(0,ew.mx9)(i,n):(0,ey.uRy)(i,n,{comments:!0,urlParams:{utm_source:eN.b3.substack,utm_medium:eN.lP.web,utm_campaign:eN.VX.postViewer}}),count:n.comment_count,newTab:"profile"!==i.homepage_type,disabled:p||!h,className:u()(eP.Z.ufiButton,eP.Z.commentButton),tooltipText:"Comment",children:(0,o.tZ)(f.Z,{size:20})}),(0,o.tZ)(ej,{pub:i,post:n}),(0,o.tZ)(M.sp,{post:n,user:r||void 0,pub:i,showClipping:!!n.videoUpload,trigger:(0,o.tZ)(eR,{className:u()(eP.Z.ufiButton,eP.Z.shareButton),tooltipText:"Share",children:(0,o.tZ)(g.Z,{height:20,strokeWidth:2})})}),(0,o.tZ)(X.h,{children:(0,o.tZ)(z.ZP,{ref:l,medium:"post viewer",user:r,post:n,pub:i,onClick:e=>e.preventDefault()})})]})}function eD(){return(0,o.BX)(o.HY,{children:[(0,o.tZ)(eR,{disabled:!0,children:(0,o.tZ)(m.Z,{size:20})}),(0,o.tZ)(eR,{disabled:!0,children:(0,o.tZ)(f.Z,{size:20})}),(0,o.tZ)(eR,{disabled:!0,children:(0,o.tZ)(b.Z,{size:20})}),(0,o.tZ)(eR,{disabled:!0,children:(0,o.tZ)(g.Z,{height:20,strokeWidth:2})})]})}function ej(e){let{pub:t,post:i}=e,a=!(0,J.aF)()||!t.community_enabled,[l,s]=(0,d.eJ)(!!i.restacked),[c,p]=(0,d.eJ)(Number(i.restacks)),{canRestack:h,menuItems:v,nuxModal:Z}=(0,eg.K)({pub:t,post:(0,r._)((0,n._)({},i),{restacked:l,restacks:c}),onRestack:e=>{l!==e&&p(c+(e?1:-1)),s(e)}});return h?(0,o.BX)(o.HY,{children:[Z,(0,o.tZ)(el.v2,{trigger:(0,o.tZ)(eR,{className:u()(eP.Z.restackButton,eP.Z.ufiButton,l&&eP.Z.isRestacked),count:c,disabled:a,tooltipText:"Restack","aria-label":"menu",children:(0,o.tZ)(R.Z,{className:eP.Z.actionIcon})}),children:v})]}):null}function eA(e){let{post:t,publication:i,onArchive:n,onSavePost:r,onCopyLink:a,onReport:l,onEditPost:s,isArchived:d}=e,{isSaved:c,onSave:u}=(0,U.vk)({post:t}),{iString:p}=(0,W.M1)(),{openModal:h,closeModal:v}=(0,G.dd)(),{activePost:Z,isPlaying:m,onToggle:f,onPlay:g}=(0,em.G)(),T=!!(m&&Z&&Z.id===t.id);return(0,o.BX)(el.v2,{trigger:(0,o.tZ)(en.hU,{"aria-label":"View more",priority:"secondary",children:(0,o.tZ)(_.Z,{size:20})}),children:[(0,o.tZ)(el.sN,{onClick:a,leading:(0,o.tZ)(C.Z,{}),children:p("Copy link")}),(0,o.tZ)(el.sN,{leading:(0,o.tZ)(y.Z,{}),onClick:()=>{h({children:(0,o.tZ)(E.I,{post:t,pub:i,onClose:v}),width:540})},children:p("Embed")}),(0,o.BX)(el.xw,{children:[(0,L.a7)(t)&&!(0,L.sY)(t)&&(0,o.tZ)(el.sN,{onClick:()=>{T?f():g({post:t,publication:i})},leading:T?(0,o.tZ)(w.Z,{}):(0,o.tZ)(k.Z,{}),trailing:(0,o.tZ)(ea.T,{children:"P"}),children:p(T?"Pause audio":"Play audio")}),r&&(0,o.tZ)(el.sN,{onClick:()=>r({post:t,isSaved:u()}),target:"_blank",leading:c?(0,o.tZ)(N.Z,{}):(0,o.tZ)(b.Z,{}),trailing:(0,o.tZ)(ea.T,{children:"S"}),children:p(c?"Unsave":"Save")}),n&&(d?(0,o.tZ)(el.sN,{onClick:()=>n(t.id),leading:(0,o.tZ)(P.Z,{}),trailing:(0,o.tZ)(ea.T,{children:"E"}),children:p("Unarchive")}):(0,o.tZ)(el.sN,{onClick:()=>n(t.id),leading:(0,o.tZ)(S.Z,{}),trailing:(0,o.tZ)(ea.T,{children:"E"}),children:p("Archive")})),s&&(0,o.tZ)(el.xw,{children:(0,o.tZ)(el.sN,{onClick:s,leading:(0,o.tZ)(x.Z,{}),children:p("Edit post")})})]}),(0,o.tZ)(el.xw,{children:l&&(0,o.tZ)(el.sN,{priority:"destructive",onClick:l,leading:(0,o.tZ)(I.Z,{}),children:p("Report")})})]})}function eX(e){let{onClick:t}=e;return(0,o.tZ)(eu.u,{text:"Close",trailing:(0,o.tZ)(ea.T,{children:"ESC"}),preferPlacement:"right-center",children:(0,o.tZ)(en.hU,{onClick:t,priority:"secondary","aria-label":"Close",children:(0,o.tZ)(Z.Z,{size:20,"aria-hidden":!0})})})}},15850:function(e,t,i){i(16584);var n=i(98661);i(30396);var r=i(23493),a=i.n(r);(0,n.createContext)({listeningProgress:{},onUpdateListeningProgress:()=>void 0});let l=e=>{let{user:t}=e;return"podcasts:listening_progress:".concat(t.id)};a()(e=>{let{allProgress:t,user:i}=e,n=l({user:i});localStorage.setItem(n,JSON.stringify(t))},1e3)},44312:function(e,t,i){i.d(t,{G:()=>l}),i(16584);var n=i(98661),r=i(30396);i(59854),i(15850);let a=(0,n.createContext)({activePodcast:null,activePost:null,activePublication:null,lastActivePost:null,lastActivePodcast:null,lastActivePublication:null,audioPlayerRef:{current:null},currentTime:0,duration:null,isPlaying:!1,listeningProgress:{},onClear:()=>void 0,onPlay:()=>void 0,onToggle:()=>void 0}),l=()=>(0,r.qp)(a)},98905:function(e,t,i){i.d(t,{K:()=>p});var n=i(7409),r=i(99282),a=i(98848),l=i(16584),o=i(98661),s=i(94184),d=i.n(s),c=i(19081),u=i(37381);let p=(0,o.forwardRef)((e,t)=>{var{className:i,error:o=!1,type:s="text",width:p,background:h,font:v,leftIcon:Z,rightIcon:m}=e,f=(0,a._)(e,["className","error","type","width","background","font","leftIcon","rightIcon"]);let g=(0,l.tZ)("input",(0,r._)((0,n._)({},f),{className:d()(i,u.Z.inputWithIcons,{[u.Z.error]:o},v&&u.Z["font-".concat(v)]),style:{width:p,background:h},type:s,ref:t}));return(0,l.BX)(c.gq,{paddingX:12,className:d()(i,u.Z.inputWrapper,{[u.Z.error]:o}),style:{width:p,background:h},children:[Z&&(0,l.tZ)("span",{children:Z}),g,m&&(0,l.tZ)("span",{children:m})]})})}}]);