"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2448"],{66033:function(e,t,r){r.d(t,{Z:()=>n});let n={button:"button-ultxpw",buttonDisabled:"buttonDisabled-Uxc4ZD","button-justify-content-start":"button-justify-content-start-X35nBJ",buttonJustifyContentStart:"button-justify-content-start-X35nBJ","button-size-lg":"button-size-lg-mFsNs8",buttonSizeLg:"button-size-lg-mFsNs8","button-size-md":"button-size-md-J2SsUW",buttonSizeMd:"button-size-md-J2SsUW","button-size-sm":"button-size-sm-M_QSNF",buttonSizeSm:"button-size-sm-M_QSNF","button-variant-primary":"button-variant-primary-XjvZp5",buttonVariantPrimary:"button-variant-primary-XjvZp5","button-variant-primary-accent":"button-variant-primary-accent-YDCMgj",buttonVariantPrimaryAccent:"button-variant-primary-accent-YDCMgj","button-variant-tertiary":"button-variant-tertiary-TX9xVJ",buttonVariantTertiary:"button-variant-tertiary-TX9xVJ","button-variant-inverse":"button-variant-inverse-e7GG60",buttonVariantInverse:"button-variant-inverse-e7GG60","button-variant-outline":"button-variant-outline-sYoYJU",buttonVariantOutline:"button-variant-outline-sYoYJU","button-variant-outline-accent":"button-variant-outline-accent-EBL9Rj",buttonVariantOutlineAccent:"button-variant-outline-accent-EBL9Rj","button-as-link":"button-as-link-Cr7op3",buttonAsLink:"button-as-link-Cr7op3","button-variant-accordion":"button-variant-accordion-qRdmQc",buttonVariantAccordion:"button-variant-accordion-qRdmQc"}},4777:function(e,t,r){r.d(t,{Z:()=>n});let n={container:"container-s8tYit","preset-h1-sans":"preset-h1-sans-Qop2bo",presetH1Sans:"preset-h1-sans-Qop2bo","preset-h1-serif":"preset-h1-serif-QyYae8",presetH1Serif:"preset-h1-serif-QyYae8","preset-h1-text":"preset-h1-text-Xj6FhR",presetH1Text:"preset-h1-text-Xj6FhR","preset-h2-serif":"preset-h2-serif-IuXvG0",presetH2Serif:"preset-h2-serif-IuXvG0","preset-h3-compressed":"preset-h3-compressed-dB9FAX",presetH3Compressed:"preset-h3-compressed-dB9FAX","preset-h3-condensed":"preset-h3-condensed-kGahdt",presetH3Condensed:"preset-h3-condensed-kGahdt","preset-h4-sans-condensed":"preset-h4-sans-condensed-Reqd8Y",presetH4SansCondensed:"preset-h4-sans-condensed-Reqd8Y","preset-h4-sans-regular":"preset-h4-sans-regular-S6R6pb",presetH4SansRegular:"preset-h4-sans-regular-S6R6pb","preset-h4-sans-regular-menu":"preset-h4-sans-regular-menu-RuwXXd",presetH4SansRegularMenu:"preset-h4-sans-regular-menu-RuwXXd","preset-h4-serif":"preset-h4-serif-sMtXaD",presetH4Serif:"preset-h4-serif-sMtXaD","preset-h5-sans":"preset-h5-sans-oGxgjp",presetH5Sans:"preset-h5-sans-oGxgjp","preset-h5-serif":"preset-h5-serif-mY7BSm",presetH5Serif:"preset-h5-serif-mY7BSm","preset-h6-sans":"preset-h6-sans-Gi2FdE",presetH6Sans:"preset-h6-sans-Gi2FdE","preset-h6-serif":"preset-h6-serif-NHX2Ix",presetH6Serif:"preset-h6-serif-NHX2Ix","preset-h7-serif":"preset-h7-serif-qxcjrB",presetH7Serif:"preset-h7-serif-qxcjrB","preset-h7-sans":"preset-h7-sans-bXgWg2",presetH7Sans:"preset-h7-sans-bXgWg2","preset-d1-sans-regular":"preset-d1-sans-regular-HmsiTa",presetD1SansRegular:"preset-d1-sans-regular-HmsiTa","preset-d1-sans-medium":"preset-d1-sans-medium-qccA4g",presetD1SansMedium:"preset-d1-sans-medium-qccA4g","preset-d1-serif":"preset-d1-serif-eNQpMA",presetD1Serif:"preset-d1-serif-eNQpMA","preset-d2-serif":"preset-d2-serif-Zt3T9I",presetD2Serif:"preset-d2-serif-Zt3T9I","preset-d3-serif":"preset-d3-serif-RnjX7h",presetD3Serif:"preset-d3-serif-RnjX7h","preset-d3-serif-bold":"preset-d3-serif-bold-IdUurP",presetD3SerifBold:"preset-d3-serif-bold-IdUurP","preset-d4-serif":"preset-d4-serif-SEAETp",presetD4Serif:"preset-d4-serif-SEAETp","preset-d4-serif-bold":"preset-d4-serif-bold-HsJN25",presetD4SerifBold:"preset-d4-serif-bold-HsJN25","preset-st1":"preset-st1-O4T2tk",presetSt1:"preset-st1-O4T2tk","preset-st2":"preset-st2-XavWyr",presetSt2:"preset-st2-XavWyr","preset-st3":"preset-st3-mae929",presetSt3:"preset-st3-mae929","preset-st4":"preset-st4-nrV6E9",presetSt4:"preset-st4-nrV6E9","preset-body":"preset-body-JzLL5Q",presetBody:"preset-body-JzLL5Q","preset-body-link":"preset-body-link-V8UQqw",presetBodyLink:"preset-body-link-V8UQqw","preset-detail-large":"preset-detail-large-s2MDYG",presetDetailLarge:"preset-detail-large-s2MDYG","preset-detail-small":"preset-detail-small-mk1EbE",presetDetailSmall:"preset-detail-small-mk1EbE","preset-pullquote":"preset-pullquote-jlelFS",presetPullquote:"preset-pullquote-jlelFS","preset-article-byline":"preset-article-byline-YLd430",presetArticleByline:"preset-article-byline-YLd430","preset-timestamp":"preset-timestamp-JIzgHn",presetTimestamp:"preset-timestamp-JIzgHn","preset-caption":"preset-caption-U1Uztw",presetCaption:"preset-caption-U1Uztw","preset-misc-sans":"preset-misc-sans-y4snTd",presetMiscSans:"preset-misc-sans-y4snTd","preset-sm-preview-byline":"preset-sm-preview-byline-W4hKcb",presetSmPreviewByline:"preset-sm-preview-byline-W4hKcb","preset-lg-preview-byline":"preset-lg-preview-byline-dy8tib",presetLgPreviewByline:"preset-lg-preview-byline-dy8tib","preset-list-item-menu":"preset-list-item-menu-EiM1Es",presetListItemMenu:"preset-list-item-menu-EiM1Es","align-left":"align-left-kbuSQE",alignLeft:"align-left-kbuSQE","align-center":"align-center-UWtlhT",alignCenter:"align-center-UWtlhT","align-right":"align-right-onO3hJ",alignRight:"align-right-onO3hJ","wrap-pretty":"wrap-pretty-ejTmFK",wrapPretty:"wrap-pretty-ejTmFK","wrap-balance":"wrap-balance-jmGdbe",wrapBalance:"wrap-balance-jmGdbe",clamp:"clamp-Vi5QjU","clamp-1":"clamp-1-OfiQ1V",clamp1:"clamp-1-OfiQ1V","clamp-2":"clamp-2-_Mb9Jj",clamp2:"clamp-2-_Mb9Jj","clamp-3":"clamp-3-jYPWgo",clamp3:"clamp-3-jYPWgo","clamp-4":"clamp-4-qoVcAB",clamp4:"clamp-4-qoVcAB","clamp-5":"clamp-5-rto_2V",clamp5:"clamp-5-rto_2V","clamp-6":"clamp-6-tHjoiW",clamp6:"clamp-6-tHjoiW","color-accent":"color-accent-ACVlDT",colorAccent:"color-accent-ACVlDT","color-primary":"color-primary-NaQ4Ae",colorPrimary:"color-primary-NaQ4Ae","color-white":"color-white-MlYGuP",colorWhite:"color-white-MlYGuP","color-blue":"color-blue-MQGY4t",colorBlue:"color-blue-MQGY4t","color-tertiary":"color-tertiary-mHRDyo",colorTertiary:"color-tertiary-mHRDyo","white-space-nowrap":"white-space-nowrap-oTjHiF",whiteSpaceNowrap:"white-space-nowrap-oTjHiF"}},6651:function(e,t,r){r.d(t,{Z:()=>n});let n={popoverBase:"popoverBase-UcdBQb"}},83034:function(e,t,r){r.r(t),r.d(t,{AppInstallContent:()=>j,AppInstallModal:()=>D,AppInstallUpsells:()=>E,AppStoreQrCode:()=>X,EmailCodeCTA:()=>H,useAppModal:()=>k});var n=r(7409),s=r(99282),i=r(58865),a=r(16584),o=r(30396),l=r(93372),c=r(20888),p=r(95441),d=r(60807),u=r(68833),m=r(48980),h=r(64576),g=r(7882),f=r(13229),b=r(15771),y=r(61254),v=r(19081),T=r(1844),S=r(6490),_=r(58175),w=r(14518),C=r(91400),Z=r(60308),I=r(84864),B=r(8525);function x(){let e=(0,i._)(["Accept ","'s gift in the Substack app"]);return x=function(){return e},e}function A(){let e=(0,i._)(["We sent a link to download the Substack app to ","."]);return A=function(){return e},e}function k(){let{utm_campaign:e,utm_source:t,utm_content:r,abTestingId:n,overrideCTA:s,overrideTitle:i,subTitle:l,openUrl:c,giftCard:p,pub:d,facepileUsers:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[h,g]=(0,o.eJ)(!1),f=(0,o.I4)(()=>{g(!0),(0,u.j)(u.FP.APP_INSTALL_MODAL_OPENED,{utm_campaign:e,utm_source:t,utm_content:r})},[e,t,r]),b=(0,o.I4)(()=>{g(!1)},[]);return{open:f,modal:(0,a.tZ)(D,{isOpen:h,onClose:b,utm_campaign:e,utm_source:t,utm_content:r,abTestingId:n,overrideCTA:s,overrideTitle:i,subTitle:l,openUrl:c,width:p?450:void 0,giftCard:p,pub:d,facepileUsers:m})}}function j(e){let{utm_campaign:t,utm_source:r,utm_content:n,hideEmailPrompt:s=!1,abTestingId:i,suggestedEmail:o,size:l,padding:c=32,openUrl:d,overrideCTA:u,onSend:m}=e,{iString:h}=(0,p.M1)(),g=(0,C.XA)();return(0,a.BX)(v.tu,{gap:20,padding:c,children:[!g&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.hs,{className:B.Z.qrCode,padding:20,alignSelf:"center",children:(0,a.tZ)(X,{size:l,utm_campaign:t,utm_source:r,utm_content:n,abTestingId:i,openUrl:d})}),!g&&!s&&(0,a.tZ)(y.ZC,{})]}),!g&&!s&&(0,a.tZ)(H,{suggestedEmail:o,onSend:m}),g&&(0,a.tZ)(b.zx,{href:d||(0,Z.D4e)({utm_campaign:t,utm_source:r}),children:u||h("Install the app")})]})}function E(e){let{utm_campaign:t,utm_source:r,darkMode:n=!1}=e;return(0,a.BX)(v.hs,{gap:16,justifyContent:"center",children:[(0,a.tZ)("a",{className:B.Z.appBadge,href:(0,Z.RMm)({utm_campaign:t,utm_source:r}),onClick:()=>{(0,u.j)(u.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"ios",utm_campaign:t,utm_source:r})},children:(0,a.tZ)("img",{src:(0,Z.zF4)(n?"/img/app_page/app-store-white.png":"/img/app_page/app-store.png",320),height:48})}),(0,a.tZ)("a",{className:B.Z.appBadge,href:(0,Z.AaB)({utm_campaign:t,utm_source:r}),onClick:()=>{(0,u.j)(u.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"android",utm_campaign:t,utm_source:r})},children:(0,a.tZ)("img",{src:(0,Z.zF4)(n?"/img/app_page/google-play-white.png":"/img/app_page/google-play.png",320),height:48})})]})}function D(e){var t;let{isOpen:r,onClose:i,utm_campaign:c,utm_content:d,utm_source:u,abTestingId:m,overrideCTA:h,overrideTitle:g,subTitle:b,openUrl:y,width:T,facepileUsers:_,showMobileClose:w,giftCard:B,pub:A}=e,{iString:k,iTemplate:E}=(0,p.M1)(),D=(0,C.XA)(),[X,H]=(0,o.eJ)(""),R=(0,o.I4)(e=>{H(e)},[]),M=(0,o.I4)(()=>{H(""),i()},[i]),O=!!B&&!!A,N=(null==B?void 0:null===(t=B.gifter)||void 0===t?void 0:t.name)?"Split Zone Duo"===B.gifter.name?"SZD":(0,I.guessFirstName)(B.gifter.name):"",J=g||(O?N?E(x(),N):k("Accept this gift in the Substack app"):k("Download the Substack app"));return(0,a.BX)(S.u_,{isOpen:r,onClose:i,width:T||360,position:D?"bottom":"default",children:[(0,a.tZ)(S.xB,{title:J,description:b,onClose:i,showClose:!D||w,showDivider:!0}),X?(0,a.tZ)(z,{sentEmail:X,closeModal:M}):(0,a.BX)(v.tu,{alignItems:"stretch",paddingTop:32*!!D,children:[O?(0,a.tZ)(v.hs,{justifyContent:"center",alignItems:"center",paddingTop:{desktop:20,mobile:0},children:(0,a.tZ)(l.h,(0,s._)((0,n._)({},B),{pub:A}))}):(null==_?void 0:_.length)?(0,a.tZ)(v.hs,{justifyContent:"center",alignItems:"center",padding:{mobile:8},children:(0,a.tZ)(f.H,{users:_,max:3,size:48})}):D?(0,a.tZ)(v.hs,{justifyContent:"center",alignItems:"center",children:(0,a.tZ)("img",{src:(0,Z.zF4)("/img/substack-app-icon.png"),height:64,width:64})}):null,(0,a.tZ)(j,{utm_campaign:c,utm_source:u,utm_content:d,abTestingId:m,openUrl:y,overrideCTA:h,size:142,onSend:R})]})]})}function X(e){let{utm_campaign:t,utm_source:n,utm_content:s,abTestingId:i,size:l=240,width:c,height:p,openUrl:d}=e,u=(0,o.sO)(null),m=(0,Z.D4e)({utm_campaign:t,utm_source:n,utm_content:s,abti:i}),{darkMode:f}=(0,h.v)(),b=function(e,t){let{result:n}=(0,g.Wf)(()=>r.e("9327").then(r.t.bind(r,91915,23)),[],{auto:!0}),s=null==n?void 0:n.default;return(0,o.Ye)(()=>s&&"undefined"!=typeof window?new s(e(window)):null,[s,...t])}(e=>{let t=e.devicePixelRatio,r=getComputedStyle(document.body),n=r.getPropertyValue("--color-primary-themed");return{width:(null!=c?c:l)*t,height:(null!=p?p:l)*t,type:"canvas",data:d||m,dotsOptions:{color:n,type:"dots"},backgroundOptions:{color:r.getPropertyValue("--color-bg-elevated")},cornersSquareOptions:{color:n,type:"extra-rounded"},cornersDotOptions:{color:n,type:"dot"},qrOptions:{errorCorrectionLevel:"L"}}},[c,p,d,f]);return(0,o.d4)(()=>{let{current:e}=u;if(!e||!b||!b._canvas)return;let t=b._canvas;return t.style.width="".concat(null!=c?c:l,"px"),t.style.height="".concat(null!=p?p:l,"px"),e.style.width="".concat(null!=c?c:l,"px"),e.style.height="".concat(null!=p?p:l,"px"),e.appendChild(t),()=>{e.removeChild(t)}},[b,c,p]),(0,a.tZ)("div",{ref:u})}function H(e){let{suggestedEmail:t,onSend:r}=e,{iString:n}=(0,p.M1)(),s=(0,d.aF)(),[i,l]=(0,o.eJ)((null==s?void 0:s.email)||t||""),[c,u]=(0,o.eJ)(!1),[h,g]=(0,o.eJ)(null);return(0,a.tZ)(a.HY,{children:(0,a.BX)(v.tu,{gap:8,children:[(0,a.tZ)(w.H,{placeholder:n("Your email"),placement:"end",priority:"primary",type:"email",value:i,onChange:e=>l(e.currentTarget.value),button:(0,a.tZ)(b.zx,{priority:"primary",loading:c,onClick:async()=>{u(!0);try{await (0,m.rd)("/api/v1/send_app_download_link",{method:"POST",json:{email:i}}),g(null),u(!1),r&&r(i)}catch(e){g("Something went wrong")}},children:n("Send link")})}),h&&(0,a.tZ)(T.y,{align:"center",children:h})]})})}let z=e=>{let{sentEmail:t,closeModal:r}=e,{iString:n,iTemplate:s}=(0,p.M1)();return(0,a.BX)(a.HY,{children:[(0,a.tZ)(S.fe,{children:(0,a.BX)(v.tu,{gap:20,justifyContent:"center",alignItems:"center",children:[(0,a.tZ)(c.e,{src:"/img/cohorts/local_news/plane.png",maxWidth:64}),(0,a.BX)(v.tu,{gap:4,justifyContent:"center",alignItems:"center",children:[(0,a.tZ)(_.xv.B2,{weight:"semibold",textAlign:"center",children:n("Check your email")}),(0,a.tZ)(_.xv.B3,{color:"secondary",align:"center",children:s(A(),t||"your email")})]})]})}),(0,a.tZ)(S.mz,{alignButtons:"stretch",primaryButton:(0,a.tZ)(b.zx,{priority:"secondary",onClick:r,children:n("Done")})})]})}},16864:function(e,t,r){r.d(t,{Z:()=>l});var n=r(7409),s=r(99282),i=r(98848),a=r(16584),o=r(64515);let l=e=>{var{size:t=24,className:r}=e,l=(0,i._)(e,["size","className"]);return(0,a.tZ)(o.l,(0,s._)((0,n._)({},l),{name:"ChevronRightCircleIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,className:r,children:(0,a.tZ)("path",{d:"M24 12C24 18.553 18.5648 24 12 24C5.44707 24 0 18.553 0 12C0 5.4353 5.4353 0 11.9883 0C18.553 0 24 5.4353 24 12ZM9.22355 6.02354C8.84708 6.37648 8.83531 6.97649 9.21178 7.32943L14.2 12.0117L9.21178 16.7059C8.84708 17.0471 8.84708 17.6353 9.21178 18.0118C9.5412 18.3177 10.1765 18.2942 10.5177 17.9647L15.5647 13.2118C16.2471 12.5765 16.2588 11.4589 15.5647 10.8118L10.5177 6.07061C10.1412 5.71766 9.57649 5.68237 9.22355 6.02354Z"})}))}},93687:function(e,t,r){r.d(t,{z:()=>l});var n=r(7409),s=r(99282),i=r(30396),a=r(48980),o=r(98914);let l=e=>{let{mediaUploadId:t}=e,[r,l]=(0,i.eJ)(null),[c,p]=(0,i.eJ)(!0),[d,u]=(0,i.eJ)(null),m=async()=>{try{let e=await (0,a.rd)("/api/v1/video/upload/".concat(t));l((0,s._)((0,n._)({},e),{updated_at:new Date})),p(!1)}catch(e){console.error("Failed to load media upload:",e),u((0,o.zx)(e)),p(!1)}};return(0,i.d4)(()=>{t?m():(l(null),p(!1))},[t,d]),{mediaUpload:r,loading:c,error:d,refetch:m}}},90406:function(e,t,r){r.d(t,{Hu:()=>n,yK:()=>s});let n="#ff6719",s=48},9682:function(e,t,r){r.d(t,{js:()=>i,tv:()=>a});var n=r(30396),s=r(20042);function i(e,t){(0,n.d4)(()=>{let t=t=>{e(t)};return s.subscribers.push(t),()=>{s.subscribers.splice(s.subscribers.indexOf(t)>>>0,1)}},t)}function a(){let{path:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,r]=(0,n.eJ)({}),a=(0,n.sO)(null);i(e=>{a.current=e,r({})},[]);let o=a.current||(0,s.getCurrentUrl)(),l=o.replace(/\?.+$/,""),c=document.location.hash;return a.current=null,[{url:o,path:l,matches:e&&(0,s.exec)(l,e,{})||null,hash:c},s.route]}},27036:function(e,t,r){r.d(t,{P:()=>n});let n=(e,t)=>"enabled"===t.payments_state?e.is_subscribed:e.is_free_subscribed},50384:function(e,t,r){r.d(t,{m:()=>c});var n=r(7409),s=r(16584),i=r(98661),a=r(71068),o=r(58175),l=r(64528);let c=e=>{let{primaryButton:t,secondaryButton:r,tertiaryButton:n,buttonDivider:a,caption:o,showDivider:c,direction:d="row",alignButtons:u="end"}=e,m="stretch"===u,y="column"===d||m,w=!!r||!!t||!!n,C=m?v:i.Fragment,Z=[n,r,t].filter(Boolean).map(e=>(0,s.tZ)(C,{children:e}));return(0,s.BX)(c?y?b:f:y?g:h,{children:[o&&(0,s.tZ)(p,{caption:o,textAlign:y?"center":"left"}),w&&(0,s.tZ)(y?m?_:S:T,{children:a?(0,s.tZ)(l.N,{separator:a,children:Z}):Z})]})},p=e=>{let{caption:t,textAlign:r="left"}=e;return(0,s.tZ)(w,{children:(0,s.tZ)(o.xv.B4,{as:"span",color:"secondary",textAlign:r,children:t})})},d={display:"flex",direction:"row",gap:12,paddingX:20,paddingBottom:20,alignItems:"center"},u={paddingTop:16,paddingBottom:16,borderTop:"detail"},m={direction:"column-reverse",alignItems:"stretch",gap:16},h=(0,a.zo)((0,n._)({},d)),g=(0,a.zo)((0,n._)({},d,m)),f=(0,a.zo)((0,n._)({},d,u)),b=(0,a.zo)((0,n._)({},d,u,m)),y={display:"flex",direction:"row",alignItems:"center",justifyContent:"end",flex:"grow",gap:12},v=(0,a.zo)({display:"flex",direction:"column",flex:"grow"}),T=(0,a.zo)((0,n._)({},y)),S=(0,a.zo)((0,n._)({},y,{direction:"column-reverse",alignItems:"stretch"})),_=(0,a.zo)((0,n._)({},y,{alignItems:"stretch"})),w=(0,a.zo)({display:"flex",direction:"column"})},6490:function(e,t,r){r.d(t,{ex:()=>s.ex,fe:()=>s.fe,mz:()=>i.m,u_:()=>s.u_,xB:()=>n.xB});var n=r(65523),s=r(10704),i=r(50384)},41233:function(e,t,r){r.d(t,{LZ:()=>v,et:()=>T,fA:()=>b});var n=r(7409),s=r(99282),i=r(16584),a=r(95441),o=r(17625),l=r(80026),c=r(6490),p=r(65523),d=r(4354),u=r(65942),m=r(23276),h=r(9003),g=r(24142),f=r(91400);function b(e){let{onCancel:t,onSuccess:r,onSignup:n,onUserCreated:s,noCloseButton:a,noExit:l,isOpen:p,redirectOverride:u,overrideTitle:m,zIndex:h}=e,g=(0,f.XA)();return(0,i.tZ)(c.u_,{onClose:t,isOpen:p,zIndex:h,children:(0,i.BX)(d.t,{children:[(0,i.tZ)(y,{onCancel:t,onSuccess:r,onSignup:n,onUserCreated:s,noCloseButton:a,noExit:l,redirectOverride:u,overrideTitle:m}),g&&(0,i.tZ)(o.o$,{})]})})}function y(e){let{onCancel:t,onSuccess:r,onSignup:a,onUserCreated:o,noCloseButton:l,noExit:c,redirectOverride:p,overrideTitle:f}=e,{mode:b}=(0,d.I)(),y={overrideTitle:f,noCloseButton:l||c,onCancel:t,onSignup:a};return(0,i.BX)(i.HY,{children:["magic-link"===b&&(0,i.tZ)(u.v,(0,s._)((0,n._)({},y),{onSuccess:r})),"email"===b&&(0,i.tZ)(m.j,(0,s._)((0,n._)({},y),{onUserCreated:o,redirectOverride:p})),"password"===b&&(0,i.tZ)(g.L,(0,s._)((0,n._)({},y),{onSuccess:r})),"mfa"===b&&(0,i.tZ)(h.n,{onSuccess:r})]})}let v=e=>{let{overrideTitle:t,noCloseButton:r,onCancel:n,onSignup:s}=e,{iString:o}=(0,a.M1)();return(0,i.tZ)(p.xB,{title:t||o("Sign in to Substack"),description:s?(0,i.BX)(i.HY,{children:[o("First time here? "),(0,i.tZ)(l.hh,{color:"substack",decoration:"hover-underline",onClick:s,cursor:"pointer",children:o("Create account")})]}):void 0,showClose:!r,onClose:n,icon:(0,i.tZ)(p.ZN,{}),alignItems:"center"})},T=e=>{let{children:t}=e;return(0,i.tZ)(l.sg,{padding:16,borderTop:"detail",children:(0,i.tZ)(l.xv.B4,{as:"span",color:"secondary",align:"center",children:t})})}},16913:function(e,t,r){r.d(t,{E:()=>d});var n=r(16584),s=r(95441),i=r(80026),a=r(98012);let o=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),l=new Intl.DateTimeFormat(void 0,{weekday:"long"}),c=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),p=new Intl.DateTimeFormat(void 0,{dateStyle:"long"});function d(e){let{timestamp:t,conjunction:r=!1}=e,{iString:d,language:u}=(0,s.M1)(),m=new Date(t),h=(0,a.Z)(),g=u.startsWith("en"),f=h.isSame(m,"day")?d("Today"):h.subtract(1,"day").isSame(m,"day")?d("Yesterday"):h.isSame(m,"week")?l.format(m):h.isSame(m,"year")?c.format(m):p.format(m);return(0,n.tZ)(i.X2,{alignItems:"center",justifyContent:"center",children:(0,n.BX)(i.xv.B4,{color:"secondary",children:[f,r&&g?" at ":" ",o.format(m)]})})}},32223:function(e,t,r){r.d(t,{c:()=>c});var n=r(7409),s=r(98848),i=r(16584),a=r(77747),o=r(80026),l=r(23710);function c(e){var{children:t,setReactions:r=!0,alignSelf:o}=e,l=(0,s._)(e,["children","setReactions","alignSelf"]);return r?(0,i.BX)(p,{position:"relative",alignSelf:o,children:[t,(0,i.tZ)(a.Jg,(0,n._)({},l))]}):(0,i.tZ)(i.HY,{children:t})}let p=(0,o.E7)({display:"flex",className:l.Z.reactionsHoverZone})},11308:function(e,t,r){r.d(t,{o:()=>l});var n=r(7409),s=r(99282),i=r(79094),a=r(48980),o=r(97842);function l(e){let{entityType:t,publication:r}=e,a=(0,i.T)(),l=(0,o.I0)();return(e,i)=>{a({onSubmit:r=>l("communityPost"===t?c((0,s._)((0,n._)({},r),{id:e})):p((0,s._)((0,n._)({},r),{id:e}))),canReportToAdmins:!!(r&&i&&r.moderation_enabled),pub:null!=r?r:void 0})}}let c=e=>{let{id:t,details:r,reportCategory:n,reportedToSubstack:s}=e;return async e=>{e({type:"posts-flag_post",payload:{id:t}});let i=await d({id:t,details:r,reportCategory:n,reportedToSubstack:s});i instanceof Error&&console.warn("error flagging post",i)}},p=e=>{let{id:t,details:r,reportCategory:n,reportedToSubstack:s}=e;return async e=>{e({type:"comments-flag_comment",payload:{id:t}});let i=await u({id:t,details:r,reportCategory:n,reportedToSubstack:s});i instanceof Error&&console.warn("error flagging comment",i)}};async function d(e){let{id:t,details:r,reportCategory:n,reportedToSubstack:s}=e;try{return await (0,a.rd)("/api/v1/community/posts/".concat(t,"/reports"),{method:"POST",json:{postId:t,details:r,reportCategory:n,reportedToSubstack:s}})}catch(e){return e}}async function u(e){let{id:t,details:r,reportCategory:n,reportedToSubstack:s}=e;try{return await (0,a.rd)("/api/v1/community/comments/".concat(t,"/reports"),{method:"POST",json:{commentId:t,details:r,reportCategory:n,reportedToSubstack:s}})}catch(e){return e}}},45563:function(e,t,r){r.d(t,{X:()=>p});var n=r(7409),s=r(99282),i=r(23398),a=r(21666),o=r(76324);let l={medium:{desktop:{charactersTruncateTo:500,charactersTruncateIfOver:560,linesTruncateTo:6,linesTruncateIfOver:8},mobile:{charactersTruncateTo:320,charactersTruncateIfOver:420,linesTruncateTo:6,linesTruncateIfOver:8}},small:{desktop:{charactersTruncateTo:340,charactersTruncateIfOver:400,linesTruncateTo:4,linesTruncateIfOver:6},mobile:{charactersTruncateTo:210,charactersTruncateIfOver:210,linesTruncateTo:4,linesTruncateIfOver:4}}},c={desktop:{TRUNCATED_LINES:32,TRUNCATED_CHARACTERS:2400},mobile:{TRUNCATED_LINES:20,TRUNCATED_CHARACTERS:1e3}};function p(e,t){var r,p,d,u;let{truncationProfile:m="medium",isMobile:h}=t,{charactersTruncateTo:g,charactersTruncateIfOver:f,linesTruncateTo:b,linesTruncateIfOver:y}=l[p=e,"small"!==(d=m)&&(null===(u=p.attachments)||void 0===u?void 0:u.length)?"small":d][h?"mobile":"desktop"],v=function e(t){let r=null;if(t){if(r=(0,s._)((0,n._)({},t),{content:void 0,text:void 0}),null==t?void 0:t.content)for(let n of(r.content=[],t.content)){let t=e(n);t&&r.content.push(t)}else{var a,o;let e=null===(a=t.marks)||void 0===a?void 0:a.find(e=>"link"===e.type);(null==e?void 0:null===(o=e.attrs)||void 0===o?void 0:o.href)?r.text=(0,i.u)(e.attrs.href):r.text=t.text}}return r}(null!==(r=null==e?void 0:e.body_json)&&void 0!==r?r:(null==e?void 0:e.body)?{type:"doc",attrs:{schemaVersion:"v1"},content:e.body.split("\n\n").map(e=>({type:"paragraph",content:[{type:"text",text:e}]}))}:null),T=(0,a.k)(v)>f,S=(0,a.e)(v)>y;if(!v||!(T||S))return{bodyJson:v,truncatedBodyJson:v,isTruncated:!1,shouldExpandInline:!1};let _=v,w=!1,C=0;if(T){let e=(0,o.$)(_,{limit:g});_=e.doc,w=e.isTruncated,C=(0,a.k)(v)-(0,a.k)(_)}let Z=!1,I=0;if(S&&_){let e=(0,o.p)(_,b);_=e.doc,Z=e.isTruncated,I=(0,a.e)(v)-(0,a.e)(_)}return{bodyJson:v,truncatedBodyJson:_,isTruncated:w||Z,shouldExpandInline:I<c[h?"mobile":"desktop"].TRUNCATED_LINES&&C<c[h?"mobile":"desktop"].TRUNCATED_CHARACTERS}}}}]);