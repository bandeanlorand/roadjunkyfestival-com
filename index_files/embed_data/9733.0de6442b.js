"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9733"],{45537:function(e,t,n){n.d(t,{Z:()=>r});let r={webContainer:"webContainer-IIk356",container:"container-hh54mh",emailWrapper:"emailWrapper-NhzydE",text:"text-Fj8WVT",title:"title-RBoKZn",button:"button-hAEuwt"}},18427:function(e,t,n){n.d(t,{Z:()=>r});let r={container:"container-sfnj9V",emailWrapper:"emailWrapper-qwz6NP"}},81567:function(e,t,n){n.d(t,{Z:()=>r});let r={imageGallery:"imageGallery-npMLlr",static:"static-he6Urp",canEdit:"canEdit-MxZtx8",editGalleryWrap:"editGalleryWrap-GFPuXa",editGallery:"editGallery-Z5jDW6",imageCaption:"imageCaption-iHC8xR",image:"image-IE_pDY",zoom:"zoom-YdDT6p",imageRow:"imageRow-_Y6x8T","length-2":"length-2-inHdHY",length2:"length-2-inHdHY",inbox:"inbox-uLXwi5",imageGalleryWrap:"imageGalleryWrap-ICPFaM",imageWrap:"imageWrap-egM10V",small:"small-AA4Dt8",medium:"medium-ZeIdEU"}},60520:function(e,t,n){n.d(t,{Z:()=>r});let r={latexWrapper:"latexWrapper-xXiahu",latexEdit:"latexEdit-CT7sNA",emptyStateWrapper:"emptyStateWrapper-SwgxAc"}},71075:function(e,t,n){n.d(t,{Z:()=>r});let r={digestPostEmbed:"digestPostEmbed-flwiST",menu:"menu-juA09f",caption:"caption-QiPycG",captionEditor:"captionEditor-bK4vPR",smSquare:"smSquare-NGbPBa",mdSquare:"mdSquare-pPKPYa",fullWidth:"fullWidth-Ta6aEE",inheritColor:"inheritColor-WetTGJ",link:"link-HREYZo",disableLink:"disableLink-tkz2Oq"}},57747:function(e,t,n){n.d(t,{Z:()=>r});let r={mediaNodeView:"mediaNodeView-e5SnLi","align-left":"align-left-zBTRM0",alignLeft:"align-left-zBTRM0","align-center":"align-center-GLlHHY",alignCenter:"align-center-GLlHHY","align-right":"align-right-b0iEsr",alignRight:"align-right-b0iEsr",staticView:"staticView-rMg88c",staticImageWrap:"staticImageWrap-zeAxjE",left:"left-Pmbfny",right:"right-jUl_lm",imageContainer:"imageContainer-BFwwV8",large:"large-zd0XRW",full:"full-B7kzBg",caption:"caption-hKmpHN",placeholder:"placeholder-HWtRBz",static:"static-oTq1ez",inlineCaptionEditor:"inlineCaptionEditor-kbzlrs",horizontalResizeHandle:"horizontalResizeHandle-nC_iub",mediaControlButtons:"mediaControlButtons-lqBkgd",active:"active-jfe8JH",mediaControlTextEditor:"mediaControlTextEditor-oFhu3a",hasCaption:"hasCaption-A8cBUm",zoom:"zoom-zeAR_Z",pointer:"pointer-Hr6Xl2"}},24718:function(e,t,n){n.d(t,{Z:()=>r});let r={presentedBy:"presentedBy-B4Sz3Y",image:"image-JHUk8w",emailWrapper:"emailWrapper-LqRu0S",presentedByEmail:"presentedByEmail-OfmHXh",editorBorder:"editorBorder-I0g0rz",editorHelperText:"editorHelperText-PWUmEI",docContentWrapper:"docContentWrapper-gAF4Ud",docContentWrapperEmail:"docContentWrapperEmail-CAWEeY"}},54991:function(e,t,n){n.d(t,{Z:()=>r});let r={avatar:"avatar-LanjdX",badge:"badge-Uvjr_O",container:"container-t1XakO",header:"header-MPtCPc",emailButton:"emailButton-TJW1DY",cta:"cta-htyRl8"}},12517:function(e,t,n){n.d(t,{Z:()=>r});let r={container:"container-ODcHQE",containerMultiply:"containerMultiply-l6GUkC",containerAnimated:"containerAnimated-jVAZvQ","silhouette-scroll":"silhouette-scroll-zaCEVB",silhouetteScroll:"silhouette-scroll-zaCEVB"}},19925:function(e,t,n){n.d(t,{A:()=>a});var r=n(16584),i=n(55679),o=n(62049);let a=e=>{let{node:t}=e,{attrs:n}=t;return(0,r.tZ)(i.T5,{children:(0,r.tZ)(o.V,{postId:n.postId})})}},52244:function(e,t,n){n.d(t,{v:()=>h});var r=n(16584),i=n(55679),o=n(19242),a=n(70843),l=n(95441),s=n(19081),d=n(58175),c=n(87077);let u="icon-goBaOg",h=e=>{let{}=e,{iString:t}=(0,l.M1)(),n=t("This may be a temporary error, please refresh the page to try again.");return(0,r.tZ)(i.T5,{children:(0,r.BX)(s.tu,{alignItems:"center",justifyContent:"center",className:"container-njkc6x",children:[(0,r.tZ)(o.Z,{className:u}),(0,r.BX)(s.gq,{alignItems:"center",gap:4,children:[(0,r.tZ)(d.xv.Meta,{translated:!0,color:"accent-themed",children:"Image not found"}),(0,r.tZ)(c.u,{text:n,children:(0,r.tZ)(a.Z,{size:12,className:u})})]})]})})}},81138:function(e,t,n){n.d(t,{t:()=>a});var r=n(16584),i=n(55679),o=n(22582);let a=e=>{let{node:t,editor:n}=e;return(0,r.tZ)(i.T5,{className:"image-gallery-embed","data-drag-handle":"",children:(0,r.tZ)(o.hJ,{node:t,editor:n})})}},2563:function(e,t,n){n.r(t),n.d(t,{ImageViewerContents:()=>C,ImageViewerModal:()=>f});var r=n(16584),i=n(30396),o=n(94184),a=n.n(o),l=n(2564),s=n(56743),d=n(71375),c=n(71212);n(98661);var u=n(98914),h=n(15771),p=n(19081),g=n(6490),m=n(98248),v=n(60308);let A={chrome:"chrome-_LLvs8",inactive:"inactive-_Lk_xA",modalImageButtonContainer:"modalImageButtonContainer-gaFoGh",modalImageSidebar:"modalImageSidebar-WtdDRF",imgContainer:"imgContainer-_cFpip",img:"img-nwpk1x",isLoading:"isLoading-siuKfF"};function f(e){let{showModal:t,modalContent:n,onClose:i,step:o,includeDownloadButton:a=!0}=e;return(0,r.tZ)(g.u_,{isOpen:t,onClose:i,position:"full",children:(0,r.tZ)(C,{modalContent:n,onClose:i,stepDefault:o,includeDownloadButton:a})})}function C(e){let{modalContent:t=[],onClose:n,stepDefault:o,includeDownloadButton:h}=e,[p,g]=(0,i.eJ)(o),[f,C]=(0,i.eJ)(!0),b=(0,u.K1)(),k=e=>{e.currentTarget===e.target&&n()},[y,Z]=(0,i.eJ)(!1);(0,i.d4)(()=>{if(!b){let e;let t=e=>{let{key:t}=e;["ArrowRight","ArrowDown"].includes(t)?(B(),e.stopPropagation()):["ArrowLeft","ArrowUp"].includes(t)&&(E(),e.stopPropagation())},n=n=>{(null==n?void 0:n.type)==="keydown"&&t(n),clearTimeout(e),Z(!1),e=setTimeout(()=>{Z(!0)},2e3)};return window.addEventListener("pointermove",n,{capture:!0,passive:!0}),window.addEventListener("pointerdown",n,{capture:!0,passive:!0}),window.addEventListener("keydown",n,{capture:!0,passive:!0}),n(),()=>{clearTimeout(e),window.removeEventListener("pointermove",n,{capture:!0}),window.removeEventListener("pointerdown",n,{capture:!0}),window.removeEventListener("keydown",n,{capture:!0})}}},[b,p]);let E=()=>{0!==p&&(g(p-1),C(!0))},B=()=>{p!==t.length-1&&(g(p+1),C(!0))},{attrs:{src:T,alt:I,title:S}}=t[p];(0,i.d4)(()=>{if(!f){var e;let n=null===(e=t[p+1])||void 0===e?void 0:e.attrs.src;n&&(new Image().src=(0,v.zF4)(n,void 0,{quality:"auto:good"}))}},[p,f]);let _=b?8:16;return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{className:a()(A.chrome,y&&A.inactive),children:[p<t.length-1&&(0,r.tZ)(w,{buttonFunction:B,style:{right:0,padding:_},isSidebar:!0,icon:(0,r.tZ)(l.Z,{size:20,strokeWidth:2})}),p>0&&(0,r.tZ)(w,{buttonFunction:E,style:{left:0,padding:_},isSidebar:!0,icon:(0,r.tZ)(s.Z,{size:20,strokeWidth:2})}),(0,r.tZ)(w,{buttonFunction:n,style:{position:"absolute",right:_,top:_},isSidebar:!1,icon:(0,r.tZ)(d.Z,{size:20})}),h&&(0,r.tZ)(w,{buttonFunction:e=>{e.stopPropagation(),function(e,t){let n=document.createElement("a");document.body.appendChild(n),n.href=t,n.target="_blank",n.click(),document.body.removeChild(n)}(0,T)},style:{position:"absolute",left:_,top:_},isSidebar:!1,icon:(0,r.tZ)(c.Z,{size:20})})]}),(0,r.tZ)("div",{className:A.imgContainer,onClick:k,children:(0,r.tZ)("img",{className:a()(A.img,f&&A.isLoading),onLoad:()=>{C(!1)},alt:null!=I?I:void 0,title:null!=S?S:void 0,src:(0,v.zF4)(T,void 0,{quality:"auto:good"}),onClick:k},T)}),f&&(0,r.tZ)("div",{style:{position:"absolute",top:"50%",left:"50%"},children:(0,r.tZ)(m.$j,{})})]})}function w(e){let{buttonFunction:t,style:n,isSidebar:i,icon:o,tetherRef:l}=e;return(0,r.tZ)(p.hs,{className:a()(A.modalImageButtonContainer,i?A.modalImageSidebar:null),style:n,alignItems:"center",justifyContent:"center",onClick:t,ref:l,children:(0,r.tZ)(h.GI,{priority:"secondary",rounded:!0,children:o})})}},17117:function(e,t,n){n.d(t,{Z:()=>u});var r=n(16584),i=n(30396),o=n(94184),a=n.n(o),l=n(80569),s=n.n(l),d=n(60308);let c=e=>parseFloat(e).toFixed(2),u=e=>{let{symbol:t,prependSymbol:n=!1,isStatic:o=!1}=e,l="/api/v1/price/".concat(t),[u,h]=(0,i.eJ)(null),[p,g]=(0,i.eJ)(null),[m,v]=(0,i.eJ)(!1);return((0,i.d4)(()=>{(async()=>{try{let e=await s().get(l);if(e.body){if("not_found"===e.body.status){v(!0);return}h(e.body.price),g(e.body.change_pct)}}catch(e){v(!0)}})()},[l]),!n&&t.startsWith("$")&&(t=t.slice(1)),o)?(0,r.tZ)("span",{children:(0,r.BX)("a",{"data-component-name":"CashtagStatic",href:"".concat((0,d.eSs)(t)),children:[t," "]})}):m?(0,r.BX)("span",{children:[t," "]}):(0,r.BX)("a",{className:a()("cashtag",{neutral:0==p,positive:p&&parseFloat(p)>0,negative:p&&0>parseFloat(p)}),target:"_blank",rel:"noopener",href:"".concat((0,d.eSs)(t)),"data-attrs":JSON.stringify({symbol:t}),"data-component-name":"Cashtag",children:["".concat(t.toUpperCase()," "),(0,r.tZ)("span",{children:(0,r.tZ)("span",{children:(0,r.BX)("span",{className:a()("delta"),children:["".concat(c(p||0),"%"),!p||parseFloat(p)>0?String.fromCharCode(8593):String.fromCharCode(8595)]})})})]})}},12277:function(e,t,n){n.d(t,{M:()=>o});var r=n(16584),i=n(30396);let o=e=>{var t;let{attrs:n}=e,o=(0,i.sO)(null);if((0,i.d4)(()=>{let e=e=>{let t;if(!o.current||e.source!==o.current.contentWindow)return;let n=e.data;if("string"==typeof n)try{n=JSON.parse(n)}catch(e){return}n&&"number"==typeof n.height?t=n.height:"number"==typeof n&&(t=n),"number"==typeof t&&t>0&&o.current&&(o.current.style.height="".concat(t,"px"))};if(null==n?void 0:n.url)return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[null==n?void 0:n.url]),!n||!n.url)return null;let a="iframe-pinterest-".concat((null===(t=n.url.split("/").pop())||void 0===t?void 0:t.split("?")[0])||Date.now());return(0,r.tZ)("div",{class:"pinterest-embed-wrap outer","data-url":n.url,children:(0,r.tZ)("iframe",{ref:o,id:a,className:"pinterest-embed-iframe",src:n.url,width:"350px",frameBorder:"0",scrolling:"no",loading:n.belowTheFold?"lazy":void 0,title:n.title||"Pinterest Pin"})})}},74204:function(e,t,n){n.d(t,{$:()=>a});var r=n(16584),i=n(55679),o=n(16564);let a=e=>{let{node:t}=e;return(0,r.tZ)(i.T5,{children:(0,r.tZ)(o.cM,{label:t.attrs.label,src:"/api/v1/audio/upload/".concat(t.attrs.mediaUploadId,"/src"),duration:t.attrs.duration})})}},19691:function(e,t,n){n.d(t,{Z:()=>m});var r=n(7409),i=n(99282),o=n(16584),a=n(30396),l=n(91036),s=n.n(l),d=n(42123),c=n(347),u=n(15771),h=n(19081),p=n(64300),g=n(71075);let m=e=>{let{initialCaption:t,onSave:n,onCancel:l}=e,m=t.replace(/<br\s*\/?>/gi,"\n"),[v,A]=(0,a.eJ)(m);return(0,o.tZ)(c.h,{children:(0,o.BX)(h.tu,{flex:"grow",gap:8,children:[(0,o.tZ)(p.g,(0,i._)((0,r._)({},d.H),{className:g.Z.captionEditor,maxLength:5e3,name:"description",placeholder:"Enter a caption...",rows:6,value:v,onChange:e=>{A(e.target.value)}})),(0,o.BX)(h.hs,{gap:8,justifyContent:"end",paddingY:8,children:[(0,o.tZ)(u.zx,{priority:"secondary",onClick:l,children:"Cancel"}),(0,o.tZ)(u.zx,{priority:"primary",onClick:()=>{let e=v.replace(/\n/g,"<br>");n(s()(e,(0,i._)((0,r._)({},s().defaults),{allowedTags:["br"]})))},children:"Save"})]})]})})}},89198:function(e,t,n){n.d(t,{X:()=>s});var r=n(7409),i=n(99282),o=n(16584),a=n(55679),l=n(17218);let s=e=>{let{node:t,editor:n,deleteNode:s,updateAttributes:d,getPos:c}=e,u=t.attrs,h=(0,i._)((0,r._)({},u),{isEditor:!!n});return(0,o.tZ)(a.T5,{className:"digestPostEmbed","data-drag-handle":"",children:(0,o.tZ)(l.F,(0,i._)((0,r._)({},h),{isEditor:!0,editor:n,updateAttributes:d,deleteNode:s,getPos:c}))})}},17218:function(e,t,n){n.d(t,{F:()=>W});var r=n(7409),i=n(99282),o=n(16584),a=n(30396),l=n(94184),s=n.n(l),d=n(66120),c=n(95441),u=n(15771),h=n(61254),p=n(19081),g=n(44424),m=n(71075);let v=e=>{let{enableExtraSmallOption:t,size:n,onOpen:r,onClose:i,onEditCaption:a,onSetLayout:l,onSetShowBylines:s,showBylines:v,onConvertToLink:A,onConvertToEmbeddedPost:f,onDelete:C,showBylinesOption:w}=e,{iString:b}=(0,c.M1)();return(0,o.tZ)(p.hs,{className:m.Z.menu,justifyContent:"end",children:(0,o.BX)(g.v2,{layerOptions:{placement:"bottom-end"},trigger:(0,o.tZ)(u.hU,{priority:"secondary-outline",children:(0,o.tZ)(d.Z,{size:20})}),onClose:i,onOpen:r,children:[t&&(0,o.tZ)(g.sN,{disabled:"xs"===n,onClick:()=>l("xs"),children:b("Extra small display")}),(0,o.tZ)(g.sN,{disabled:"sm"===n,onClick:()=>l("sm"),children:b("Small display")}),(0,o.tZ)(g.sN,{disabled:"md"===n,onClick:()=>l("md"),children:b("Medium display")}),(0,o.tZ)(g.sN,{disabled:"lg"===n,onClick:()=>l("lg"),children:b("Large display")}),(0,o.tZ)(h.iz,{}),w&&(0,o.tZ)(g.sN,{onClick:()=>s(!v),children:b(v?"Hide bylines":"Show bylines")}),("lg"===n||"md"===n)&&(0,o.tZ)(g.sN,{onClick:a,children:b("Edit caption")}),(0,o.tZ)(g.sN,{onClick:()=>f(),children:b("Convert to default")}),(0,o.tZ)(g.sN,{onClick:A,children:b("Convert to link")}),(0,o.tZ)(g.sN,{priority:"destructive",onClick:C,children:b("Remove")})]})})};var A=n(26522),f=n(77116),C=n(57219),w=n(42123),b=n(51776);let k=e=>{let{initialValue:t,placeholder:n,onSave:l,onCancel:s}=e,{iString:d}=(0,c.M1)(),[h,g]=(0,a.eJ)(t),m=(0,a.sO)(null);return(0,a.d4)(()=>{m.current&&(m.current.focus(),m.current.select())},[]),(0,o.BX)(p.tu,{gap:16,children:[(0,o.tZ)(b.oi,(0,i._)((0,r._)({},w.H),{ref:m,placeholder:n,value:h,onInput:e=>{g(e.target.value)}})),(0,o.BX)(p.hs,{gap:8,justifyContent:"end",children:[(0,o.tZ)(u.zx,{priority:"tertiary",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==s||s()},children:d("Cancel")}),(0,o.tZ)(u.zx,{priority:"primary",onClick:e=>{e.preventDefault(),e.stopPropagation(),null==l||l(h.trim())},children:d("Save")})]})]})};var y=n(620),Z=n(7523);let E={link:"link-LXCHWO"},B=e=>{let{disableLinks:t,isEditingTitle:n,post:r,onEditTitle:i,onSaveTitle:a,onCancelTitle:l}=e,{iString:s}=(0,c.M1)(),{title:d,canonical_url:u}=r;return(0,o.tZ)(y.l,{children:(0,o.BX)(p.tu,{gap:8,children:[(0,o.tZ)(Z.Z,{color:"accent",preset:"detail-large",children:"Read"}),n?(0,o.tZ)(p.tu,{padding:8,children:(0,o.tZ)(k,{initialValue:d,placeholder:s("Edit title..."),onCancel:l,onSave:a})}):(0,o.tZ)("a",{href:u,rel:"noopener",target:"_blank",onClick:e=>{t&&e.preventDefault()},children:(0,o.tZ)(Z.Z,{className:E.link,preset:"h7-serif",style:{cursor:"pointer"},onClick:null!=i?i:void 0,children:d})})]})})};var T=n(19691),I=n(20888),S=n(74626);let _={button:"button-PdemLh"},x=e=>{let{buttonSize:t,cta:n,disableLinks:r,handleCancelCta:i,handleEditCta:a,handleSaveCta:l,href:s,isEditingCta:d}=e,{iString:u}=(0,c.M1)();return(0,o.tZ)("div",{onClick:d?void 0:null!=a?a:void 0,children:d?(0,o.tZ)(k,{initialValue:n,placeholder:u("Edit CTA..."),onCancel:i,onSave:l}):(0,o.tZ)(S._,{className:_.button,href:s,justifyContent:"start",renderAsLink:!0,size:t,trailingIcon:"chevron-right",variant:"tertiary",onClick:r?e=>{e.preventDefault()}:void 0,children:n||u("Read full story")})})};var N=n(1548);let L=e=>{let{bylines:t}=e;return(null==t?void 0:t.length)?(0,o.tZ)(Z.Z,{color:"tertiary",preset:"detail-large",children:(0,o.tZ)(N.M,{array:t||[],formatter:e=>{let{name:t}=e;return t},limit:3})}):null},M=e=>{let{caption:t,cta:n,disableLinks:r,isEditingCaption:i,isEditingTitle:a,isEditingCta:l,post:s,onCancelCaption:d,onCancelTitle:u,onCancelCta:h,onEditCaption:g,onEditTitle:m,onEditCta:v,onSaveCaption:A,onSaveTitle:f,onSaveCta:C,showBylines:w}=e,{iString:b}=(0,c.M1)(),{publishedBylines:E,title:B,canonical_url:S,cover_image:_,cover_image_alt:N}=s;return(0,o.tZ)(y.l,{children:(0,o.BX)(p.tu,{children:[(0,o.tZ)(p.tu,{paddingBottom:12,children:a?(0,o.tZ)(p.tu,{padding:8,children:(0,o.tZ)(k,{initialValue:B,placeholder:b("Edit title..."),onCancel:u,onSave:f})}):(0,o.tZ)("a",{href:S,rel:"noopener",target:"_blank",onClick:e=>{r&&e.preventDefault()},children:(0,o.tZ)(Z.Z,{preset:"h5-sans",onClick:null!=m?m:void 0,children:B})})}),(0,o.tZ)(p.tu,{paddingBottom:12,children:w&&(0,o.tZ)(L,{bylines:E})}),_&&(0,o.tZ)(p.tu,{paddingBottom:16,children:(0,o.tZ)("a",{href:S,rel:"noopener",target:"_blank",onClick:e=>{r&&e.preventDefault()},children:(0,o.tZ)(I.e,{alt:null!=N?N:B,imageProps:{height:Math.round(650),smartCrop:!0},maxWidth:1300,src:_})})}),(0,o.tZ)(p.hs,{flex:"grow",paddingBottom:8,children:(0,o.tZ)("div",{className:"captionContainer-e38vU2",children:i&&d&&A?(0,o.tZ)(p.tu,{paddingX:8,children:(0,o.tZ)(T.Z,{initialCaption:t,onCancel:d,onSave:A})}):(0,o.tZ)("p",{dangerouslySetInnerHTML:{__html:t},onClick:null!=g?g:void 0})})}),(0,o.tZ)(x,{cta:n,disableLinks:r,handleCancelCta:h,handleEditCta:v,handleSaveCta:C,href:S,isEditingCta:l})]})})};var P=n(98422);let O={imageLink:"imageLink-AC6EYn",image:"image-DiWGMJ",imageMobile:"imageMobile-PivMk8"},D=e=>{var t;let{disableLinks:n,post:r,isEditingTitle:i,onEditTitle:a,onSaveTitle:l,onCancelTitle:d,isEditingCta:u,onEditCta:h,onCancelCta:g,onSaveCta:m,cta:v,showBylines:A}=e,{iString:f}=(0,c.M1)(),{isMobile:C}=(0,P.v9)(),{publishedBylines:w,title:b,canonical_url:E,cover_image:B,cover_image_alt:T}=r;return(0,o.tZ)(y.l,{children:(0,o.BX)(p.gq,{alignItems:"stretch",gap:16,children:[B&&(0,o.tZ)("a",{className:O.imageLink,href:E,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,o.tZ)(I.e,{alt:null!=T?T:b,className:s()(O.image,{[null!==(t=O.imageMobile)&&void 0!==t?t:""]:C}),imageProps:{height:C?180:300,smartCrop:!0,aspect:"1:1"},maxWidth:C?180:300,src:B})}),(0,o.BX)(p.tu,{flex:"grow",gap:8,children:[i?(0,o.tZ)(p.tu,{paddingRight:8,paddingY:8,children:(0,o.tZ)(k,{initialValue:b,placeholder:f("Edit title..."),onCancel:d,onSave:l})}):(0,o.tZ)("a",{href:E,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,o.tZ)(Z.Z,{preset:"h5-sans",style:n?{}:{cursor:"pointer"},onClick:null!=a?a:void 0,children:b})}),A&&(0,o.tZ)(L,{bylines:w}),(0,o.tZ)(x,{cta:v,disableLinks:n,handleCancelCta:g,handleEditCta:h,handleSaveCta:m,href:E,isEditingCta:u})]})]})})},j=e=>{let{post:t,disableLinks:n,isEditingTitle:r,onEditTitle:i,onSaveTitle:a,onCancelTitle:l,onEditCta:s,onSaveCta:d,onCancelCta:u,isEditingCta:h,showBylines:g,cta:m}=e,{iString:v}=(0,c.M1)(),{publishedBylines:A,title:f,canonical_url:C}=t;return(0,o.tZ)(y.l,{children:(0,o.BX)(p.tu,{gap:4,children:[(0,o.BX)(p.tu,{gap:8,children:[r?(0,o.tZ)(p.tu,{padding:8,children:(0,o.tZ)(k,{initialValue:f,placeholder:v("Edit title..."),onCancel:l,onSave:a})}):(0,o.tZ)("a",{href:C,rel:"noopener",target:"_blank",onClick:e=>{n&&e.preventDefault()},children:(0,o.tZ)(Z.Z,{preset:"h5-sans",onClick:null!=i?i:void 0,children:f})}),g&&(0,o.tZ)(L,{bylines:A})]}),(0,o.tZ)(x,{buttonSize:"sm",cta:m,disableLinks:n,handleCancelCta:u,handleEditCta:s,handleSaveCta:d,href:C,isEditingCta:h})]})})};var R=n(6070);let U=e=>{document.dispatchEvent(new CustomEvent("updateDigestPostEmbed",{detail:e,bubbles:!0}))},H=e=>{document.dispatchEvent(new CustomEvent("convertDigestPostEmbedToLink",{detail:e,bubbles:!0}))},X=e=>{document.dispatchEvent(new CustomEvent("convertDigestPostEmbedToEmbeddedPost",{detail:e,bubbles:!0}))},z=()=>{document.dispatchEvent(new CustomEvent("deleteDigestPostEmbed",{bubbles:!0}))},W=e=>{let{nodeId:t,caption:n,cta:l,size:d="lg",isEditor:c,showBylines:u,title:h,publishedBylines:p,post_date:g,cover_image:w,cover_image_alt:b,canonical_url:k,section_name:y,id:Z,type:E,reaction_count:T,comment_count:I,publication_name:S,publication_logo_url:_,editor:x,updateAttributes:N,deleteNode:L,getPos:P,pub:O}=e,[W,F]=(0,a.eJ)(!1),[Y,G]=(0,a.eJ)(!1),[V,q]=(0,a.eJ)(!1),[J,Q]=(0,a.eJ)(!1),[K,$]=(0,a.eJ)(!1),ee=(0,R.HD)({pub:O}),et={title:h,publishedBylines:p,post_date:g,cover_image:w,cover_image_alt:b,canonical_url:k,section_name:y,id:Z,type:E,reaction_count:T,comment_count:I,publication_name:S,publication_logo_url:_},en=()=>{G(!0),F(!1),U({nodeId:t,shouldDisableDrag:!0})},er={onCancelTitle:c?()=>{q(!1),U({nodeId:t,shouldDisableDrag:!1})}:null,onEditTitle:c?()=>{q(!0),F(!1),U({nodeId:t,shouldDisableDrag:!0})}:null,onSaveTitle:c?e=>{q(!1),N?N({title:e}):U({nodeId:t,title:e,shouldDisableDrag:!1})}:null,isEditingTitle:V},ei={onCancelCaption:c?()=>{G(!1),U({nodeId:t,shouldDisableDrag:!1})}:null,onEditCaption:c?en:null,onSaveCaption:c?e=>{G(!1),N?N({caption:e}):U({nodeId:t,caption:e,shouldDisableDrag:!1})}:null,isEditingCaption:Y},eo={onCancelCta:c?()=>{Q(!1),U({nodeId:t,shouldDisableDrag:!1})}:null,onEditCta:c?()=>{Q(!0),F(!1),U({nodeId:t,shouldDisableDrag:!0})}:null,onSaveCta:c?e=>{Q(!1),N?N({cta:e}):U({nodeId:t,cta:e,shouldDisableDrag:!1})}:null,isEditingCta:J};return(0,o.tZ)("div",{className:s()(m.Z.digestPostEmbed),"data-component-name":"DigestPostEmbed",onMouseEnter:()=>!Y&&!V&&F(!0),onMouseLeave:()=>!K&&F(!1),children:(0,o.BX)(o.HY,{children:[c&&W&&(0,o.tZ)(v,{enableExtraSmallOption:ee,showBylines:u,showBylinesOption:ee,size:d,onClose:()=>$(!1),onConvertToEmbeddedPost:()=>{x&&P?x.commands.convertDigestPostEmbedToEmbeddedPostV2({pos:P(),attrs:(0,r._)({url:k},et)}):X({url:k})},onConvertToLink:()=>{x&&P?x.commands.convertDigestPostEmbedToLinkV2({pos:P(),url:k}):H({url:k})},onDelete:()=>{L?L():z()},onEditCaption:en,onOpen:()=>$(!0),onSetLayout:e=>{N?N({size:e}):U((0,r._)({nodeId:t,caption:n,cta:l,size:e,shouldDisableDrag:!1},et))},onSetShowBylines:e=>{N?N({showBylines:e}):U((0,r._)({nodeId:t,showBylines:e,shouldDisableDrag:!1},et))}}),"xs"===d&&(ee?(0,o.tZ)(B,(0,i._)((0,r._)({},er),{disableLinks:c,post:et})):(0,o.tZ)(C.u,{disableLinks:c,post:et})),"sm"===d&&(ee?(0,o.tZ)(j,(0,i._)((0,r._)({},er,eo),{cta:l,disableLinks:c,post:et,showBylines:u})):(0,o.tZ)(C.u,{disableLinks:c,post:et})),"md"===d&&(ee?(0,o.tZ)(D,(0,i._)((0,r._)({},er,eo),{cta:l,disableLinks:c,post:et,showBylines:u})):(0,o.tZ)(f.a,(0,i._)((0,r._)({},ei),{caption:n,disableLinks:c,post:et}))),"lg"===d&&(ee?(0,o.tZ)(M,(0,i._)((0,r._)({},ei,er,eo),{caption:n,cta:l,disableLinks:c,post:et,showBylines:u})):(0,o.tZ)(A.c,(0,i._)((0,r._)({},ei),{caption:n,disableLinks:c,post:et})))]})})}},42123:function(e,t,n){n.d(t,{H:()=>i});let r=e=>{e.stopPropagation()},i={onKeyPress:r,onCopy:r,onPaste:r,onKeyDown:r}},33730:function(e,t,n){n.d(t,{V:()=>h});var r=n(58865),i=n(16584),o=n(55679),a=n(28596),l=n(347),s=n(95441),d=n(15771),c=n(19081);function u(){let e=(0,r._)(["Message ",""]);return u=function(){return e},e}let h=e=>{let{node:t}=e,n=t.attrs,{iTemplate:r}=(0,s.M1)();return(0,i.tZ)(o.T5,{className:"directMessage","data-drag-handle":"",children:(0,i.tZ)(l.h,{children:(0,i.tZ)(c.tu,{alignItems:"center",justifyContent:"center",flex:"grow",style:{marginBottom:"20px"},children:(0,i.tZ)(d.zx,{priority:"primary",leading:(0,i.tZ)(a.Z,{size:20}),children:r(u(),n.userName)})})})})}},78532:function(e,t,n){let r;n.d(t,{_:()=>x});var i=n(16584),o=n(30396),a=n(55679),l=n(94184),s=n.n(l),d=n(25235),c=n(31992),u=n(29942),h=n(62686),p=n(40160),g=n(8700),m=n(99869),v=n(92027),A=n(2563),f=n(20888),C=n(95441),w=n(15771),b=n(19081),k=n(21685),y=n(58175),Z=n(51776),E=n(87077),B=n(60308),T=n(57747);let I={normal:"large",large:"full",full:"normal"},S=e=>{let{alt:t,onUpdateAlt:n}=e,{iString:r}=(0,C.M1)();return(0,i.tZ)(b.tu,{gap:8,justifyContent:"center",className:T.Z.mediaControlTextEditor,children:(0,i.BX)(b.tu,{gap:8,children:[(0,i.tZ)(y.xv.B3,{translated:!0,font:"meta",color:"secondary",children:"Alt text"}),(0,i.tZ)(Z.oi,{value:t,onChange:e=>n(e.currentTarget.value),placeholder:r("Describe images…")})]})})},_=e=>{let{href:t,onSave:n}=e,[r,a]=(0,o.eJ)(t||""),{iString:l}=(0,C.M1)();return(0,i.BX)(b.tu,{gap:8,justifyContent:"center",className:T.Z.mediaControlTextEditor,children:[(0,i.BX)(b.tu,{gap:4,children:[(0,i.tZ)(y.xv.B3,{translated:!0,font:"meta",color:"secondary",children:"URL"}),(0,i.tZ)(Z.oi,{placeholder:"Add image link…",value:r,onChange:e=>a(e.currentTarget.value)})]}),(0,i.BX)(b.gq,{gap:8,children:[t&&(0,i.tZ)(w.zx,{priority:"destructive",size:"sm",onClick:()=>n(null),children:l("Remove")}),(0,i.tZ)(w.zx,{priority:"primary",size:"sm",onClick:()=>{let e=(0,d.find)(r,"url");e.length?n(e[0].href.replace("http:","https:")):alert(l("Invalid url"))},disabled:t===r||!r.length,children:(null==t?void 0:t.length)?l("Update"):l("Save")})]})]})},x=e=>{var t;let{node:n,updateAttributes:l}=e,[d,y]=(0,o.eJ)(!1),[Z,x]=(0,o.eJ)(0),[N,L]=(0,o.eJ)(0),M=(0,o.sO)(null),{iString:P}=(0,C.M1)(),O=()=>{let e=document.querySelector(".ProseMirror");e&&L(null==e?void 0:e.clientWidth),M.current&&(M.current.onload=()=>{M.current&&x(M.current.naturalWidth/M.current.naturalHeight)})},D=e=>{r=e};(0,o.d4)(()=>{O()});let[j,R]=(0,o.eJ)(!1),U=e=>{let{width:t,height:n}=e;return t<50||n<50},H=e=>{e.preventDefault(),setTimeout(()=>W(e))},X=()=>{R(!1),r=-1,document.removeEventListener("pointermove",H),document.removeEventListener("pointerup",X)},z=(e,t)=>{var n,r;if(!M.current){console.error("Media ref is undefined|null",{resizableImg:M.current});return}let i={width:null===(n=M.current)||void 0===n?void 0:n.width,height:null===(r=M.current)||void 0===r?void 0:r.height},o={width:-1,height:-1};"left"===e?o.width=i.width-Math.abs(t):o.width=i.width+Math.abs(t),o.width>N&&(o.width=N),o.height=o.width/Z,U(o)||l(o)},W=e=>{if(-1===r)return;let{clientX:t}=e,n=r-t;if(0===n)return;let i=n>0?"left":"right";setTimeout(()=>{z(i,Math.abs(n)),r=t})},F=e=>{let t={size:e,width:"100%"};"normal"!==e&&(t.height="auto",t.align="center"),"large"===e&&(t.width=B.urw),"full"===e&&(t.width=B.hI6),l(t)};return(0,i.BX)(a.T5,{as:"figure",className:s()(T.Z.mediaNodeView,n.attrs.align&&T.Z["align-".concat(n.attrs.align)||""]),"data-drag-handle":"",children:[(0,i.BX)(b.gq,{className:s()(T.Z.imageContainer,T.Z[n.attrs.size]),children:[(0,i.BX)(b.tu,{gap:8,children:[(0,i.BX)(b.gq,{justifyContent:"center",style:{position:"relative"},children:[(0,i.tZ)(f.e,{className:T.Z[n.attrs.size],src:n.attrs.src,alt:n.attrs.alt,title:n.attrs.title,style:{pointerEvents:"none"},maxWidth:(()=>{switch(n.attrs.size){case"large":return B.urw;case"full":return window.innerWidth;default:if("100%"===n.attrs.width)return B.qN9;return n.attrs.width}})(),imageRef:M,useRetinaSizing:!0,imageIsFixedWidth:!1}),"normal"===n.attrs.size&&(0,i.tZ)("div",{className:s()(T.Z.horizontalResizeHandle),title:P("Resize"),onClick:e=>{let{clientX:t}=e;return D(t)},onPointerDown:e=>{R(!0),r=e.clientX,setTimeout(()=>{document.addEventListener("pointermove",H),document.addEventListener("pointerup",X)})},onPointerUp:X,children:(0,i.tZ)(w.hU,{priority:"secondary",children:(0,i.tZ)(c.Z,{height:18,color:"#2b2e3b"})})})]}),(0,i.BX)(b.gq,{justifyContent:"center",className:s()(T.Z.inlineCaptionEditor,{[T.Z.hasCaption]:null===(t=n.content)||void 0===t?void 0:t.size}),children:[(0,i.tZ)(a.ms,{as:"figcaption",className:T.Z.caption,contenteditable:!0}),!n.content.size&&(0,i.tZ)("div",{className:s()(T.Z.caption,T.Z.placeholder),children:"Add caption…"})]})]}),(0,i.BX)(b.gq,{gap:4,className:s()(T.Z.mediaControlButtons),children:[(0,i.tZ)(E.u,{text:P("Toggle standard, large, full-screen"),preferPlacement:"top-center",children:(0,i.tZ)(w.hU,{priority:"tertiary",onClick:()=>F(I[n.attrs.size]),children:(0,i.tZ)(u.Z,{height:18,color:"#2b2e3b"})})}),"normal"===n.attrs.size&&(0,i.BX)(i.HY,{children:[(0,i.tZ)(E.u,{text:P("Align left"),preferPlacement:"top-center",children:(0,i.tZ)(w.hU,{priority:"tertiary",className:s()("left"===n.attrs.align&&T.Z.active),onClick:()=>l({align:"left"}),children:(0,i.tZ)(h.Z,{height:18,color:"#2b2e3b"})})}),(0,i.tZ)(E.u,{text:P("Align center"),preferPlacement:"top-center",children:(0,i.tZ)(w.hU,{priority:"tertiary",className:s()("center"===n.attrs.align&&T.Z.active),onClick:()=>l({align:"center"}),children:(0,i.tZ)(p.Z,{height:18,color:"#2b2e3b"})})}),(0,i.tZ)(E.u,{text:P("Align right"),preferPlacement:"top-center",children:(0,i.tZ)(w.hU,{priority:"tertiary",className:s()("right"===n.attrs.align&&T.Z.active),onClick:()=>l({align:"right"}),children:(0,i.tZ)(g.Z,{height:18,color:"#2b2e3b"})})})]}),(0,i.tZ)(E.u,{text:P("Add link"),preferPlacement:"top-center",children:(0,i.tZ)(k.J,{preferPlacement:"bottom-start",content:(0,i.tZ)(_,{href:n.attrs.href,onSave:e=>{var t;l({href:e}),null===(t=M.current)||void 0===t||t.click()}}),children:(0,i.tZ)(w.hU,{priority:"tertiary",children:(0,i.tZ)(m.Z,{height:18,color:"#2b2e3b"})})})}),(0,i.tZ)(E.u,{text:P("Edit alt text"),preferPlacement:"top-center",children:(0,i.tZ)(k.J,{preferPlacement:"bottom-start",content:(0,i.tZ)(S,{alt:n.attrs.alt,onUpdateAlt:e=>l({alt:e})}),children:(0,i.tZ)(w.hU,{priority:"tertiary",children:(0,i.tZ)(v.Z,{height:18,color:"#2b2e3b"})})})})]})]}),(0,i.tZ)(A.ImageViewerModal,{showModal:d,modalContent:[{attrs:n.attrs}],onClose:()=>y(!1),step:0})]})}},72183:function(e,t,n){n.d(t,{Z:()=>B});var r=n(7409),i=n(58865),o=n(16584),a=n(30396),l=n(27194),s=n(78435),d=n(95441),c=n(14952),u=n(40647),h=n(15771),p=n(82402),g=n(19081),m=n(1844),v=n(68709),A=n(6490),f=n(17688),C=n(58175),w=n(51776),b=n(87077);function k(){let e=(0,i._)(["Each option must be between 1 and "," characters long."]);return k=function(){return e},e}function y(){let e=(0,i._)(["The description must be less than "," characters long."]);return y=function(){return e},e}let Z=(e,t)=>{let{question:n,description:r,expiry:i,audience:o,options:a}=e,{iString:l,iTemplate:s}=I18N.i(t),d=a.filter(Boolean);if(n.length<1||n.length>255)return l("The question must be between 1 and 255 characters long.");if(d.length<2||d.length>5)return l("Your poll must have 2 to 5 options.");if(d.some(e=>e.length<1||e.length>35))return s(k(),35);if(!["all_subscribers","only_paid"].includes(o))return l("Your poll audience is invalid.");if(![1,24,72,168,999999].includes(i))return l("The length of your poll is invalid.");else if(r.length>250)return s(y(),250);return null},E=e=>{let{index:t,text:n,onChange:r,onDelete:i,showDeleteButton:a,disabled:c}=e,{language:u}=(0,d.M1)();return(0,o.BX)(g.X2,{flex:"grow",gap:8,children:[(0,o.tZ)(w.oi,{disabled:c,flex:"grow",maxLength:35,placeholder:(0,s.v8)(t,u),value:n,onChange:e=>{r(t,e.currentTarget.value)}}),a&&(0,o.tZ)(h.hU,{disabled:c,priority:"tertiary",tabIndex:a?void 0:-1,onClick:()=>i(t),children:(0,o.tZ)(l.Z,{size:20})})]})},B=e=>{let{poll:t,isOpen:n,onClose:i,onSave:l,isPublished:s,shouldShowAudiencePicker:k}=e,y=t.options.map(e=>e.label);y.length>1?y.length<5&&y.push(""):y=["",""];let{iString:B,language:T,iPlural:I}=(0,d.M1)(),{getConfigFor:S}=(0,u.xR)(),{payments_state:_}=(0,c.Ij)()||{},x=!!S("enable_description_on_polls"),N=k&&"enabled"===_?"only_paid":"all_subscribers",[L,M]=(0,a.eJ)(t.question||""),[P,O]=(0,a.eJ)(t.description||""),[D,j]=(0,a.eJ)(y),[R,U]=(0,a.eJ)(t.expiry||24),[H,X]=(0,a.eJ)(t.audience||N),[z,W]=(0,a.eJ)(!1),[F,Y]=(0,a.eJ)(t.votes_hidden||!1),[G,V]=(0,a.eJ)(null),q=Z({question:L,description:P,options:D,expiry:R,audience:H},T),J=(0,a.I4)(()=>{var e;M(t.question||""),O(t.description||""),j((null===(e=t.options)||void 0===e?void 0:e.map(e=>e.label))||["",""]),U(t.expiry||24),X(t.audience||N),Y(t.votes_hidden||!1),V(null),i()},[t.question,t.description,t.options,t.expiry,t.audience,t.votes_hidden,N,i]),Q=(0,a.I4)(e=>{let{value:t}=e;["only_paid","all_subscribers"].includes(t)&&X(t)},[]),K=(0,a.I4)(e=>{let{value:t}=e,n=Number(t);[1,24,72,168,999999].includes(n)&&U(n)},[]),$=(0,a.I4)((e,t)=>{let n=[...D];n.splice(e,1,t),e===n.length-1&&n.length<5&&n.push(""),j(n)},[D]),ee=(0,a.I4)(e=>{var t;if(D.length<=2||e>=D.length)return;let n=[...D];n.splice(e,1),(null===(t=n[n.length-1])||void 0===t?void 0:t.length)&&n.push(""),j(n)},[D]),et=Array(Math.max(2,D.length||0)).fill("").map((e,t)=>D.length>t?D[t]:e),en=G||s&&t.total_votes>0&&I("This poll is part of a post that has already been published. If you modify it, 1 existing vote will be removed.","This poll is part of a post that has already been published. If you modify it, %1 existing votes will be removed.",t.total_votes);return(0,o.BX)(A.u_,{className:"poll-editor-modal",isOpen:n,onClose:i,children:[(0,o.tZ)(A.xB,{showClose:!0,showDivider:!0,title:B("Edit poll"),onClose:i}),(0,o.tZ)(A.fe,{children:(0,o.BX)(g.sg,{gap:20,children:[(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll question")}),(0,o.tZ)(w.oi,{disabled:z,maxLength:255,placeholder:B("Enter your question..."),value:L,onChange:e=>M(e.currentTarget.value)})]}),x&&(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll description")}),(0,o.tZ)(w.oi,{disabled:z,maxLength:250,placeholder:B("Enter your description..."),value:P,onChange:e=>O(e.currentTarget.value)})]}),(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll options")}),et.map((e,t)=>(0,o.tZ)(E,{disabled:z,index:t,showDeleteButton:et.length>2&&(t<et.length-1||e&&e.length>0),text:e,onChange:$,onDelete:ee},t))]}),(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Poll duration")}),(0,o.BX)(f.i,{disabled:z,value:String(R),onChange:e=>K({value:e.target.value}),children:[(0,o.tZ)("option",{value:"1",children:B("1 hour")}),(0,o.tZ)("option",{value:"24",children:B("1 day")}),(0,o.tZ)("option",{value:"72",children:B("3 days")}),(0,o.tZ)("option",{value:"168",children:B("1 week")}),(0,o.tZ)("option",{value:"999999",children:B("Forever")})]})]}),k&&"enabled"===_&&(0,o.BX)(w.fv,{children:[(0,o.tZ)(v.__,{children:B("Who can vote?")}),(0,o.BX)(f.i,{disabled:z,value:H,onChange:e=>Q({value:e.target.value}),children:[(0,o.tZ)("option",{value:"only_paid",children:B("Only paid subscribers")}),(0,o.tZ)("option",{value:"all_subscribers",children:B("All subscribers who can see this post")})]})]}),(0,o.tZ)("label",{children:(0,o.BX)(g.X2,{alignItems:"center",gap:12,children:[(0,o.tZ)(p.X,{checked:F,name:"votes-hidden",onChange:()=>Y(!F)}),(0,o.tZ)(C.xv.B3,{children:B("Hide the total vote count from readers?")})]})}),en&&(0,o.tZ)(w.fv,{children:(0,o.tZ)(m.y,{children:en})})]})}),(0,o.tZ)(A.mz,{primaryButton:(0,o.tZ)(b.u,{disabled:null===q,text:null!=q?q:"",children:(0,o.tZ)(h.zx,{disabled:null!==q||z,priority:"primary",onClick:async()=>{let e=Z({question:L,description:P,options:D,expiry:R,audience:H},T);if(e){V(e);return}W(!0),V(null);try{await l((0,r._)({audience:H,question:L,options:D.filter(Boolean),expiry:R,votes_hidden:F},x?{description:P}:{}))}catch(e){V(B("An error occurred while saving this poll."))}finally{W(!1)}},children:B("Save")})}),secondaryButton:(0,o.tZ)(h.zx,{disabled:z,priority:"secondary",onClick:J,children:B("Cancel")}),showDivider:!0})]})}},38724:function(e,t,n){n.d(t,{Z:()=>u});var r=n(7409),i=n(99282),o=n(16584),a=n(20253),l=n(93666),s=n(68833),d=n(60308),c=n(47929);class u extends l.p{onOpen(){var e;(0,s.j)(s.FP.POLL_SIGNUP_DIALOG_PRESENTED,{poll_id:this.props.pollId,post_id:null===(e=this.props.post)||void 0===e?void 0:e.id})}onClose(){var e;(0,s.j)(s.FP.POLL_SIGNUP_DIALOG_CLOSED,{poll_id:this.props.pollId,post_id:null===(e=this.props.post)||void 0===e?void 0:e.id})}renderChildren(){let{pub:e,post:t,user:n,audience:l,pollId:u}=this.props,{email:h}=this.state;return(0,o.BX)("div",{children:[(0,o.BX)("div",{className:"poll-signup-header",children:[(0,o.tZ)("div",{className:"poll-signup-title",children:"Subscribe to ".concat(null==e?void 0:e.name," to vote on this poll")}),(0,o.BX)("div",{className:"poll-signup-audience",children:["Only ","only_paid"===l?"paid subscribers":"subscribers"," can vote on this poll."]})]}),(0,o.BX)(a.ZP,{action:(0,d.n1t)("/api/v1/free"),autoLock:!0,loading:!1,method:"post",onSuccess:n=>{(0,s.IU)(),(0,s.j)(s.FP.POLL_SIGNUP_DIALOG_SUBMITTED,{poll_id:u,post_id:null==t?void 0:t.id}),e&&(e.plans||e.has_recommendations)?document.location.href=(0,d.W1P)(e,(0,i._)((0,r._)({utm_medium:c.lP.web,utm_source:c.b3.pollSubscribeModal,utm_content:t&&t.id,just_signed_up:!0,requires_confirmation:n.body.requires_confirmation?"true":""},n.body.subscription_id&&{subscription_id:n.body.subscription_id},n.body.referral_token&&{referral_token:n.body.referral_token}),{next:(0,d.uRy)(e,t)})):document.location.reload()},children:[(0,o.BX)("div",{className:"poll-signup",children:[(0,o.tZ)("input",{"aria-label":"Email",disabled:!!n.email,name:"email",placeholder:"Type your email...",tabIndex:0,type:"email",value:null!=h?h:void 0,onChange:e=>{this.setState({email:e.target.value})}}),(0,o.tZ)("input",{name:"source",type:"hidden",value:"poll-subscribe-modal"})]}),(0,o.tZ)("div",{id:"error-container"}),(0,o.tZ)("button",{className:"button primary",type:"submit",children:"Subscribe"})]}),!n.email&&(0,o.BX)("div",{className:"poll-signin-prompt",children:["Already a subscriber?"," ",(0,o.tZ)("a",{className:"poll-signin-link",href:(0,d.uXE)({for_pub:null==e?void 0:e.subdomain,redirect:(0,d.uRy)(e,t)}),children:"Sign in"})]})]})}constructor(e,t){var n,r;super(e,t),this.state.email=null!==(r=null===(n=this.props.user)||void 0===n?void 0:n.email)&&void 0!==r?r:null}}},77216:function(e,t,n){n.d(t,{Z:()=>s});var r=n(16584),i=n(13639),o=n(95441),a=n(19081),l=n(58175);let s=e=>{let{poll:t}=e,{iString:n}=(0,o.M1)(),s=null==t?void 0:t.audience,d=null==t?void 0:t.question,c=null==t?void 0:t.description;return(0,r.BX)(a.tu,{gap:4,children:[(0,r.tZ)(a.gq,{alignItems:"baseline",className:"poll-title",gap:4,children:"only_paid"===s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(i.Z,{size:16}),(0,r.tZ)(l.xv.Meta,{className:"subscriber-only-poll",translated:!0,children:"SUBSCRIBER-ONLY POLL"})]}):(0,r.tZ)(l.xv.Meta,{translated:!0,children:"POLL"})}),(0,r.tZ)(l.xv.H3,{className:"poll-question",color:"pub-primary-text",children:d||n("New Poll")}),c&&(0,r.tZ)(l.xv.B3,{color:"pub-secondary-text",children:c})]})}},38735:function(e,t,n){n.d(t,{k:()=>h});var r=n(7409),i=n(58865),o=n(16584),a=n(95441),l=n(58175);function s(){let e=(0,i._)([""," DAYS REMAINING"]);return s=function(){return e},e}function d(){let e=(0,i._)(["1 DAY REMAINING"]);return d=function(){return e},e}function c(){let e=(0,i._)([""," HOURS REMAINING"]);return c=function(){return e},e}let u=e=>{let{isExpired:t,remainingHours:n,language:r}=e,{iString:i,iTemplate:o}=I18N.i(r);if(t)return i("POLL CLOSED");if(n>=168)return"";if(n>=48){let e=Math.floor(n/24);return o(s(),e)}return n>=24?o(d()):n>=2?o(c(),n):i(1==n?"1 HOUR REMAINING":"LESS THAN 1 HOUR REMAINING")},h=e=>{let{hasVoted:t,isExpired:n,poll:i,remainingHours:s,showResults:d,user:c,onToggleShowResults:h}=e,{iString:p,iPlural:g,language:m}=(0,a.M1)(),v=(0,r._)({is_contributor:!1,is_author:!1,is_admin:!1},c),A=v.is_contributor||v.is_admin||v.is_author,f=g("%1 VOTE","%1 VOTES",i.total_votes),C=u({isExpired:n,remainingHours:s,language:m});return(0,o.BX)(l.xv.Meta,{className:"poll-status",children:[(A||!i.votes_hidden)&&"".concat(f," \xb7 "),C,A&&!t&&!n&&(0,o.BX)(o.HY,{children:[" \xb7 ",(0,o.tZ)("span",{className:"poll-author-visibility-toggle",title:p("Only the author, contributors, and admins may view results before voting."),onClick:()=>{h()},children:p(d?"SHOW OPTIONS":"SHOW RESULTS")})]})]})}},52573:function(e,t,n){n.d(t,{w:()=>s});var r=n(16584),i=n(30396),o=n(94184),a=n.n(o),l=n(18693);let s=e=>{let{id:t,text:n,onVote:o,showVotes:s,currentVotes:d,totalVotes:c,myVote:u,canVote:h}=e,p=(0,i.I4)(async()=>{t&&h&&await o(t)},[t,o,h]),g=Math.round(100*(0===c?0:d/c));return(0,r.BX)("div",{className:a()("poll-option",{"show-votes":s,"hide-votes":!s,"can-vote":h,"my-vote":u}),onClick:p,children:[s&&(0,r.tZ)("div",{className:"poll-vote-background",style:{width:"".concat(g,"%")}}),(0,r.tZ)("div",{className:"poll-option-background",children:(0,r.BX)("div",{className:"poll-option-text",children:[n,s&&u&&(0,r.tZ)(l.Z,{className:"vote-icon"})]})}),s&&(0,r.BX)("div",{className:"poll-percentage-text",children:[g,"%"]})]})}},47906:function(e,t,n){n.d(t,{B:()=>c});var r=n(30396),i=n(80569),o=n.n(i),a=n(95441),l=n(60308),s=n(69332),d=n(84864);let c=e=>{let{isEditor:t,isVersionView:n,pollId:i,post:c,onFinishSaving:u}=e,{iString:h}=(0,a.M1)(),[p,g]=(0,r.eJ)(null!=n&&n),[m,v]=(0,r.eJ)(!0),[A,f]=(0,r.eJ)(null),[C,w]=(0,r.eJ)(null),b=(0,r.Ye)(()=>{let e={token:void 0,uuid:void 0};if("undefined"!=typeof window&&!t){var n;let t=(0,s.m)(window.location.href);if(t&&t.token&&(e.token=t.token),!e.token&&(null===(n=window._preloads)||void 0===n?void 0:n.original_url)){let t=(0,s.m)(window._preloads.original_url);t&&t.token&&(e.token=t.token)}}if("undefined"!=typeof window&&!t&&(null==c?void 0:c.is_draft)){let t=(0,l.RQ)(window.location.href);t&&(0,d.isUUID)(t)&&(e.uuid=t)}return e},[t,null==c?void 0:c.is_draft]),k=(0,r.I4)(async function(){let{shouldNotSetLoading:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldNotSetLoading:!1};e||v(!0);try{let e=await o()("/api/v1/poll/".concat(i)).query(b);f(e.body),w(null)}catch(e){w(h("We were unable to load this poll. Please refresh the page."))}v(!1)},[i,b,h]),y=(0,r.I4)(async e=>{await o().put("/api/v1/poll/".concat(i)).send(e),v(!0),await k(),u()},[k,u,i]),Z=(0,r.I4)(async e=>{if(!p){g(!0);try{await o().post("/api/v1/poll/".concat(i,"/vote")).send({poll_option_id:e}).query(b),w(null)}catch(e){w(h("We were unable to record your vote. Please refresh the page and try again.")),g(!1);return}await k({shouldNotSetLoading:!0}),g(!1)}},[p,k,i,b,h]);return(0,r.d4)(()=>{k()},[k]),{error:C,loading:m,poll:A,fetchPoll:k,savePoll:y,voteForOption:Z}}},84711:function(e,t,n){n.d(t,{d:()=>a});var r=n(16584),i=n(55679),o=n(92314);let a=e=>{let{node:t}=e;return(0,r.tZ)(i.T5,{children:(0,r.tZ)(o.c,{mediaUploadId:t.attrs.mediaUploadId,isEditor:!0,post:null,pub:null})})}},20145:function(e,t,n){n.d(t,{Z:()=>l});var r=n(7409),i=n(99282),o=n(16584),a=n(64515);let l=e=>(0,o.tZ)(a.l,(0,i._)((0,r._)({strokeLinecap:"round",strokeLinejoin:"round"},e),{name:"LucideStarIcon",svgParams:{height:24,width:24},children:(0,o.tZ)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}))},1467:function(e,t,n){n.d(t,{Z:()=>l});var r=n(7409),i=n(99282),o=n(16584),a=n(64515);let l=e=>(0,o.tZ)(a.l,(0,i._)((0,r._)({},e),{name:"NoteReplyIcon",svgParams:{height:24,width:24,stroke:e.stroke,strokeWidth:e.strokeWidth},children:(0,o.tZ)("path",{d:"M22 11.4445C22.0038 12.911 21.6612 14.3577 21 15.6667C20.216 17.2353 19.0108 18.5546 17.5194 19.477C16.0279 20.3993 14.3091 20.8882 12.5555 20.8889C11.089 20.8927 9.64234 20.5501 8.33332 19.8889L2 22L4.11111 15.6667C3.44992 14.3577 3.10729 12.911 3.11111 11.4445C3.11179 9.69086 3.60068 7.97208 4.52302 6.48064C5.44536 4.98919 6.76472 3.78399 8.33332 3.00003C9.64234 2.33884 11.089 1.99621 12.5555 2.00003H13.1111C15.427 2.1278 17.6145 3.10532 19.2546 4.74543C20.8947 6.38553 21.8722 8.57297 22 10.8889V11.4445Z","stroke-linecap":"round","stroke-linejoin":"round"})}))},54917:function(e,t,n){n.d(t,{y:()=>l});var r=n(16584),i=n(620),o=n(7523),a=n(19081);let l=e=>{let{poll:t}=e;return(0,r.tZ)(i.l,{children:(0,r.BX)(a.tu,{gap:16,children:[(0,r.tZ)(o.Z,{preset:"h5-sans",children:(null==t?void 0:t.question)||"New Poll"}),(null==t?void 0:t.description)&&(0,r.tZ)(o.Z,{preset:"d2-serif",children:t.description})]})})}},67434:function(e,t,n){n.d(t,{r:()=>l});var r=n(16584),i=n(620),o=n(7523),a=n(95441);let l=e=>{let{hasVoted:t,poll:n,user:l}=e,{iPlural:s}=(0,a.M1)();return(!n.votes_hidden||l.is_contributor)&&(t||l.is_contributor)?(0,r.tZ)(i.l,{children:(0,r.tZ)(o.Z,{color:"tertiary",preset:"detail-large",children:s("%1 VOTE","%1 VOTES",n.total_votes)})}):null}},60437:function(e,t,n){n.d(t,{g:()=>p});var r=n(16584),i=n(30396),o=n(94184),a=n.n(o),l=n(25380),s=n(620),d=n(7523),c=n(19081);let u={container:"container-ZEro8t",containerCanVote:"containerCanVote-zhAHHo",text:"text-QBNtOV",percentageBackground:"percentageBackground-AahPjX"},h=["#7491e3","#f69227","#f74701","#f3c82e","#2db750","#0366f3","#bebdb8"],p=e=>{var t;let{currentVotes:n,hasVoted:o,id:p,index:g,myVote:m,showVotes:v,text:A,totalVotes:f,onVote:C}=e,w=Math.round(100*(0===f?0:n/f)),b=h[g%h.length],k=(0,i.I4)(async()=>{!o&&p&&await C(p)},[o,p,C]);return(0,r.tZ)(s.l,{children:(0,r.BX)(c.gq,{className:a()(u.container,{[null!==(t=u.containerCanVote)&&void 0!==t?t:""]:!o}),cursor:o?void 0:"pointer",justifyContent:o?"space-between":"center",padding:16,position:"relative",onClick:k,children:[v&&(0,r.tZ)("div",{className:u.percentageBackground,style:{width:"".concat(w,"%"),backgroundColor:b}}),(0,r.tZ)(d.Z,{className:u.text,preset:"detail-large",children:A}),v&&(0,r.BX)(c.gq,{alignItems:"center",gap:8,children:[m&&(0,r.tZ)(c.gq,{alignItems:"center",className:u.text,children:(0,r.tZ)(l.Z,{size:16})}),(0,r.BX)(d.Z,{className:u.text,preset:"detail-large",children:[w,"%"]})]})]})})}},620:function(e,t,n){n.d(t,{l:()=>o});var r=n(16584),i=n(347);let o=e=>{let{children:t}=e;return(0,r.tZ)("div",{className:"the-free-press-theme",children:(0,r.tZ)(i.h,{children:t})})}},92314:function(e,t,n){n.d(t,{c:()=>b});var r=n(16584),i=n(30396),o=n(94184),a=n.n(o),l=n(98661),s=n(12281),d=n(95441),c=n(31098),u=n(29719),h=n(93687),p=n(98914),g=n(98422),m=n(70379),v=n(17564),A=n(18618),f=n(60308),C=n(63651);let w={editVideoEmbedWrap:"editVideoEmbedWrap-UANbdz",imageGallery:"imageGallery-W5xlEs",editVideoEmbed:"editVideoEmbed-nRUXQD",videoPlaceholder:"videoPlaceholder-F7Lub5",videoScrollTarget:"videoScrollTarget-SzB20Y",video:"video-P2qgwZ",videoPlayer:"videoPlayer-vlcedM",videoEmbed:"videoEmbed-_FycLU",videoPlaceholderSilhouette:"videoPlaceholderSilhouette-XopYyA"},b=e=>{var t,n,o,b;let{mediaUploadId:k,pub:y,post:Z,isEditor:E=!1}=e,B=(0,l.useRef)(),{iString:T}=(0,d.M1)(),{isMobile:I}=(0,g.v9)(),{mediaUpload:S,loading:_,error:x,refetch:N}=(0,h.z)({mediaUploadId:k}),[L,M]=(0,i.eJ)(!1),[P,O]=(0,i.eJ)(!1),[D,j]=(0,i.eJ)(!1),[R,U]=(0,i.eJ)(!1),[H,X]=(0,i.eJ)(null);(0,l.useEffect)(()=>()=>{"undefined"!=typeof window&&H&&window.clearTimeout(H)},[H]);let z=()=>{var e;N(),S&&(0,p.pt)((0,f.kOB)(S)),(null===(e=B.current)||void 0===e?void 0:e.player)&&B.current.player.load(),M(!1)};return(0,l.useEffect)(()=>{var e;let t=e=>{e.preventDefault()};return"undefined"!=typeof window&&(null===(e=B.current)||void 0===e?void 0:e.player)&&L&&window.document.addEventListener("dragstart",t),()=>{var e;"undefined"!=typeof window&&(null===(e=B.current)||void 0===e?void 0:e.player)&&window.document.removeEventListener("dragstart",t)}},[L,B]),(0,r.tZ)("div",{"data-component-name":"VideoEmbedPlayer",id:(0,C.jnY)({mediaUploadId:k}),className:w.videoScrollTarget,onMouseEnter:()=>{H&&(clearTimeout(H),X(null)),O(!0)},onMouseLeave:()=>{"undefined"!=typeof window&&X(window.setTimeout(()=>{O(!1)},0))},children:_?(0,r.tZ)(v.S,{className:w.videoPlaceholderSilhouette}):x||!S?(0,r.tZ)("div",{className:w.videoPlaceholder,children:T("Could not load video.")}):(0,r.tZ)(r.HY,{children:(0,r.BX)("div",{className:a()(w.videoEmbed,E&&w.canEdit),children:[(0,r.tZ)(s.Z,{ref:B,mediaUpload:S,className:a()({[w.canEdit]:E}),pub:y,noPreview:L,renderPlayButton:()=>(0,r.tZ)(A.fI,{isPlaying:!1,size:I?56:72}),stopPropagation:!0,videoType:"embed",videoPlayerClassName:w.videoPlayer,videoClassName:w.video,surface:E?"editor":"post",entityKey:String(null!==(n=null==Z?void 0:Z.id)&&void 0!==n?n:S.post_id),entityType:"post",contentType:"embed"}),E&&(P||L||D||R)&&(0,r.BX)(m.VW,{children:[(0,r.tZ)(u.Z,{videoPlayer:null!==(o=B.current)&&void 0!==o?o:null,pub:null,postId:null!==(b=null==Z?void 0:Z.id)&&void 0!==b?b:null,mediaUpload:S,onOpenThumbnail:()=>M(!0),onOpenSettings:null,onThumbnailUpdated:z,onOpenFreePreview:null,onRemoveFreePreview:null,onRemoveMedia:null,active:!L,onSelected:e=>e?j(!0):j(!1),onDownloadStarted:()=>U(!0),onDownloadFinished:()=>U(!1)},k),L&&(null===(t=B.current)||void 0===t?void 0:t.player)&&(0,r.tZ)(c.Z,{videoPlayerRef:B.current.player,videoUpload:S,active:L,onCancel:z,onUpdate:z})]})]})})})}},45823:function(e,t,n){n.d(t,{K:()=>d});var r,i,o=n(6400),a=n(30396);let l="undefined"!=typeof window&&null!==(i=null===(r=window._preloads)||void 0===r?void 0:r.freeSignup)&&void 0!==i&&i,s=(0,o.createContext)(l);function d(){return(0,a.qp)(s)}s.displayName="FreeSignupContext"},55918:function(e,t,n){n.r(t),n.d(t,{ImageActions:()=>s});var r=n(16584),i=n(74655),o=n(35588),a=n(71068),l=n(19081);function s(e){let{size:t}=e;return(0,r.BX)(l.X2,{gap:8,children:[(0,r.tZ)(a.xu,{className:"icon-container restack-image",children:(0,r.tZ)(i.Z,{size:t})}),(0,r.tZ)(a.xu,{className:"icon-container view-image",children:(0,r.tZ)(o.Z,{size:t})})]})}},64819:function(e,t,n){n.d(t,{n:()=>T});var r=n(7409),i=n(99282),o=n(16584),a=n(30396),l=n(57560),s=n(95441),d=n(19081),c=n(58175);let u=e=>{let{accept:t,onUploadClicked:n,onFileSelected:r,onRecord:i,hideRecorder:u=!1,hideReset:h=!0,onResetToDefault:p}=e,g=(0,a.sO)(null),{iString:m}=(0,s.M1)();return(0,o.BX)(d.gq,{gap:16,children:[(0,o.tZ)(d.hs,{radius:"xs",height:40,width:40,bg:"secondary",alignItems:"center",justifyContent:"center",children:(0,o.tZ)(l.Z,{size:24,color:"var(--color-fg-tertiary)"})}),(0,o.BX)(d.tu,{gap:4,children:[(0,o.tZ)(c.xv.B4,{color:"primary",weight:"semibold",children:m("Upload audio file")}),(0,o.BX)(d.gq,{gap:16,children:[(0,o.tZ)(c.xv.B4,{color:"accent-themed",weight:"semibold",decoration:"underline",cursor:"pointer",onClick:()=>{g.current&&(g.current.click(),n(g.current))},children:m("Select file")}),!u&&(0,o.tZ)(c.xv.B4,{weight:"semibold",decoration:"underline",cursor:"pointer",color:"secondary",onClick:i,children:m("Record audio")}),!h&&(0,o.tZ)(c.xv.B4,{color:"secondary",weight:"semibold",decoration:"underline",cursor:"pointer",onClick:p,children:m("Reset audio to default")})]}),(0,o.tZ)("input",{style:{display:"none"},ref:g,type:"file",accept:t,onChange:e=>{null!=e.target&&r(e.target.files[0])}})]})]})};var h=n(27412),p=n(6400),g=n(94184),m=n.n(g),v=n(71375),A=n(87515),f=n(68833),C=n(15771),w=n(84864);let b={outerRing:"outerRing-LiaIRq",innerRing:"innerRing-LAXmu7",accentRing:"accentRing-fxo2aG",accentBackgroundRing:"accentBackgroundRing-muyYxM"};class k extends p.Component{async componentDidMount(){if(!await this.recorder.startMicrophone()){var e,t;null===(e=(t=this.props).onCancel)||void 0===e||e.call(t)}}componentWillUnmount(){this.onCloseClicked()}onRecorderStarted(){var e,t;null===(e=(t=this.props).onRecorderStarted)||void 0===e||e.call(t),this.onRecorderChanged(null)}onRecorderChanged(e){if(this.setState({recorderState:this.recorder.state,recorderDuration:this.recorder.duration,recorderVolume:this.recorder.volume}),e){var t,n;null===(t=(n=this.props).onComplete)||void 0===t||t.call(n,e)}}render(e,t){var n;let{iString:r}=e,{recorderState:i,recorderDuration:a,countDown:l}=t;return(0,o.BX)(d.gq,{flex:"grow",gap:16,alignItems:"center",justifyContent:"space-between",children:[i===A.Z.STATE.STOPPED&&(0,o.BX)(d.hs,{alignItems:"center",justifyContent:"center",gap:16,children:[(0,o.tZ)(d.hs,{radius:"full",className:m()(b.outerRing),border:"detail",onClick:this.onButtonClick,cursor:"pointer",children:(0,o.tZ)(d.hs,{className:m()(b.innerRing,b.accentRing,b.accentBackgroundRing),bg:"accent-red",radius:"full"})}),(0,o.tZ)(c.xv.B3,{color:"primary",weight:"semibold",children:null!==(n=null==r?void 0:r("Start recording"))&&void 0!==n?n:"Start recording"})]}),[A.Z.STATE.STARTED,A.Z.STATE.STARTING].includes(i)&&(0,o.BX)(d.hs,{alignItems:"center",justifyContent:"center",gap:16,children:[(0,o.tZ)(d.hs,{radius:"full",className:m()(b.outerRing,b.accentRing),border:"detail",onClick:this.onButtonClick,cursor:"pointer",children:(0,o.tZ)(d.hs,{className:m()(b.innerRing,b.accentRing,b.accentBackgroundRing),bg:"accent-red"})}),i===A.Z.STATE.STARTING&&(0,o.BX)(c.xv.B3,{color:"primary",weight:"semibold",children:[l,"..."]}),i===A.Z.STATE.STARTED&&(0,o.tZ)(c.xv.B3,{color:"primary",weight:"semibold",children:(0,w.secondsToHHMMSS)(null!=a?a:0)})]}),(0,o.tZ)(C.hU,{priority:"quaternary",onClick:this.onCloseClicked,children:(0,o.tZ)(v.Z,{size:20})})]})}constructor(e,t){super(e,t),(0,h._)(this,"recorder",void 0),(0,h._)(this,"onButtonClick",()=>{this.recorder.state===A.Z.STATE.STOPPED?((0,f.j)(f.FP.AUDIO_PRESS_RECORD_CLICKED,{feature:this.props.feature}),this.setState({countDown:3}),setTimeout(()=>this.setState({countDown:2}),700),setTimeout(()=>this.setState({countDown:1}),1400),this.recorder.start({startAt:Date.now()+2100})):(this.recorder.state===A.Z.STATE.STARTING||this.recorder.state===A.Z.STATE.STARTED)&&this.recorder.stop()}),(0,h._)(this,"onCloseClicked",()=>{if(this.recorder.state===A.Z.STATE.STARTED){var e,t;if(this.recorder.suspend(),!confirm("Your recording will be discarded, are you sure?")){this.recorder.resume();return}this.recorder.stop({dropRecording:!0}),null===(e=(t=this.props).onRecorderStopped)||void 0===e||e.call(t)}else this.recorder.state===A.Z.STATE.STARTING?this.recorder.onStarted=()=>this.recorder.stop({dropRecording:!0}):this.recorder.state===A.Z.STATE.STOPPED&&this.recorder.stopMicrophone();this.props.onCancel&&this.props.onCancel()}),this.recorder=new A.Z({onStarting:()=>this.onRecorderChanged(),onStarted:()=>this.onRecorderStarted(),onChunk:()=>this.onRecorderChanged(),onStopping:()=>this.onRecorderChanged(),onStopped:e=>this.onRecorderChanged(e)}),this.state={countDown:3,recorderState:this.recorder.state,recorderDuration:this.recorder.duration,recorderVolume:this.recorder.volume}}}(0,h._)(k,"contextType",s.wj);let y=(0,s.fz)(k);var Z=n(21903),E=n(21680);let B=e=>{var t;let{iString:n}=(0,s.M1)(),r=(null!==(t=e.percentComplete)&&void 0!==t?t:0)*100;return(0,o.BX)(d.gq,{gap:16,flex:"grow",children:[(0,o.tZ)(d.hs,{radius:"xs",height:40,width:40,bg:"secondary",alignItems:"center",justifyContent:"center",children:(0,o.tZ)(l.Z,{size:24,color:"var(--color-fg-tertiary)"})}),(0,o.BX)(d.tu,{flex:"grow",gap:4,children:[(0,o.BX)(d.gq,{justifyContent:"space-between",alignItems:"center",children:[(0,o.tZ)(c.xv.B4,{color:"primary",weight:"semibold",children:n("Upload audio file")}),(0,o.tZ)(d.gq,{cursor:"pointer",onClick:e.onCancel,children:(0,o.tZ)(v.Z,{size:20,color:"var(--color-fg-secondary)"})})]}),(0,o.BX)(d.gq,{flex:"grow",alignItems:"center",gap:32,children:[(0,o.tZ)(d.gq,{flex:"grow",radius:"full",bg:"tertiary",style:{height:"6px"},children:(0,o.tZ)(d.gq,{radius:"full",style:{width:"".concat(r,"%"),backgroundColor:"var(--color-fg-primary)"}})}),(0,o.tZ)(d.gq,{width:32,justifyContent:"end",children:(0,o.BX)(c.xv.Digit,{color:"primary",children:[r.toFixed(0),"%"]})})]})]})]})};class T extends Z.QM{trackUploadClicked(){(0,f.j)(f.FP.UPLOAD_EPISODE_AUDIO_CLICKED)}render(e,t){var n,a,l,s;let{onRecorderStarted:c,onRecorderStopped:h,feature:p,mediaUpload:g,removeUpload:m,hideRecorder:v,hideReset:A}=e,{preuploading:f,uploading:C,recording:w,percentComplete:b}=t,k=(null==g?void 0:g.state)==="uploaded",Z=!w&&(C||f),{iString:T}=this.i18n,I=null!==(l=null===(n=this.props.components)||void 0===n?void 0:n.AudioDecider)&&void 0!==l?l:u,S=null!==(s=null===(a=this.props.components)||void 0===a?void 0:a.AudioRecorder)&&void 0!==s?s:y;return(0,o.BX)(d.gq,{flex:"grow",border:"detail",radius:"sm",alignItems:"center",paddingY:16,paddingX:12,gap:8,children:[!w&&!Z&&!k&&(0,o.tZ)(I,(0,i._)((0,r._)({},this.props),{accept:this.accepts,onUploadClicked:this.onUploadClicked,onFileSelected:this.onFileSelected,onRecord:()=>this.setState({recording:!0}),hideRecorder:v,hideReset:A,onResetToDefault:this.props.onResetToDefault})),w&&(0,o.tZ)(S,{feature:p,onComplete:e=>{this.setState({recording:!1}),e&&this.uploadToS3(e),null==h||h()},onCancel:()=>{this.setState({recording:!1})},onRecorderStarted:c,onRecorderStopped:h}),Z&&(0,o.tZ)(B,{percentComplete:b,onCancel:()=>{if(confirm(T("Are you sure you want to cancel the upload?"))){var e,t;this.cancelUpload(),null===(e=(t=this.props).onUploadCanceled)||void 0===e||e.call(t)}}}),k&&(0,o.tZ)(E.O,{onCancel:m})]})}constructor(e,t){var n;super(e,t),this.state={recording:null!==(n=this.props.skipToRecordStep)&&void 0!==n&&n}}}},24763:function(e,t,n){n.d(t,{Z:()=>d});var r=n(16584),i=n(71375),o=n(16564),a=n(1055),l=n(15771);let s=e=>{let{isPlaying:t,togglePlayback:n}=e;return(0,r.tZ)("div",{className:"tw-relative tw-flex tw-h-10 tw-w-10 tw-shrink-0 tw-cursor-pointer tw-items-center tw-justify-center tw-rounded-full tw-border-2 tw-border-solid tw-border-pub-accent tw-transition-transform hover:tw-scale-105",onClick:n,role:"button",children:t?(0,r.BX)("div",{className:"tw-flex tw-h-4 tw-w-4 tw-justify-between",children:[(0,r.tZ)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"}),(0,r.tZ)("div",{className:"tw-h-full tw-w-1/3 tw-rounded-sm tw-bg-pub-accent"})]}):(0,r.tZ)(a.Z,{className:"tw-relative tw-left-[.1rem] tw-fill-pub-accent ",stroke:"none",height:16})})},d=e=>{let{currentTime:t,isPlaying:n,progress:a,progressBarRef:d,progressBarOnMouseDown:c,remainingTime:u,togglePlayback:h,onRemove:p}=e;return(0,r.BX)("div",{className:"auditionPlayer-OkcpWn",children:[(0,r.tZ)(s,{togglePlayback:h,isPlaying:n}),(0,r.tZ)(o.ko,{currentTime:t,remainingTime:u,containerRef:d,progress:a,onMouseDown:c,theme:o._g.PubAccent}),p&&(0,r.tZ)(l.hU,{size:"sm",priority:"quaternary","aria-label":"Cancel",onClick:p,children:(0,r.tZ)(i.Z,{size:16,"aria-hidden":!0})})]})}},87515:function(e,t,n){n.d(t,{Z:()=>o});var r=n(27412);class i{append(e){let t=this.mp3encoder.encodeBuffer(function(e){let t=e.length,n=new Int16Array(t);for(let r=0;r<t;r++)n[r]=Math.max(-32768,Math.min(32768,e[r]*(e[r]<0?32768:32767)));return n}(e));if(t.length>0)return this.chunks.push(t),t}flush(){if(this.chunks.length>0){let e=new Blob(this.chunks,{type:"audio/mp3"});return this.chunks=[],e}}constructor({channels:e=1,sampleRate:t=44100,bitRate:n=192}={}){(0,r._)(this,"mp3encoder",void 0),(0,r._)(this,"chunks",void 0);let{Mp3Encoder:i}=window.lamejs;this.mp3encoder=new i(e,t,n),this.chunks=[]}}class o{static get STATE(){return{STOPPED:"stopped",STARTING:"starting",STARTED:"started",STOPPING:"stopping"}}static isSupported(){return"undefined"!=typeof window&&!!window.navigator&&!!window.navigator.mediaDevices&&!!window.navigator.mediaDevices.getUserMedia&&(!!window.AudioContext||!!window.webkitAudioContext)&&!!window.Float32Array&&!!window.Blob&&!!window.URL&&!!window.Worker||!1}get duration(){var e;return(null===(e=this.startedAts)||void 0===e?void 0:e.length)?this.startedAts.reduce((e,t,n)=>{let r=this.endedAts[n];return r?e+(r-t):e+(Date.now()-t)},0)/1e3:null}get volume(){if(this.state!==o.STATE.STARTED||!this.analyser)return 0;let e=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteFrequencyData(e),Math.max(...e)/255}async startMicrophone(){if(!o.isSupported())return alert("Recording is not supported on this device."),!1;if(this.microphone)try{return await this.microphone,!0}catch(e){return!1}try{this.microphone=navigator.mediaDevices.getUserMedia({audio:!0}),this.microphone=await this.microphone,this.microphone.getTracks().forEach(e=>{e.addEventListener("ended",()=>{this.state===o.STATE.STARTED&&this.stop()})})}catch(e){console.error(e),this.microphone=null}return!!this.microphone||(alert("Unable to access the microphone! Please check your browser settings."),!1)}async stopMicrophone(){if(this.microphone){if(!this.microphone.getTracks)try{await this.microphone}catch(e){return}if(this.state===o.STATE.STARTED){await this.stop();return}this.microphone.getTracks().forEach(e=>e.stop()),this.microphone=null}}async start(){let{startAt:e=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o.isSupported())throw Error("Recording is not supported on this device");if(this.state===o.STATE.STOPPING)throw Error("Currently stopping last recording");if([o.STATE.STARTING,o.STATE.STARTED].includes(this.state))return;if(clearTimeout(this.startingTimeout),this.state=o.STATE.STARTING,this.onStarting&&this.onStarting(),!await this.startMicrophone()){this.state=o.STATE.STOPPED,this.onStopped&&this.onStopped();return}let t=window.AudioContext||window.webkitAudioContext;try{if(this.audioContext=new t({sampleRate:this.sampleRate}),this.mp3encoder=new i({sampleRate:this.audioContext.sampleRate}),this.analyser=this.audioContext.createAnalyser(),this.analyser.smoothingTimeConstant=.2,this.analyser.fftSize=1024,this.audioContext.createJavaScriptNode)this.audioNode=this.audioContext.createJavaScriptNode(this.bufferSize,1,1);else if(this.audioContext.createScriptProcessor)this.audioNode=this.audioContext.createScriptProcessor(this.bufferSize,1,1);else throw Error("Unable to construct audio node");this.audioInput=this.audioContext.createMediaStreamSource(this.microphone),this.audioInput.connect(this.analyser),this.analyser.connect(this.audioNode),this.audioNode.connect(this.audioContext.destination),this.startingTimeout=setTimeout(()=>{this.audioNode.addEventListener("audioprocess",e=>this.onAudioProcess(e)),this.state=o.STATE.STARTED,this.startedAts=[Date.now()],this.endedAts=[],this.onStarted&&this.onStarted()},e?Math.max(Math.max(Date.now(),+e)-Date.now(),0):2e3)}catch(e){this.state=o.STATE.STOPPED,this.onStopped&&this.onStopped(),console.error("Unable to access the microphone!",e),alert("Unable to setup microphone!")}}async stop(){let{dropRecording:e=!1,stopMicrophone:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o.isSupported())throw Error("Recording is not supported on this device");if([o.STATE.STOPPING,o.STATE.STOPPED].includes(this.state))return;if(this.state===o.STATE.STARTING)throw Error("Currently starting new recording");clearTimeout(this.startingTimeout),this.state=o.STATE.STOPPING,this.onStopping&&this.onStopping(),this.audioInput.disconnect(),this.analyser.disconnect(),this.audioNode.disconnect(),this.audioContext.close(),this.audioContext=null,this.analyser=null,this.audioNode=null,this.audioInput=null,t&&await this.stopMicrophone();let n=this.mp3encoder.flush();this.mp3encoder=null,this.state=o.STATE.STOPPED,this.endedAts.push(Date.now()),this.onStopped&&this.onStopped(e?null:n)}async suspend(){this.audioContext&&(this.endedAts.push(Date.now()),this.audioContext.suspend())}async resume(){this.audioContext&&(this.startedAts.push(Date.now()),this.audioContext.resume())}onAudioProcess(e){if(this.state===o.STATE.STARTED&&this.mp3encoder.append(e.inputBuffer.getChannelData(0))){var t;null===(t=this.onChunk)||void 0===t||t.call(this)}}constructor(e={}){(0,r._)(this,"bufferSize",void 0),(0,r._)(this,"sampleRate",void 0),(0,r._)(this,"state",void 0),(0,r._)(this,"analyser",void 0),(0,r._)(this,"microphone",void 0),(0,r._)(this,"startedAts",void 0),(0,r._)(this,"endedAts",void 0),(0,r._)(this,"startingTimeout",void 0),(0,r._)(this,"onStarting",void 0),(0,r._)(this,"onStarted",void 0),(0,r._)(this,"onStopped",void 0),(0,r._)(this,"onStopping",void 0),(0,r._)(this,"onChunk",void 0),(0,r._)(this,"audioContext",void 0),(0,r._)(this,"mp3encoder",void 0),(0,r._)(this,"audioNode",void 0),(0,r._)(this,"audioInput",void 0),this.bufferSize=4096,this.sampleRate=44100,this.state=o.STATE.STOPPED,Object.assign(this,e)}}},14017:function(e,t,n){n.d(t,{WB:()=>N,rN:()=>L});var r=n(7409),i=n(60826),o=n(70232),a=n(68833),l=n(84864),s=n(5835),d=n(44262),c=n(82032),u=n(71993),h=n(88954),p=n(13991),g=n(72270),m=n(40924),v=n(86725),A=n(87413),f=n(57639),C=n(29511),w=n(99975),b=n(23431),k=n(53797),y=n(8220),Z=n(44288),E=n(46393),B=n(79592),T=n(78483),I=n(84766),S=n(45913),_=n(32751);let x=[[f.N9,f.MQ,o.zF],[k.YT,k.vt,o.zF],[I.Pz,I.qK,l.TWEET_PLACEHOLDER_DATA_URI],[C.Dy,C.$p,l.TWEET_PLACEHOLDER_DATA_URI],[_.gp,_.o1,o.zF],[S.vR,S.Oy,o.zF],[B.qZ,B.W7,o.zF],[p.H6,p.yv,o.zF],[h.Z9,h.uL,o.zF],[u.aE,u.a7,l.TWEET_PLACEHOLDER_DATA_URI],[E.SH,E.kb,o.zF],[d.XC,d.bo,o.zF],[w.lA,w.aI,o.zF],[A.S,A.un,o.zF],[m.Ng,m.O5,o.zF],[v.t3,v.mt,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjAAAAEyCAYAAADk0er5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAooSURBVHgB7d1rbhvXGcfhw6slUYyFBHZiAwnsFcTdQZENpDtpV9A02UCbnTQraHeQ7EAGAsQ2bBiyJVIX3spDwIVhIICRD+L8Z54HoCiL+kKLHP34Ho5Or3zg119//fP26i/9fv/b7fWjAgCwH7/Uy7ZJvn/w4MHT92/ovfvk9PT05M6dO99tP/3b8fFxOTw8LMPhsAAA7MNisdhdzs/Py3q9/uf19fUPjx8/Pqu37QKmxst4PP7P0dHRk7t375Zer1cAAJpgGy+7iJnNZj/f3Nx8UyOmX2+ok5fJZPLk5OREvAAAjbJdQip1wLJdHfrTtln+Xr/We/bs2aNttJzev39fvAAAjVUnMS9evNisVqtv+tsP/5hOp+IFAGi0Ook5Pj6uwfJtfxsuX4/H4wIA0HRHR0c1ZL6t74F54mwjACDBYDCoV4/6BQAgjIABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIIGAAgjoABAOIMC9Ap6/W6XFxclOVyWTabTUk3Ho/LZDIp/b7XY9AlnvHQITVezs7OymKxaEW8VDc3N7v7VO8b0B0CBjpkNpu1JlzeV+9TnSoB3SFgoEPqtKKt6pIY0B0CBmiFNk6WgN8nYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGAIgjYACAOAIGOqTX6xWANhAw0CGDwaC01Xg8LkB3CBjokOl02sopTL1Pk8mkAN0hYKBD+v1+OTk5ac20oobLcDjc3ad634DuGBagU+ov+jqJAUjmJQsAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEEfAAABxBAwAEGdYoKGurq7KmzdvymKxKOv1ugC3o9/vl9FoVI6Pj8tkMinQRAKGxqmx8vLly3J9fV2A21efg/X5Vy8XFxfls88+K8OhXxc0iyUkGqUeOJ8/fy5eoCHqc/HVq1emoDSOgKFR6pLRcrksQHPc3NyU8/PzAk0iYGiMGi4OktBM9blpCkOTCBgao75ZF2imGi+Xl5cFmkLA0Bh1TA00l+VdmkTAAABxBAyN4TRNaLb6t2GgKQQMjXF4eFh6vV4Bmmk8HhdoCgFDY9S//vnJJ58UoHmm06kpKY0iYGiUepA0poZmqeFy9+7dAk0iYGiUOoW5d+9eOTg4KMD+3blzp3zxxRe75yY0iXkgjVNf7d2/f3+3B8t8Pt+dXu0PaMHtebeZY526eDFBUwkYGqvuhFsvAPAhM0EAII6AAQDiCBgAII6AAQDiCBgAII6AAQDiCBgAII6AAQDiCBgAII6AAQDiCBgAII69kOicq6urcnl5aYNIWqFuvHh4eGjTRTpHwNApdXfrGi/QFjXEZ7NZWa1WZTKZFOgKS0h0Rj3Aixfaqk4WF4tFga4QMHTG9fV1gTZbLpcFukLA0Bn1vQLQZpvNpkBXOKLTGYPBoECbjcfjAl0hYOiM0WjkTA1aqz62h0PnZdAdHu10Sj1Lo05inEZNW9Sl0Rov9VRq6BIBQ+fUg71JDEA2S0gAQBwBAwDEETAAQBwBAwDEETAAQBwBAwDEETAAQBwBAwDEETAAQBwBAwDEETAAQBx7IdE5V1dXNnOkNepmjnUjR/t70TUChk6Zz+e7eIG2qCE+m83KarXa7bYOXWEJic6oB3jxQlvVyeJisSjQFQKGzri+vi7QZsvlskBXCBg6o75XANpss9kU6ApHdDpjMBgUaLPxeFygKwQMnTEajZypQWvVx/Zw6LwMusOjnU6pZ2nUSYzTqGmLujRa46WeSg1dImDonHqwN4kByGYJCQCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCII2AAgDgCBgCIMyzsxdXVVTk/Py8AH2s+n+8uNMPR0VF5+PBhGY1GhdsnYPZgsVjsDkL37t0rAB/r5cuXAqZB6s/i9PS0fPXVV+Xg4KBwuywh7UE9CH366acFgGyr1aq8ePGicPsEzB4YNwK0h6nYfggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4ggYACCOgAEA4giYPViv1wUA+OMEzB70+/7bAdri6OiocPv8Jt2D6XRaXr9+XQDIVl+QPnz4sHD7hoVbd3BwUAaDQfntt9921yYywMeYz+eFZqjH7Xos//zzz8toNCrcPgGzJ/UBr9oB4I/x0h8AiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4AgYAiCNgAIA4NWCerlarAgDQdIvFol790l+v1z/N5/MCANB0/w+Y7Yd/z2azstlsCgBAU9VWOT8/3/T7/R/6X3755X+Xy+W/zs7OCgBAU719+3azncD8+ODBg6e7N/FuA+b7y8vLn9+8eWMSAwA0Sm2T7aBls10x+rk2S/1a792Np6enJ8Ph8LvRaPTX6XTa216XegEA2IdtrJTtgKVcXFxsVqvVjzVeHj9+vFsy6n34zc+ePXu0/abver3e19t/PikAAPvxtJ5stL3+qb7l5f0b/gfSCexetgOUpQAAAABJRU5ErkJggg=="],[s.uF,s.ph,o.zF],[b.CA,b.Ee,o.zF],[g.vb,g.HL,o.zF],[y.Yi,y.pR,o.zF],[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t[0];return r?(0,Z.Gd)(r):null},Z.sv,o.zF],[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t[0];return r?(0,T.od)(r):null},T.Ml,o.zF],[function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t[0];return r?(0,c.q7)(r):null},c.IS,o.zF],[e=>e===i.W.FIRST_NOTE_EMBED,u.Gq,l.TWEET_PLACEHOLDER_DATA_URI]],N=(e,t,n)=>{if(t.nodes.augmentation_placeholder)for(let[i,,o]of x){let a=i(e,(0,r._)({customSchema:t},n));if(a){let e=t.nodes.augmentation_placeholder.create({request_id:(0,l.randomString)(),url:a,src:o});return[a,e]}}return[null,null]},L=async(e,t,n,i)=>{let o,l;let{request_id:s,url:d}=e.attrs;try{for(let[t,l]of x)if(t(e.attrs.url,(0,r._)({customSchema:n},i))&&((0,a.j)(a.FP.EMBED_URL_ATTEMPTED,{url:d,source:"paste"}),o=await l(d,{customSchema:n}),(0,a.j)(a.FP.EMBED_URL_SUCCEEDED,{url:d,source:"paste"}),o))break}catch(t){(0,a.j)(a.FP.EMBED_URL_FAILED,{url:d,source:"paste"}),console.error("Failed to process augmentation placeholder:",e.attrs,t),400<=t.status&&t.status<600&&(l=t)}if(l){let r=(0,I.Pz)(e.attrs.url);if(setTimeout(()=>{M(s,t,n,(e,t,i)=>{r&&n.marks.link&&e.replaceRangeWith(t,t+i.nodeSize,n.text(i.attrs.url,[n.marks.link.create({title:i.attrs.url,href:i.attrs.url})])),e.delete(t,t+i.nodeSize)})},0),!r)throw l}else o?setTimeout(()=>{M(s,t,n,(e,t,n)=>{o&&e.setNodeMarkup(t,o.type,o.attrs,n.marks)})},0):setTimeout(()=>{M(s,t,n,(e,t,r)=>{e.replaceRangeWith(t,t+r.nodeSize,n.text(r.attrs.url))})},0)},M=(e,t,n,r)=>{let i=!1,o=t.state.tr;return t.state.doc.descendants((t,a)=>{t.type===n.nodes.augmentation_placeholder&&t.attrs.request_id===e&&!1!==r(o,a,t)&&(i=!0)}),i&&t.dispatch(o),i}},26805:function(e,t,n){n.d(t,{Z:()=>h});var r=n(16584),i=n(6400),o=n(92007),a=n(45901),l=n(1148),s=n(61301);let d=new o.H$("substack-placeholder");class c extends o.Sy{add(e,t,n){t=t||e.state.selection.from,n=n||s.Vk;let r={},i=e.state.tr;return i.setMeta(u,{add:{id:r,pos:t,url:n}}),e.dispatch(i),r}addFile(e,t,n){let{name:r,type:i}=n;t=t||e.state.selection.from;let o={},a=e.state.tr;return a.setMeta(u,{addFile:{id:o,pos:t,name:r,type:i}}),e.dispatch(a),o}remove(e,t){let n=u.getState(e.state).find(null,null,e=>e.id==t);if(n.length){let r=n[0].from,i=e.state.tr;return i.setMeta(u,{remove:{id:t}}),e.dispatch(i),r}return null}replace(e,t,n){let r=this.remove(e,t);return null!==r&&(e.dispatch(e.state.tr.insert(r-1,n)),!0)}}let u=new c({state:{init:()=>a.EH.empty,apply(e,t){t=t.map(e.mapping,e.doc);let n=e.getMeta(d);if(n&&n.add){let r=document.createElement("a");r.className="image-link placeholder",r.href="javascript:void(0)";let i=document.createElement("img");i.src=n.add.url,r.appendChild(i),r.ondrop=r.ondragstart=r.onmousedown=()=>!1;let o=a.p.widget(n.add.pos,r,{id:n.add.id});t=t.add(e.doc,[o])}else if(n&&n.addFile){let{name:o,type:s}=n.addFile,d=document.createElement("div");(0,i.render)((0,r.tZ)(l.H,{filename:o,filetype:s}),d);let c=a.p.widget(n.addFile.pos,d,{id:n.addFile.id});t=t.add(e.doc,[c])}else n&&n.remove&&(t=t.remove(t.find(void 0,void 0,e=>e.id==n.remove.id)));return t}},key:d,props:{decorations(e){return this.getState(e)}}}),h=u},11239:function(e,t,n){n.d(t,{aL:()=>d,jy:()=>o});let r=e=>{var t;let n=document.createElement("div");return n.innerHTML=e,{dom:null!==(t=n.querySelector("svg"))&&void 0!==t?t:document.createElement("div")}},i=(e,t)=>{if(!("dom"in e)||!e.dom)return{dom:document.createElement("div")};let n=document.createElement("div");n.className="dropdown-item-container";let r=document.createElement("span");r.innerText=t;let i=document.createElement("div");return i.className="dropdown-item-svg",i.appendChild(e.dom),n.appendChild(i),n.appendChild(r),{dom:n}};r('\n<svg class="editor-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M7.33334 4L3.33334 8L7.33334 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M11.3333 19H15.8182C17.2809 19 18.6837 18.4205 19.718 17.3891C20.7523 16.3576 21.3333 14.9587 21.3333 13.5C21.3333 12.0413 20.7523 10.6424 19.718 9.61091C18.6837 8.57946 17.2809 8 15.8182 8H4.33334" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg class="editor-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M17.3334 4L21.3334 8L17.3334 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.3334 19H8.84853C7.38582 19 5.98302 18.4205 4.94873 17.3891C3.91443 16.3576 3.33337 14.9587 3.33337 13.5C3.33337 12.0413 3.91443 10.6424 4.94873 9.61091C5.98302 8.57946 7.38582 8 8.84853 8H20.3334" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M6.80005 5.60059H13.2C14.0487 5.60059 14.8627 5.93773 15.4628 6.53784C16.0629 7.13796 16.4 7.95189 16.4 8.80059C16.4 9.64928 16.0629 10.4632 15.4628 11.0633C14.8627 11.6634 14.0487 12.0006 13.2 12.0006H6.80005V5.60059Z" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M6.80005 12H14C14.8487 12 15.6627 12.3371 16.2628 12.9373C16.8629 13.5374 17.2 14.3513 17.2 15.2C17.2 16.0487 16.8629 16.8626 16.2628 17.4627C15.6627 18.0629 14.8487 18.4 14 18.4H6.80005V12Z" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n<path d="M17.2671 6.10059H10.0671" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.2659 18.8994H6.06592" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14.0666 6.10059L9.2666 18.9006" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path fill="none" d="M14.866 5.60059H9.266C8.88195 5.60038 8.50345 5.69236 8.1623 5.86878C7.82116 6.04519 7.52734 6.30091 7.30552 6.61443C7.0837 6.92796 6.94036 7.29014 6.88755 7.67055C6.83473 8.05096 6.87399 8.43849 7.00201 8.80059" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M13.2667 12C14.1154 12 14.9293 12.3371 15.5294 12.9373C16.1296 13.5374 16.4667 14.3513 16.4667 15.2C16.4667 16.0487 16.1296 16.8626 15.5294 17.4627C14.9293 18.0629 14.1154 18.4 13.2667 18.4H6.8667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M4.1665 12L19.1665 12" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<path d="M17.6667 16.5L21.6667 12.5L17.6667 8.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.66675 8.5L1.66675 12.5L5.66675 16.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M14.1667 4.5L9.16675 20.5" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n');let o=r('\n<svg class="link-item" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)" fill="none">\n<g clip-path="url(#clip1)">\n<path d="M10.0671 13.3006C10.4107 13.7599 10.849 14.1399 11.3524 14.4149C11.8557 14.6899 12.4123 14.8535 12.9845 14.8944C13.5566 14.9354 14.1308 14.8529 14.6682 14.6524C15.2056 14.4519 15.6936 14.1382 16.0991 13.7326L18.4991 11.3326C19.2278 10.5781 19.6309 9.56774 19.6218 8.51895C19.6127 7.47017 19.192 6.46692 18.4504 5.72528C17.7088 4.98365 16.7055 4.56298 15.6567 4.55386C14.608 4.54475 13.5975 4.94793 12.8431 5.67656L11.4671 7.04456" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.2677 11.7008C12.9242 11.2415 12.4859 10.8614 11.9825 10.5864C11.4791 10.3114 10.9225 10.1479 10.3504 10.1069C9.7783 10.0659 9.20407 10.1485 8.66666 10.3489C8.12925 10.5494 7.64125 10.8631 7.23574 11.2688L4.83574 13.6688C4.10711 14.4232 3.70393 15.4336 3.71304 16.4824C3.72216 17.5312 4.14283 18.5344 4.88446 19.276C5.6261 20.0177 6.62935 20.4383 7.67813 20.4475C8.72692 20.4566 9.73733 20.0534 10.4917 19.3248L11.8597 17.9568" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</g>\n');r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g clip-path="url(#clip0)">\n<path d="M7.66675 6.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M7.66675 12.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M7.66675 18.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 6.5H2.67633" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 12.5H2.67633" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2.66675 18.5H2.67633" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g fill="none">\n<path d="M9.66675 6.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9.66675 12.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9.66675 18.5H20.6667" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3.66675 6.5H4.66675V10.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3.66675 10.5H5.66675" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.66675 18.4999H3.66675C3.66675 17.4999 5.66675 16.4999 5.66675 15.4999C5.66675 14.4999 4.66675 13.9999 3.66675 14.4999" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n');let a=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M5 15.5L5 18.5C5 19.0304 5.21071 19.5391 5.58579 19.9142C5.96086 20.2893 6.46957 20.5 7 20.5L18 20.5C18.5304 20.5 19.0391 20.2893 19.4142 19.9142C19.7893 19.5391 20 19.0304 20 18.5L20 7.5C20 6.96957 19.7893 6.46086 19.4142 6.08579C19.0391 5.71071 18.5304 5.5 18 5.5L16 5.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M9.5 10.5L12.5 7.5L9.5 4.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M5.5 4.5L2.5 7.5L5.5 10.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),l=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M14.7143 15C14.7143 14.4696 14.9401 13.9609 15.3419 13.5858C15.7438 13.2107 16.2888 13 16.8571 13C17.4255 13 17.9705 13.2107 18.3724 13.5858C18.7742 13.9609 19 14.4696 19 15C19 15.5304 18.7742 16.0391 18.3724 16.4142C17.9705 16.7893 17.4255 17 16.8571 17C16.2888 17 15.7438 16.7893 15.3419 16.4142C14.9401 16.0391 14.7143 15.5304 14.7143 15ZM14.7143 15L16.8571 7M5.5 15C5.5 14.4696 5.72577 13.9609 6.12763 13.5858C6.52949 13.2107 7.07454 13 7.64286 13C8.21118 13 8.75622 13.2107 9.15809 13.5858C9.55995 13.9609 9.78571 14.4696 9.78571 15C9.78571 15.5304 9.55995 16.0391 9.15809 16.4142C8.75622 16.7893 8.21118 17 7.64286 17C7.07454 17 6.52949 16.7893 6.12763 16.4142C5.72577 16.0391 5.5 15.5304 5.5 15ZM5.5 15L7.64286 7" stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="8" cy="15" r="1"stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="17" cy="15" r="1"stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="7.5" cy="15.5" r="0.5"stroke-linecap="round" stroke-linejoin="round"/>\n<circle cx="16.5" cy="15.5" r="0.5"stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n');r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M6.66699 8L2.66699 12L6.66699 16" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22 6H11" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22 12L16 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M22 18H11" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M2.66699 8L6.66699 12L2.66699 16" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21 12L15 12" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21 6H10" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21 18H10" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n');let s=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g fill="none" clip-path="url(#clip0_6402:84637)">\n<path d="M5.74356 7.80138L1.55483 19.3174" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M5.74212 7.80082L9.92942 19.3177" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13.0703 7.80493V19.3212" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M8.35986 16.1787H3.12519" stroke-linecap="round" stroke-linejoin="round"/>\n<ellipse cx="15.9501" cy="15.6565" rx="2.87907" ry="3.66427" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21.4465 5L21.4465 10.9463" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M21.4465 5L19.3528 6.23506" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),d=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill="none" d="M19 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H19C20.1046 21 21 20.1046 21 19V5C21 3.89543 20.1046 3 19 3Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M8.5 10C9.32843 10 10 9.32843 10 8.5C10 7.67157 9.32843 7 8.5 7C7.67157 7 7 7.67157 7 8.5C7 9.32843 7.67157 10 8.5 10Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path fill="none" d="M21 15L16 10L5 21" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),c=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M3 13H21" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),u=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 1V23" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H12" fill="none" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M6 19H14.5C15.4283 19 16.3185 18.6313 16.9749 17.9749C17.6313 17.3185 18 16.4283 18 15.5C18 14.5717 17.6313 13.6815 16.9749 13.0251C16.3185 12.3687 15.4283 12 14.5 12H12" fill="none" stroke-linecap="round" stroke-linejoin="round"/>\n</g>\n</svg>\n'),h=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M18 9L18 6C18 5.46957 17.7893 4.96086 17.4142 4.58579C17.0391 4.21072 16.5304 4 16 4L5 4C4.46957 4 3.96086 4.21071 3.58579 4.58579C3.21071 4.96086 3 5.46957 3 6L3 13C3 13.5304 3.21071 14.0391 3.58578 14.4142C3.96086 14.7893 4.46957 15 5 15L7 15" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M9.03906 9.35059L14.0391 21.3506L15.8131 16.1246L21.0391 14.3506L9.03906 9.35059Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M16.1104 16.4214L20.3534 20.6644" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n'),p=r('\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M19 12L12 5L15 2L22 9L19 12Z" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13 6L5.5 7.5L2 22L16.5 18.5L18 11L13 6Z"stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M2 22L9.586 14.414" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M13 13C13 11.8954 12.1046 11 11 11C9.89543 11 9 11.8954 9 13C9 14.1046 9.89543 15 11 15C12.1046 15 13 14.1046 13 13Z" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n');i(h,"Buttons..."),i(a,"Code block"),i(s,"Footnote"),i(c,"Divider"),i(u,"Paywall"),i(p,"Poetry block"),i(l,"Pullquote")},83857:function(e,t,n){n.d(t,{d:()=>I});var r=n(7409),i=n(99282),o=n(58865),a=n(92007),l=n(39693),s=n.n(l),d=n(23279),c=n.n(d),u=n(26805),h=n(11239),p=n(44369),g=n(70232),m=n(68833),v=n(98914),A=n(82167),f=n(40924),C=n(86725),w=n(53797),b=n(68303);function k(){let e=(0,o._)(["Link ","K"]);return k=function(){return e},e}function y(){let e=(0,o._)(["There’s a fancier way to share Substack links with your readers:"]);return y=function(){return e},e}function Z(){let e=(0,o._)(["Convert your link into an embed"]);return Z=function(){return e},e}let E=new Set,B=c()((e,t,n)=>{let r=t.trim();(0,C.l6)(r).then(i=>{i&&(E.add(r),t===e.target.value&&n.classList.add("has-substack-link"))})},250,{maxWait:1e3});function T(e,t){if("target"in e&&e.target&&"className"in e.target&&"url-input"===e.target.className&&"value"in e.target){let{value:n}=e.target,r=n.trim();if(E.has(r)||(0,f.Ng)(r)||(0,A.lQ)(r)){t.classList.add("has-substack-link");return}if((0,w.zb)(r)){t.classList.add("has-opensea-link");return}(0,C.t3)(r)&&B(e,n,t),t.classList.remove("has-substack-link"),t.classList.remove("has-opensea-link")}}function I(e){let{scrollParent:t,publication:n,language:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{iString:l,iTemplate:d}=I18N.i(null!=o?o:"en"),c=d(k(),(0,v.Mi)());return new p.$4({class:"mark-menu-item",title:c,icon:h.jy,active(t){let n=[];return t.schema.nodes.image2?n.push(t.schema.nodes.image2):console.warn("image2 node type not found in schema"),t.schema.nodes.image3?n.push(t.schema.nodes.image3):console.warn("image3 node type not found in schema"),!!((0,b.gR)(t,n)?(0,b.do)(t):(0,b.k)(t,e))||(0,p.vM)(t,e)},enable:()=>!0,run(h,k,B){let I,S,_,x;let N=(0,b.k)(h,e);N?(I=N.pos,S=N,_=(0,b.qe)(h,N.pos.from,N.pos.to,{allowedMarks:[e]}),x=N.node.textContent):(I=h.selection,S=(0,b.Dg)(h,e),_=(0,b.S7)(h,{allowedMarks:[e]}),x=h.doc.textBetween(h.selection.from,h.selection.to));let L=(0,b.gR)(h,s()([h.schema.nodes.captionedImage,h.schema.nodes.image2,h.schema.nodes.image3,h.schema.nodes.caption]).filter(Boolean)),M=L?(0,b.do)(h):null;_=_&&!L;let P=B.dom.parentNode,O={className:"create-link-menu",submitText:l("Link"),parent:c,title:l("Create a link"),fields:{},root:P,scrollParent:t,position:(e,t)=>(0,b.$_)(B,I,e,t),onInput:T,language:o};_&&O.fields&&(O.fields.text=new p.nv({label:l("Enter text…"),className:"text-input",value:x,required:!0})),O.fields&&(O.fields.href=new p.Sm(S,M,o)),O.onSubmit=t=>{let n=h.tr;if(L)(0,b.Wi)(h,n,t.href);else if(h.selection.empty&&!N){let r=h.selection.from,i=r+t.text.length;n.insertText(t.text),n.addMark(r,i,e.create(t)),n.setSelection(a.Bs.create(n.doc,r,i))}else t.text&&t.text!==x?(n.insertText(t.text,I.from),n.setSelection(a.Bs.create(n.doc,I.from,I.from+t.text.length)),n.deleteRange(I.from+t.text.length,I.to+t.text.length),n.addMark(I.from,I.from+t.text.length,e.create(t))):n.addMark(I.from,I.to,e.create(t));if(k)return B.dispatch(n),!0},O.onClose=()=>{B.focus()};let D=async e=>{let t;e.preventDefault();let o=document.querySelector(".create-link-menu .url-input");if(!o){console.warn("could not find input for creating link menu selecting for ['.create-link-menu .url-input']");return}let a=o.value.trim();(0,p.pA)(O);let s=u.Z.add(B,I.pos,g.zF);try{if((0,m.j)(m.FP.EMBED_URL_ATTEMPTED,{url:a,source:"link-menu"}),(0,w.zb)(a))t=await (0,w.vt)(a,{customSchema:B.state.schema});else if(E.has(a))t=await (0,C.mt)(a);else if((0,A.lQ)(a)&&B.state.schema.nodes.digestPostEmbed)try{let e=await (0,A.wM)(a);t=B.state.schema.nodes.digestPostEmbed.create((0,i._)((0,r._)({},e),{isEditorNode:!0,nodeId:(0,v.EH)()}))}catch(e){console.error(e),alert(l("Failed to find post. Please check the link and try again."))}else t=await (0,f.O5)(a,{customSchema:B.state.schema,language:null==n?void 0:n.language});if((0,m.j)(m.FP.EMBED_URL_SUCCEEDED,{url:a,source:"link-menu"}),t)u.Z.replace(B,s,t);else throw u.Z.remove(B,s),Error("No embed found")}catch(e){(0,m.j)(m.FP.EMBED_URL_FAILED,{url:a,source:"link-menu"}),alert(l("Embed failed. Please check the url and try again."))}},j=document.createElement("div");j.className="create-link-menu-footer";let R=new DocumentFragment;R.append(document.createTextNode(d(y())));let U=document.createElement("a");U.innerText=d(Z()),U.href="#",U.addEventListener("click",D),R.append(U),j.append(R),O.footer=j;let H=document.createElement("div");H.className="opensea-embed-footer";let X=new DocumentFragment,z=document.createElement("b");z.textContent="Tip: ",X.append(z),X.append(document.createTextNode("You can also "));let W=document.createElement("a");W.innerText="embed your OpenSea NFT",W.href="#",W.addEventListener("click",D),X.append(W),X.append(document.createTextNode(" to give your readers a visual preview.")),H.append(X),O.openseaEmbedFooter=H,(0,p.cS)(O)}},"link")}},57796:function(e,t,n){n.d(t,{d:()=>T});var r=n(16584),i=n(30396),o=n(31131),a=n(666),l=n(50137),s=n(1467),d=n(347),c=n(92291),u=n(77338),h=n(5952),p=n(6246),g=n(25991),m=n(16451),v=n(76721),A=n(48980),f=n(7882),C=n(98750),w=n(19081),b=n(58175),k=n(55722),y=n(15503),Z=n(65575),E=n(63651);let B="note-Biuyq7";function T(e){let{commentId:t}=e,{isLoading:n,error:i,result:o}=(0,f.ib)({pathname:"/api/v1/reader/comment/".concat(t),auto:!0,deps:[t]});return i instanceof A.kp?(0,r.tZ)(r.HY,{children:i.getMessage()}):!o||n?(0,r.tZ)(_,{}):(0,r.tZ)(I,{feedItem:o.item})}function I(e){var t,n,p,A,f;let{feedItem:Z}=e,{comment:T,parentComments:I}=Z,{truncatedBodyJson:_,isTruncated:x}=(0,v.Z)(T),N=I[I.length-1],L=null===(t=T.attachments)||void 0===t?void 0:t.find(e=>"image"!==e.type),M=null===(n=T.attachments)||void 0===n?void 0:n.filter(e=>"image"===e.type),P=(0,i.sO)(null);return(0,C.UM)(P,()=>(0,y.zi)(Z,"post-embed",{extraEventProps:{isTruncated:x}}),{threshold:.2}),(0,r.tZ)(w.tu,{justifyContent:"center",alignItems:"center",paddingX:20,className:"container-g1JaM7",children:(0,r.tZ)(d.h,{children:(0,r.BX)(w.hs,{as:"a",target:"_blank",href:(0,E.Sgq)(T),gap:12,border:"detail",bg:"primary",radius:"md",padding:{mobile:16,desktop:20},style:{textDecoration:"none",width:"560px",maxWidth:"100%"},className:B,ref:P,children:[(0,r.tZ)(w.hs,{flex:"auto",children:(0,r.tZ)(m.Zb,{user:T})}),(0,r.BX)(w.tu,{minWidth:0,gap:8,flex:"grow",children:[(0,r.BX)(w.tu,{minWidth:0,flex:"grow",children:[(0,r.BX)(g.KF,{children:[(0,r.tZ)(b.xv,{color:"primary",as:"span",weight:"semibold",children:T.name}),(0,r.tZ)(k.o,{tier:T.user_bestseller_tier}),(0,r.tZ)(m.Ku,{timestamp:T.date})]}),N&&(0,r.BX)(b.xv.B5,{color:"secondary",children:["Replying to ",N.name]}),(0,r.BX)(w.tu,{gap:12,flex:"grow",children:[(0,r.tZ)(m.sP,{children:_&&(0,r.tZ)(u.x,{content:_,attachedLinks:(0,h.Bk)(T)})}),(0,r.tZ)(c.yd,{attachments:L?[L]:M||[],readOnly:!0,onAttachmentClick:function(){let{commentId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,y.rw)(Z,"post-embed","attachment",{extraEventProps:{commentId:e}})},item:Z,utm_content:Z.entity_key})]})]}),(0,r.BX)(w.hs,{justifyContent:"space-between",alignItems:"center",children:[(0,r.tZ)(S,{icon:(0,r.tZ)(a.Z,{height:16,fill:"none",strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!==(p=T.reaction_count)&&void 0!==p?p:0}),(0,r.tZ)(S,{icon:(0,r.tZ)(s.Z,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!==(A=T.children_count)&&void 0!==A?A:0}),(0,r.tZ)(S,{icon:(0,r.tZ)(l.Z,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:null!==(f=T.restacks)&&void 0!==f?f:0}),(0,r.tZ)(S,{icon:(0,r.tZ)(o.Z,{height:16,strokeWidth:2.5,stroke:"var(--color-fg-secondary)"}),count:0})]})]})]})})})}function S(e){let{icon:t,count:n}=e;return(0,r.BX)(w.hs,{gap:8,paddingTop:6,flex:"grow",alignItems:"center",children:[t,(0,r.tZ)(b.xv.Digit,{color:"secondary",children:n>0&&(0,p.u)(n)})]})}function _(){return(0,r.tZ)(d.h,{children:(0,r.tZ)(w.tu,{justifyContent:"center",alignItems:"center",paddingX:20,style:{margin:"20px 0"},"data-component-name":"CommentViewPlaceholder",children:(0,r.BX)(w.hs,{gap:12,border:"detail",bg:"primary",radius:"md",padding:{mobile:16,desktop:20},style:{textDecoration:"none",width:"560px",maxWidth:"100%"},flex:"grow",className:B,children:[(0,r.tZ)(Z.Vm,{type:"circle",size:48}),(0,r.BX)(w.tu,{gap:12,flex:"grow",children:[(0,r.tZ)(Z.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,r.tZ)(Z.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,r.tZ)(Z.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")}),(0,r.tZ)(Z.Vm,{height:16,width:"".concat(80*Math.random()+20,"%")})]})]})})})}},8072:function(e,t,n){n.d(t,{C:()=>a});var r=n(16584),i=n(55679),o=n(89716);let a=e=>{let{node:t,editable:n,staticData:a}=e;return(0,r.tZ)(i.T5,{children:(0,r.tZ)(o.k,{node:t,editable:n,staticData:a})})}},81355:function(e,t,n){n.d(t,{e:()=>o});var r=n(16584);n(30396);var i=n(52720);let o=e=>{let{children:t}=e;return(0,r.tZ)(i.Z,{version:3,config:{loader:{load:["ui/safe"]}},children:t})}},93903:function(e,t,n){n.d(t,{Z:()=>r});function r(e){return(e||"").replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))}},71106:function(e,t,n){n.d(t,{A:()=>d});var r=n(60826),i=n(19834),o=n(60308),a=n(63651),l=n(84864),s=n(47929);function d(e,t){var n,d;let{pub:c,post:u,user:h}=t,p=e=>RegExp(e,"g"),g=e;return u&&h&&(g=g.replace(p(r.W.COMMENTS_URL),(0,o.tk4)(c,u)).replace(p(r.W.HALF_MAGIC_COMMENTS_URL),(0,o.tk4)(c,u))),g.replace(p(r.W.CHECKOUT_URL),(0,l.escapeNewlines)((0,o.Zs0)(c))).replace(p(r.W.FOUNDING_CHECKOUT_URL),(0,l.escapeNewlines)((0,o.pqm)(c))).replace(p(r.W.ACCOUNT_URL),(0,l.escapeNewlines)((0,a.mGw)(c,{addBase:!0}))).replace(p(r.W.ARCHIVE_URL),(0,l.escapeNewlines)((0,o.nxG)(c,{addBase:!0,params:null}))).replace(p(r.W.PUBLICATION_NAME),(0,l.escapeNewlines)((0,i.Z)(c.name||""))).replace(p(r.W.PUBLICATION_HERO_TEXT),(0,l.escapeNewlines)((0,i.Z)(c.hero_text||""))).replace(p(r.W.AUTHOR_NAME),(0,l.escapeNewlines)((0,i.Z)(c.author_name||""))).replace(p(r.W.AUTHOR_FIRST_NAME),(0,l.escapeNewlines)((0,i.Z)((0,l.guessFirstName)(c.author_name)||""))).replace(p(r.W.AUTHOR_BIO),(0,l.escapeNewlines)((0,i.Z)(c.author_bio||""))).replace(p(r.W.SHARE_URL),"").replace(p(r.W.SHARE_PUB_URL),(0,o.a_F)(c)).replace(p(r.W.PODCAST_SETUP_URL),(0,o.tS3)(c,{addBase:!0,noSection:!0,params:null,section:null,user:null,startAtSubscribeFlow:!1})).replace(p(r.W.PERSONAL_PODCAST_SETUP_URL),(0,o.tS3)(c,{addBase:!0,noSection:!0,params:null,section:null,user:null,startAtSubscribeFlow:!1})).replace(p(r.W.ALL_PODCASTS_SETUP_URL),(0,o.Tk$)(c,{startAtSubscribeFlow:!0,utm_source:s.b3.allPodcastsSetupButton})).replace(p(r.W.HOME_LINK),(0,a.SVA)(c)).replace(p(r.W.THREAD_URL),(0,a.ZVW)({pubKey:c.subdomain})).replace(p(r.W.CHAT_URL),(0,a.ZVW)({pubKey:c.subdomain})).replace(p(r.W.PREACT_COMPAT_HTML_COMMENT_OPEN),"\x3c!--").replace(p(r.W.PREACT_COMPAT_HTML_COMMENT_CLOSE),"--\x3e").replace(p(r.W.DASHBOARD_URL),(0,a.QK7)(c,{addBase:!0})).replace(p(r.W.AUTHOR_PHOTO_URL),c.author_photo_url||"").replace(p(r.W.MEETINGS_URL),(0,a.szv)(c,{addBase:!0})||"").replace(p(r.W.PUBLICATION_URL),(0,a.SVA)(c)).replace(p(r.W.LEADERBOARD_URL),(0,a.j8T)(c,void 0,{addBase:!0})).replace(p(r.W.ACTIVITY_PAGE_URL),"".concat((0,a.ZJn)(),"/activity")).replace(p(r.W.FOLLOW_PROFILE_URL),h?(0,a.NNq)(h,{utm_source:s.b3.email,extraParams:{r:null!==(n=(0,l.userReferralKey)(h))&&void 0!==n?n:"",followPrompt:!0}}):(0,a.n1t)((0,a.ZJn)(),{utm_source:s.b3.email,followPrompt:!0})).replace(p(r.W.FOLLOW_POST_URL),h?(0,a.uRy)(c,u,{urlParams:{utm_source:s.b3.email,r:null!==(d=(0,l.userReferralKey)(h))&&void 0!==d?d:"",followPrompt:!0}}):(0,a.n1t)((0,a.ZJn)(),{utm_source:s.b3.email,followPrompt:!0}))}},94826:function(e,t,n){n.d(t,{I:()=>l,P:()=>a});var r=n(92007),i=n(68303),o=n(80870);function a(e){let{paragraph:t,ordered_list:n,bullet_list:r,blockquote:o,orderedList:a,bulletList:l}=e.schema.nodes;return(0,i.$9)(e,[t,n,r,o,a,l])}function l(e,t){if(!a(e))return!1;let{schema:n}=e,i=n.nodes.footnote.create({number:1},n.nodes.paragraph.create()),l=n.nodes.footnoteAnchor.create({number:1}),s=e.tr,d=(0,o.dG)(s,n);s.replaceWith(d,d,i),s.replaceSelectionWith(l),(0,o.A0)(s,n);try{s.setSelection(r.Bs.create(s.doc,d+2,d+2)).scrollIntoView()}catch(e){return console.error("could not set footnote text selection"),!1}return t&&t(s),!0}},59383:function(e,t,n){n.d(t,{M:()=>a});var r=n(88897),i=n(68303);let o=e=>{let{label:t,mediaUploadId:n,duration:r}=e;return(e,o)=>(o&&o((0,i.o4)(e,e.schema.nodes.audio.create({label:t,mediaUploadId:n,duration:r,isEditorNode:!0}))),!0)},a=r.hj.create({name:"audioInsert",addCommands:()=>({insertAudio:e=>{let{label:t,mediaUploadId:n,duration:r}=e;return e=>{let{state:i,dispatch:a}=e;return o({label:t,mediaUploadId:n,duration:r})(i,a)}}})})},5660:function(e,t,n){n.d(t,{z:()=>d});var r=n(88897),i=n(86551),o=n(63651),a=n(47929),l=n(68303),s=n(39947);let d=r.hj.create({name:"buttonCustom",addCommands:()=>({insertSubscribeButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.tX)(e)(n,r)},insertSubscribeButtonWithPreamble:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.Ui)(e)(n,r)},insertCaptionedShareButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.T6)(e)(n,r)},insertSpecialOfferButton:e=>{let{couponPub:t,scrollParent:n,parentClass:r,get_coupons:o,insert_coupon:a,SelectField:l,openPrompt:s,closePrompt:d,getNetworkErrorMessage:c}=e;return e=>{let{state:u,dispatch:h,view:p}=e;return(0,i.pw)({couponPub:t,scrollParent:n,parentClass:r,get_coupons:o,insert_coupon:a,SelectField:l,openPrompt:s,closePrompt:d,getNetworkErrorMessage:c})(u,h,p)}},insertGroupSubscriptionButton:e=>{let{publication:t}=e;return e=>{let{state:n,dispatch:r}=e;return(0,i.Fp)({publication:t})(n,r)}},insertDonateButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.U0)(e)(n,r)},insertReferralButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.Lb)(e)(n,r)},insertCaptionedWriterReferralButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.HQ)({writerReferralCode:e.writerReferralCode,publication:e.publication,postId:e.postId})(n,r)},insertGiftButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.aZ)(e)(n,r)},insertCommentsButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.sj)(e)(n,r)},insertSurveyButton:(e,t,n)=>r=>{let{state:o,dispatch:a}=r;return(0,i.F2)(e,t,n)(o,a)},insertSharePubButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.S_)(e)(n,r)},insertSharePostButton:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.BN)(e)(n,r)},insertCustomButton:e=>{let{scrollParent:t,parentClass:n,TextField:r,openPrompt:o,publication:a}=e;return e=>{let{state:l,dispatch:s,view:d}=e;return(0,i.op)({scrollParent:t,parentClass:n,TextField:r,openPrompt:o,publication:a})(l,s,d)}},insertVisitThreadButton:e=>t=>{let{state:n,dispatch:r}=t;return((t,n)=>{if(!t.schema.nodes.communityChat)return console.error("insertCommunityChatEmbed: schema is missing communityChat node"),!1;if(!(0,s.o)(t,t.schema.nodes.communityChat))return!1;if(n){var r,i;n((0,l.o4)(t,t.schema.nodes.communityChat.create({url:(0,o.ZVW)({pubKey:e.subdomain,utm_source:a.b3.chatEmbed}),subdomain:e.subdomain,pub:{id:e.id,name:e.name,author_name:null!==(r=e.primary_profile_name)&&void 0!==r?r:e.author_name,author_photo_url:null!==(i=e.primary_profile_photo_url)&&void 0!==i?i:e.author_photo_url}})))}return!0})(n,r)}})})},98616:function(e,t,n){n.d(t,{l:()=>l});var r=n(88897),i=n(60308),o=n(68303);let a=e=>(t,n)=>{let r=(0,i.SVA)(e);return n&&n((0,o.o4)(t,t.schema.nodes.install_substack_app.create({logo_url:e.logo_url||"".concat(r,"/img/substack.png"),author_name:e.author_name,publication_subdomain:e.subdomain,publication_name:e.name,language:e.language}))),!0},l=r.hj.create({name:"embedContentCustom",addCommands:()=>({insertInstallSubstackAppEmbed:e=>t=>{let{state:n,dispatch:r}=t;return a(e)(n,r)}})})},82708:function(e,t,n){n.d(t,{k:()=>p});var r=n(88897),i=n(92007),o=n(14017),a=n(98914);let l=e=>{e.preventDefault()},s=(e,t,n)=>{let r=e.dom;if(r){let e=r.querySelector('[data-attrs*=\'{"nodeId":"'.concat(t,"\"']"));e&&(n?e.addEventListener("dragstart",l):e.removeEventListener("dragstart",l))}},d=(e,t)=>(n,r,i)=>{if(r){let o,a;if(n.doc.descendants((t,n)=>{if(t.attrs.nodeId===e.nodeId)return o=t,a=n,!1}),o&&void 0!==a){let l=n.tr;l.setNodeMarkup(a,o.type,Object.assign({},o.attrs,e)),s(i,e.nodeId,t),r(l)}}return!0},c=e=>{let{url:t}=e;return(e,n)=>{if(n){let r=e.tr,o=e.selection.from,a=o+t.length;r.deleteSelection(),r.insertText(t,o),r.addMark(o,a+1,e.schema.marks.link.create({text:t,href:t})),r.setSelection(i.Bs.create(r.doc,o,a+1)),n(r)}return!0}},u=e=>{let{url:t}=e;return(e,n,r)=>{if(n){let[,i]=(0,o.WB)(t,e.schema,{forceAllowOwnPub:!0});if(!i)return!0;(0,o.rN)(i,r,e.schema,{forceAllowOwnPub:!0}).catch(e=>alert((0,a.zx)(e))),n(e.tr.replaceSelectionWith(i))}return!0}},h=()=>(e,t)=>(t&&t(e.tr.deleteSelection()),!0),p=r.hj.create({name:"digestPostEmbedExtension",addCommands:()=>({updateDigestPostEmbed:(e,t)=>n=>{let{state:r,dispatch:i,view:o}=n;return d(e,!!t)(r,i,o)},convertDigestPostEmbedToLink:e=>t=>{let{state:n,dispatch:r}=t;return c(e)(n,r)},convertDigestPostEmbedToEmbeddedPost:e=>t=>{let{state:n,dispatch:r,view:i}=t;return u(e)(n,r,i)},deleteDigestPostEmbed:()=>e=>{let{state:t,dispatch:n}=e;return h()(t,n)}})})},73984:function(e,t,n){n.d(t,{w:()=>o});var r=n(88897),i=n(94826);let o=r.hj.create({name:"footnoteCustom",addCommands:()=>({insertFootnote:()=>e=>{let{state:t,dispatch:n}=e;return(0,i.I)(t,n)}})})},11105:function(e,t,n){n.d(t,{y:()=>h});var r=n(88897),i=n(11239),o=n(44369),a=n(68303);let l=e=>{let{gallery:t}=e;return(e,n)=>(n&&n((0,a.o4)(e,e.schema.nodes.imageGallery.create({gallery:t,isEditorNode:!0}))),!0)},s=e=>{let{gallery:t}=e;return(e,n)=>(n&&n((0,a.Hs)(e,e.schema.nodes.imageGallery.create({gallery:t,isEditorNode:!0}))),!0)},d=e=>{let{url:t,caption:n,width:r,height:i}=e;return(e,o)=>{if(!o)return!1;let l=e.schema;if(!l.nodes.image2||!l.nodes.captionedImage||!l.nodes.caption)return!1;let s=l.nodes.image2.create({src:t,imageSize:"normal",height:null!=i?i:512,width:null!=r?r:512});if(n){let t=l.nodes.caption.create(null,l.text(n)),r=l.nodes.captionedImage.create({},[s,t]);o((0,a.o4)(e,r))}else o((0,a.o4)(e,s));return!0}},c=e=>{let{url:t,width:n,height:r}=e;return(e,i)=>{let o=e.schema,l={alt:"TradingView chart",src:t,height:r,width:n,type:"image/jpg"};if(!o.nodes.image2||!o.nodes.captionedImage||!o.nodes.caption||!o.marks.link)return!1;let s=o.text("Created with "),d=o.text("TradingView",[o.marks.link.create({title:"TradingView",href:"https://tradingview.com"})]),c=o.nodes.captionedImage.create(l,[o.nodes.image2.create(l),o.nodes.caption.create(null,[s,d])]);return i&&i((0,a.o4)(e,c)),!0}},u=e=>{let{url:t,width:n,height:r,description:i,userName:o,userHref:l}=e;return(e,s)=>{let d=e.schema,c={alt:i,src:t,height:r,width:n,type:"image/jpg"},u=d.text("Photo by "),h=d.text(o,[d.marks.link.create({title:o,href:l})]),p=d.text(" on "),g=d.text("Unsplash",[d.marks.link.create({title:"Unsplash",href:"https://unsplash.com"})]),m=d.nodes.captionedImage.create(c,[d.nodes.image2.create(c),d.nodes.caption.create(null,[u,h,p,g])]);return s&&s((0,a.o4)(e,m)),!0}},h=r.hj.create({name:"imageInsert",addCommands:()=>({insertImage:e=>t=>{let{state:n,dispatch:r,view:a}=t;return n.schema.nodes.image2?(r&&(function(e,t){let{insertImageFile:n}=t,r=document.createElement("input");return r.type="file",r.accept="image/*,.heic,.heif",r.style.cssText="display:none;",r.onchange=()=>{r.files&&r.files.length>0&&r.files[0]&&n(r.files[0]),r.value=""},r.className="insert-image-menu-item-input",document.body.appendChild(r),new o.$4({title:"Insert image",icon:i.aL,active:()=>!1,enable:t=>(0,o.om)(t,e),run(){setTimeout(()=>{r.click()},0)}},"image")})(n.schema.nodes.image2,{insertImageFile:e}).spec.run(n,r,a,void 0),!0):(console.error("image2 node not enabled"),!1)},insertUnsplashImage:e=>t=>{let{state:n,dispatch:r}=t;return u(e)(n,r)},insertImageGallery:e=>t=>{let{state:n,dispatch:r}=t;return l(e)(n,r)},updateImageGallery:e=>t=>{let{state:n,dispatch:r}=t;return s(e)(n,r)},insertImageFromUrl:e=>{let{url:t,caption:n,width:r,height:i}=e;return e=>{let{state:o,dispatch:a}=e;return d({url:t,caption:n,width:r,height:i})(o,a)}},insertTradingViewImageFromUrl:e=>{let{url:t,width:n,height:r}=e;return e=>{let{state:i,dispatch:o}=e;return c({url:t,width:n,height:r})(i,o)}}})})},10218:function(e,t,n){n.d(t,{_:()=>l});var r=n(88897),i=n(41128),o=n(68303);let a=e=>{let{expression:t}=e;return(e,n)=>{let r=(0,i.Ox)();return n&&n((0,o.o4)(e,e.schema.nodes.latex_block.create({persistentExpression:t,id:r}))),!0}},l=r.hj.create({name:"latexInsert",addCommands:()=>({insertLatex:e=>{let{expression:t}=e;return e=>{let{state:n,dispatch:r}=e;return a({expression:t})(n,r)}}})})},81519:function(e,t,n){n.d(t,{r:()=>s});var r=n(88897),i=n(60308),o=n(63651),a=n(68303);let l=e=>{let{publication:t,meetingsConfig:n,usePublicationName:r}=e;return(e,l)=>{let s=(0,i.SMH)({id:n.user_id,photo_url:n.user_profile_photo_url});return r&&t.logo_url&&(s=(0,o.zF4)(t.logo_url,112)),l&&l((0,a.o4)(e,e.schema.nodes.meeting.create({name:r?t.name:n.user_name,avatarUrl:s,url:(0,o.szv)(t,{addBase:!0,params:{source:"embed"}}),isEditorNode:!0}))),!0}},s=r.hj.create({name:"meetingInsert",addCommands:()=>({insertMeeting:e=>{let{publication:t,meetingsConfig:n,usePublicationName:r}=e;return e=>{let{state:i,dispatch:o}=e;return l({publication:t,meetingsConfig:n,usePublicationName:r})(i,o)}}})})},59662:function(e,t,n){n.d(t,{f:()=>o});var r=n(88897),i=n(57208);let o=r.hj.create({name:"paywallCustom",addCommands:()=>({addPaywall:e=>t=>{let{state:n,dispatch:r}=t;return(0,i.f2)(e)(n,r)}})})},60511:function(e,t,n){n.d(t,{q:()=>a});var r=n(88897),i=n(68303);let o=e=>{let{url:t}=e;return(e,n)=>{if(n){if(!e.schema.nodes.pinterest)return console.error("pinterest node not defined"),!1;n((0,i.o4)(e,e.schema.nodes.pinterest.create({url:t})))}return!0}},a=r.hj.create({name:"pinterestInsert",addCommands:()=>({insertPinterest:e=>{let{url:t}=e;return e=>{let{state:n,dispatch:r}=e;return o({url:t})(n,r)}}})})},75837:function(e,t,n){n.d(t,{q:()=>a});var r=n(88897),i=n(68303);let o=e=>{let{id:t}=e;return(e,n)=>(n&&n((0,i.o4)(e,e.schema.nodes.poll.create({id:t}))),!0)},a=r.hj.create({name:"pollInsert",addCommands:()=>({insertPoll:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:r}=e;return o({id:t})(n,r)}}})})},29961:function(e,t,n){n.d(t,{R:()=>a});var r=n(88897),i=n(68303);let o=e=>{let{id:t}=e;return(e,n)=>(n&&n((0,i.o4)(e,e.schema.nodes.recipe.create({id:t}))),!0)},a=r.hj.create({name:"recipeInsert",addCommands:()=>({insertRecipe:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:r}=e;return o({id:t})(n,r)}}})})},80334:function(e,t,n){n.d(t,{a:()=>a});var r=n(88897),i=n(68303);let o=e=>{let{id:t}=e;return(e,n)=>{var r,o;return n&&(null==e?void 0:null===(o=e.schema)||void 0===o?void 0:null===(r=o.nodes)||void 0===r?void 0:r.sponsorshipCampaign)&&n((0,i.o4)(e,e.schema.nodes.sponsorshipCampaign.create({id:t}))),!0}},a=r.hj.create({name:"sponsorshipCampaignInsert",addCommands:()=>({insertSponsorshipCampaign:e=>{let{id:t}=e;return e=>{let{state:n,dispatch:r}=e;return o({id:t})(n,r)}}})})},75970:function(e,t,n){n.d(t,{f:()=>a});var r=n(88897),i=n(68303);let o=e=>{let{mediaUploadId:t}=e;return(e,n)=>(n&&n((0,i.o4)(e,e.schema.nodes.video.create({mediaUploadId:t,isEditorNode:!0}))),!0)},a=r.hj.create({name:"videoInsert",addCommands:()=>({insertVideo:e=>{let{mediaUploadId:t}=e;return e=>{let{state:n,dispatch:r}=e;return o({mediaUploadId:t})(n,r)}}})})},64314:function(e,t,n){n.d(t,{N:()=>r});let r='!function(){"use strict";window.addEventListener("message",(function(e){if(void 0!==e.data["datawrapper-height"]){var t=document.querySelectorAll("iframe");for(var a in e.data["datawrapper-height"])for(var r=0;r<t.length;r++){if(t[r].contentWindow===e.source)t[r].style.height=e.data["datawrapper-height"][a]+"px"}}}))}();'},57125:function(e,t,n){n.d(t,{Op:()=>o});var r=n(78718),i=n.n(r);let o=e=>{let{attrs:t}=e,n={};for(let[e,r]of Object.entries(t))n[e]=i()(r,["default"]);return n}},99741:function(e,t,n){n.d(t,{$:()=>i,b:()=>o});var r=n(27412);let i={attrs:{},inline:!1,group:"block",atom:!0,selectable:!0,isolating:!1,defining:!1,draggable:!0,parseDOM:[{tag:".paywall-jump"}],toDOM:()=>["div",{class:"paywall-jump","data-component-name":"PaywallToDOM"}]};class o{constructor(){var e,t,n;(0,r._)(this,"dom",void 0);let i="undefined"!=typeof window&&null!==(n=null===(t=window._preloads)||void 0===t?void 0:null===(e=t.pub)||void 0===e?void 0:e.language)&&void 0!==n?n:"en",{iString:o}=I18N.i(i),a=document.createElement("div");a.className="paywall-editor",a.appendChild(document.createElement("hr"));let l=document.createElement("div");l.className="paywall-editor-pill";let s=document.createElement("span");s.innerText=o("Paid content below this line");let d=document.createElement("div");d.className="paywall-editor-pill-icon-container",d.innerHTML='\n<svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M8.75439 4.33398V14.834" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M3.50439 9.58398L8.7544 14.834L14.0044 9.58398" stroke="#666666" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',l.appendChild(s),l.appendChild(d),a.appendChild(l),a.appendChild(document.createElement("hr")),this.dom=a}}},3185:function(e,t,n){n.d(t,{Z:()=>o});var r=n(80508),i=n(54809);let o=new r.ZP({actionButtonAttr:"raw_href",substackType:"pdf",mimeTypesToSignature:i.Lz,actionButtonText:"Download"})},19520:function(e,t,n){n.d(t,{s:()=>i});var r=n(68833);function i(e){let{msg:t,node:n,err:i,group:a}=e;(0,r.j)(r.FP.EDITOR_NODE_RENDER_FAILED,{nodeType:n.type.name,nodeAttrs:n.attrs,errMsg:null==i?void 0:i.message});let l=null!=t?t:"Something went wrong";return"block"===a?function(e){let{msg:t}=e,n=document.createElement("div");n.className="blockContainer-sGUymL";let r=document.createElement("div");r.textContent=t,r.className="blockTitle-p5J1JM";let i=document.createElement("div");i.textContent="Try refreshing the page or try again later.",i.className="blockSubTitle-b49Pjc";let a=document.createElement("div");return a.className="blockTitleContainer-_ayaxc",a.appendChild(r),a.appendChild(i),n.appendChild(o({size:24})),n.appendChild(a),n}({msg:l}):function(e){let{msg:t}=e,n=document.createElement("span");n.className="inlineContainer-pdOZS_";let r=document.createElement("span");return r.className="inlineText-mmZJjI",r.textContent=t,n.appendChild(o({size:10})),n.appendChild(r),n}({msg:l})}function o(e){let{size:t}=e,n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg");r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(t)),r.setAttribute("viewBox","0 0 24 24"),r.setAttribute("fill","none"),r.setAttribute("stroke","#363737"),r.setAttribute("stroke-width","2"),r.setAttribute("stroke-linecap","round"),r.setAttribute("stroke-linejoin","round");let i=document.createElementNS(n,"circle");i.setAttribute("d","M12 8V12M12 16H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z"),i.setAttribute("cx","12"),i.setAttribute("cy","12"),i.setAttribute("r","10");let o=document.createElementNS(n,"line");o.setAttribute("x1","12"),o.setAttribute("x2","12"),o.setAttribute("y1","8"),o.setAttribute("y2","12");let a=document.createElementNS(n,"line");return a.setAttribute("x1","12"),a.setAttribute("x2","12.01"),a.setAttribute("y1","16"),a.setAttribute("y2","16"),r.appendChild(i),r.appendChild(o),r.appendChild(a),r}},15233:function(e,t,n){n.d(t,{L:()=>i});var r=n(60308);let i=function(e,t,n,i){let{targetUrl:o}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=["td",{class:"audio-details","data-component-name":"AudioEmbedStatic"},["p",{class:"title"},t],["p",{class:"subtitle"},n]];i&&(a=[...a,["p",{class:"metadata"},i]]);let l=["table",{class:"audio-embed-static",cellspacing:"12","data-component-name":"AudioEmbedStaticTable"},["tr",{},["td",{class:"thumbnail-container"},["div",{class:"play-container"},["img",{class:"play",src:(0,r.zF4)("/img/thumbnail-play.png",72),height:36,width:36}]],["img",{class:"thumbnail",src:(0,r.zF4)(e,160),height:80,width:80}]],a]];return o?["a",{class:"audio-embed-static-outer",href:o,target:"_blank","data-component-name":"AudioEmbedStaticLink"},l]:l}},62645:function(e,t,n){n.d(t,{J:()=>r});let r={parseDOM:[{tag:"del"},{tag:"s"}],toDOM:()=>["s",0]}},42034:function(e,t,n){n.d(t,{l:()=>r});let r={parseDOM:[{tag:"sub"}],toDOM:()=>["sub",0]}},41505:function(e,t,n){n.d(t,{O:()=>r});let r={parseDOM:[{tag:"sup"}],toDOM:()=>["sup",0]}},39947:function(e,t,n){n.d(t,{o:()=>r});let r=(e,t)=>{if(!t)return!1;let n=e.selection.$from;for(let e=n.depth;e>=0;e--){let r=n.index(e);if(n.node(e).canReplaceWith(r,r,t))return!0}return!1}},30548:function(e,t,n){n.d(t,{S:()=>o});var r=n(88897);let i=e=>{let{attrs:t}=e,n={};if(!t)return n;for(let[e,i]of Object.entries(t)){var r;n[e]={default:null!==(r=i.default)&&void 0!==r?r:null,keepOnSplit:!1}}return n},o=e=>{let{name:t,nodeSpec:n,addNodeView:o,addCommands:a}=e;return r.NB.create({name:t,content:n.content,marks:n.marks,group:n.group,inline:n.inline,atom:n.atom,selectable:n.selectable,draggable:n.draggable,code:n.code,whitespace:n.whitespace,defining:n.defining,isolating:n.isolating,addNodeView:o,addCommands:a,renderHTML(e){return this.options.isStatic&&n.toDOMStatic?n.toDOMStatic(e.node):n.toDOM(e.node)},parseHTML:()=>n.parseDOM,addAttributes:()=>i({attrs:n.attrs})})}},88956:function(e,t,n){n.d(t,{Y:()=>function e(t,n){if(!t||((0,r.f5)(t)||(0,r.PH)(t))&&!n(t))return null;if((0,r.f5)(t)&&t.content&&t.content.length>0){if(t.content=t.content.filter(t=>e(t,n)),0===t.content.length)return null}else if((0,r.PH)(t)){let i=(0,r.yX)({fragment:t.content});if(i.length>0){let o=i.filter(t=>e(t,n));if(0===o.length)return null;(0,r.uR)({fragment:t.content,content:o})}}return t}});var r=n(62092)},22365:function(e,t,n){n.d(t,{e:()=>o});var r=n(88897),i=n(76405);let o=e=>{let{doc:t,extensions:n,customDocument:o}=e,a=(0,r.J1)(n),l=i.NB.fromJSON(a,t),s=document.createElement("div");return i.PW.fromSchema(a).serializeFragment(l.content,{document:o},s),s.innerHTML}},30837:function(e,t,n){n.d(t,{Y:()=>r});let r=e=>{try{if("string"!=typeof e){let t=e.getAttribute("data-attrs");if(t)return JSON.parse(t)}}catch(e){}return!1}},12076:function(e,t,n){n.d(t,{Z:()=>o});var r=n(80508),i=n(54809);let o=new r.ZP({actionButtonAttr:null,substackType:"xlsx",mimeTypesToSignature:i.Z$,actionButtonText:null})},81481:function(){},21361:function(){},53480:function(){},31337:function(){},17879:function(){},31384:function(){},24877:function(){}}]);