"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9293"],{78493:function(e,t,n){n.d(t,{RR:()=>d,YF:()=>f,cv:()=>a});var r=n(93920),o=n(98661),u="undefined"!=typeof document?o.useLayoutEffect:o.useEffect;function l(e,t){let n,r,o;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!=r--;)if(!l(e[r],t[r]))return!1;return!0}if((n=(o=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!({}).hasOwnProperty.call(t,o[r]))return!1;for(r=n;0!=r--;){let n=o[r];if(("_owner"!==n||!e.$$typeof)&&!l(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function i(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function c(e,t){let n=i(e);return Math.round(t*n)/n}function s(e){let t=o.useRef(e);return u(()=>{t.current=e}),t}function f(e){void 0===e&&(e={});let{placement:t="bottom",strategy:n="absolute",middleware:f=[],platform:a,elements:{reference:d,floating:v}={},transform:p=!0,whileElementsMounted:m,open:g}=e,[y,h]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[b,w]=o.useState(f);l(b,f)||w(f);let[E,R]=o.useState(null),[x,k]=o.useState(null),C=o.useCallback(e=>{e!==K.current&&(K.current=e,R(e))},[]),P=o.useCallback(e=>{e!==L.current&&(L.current=e,k(e))},[]),M=d||E,S=v||x,K=o.useRef(null),L=o.useRef(null),A=o.useRef(y),O=null!=m,D=s(m),I=s(a),_=s(g),j=o.useCallback(()=>{if(!K.current||!L.current)return;let e={placement:t,strategy:n,middleware:b};I.current&&(e.platform=I.current),(0,r.oo)(K.current,L.current,e).then(e=>{let t={...e,isPositioned:!1!==_.current};B.current&&!l(A.current,t)&&(A.current=t,o.flushSync(()=>{h(t)}))})},[b,t,n,I,_]);u(()=>{!1===g&&A.current.isPositioned&&(A.current.isPositioned=!1,h(e=>({...e,isPositioned:!1})))},[g]);let B=o.useRef(!1);u(()=>(B.current=!0,()=>{B.current=!1}),[]),u(()=>{if(M&&(K.current=M),S&&(L.current=S),M&&S){if(D.current)return D.current(M,S,j);j()}},[M,S,j,D,O]);let F=o.useMemo(()=>({reference:K,floating:L,setReference:C,setFloating:P}),[C,P]),W=o.useMemo(()=>({reference:M,floating:S}),[M,S]),T=o.useMemo(()=>{let e={position:n,left:0,top:0};if(!W.floating)return e;let t=c(W.floating,y.x),r=c(W.floating,y.y);return p?{...e,transform:"translate("+t+"px, "+r+"px)",...i(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,p,W.floating,y.x,y.y]);return o.useMemo(()=>({...y,update:j,refs:F,elements:W,floatingStyles:T}),[y,j,F,W,T])}let a=(e,t)=>({...(0,r.cv)(e),options:[e,t]}),d=(e,t)=>({...(0,r.RR)(e),options:[e,t]})},28518:function(e,t,n){n.d(t,{NI:()=>Z,YF:()=>F,Y_:()=>N,bQ:()=>B,ll:()=>O});var r=n(98661),o=n(17268),u=n(33771),l=n(31720),i=n(88388),c=n(78493);let s={...r},f=s.useInsertionEffect||(e=>e());function a(e){let t=r.useRef(()=>{});return f(()=>{t.current=e}),r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var d="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;let v=!1,p=0,m=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+p++,g=s.useId||function(){let[e,t]=r.useState(()=>v?m():void 0);return d(()=>{null==e&&t(m())},[]),r.useEffect(()=>{v=!0},[]),e},y=r.createContext(null),h=r.createContext(null),b=()=>{var e;return(null==(e=r.useContext(y))?void 0:e.id)||null},w=()=>r.useContext(h);function E(e){return"data-floating-ui-"+e}function R(e){let t=(0,r.useRef)(e);return d(()=>{t.current=e}),t}function x(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let k=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function C(e,t){let n=(0,i.ht)(e,k());"prev"===t&&n.reverse();let r=n.indexOf((0,o.AW)((0,o.Me)(e)));return n.slice(r+1)[0]}function P(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!(0,o.r3)(n,r)}function M(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let S={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},K=r.forwardRef(function(e,t){let[n,l]=r.useState();d(()=>{(0,o.G6)()&&l("button")},[]);let i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[E("focus-guard")]:"",style:S};return(0,u.tZ)("span",{...e,...i})}),L=r.createContext(null),A=E("portal");function O(e){let{children:t,id:n,root:o,preserveTabOrder:c=!0}=e,s=function(e){void 0===e&&(e={});let{id:t,root:n}=e,o=g(),u=D(),[i,c]=r.useState(null),s=r.useRef(null);return d(()=>()=>{null==i||i.remove(),queueMicrotask(()=>{s.current=null})},[i]),d(()=>{if(!o||s.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=o,n.setAttribute(A,""),e.appendChild(n),s.current=n,c(n)},[t,o]),d(()=>{if(null===n||!o||s.current)return;let e=n||(null==u?void 0:u.portalNode);e&&!(0,l.kK)(e)&&(e=e.current),e=e||document.body;let r=null;t&&((r=document.createElement("div")).id=t,e.appendChild(r));let i=document.createElement("div");i.id=o,i.setAttribute(A,""),(e=r||e).appendChild(i),s.current=i,c(i)},[t,n,o,u]),i}({id:n,root:o}),[f,a]=r.useState(null),v=r.useRef(null),p=r.useRef(null),m=r.useRef(null),y=r.useRef(null),h=null==f?void 0:f.modal,b=null==f?void 0:f.open,w=!!f&&!f.modal&&f.open&&c&&!!(o||s);return r.useEffect(()=>{if(s&&c&&!h)return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){s&&P(e)&&("focusin"===e.type?M:function(e){(0,i.ht)(e,k()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})})(s)}},[s,c,h]),r.useEffect(()=>{s&&(b||M(s))},[b,s]),(0,u.BX)(L.Provider,{value:r.useMemo(()=>({preserveTabOrder:c,beforeOutsideRef:v,afterOutsideRef:p,beforeInsideRef:m,afterInsideRef:y,portalNode:s,setFocusManagerState:a}),[c,s]),children:[w&&s&&(0,u.tZ)(K,{"data-type":"outside",ref:v,onFocus:e=>{if(P(e,s)){var t;null==(t=m.current)||t.focus()}else{let e=C(document.body,"prev")||(null==f?void 0:f.domReference);null==e||e.focus()}}}),w&&s&&(0,u.tZ)("span",{"aria-owns":s.id,style:S}),s&&r.createPortal(t,s),w&&s&&(0,u.tZ)(K,{"data-type":"outside",ref:p,onFocus:e=>{if(P(e,s)){var t;null==(t=y.current)||t.focus()}else{let t=C(document.body,"next")||(null==f?void 0:f.domReference);null==t||t.focus(),(null==f?void 0:f.closeOnFocusOut)&&(null==f||f.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}let D=()=>r.useContext(L),I={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},_={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},j=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function B(e,t){void 0===t&&(t={});let{open:n,onOpenChange:u,elements:i,dataRef:c}=e,{enabled:s=!0,escapeKey:f=!0,outsidePress:d=!0,outsidePressEvent:v="pointerdown",referencePress:p=!1,referencePressEvent:m="pointerdown",ancestorScroll:g=!1,bubbles:y,capture:h}=t,b=w(),R=a("function"==typeof d?d:()=>!1),k="function"==typeof d?R:d,C=r.useRef(!1),P=r.useRef(!1),{escapeKey:M,outsidePress:S}=j(y),{escapeKey:K,outsidePress:L}=j(h),A=r.useRef(!1),O=a(e=>{var t;if(!n||!s||!f||"Escape"!==e.key||A.current)return;let r=null==(t=c.current.floatingContext)?void 0:t.nodeId,l=b?x(b.nodesRef.current,r):[];if(!M&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}u(!1,(0,o.MM)(e)?e.nativeEvent:e,"escape-key")}),D=a(e=>{var t;let n=()=>{var t;O(e),null==(t=(0,o.U9)(e))||t.removeEventListener("keydown",n)};null==(t=(0,o.U9)(e))||t.addEventListener("keydown",n)}),B=a(e=>{var t;let n=C.current;C.current=!1;let r=P.current;if(P.current=!1,"click"===v&&r||n||"function"==typeof k&&!k(e))return;let s=(0,o.U9)(e),f="["+E("inert")+"]",a=(0,o.Me)(i.floating).querySelectorAll(f),d=(0,l.kK)(s)?s:null;for(;d&&!(0,l.Py)(d);){let e=(0,l.Ow)(d);if((0,l.Py)(e)||!(0,l.kK)(e))break;d=e}if(a.length&&(0,l.kK)(s)&&!(0,o.ex)(s)&&!(0,o.r3)(s,i.floating)&&Array.from(a).every(e=>!(0,o.r3)(d,e)))return;if((0,l.Re)(s)&&T){let t=(0,l.Py)(s),n=(0,l.Dx)(s),r=/auto|scroll/,o=t||r.test(n.overflowX),u=t||r.test(n.overflowY),i=o&&s.clientWidth>0&&s.scrollWidth>s.clientWidth,c=u&&s.clientHeight>0&&s.scrollHeight>s.clientHeight,f="rtl"===n.direction,a=c&&(f?e.offsetX<=s.offsetWidth-s.clientWidth:e.offsetX>s.clientWidth),d=i&&e.offsetY>s.clientHeight;if(a||d)return}let p=null==(t=c.current.floatingContext)?void 0:t.nodeId,m=b&&x(b.nodesRef.current,p).some(t=>{var n;return(0,o.Pe)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,o.Pe)(e,i.floating)||(0,o.Pe)(e,i.domReference)||m)return;let g=b?x(b.nodesRef.current,p):[];if(g.length>0){let e=!0;if(g.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}u(!1,e,"outside-press")}),F=a(e=>{var t;let n=()=>{var t;B(e),null==(t=(0,o.U9)(e))||t.removeEventListener(v,n)};null==(t=(0,o.U9)(e))||t.addEventListener(v,n)});r.useEffect(()=>{if(!n||!s)return;c.current.__escapeKeyBubbles=M,c.current.__outsidePressBubbles=S;let e=-1;function t(e){u(!1,e,"ancestor-scroll")}function r(){window.clearTimeout(e),A.current=!0}function a(){e=window.setTimeout(()=>{A.current=!1},5*!!(0,l.Pf)())}let d=(0,o.Me)(i.floating);f&&(d.addEventListener("keydown",K?D:O,K),d.addEventListener("compositionstart",r),d.addEventListener("compositionend",a)),k&&d.addEventListener(v,L?F:B,L);let p=[];return g&&((0,l.kK)(i.domReference)&&(p=(0,l.Kx)(i.domReference)),(0,l.kK)(i.floating)&&(p=p.concat((0,l.Kx)(i.floating))),!(0,l.kK)(i.reference)&&i.reference&&i.reference.contextElement&&(p=p.concat((0,l.Kx)(i.reference.contextElement)))),(p=p.filter(e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{f&&(d.removeEventListener("keydown",K?D:O,K),d.removeEventListener("compositionstart",r),d.removeEventListener("compositionend",a)),k&&d.removeEventListener(v,L?F:B,L),p.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[c,i,f,k,v,n,u,g,s,M,S,O,K,D,B,L,F]),r.useEffect(()=>{C.current=!1},[k,v]);let W=r.useMemo(()=>({onKeyDown:O,...p&&{[I[m]]:e=>{u(!1,e.nativeEvent,"reference-press")},..."click"!==m&&{onClick(e){u(!1,e.nativeEvent,"reference-press")}}}}),[O,u,p,m]),T=r.useMemo(()=>({onKeyDown:O,onMouseDown(){P.current=!0},onMouseUp(){P.current=!0},[_[v]]:()=>{C.current=!0}}),[O,v]);return r.useMemo(()=>s?{reference:W,floating:T}:{},[s,W,T])}function F(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:o}=e,u=g(),l=r.useRef({}),[i]=r.useState(()=>(function(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}})()),c=null!=b(),[s,f]=r.useState(o.reference),d=a((e,t,r)=>{l.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:r,nested:c}),null==n||n(e,t,r)}),v=r.useMemo(()=>({setPositionReference:f}),[]),p=r.useMemo(()=>({reference:s||o.reference||null,floating:o.floating||null,domReference:o.reference}),[s,o.reference,o.floating]);return r.useMemo(()=>({dataRef:l,open:t,onOpenChange:d,elements:p,events:i,floatingId:u,refs:v}),[t,d,p,i,u,v])}({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,u=o.elements,[i,s]=r.useState(null),[f,v]=r.useState(null),p=(null==u?void 0:u.domReference)||i,m=r.useRef(null),y=w();d(()=>{p&&(m.current=p)},[p]);let h=(0,c.YF)({...e,elements:{...u,...f&&{reference:f}}}),E=r.useCallback(e=>{let t=(0,l.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;v(t),h.refs.setReference(t)},[h.refs]),R=r.useCallback(e=>{((0,l.kK)(e)||null===e)&&(m.current=e,s(e)),((0,l.kK)(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!(0,l.kK)(e))&&h.refs.setReference(e)},[h.refs]),x=r.useMemo(()=>({...h.refs,setReference:R,setPositionReference:E,domReference:m}),[h.refs,R,E]),k=r.useMemo(()=>({...h.elements,domReference:p}),[h.elements,p]),C=r.useMemo(()=>({...h,...o,refs:x,elements:k,nodeId:t}),[h,x,k,t,o]);return d(()=>{o.dataRef.current.floatingContext=C;let e=null==y?void 0:y.nodesRef.current.find(e=>e.id===t);e&&(e.context=C)}),r.useMemo(()=>({...h,context:C,refs:x,elements:k}),[h,x,k,C])}let W="active",T="selected";function U(e,t,n){let r=new Map,o="item"===n,u=e;if(o&&e){let{[W]:t,[T]:n,...r}=e;u=r}return{..."floating"===n&&{tabIndex:-1,"data-floating-ui-focusable":""},...u,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,u]=t;if(!(o&&[W,T].includes(n))){if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof u){var l;null==(l=r.get(n))||l.push(u),e[n]=function(){for(var e,t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}}else e[n]=u}}),e),{})}}function Z(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),o=e.map(e=>null==e?void 0:e.item),u=r.useCallback(t=>U(t,e,"reference"),t),l=r.useCallback(t=>U(t,e,"floating"),n),i=r.useCallback(t=>U(t,e,"item"),o);return r.useMemo(()=>({getReferenceProps:u,getFloatingProps:l,getItemProps:i}),[u,l,i])}let Y=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function q(e,t){return"function"==typeof e?e(t):e}function N(e,t){void 0===t&&(t={});let{initial:n={opacity:0},open:o,close:u,common:l,duration:i=250}=t,c=e.placement,s=c.split("-")[0],f=r.useMemo(()=>({side:s,placement:c}),[s,c]),a="number"==typeof i,v=(a?i:i.open)||0,p=(a?i:i.close)||0,[m,g]=r.useState(()=>({...q(l,f),...q(n,f)})),{isMounted:y,status:h}=function(e,t){void 0===t&&(t={});let{open:n,elements:{floating:o}}=e,{duration:u=250}=t,l=("number"==typeof u?u:u.close)||0,[i,c]=r.useState("unmounted"),s=function(e,t){let[n,o]=r.useState(e);return e&&!n&&o(!0),r.useEffect(()=>{if(!e&&n){let e=setTimeout(()=>o(!1),t);return()=>clearTimeout(e)}},[e,n,t]),n}(n,l);return s||"close"!==i||c("unmounted"),d(()=>{if(o){if(n){c("initial");let e=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(e)}}c("close")}},[n,o]),{isMounted:s,status:i}}(e,{duration:i}),b=R(n),w=R(o),E=R(u),x=R(l);return d(()=>{let e=q(b.current,f),t=q(E.current,f),n=q(x.current,f),r=q(w.current,f)||Object.keys(e).reduce((e,t)=>(e[t]="",e),{});if("initial"===h&&g(t=>({transitionProperty:t.transitionProperty,...n,...e})),"open"===h&&g({transitionProperty:Object.keys(r).map(Y).join(","),transitionDuration:v+"ms",...n,...r}),"close"===h){let r=t||e;g({transitionProperty:Object.keys(r).map(Y).join(","),transitionDuration:p+"ms",...n,...r})}},[p,E,b,w,x,v,h,f]),{isMounted:y,styles:m}}},17268:function(e,t,n){n.d(t,{AW:()=>o,G6:()=>l,MM:()=>i,Me:()=>s,Pe:()=>f,U9:()=>a,ex:()=>c,r3:()=>u});var r=n(31720);function o(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function u(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function l(){return/apple/i.test(navigator.vendor)}function i(e){return"nativeEvent"in e}function c(e){return e.matches("html,body")}function s(e){return(null==e?void 0:e.ownerDocument)||document}function f(e,t){return null!=t&&("composedPath"in e?e.composedPath().includes(t):null!=e.target&&t.contains(e.target))}function a(e){return"composedPath"in e?e.composedPath()[0]:e.target}}}]);