"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6595"],{51885:function(e,t,n){n.d(t,{Z:()=>o});let o={mention:"mention-pnpTE1",mentionStatic:"mentionStatic-liMklk"}},42450:function(e,t,n){n.d(t,{Z:()=>o});let o={menu:"menu-WfPxpI",submenu:"submenu-tlfomG",floatingContainer:"floatingContainer-MUwyEF",menuItem:"menuItem-B7SAG_",disabled:"disabled-bXLaNs",priority_primary:"priority_primary-xntVG3",priorityPrimary:"priority_primary-xntVG3",priority_destructive:"priority_destructive-sXev9X",priorityDestructive:"priority_destructive-sXev9X",priority_secondary:"priority_secondary-prGxrw",prioritySecondary:"priority_secondary-prGxrw",relative:"relative-pHLTt2",icon:"icon-HSm3VM",text:"text-X3mTtF",transition:"transition-a_Ilul",show:"show-Kgvg96",hide:"hide-zZFh0h",actionSheetTransition:"actionSheetTransition-JBN9s_",actionSheetShow:"actionSheetShow-47rpBE",actionSheetHide:"actionSheetHide-QhOutK"}},5772:function(e,t,n){n.d(t,{R:()=>u});var o=n(30396),r=n(23279),a=n.n(r);function u(e){let{items:t,getKeys:n,sort:r=!0,sortFunc:u,deps:c}=e,i=(e,t)=>{let o=n(e),r=n(t);for(let e=0;e<Math.min(o.length,r.length);e++){let t=o[e].localeCompare(r[e]);if(0!==t)return t}return o.length-r.length},[s,l]=(0,o.eJ)(""),d=(0,o.Ye)(()=>a()(l,100),[l]),f=s.trim();return{setQuery:d,filteredItems:(0,o.Ye)(()=>{if(!f)return t;let e=t.filter(e=>n(e).some(e=>e.toLowerCase().includes(f.toLowerCase())));return(r||u)&&(e=e.sort(u||i)),e},c?[f,...c]:[f,t]),hasFiltered:""!==f,query:f}}},43148:function(e,t,n){n.d(t,{H:()=>d,o:()=>l});var o=n(16584),r=n(98661),a=n(30396),u=n(15771),c=n(19081),i=n(58175),s=n(12811);let l=(0,r.forwardRef)((e,t)=>{let{onClick:n,children:r,disabled:a=!1,size:c="md"}=e;return(0,o.tZ)(u.GI,{ref:t,rounded:!0,onClick:n,disabled:a,size:c,children:r})}),d=e=>{let{label:t,children:n}=e,[r,u]=(0,a.eJ)(!1);return(0,o.BX)(c.gq,{gap:8,justifyContent:"center",alignItems:"center",children:[t&&(0,o.tZ)(c.gq,{bg:"glass-inverted-medium",justifyContent:"center",alignItems:"center",radius:"sm",paddingY:6,paddingX:8,className:s.Z.verticalMenuLabel,style:{opacity:+!!r},children:(0,o.tZ)(i.xv.B4,{color:"white",children:t})}),(0,o.tZ)("div",{onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:n})]})}},46914:function(e,t,n){n.d(t,{z:()=>r});var o=n(30396);function r(e){let t=(0,o.sO)(e);return t.current=e,(0,o.Ye)(()=>function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.current(...n)},[])}},70717:function(e,t,n){n.d(t,{w:()=>c});var o=n(16584),r=n(19081),a=n(58175),u=n(84864);let c=e=>{let{duration:t,icon:n,position:c="bottom-left",previewDuration:i}=e;return(0,o.BX)(r.gq,{alignItems:"center",bg:"glass-inverted-medium",gap:6,paddingX:8,paddingY:2,position:"absolute",radius:"sm",style:"bottom-left"===c?{left:8,bottom:8}:{right:8,bottom:8},children:[n,(0,o.tZ)(a.xv.Meta,{color:"white",lineHeight:20,children:i?"".concat((0,u.secondsToHHMMSS)(i)," / ").concat((0,u.secondsToHHMMSS)(null!=t?t:0)):(0,u.secondsToHHMMSS)(null!=t?t:0)})]})}},19834:function(e,t,n){n.d(t,{Z:()=>a});var o=n(86492),r=n.n(o);function a(e){let{only_non_ascii:t=!1,useNamedReferences:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?r().encode(e||"",{useNamedReferences:n,decimal:!0,allowUnsafeSymbols:t}):e}},86551:function(e,t,n){n.d(t,{BN:()=>B,F2:()=>x,Fp:()=>I,HQ:()=>w,Lb:()=>v,S_:()=>R,T6:()=>N,U0:()=>S,Ui:()=>H,aZ:()=>U,op:()=>T,pw:()=>L,sj:()=>C,tX:()=>E});var o=n(58865),r=n(60826),a=n(68833),u=n(60308),c=n(63651),i=n(84864),s=n(47929),l=n(68303),d=n(39947);function f(){let e=(0,o._)(["Start writing today. Use the button below to create a Substack of your own"]);return f=function(){return e},e}function p(){let e=(0,o._)(["Share ",""]);return p=function(){return e},e}function m(){let e=(0,o._)(["Get ","% off a group subscription"]);return m=function(){return e},e}function h(){let e=(0,o._)(["Get a group subscription"]);return h=function(){return e},e}function b(){let e=(0,o._)(["Give a gift subscription"]);return b=function(){return e},e}function g(){let e=(0,o._)(["","! Subscribe for free to receive new posts and support my work."]);return g=function(){return e},e}function _(){let e=(0,o._)(["",". To receive new posts and support my work, consider becoming a free or paid subscriber."]);return _=function(){return e},e}function y(){let e=(0,o._)(["","! This post is public so feel free to share it."]);return y=function(){return e},e}let S=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let a={url:"".concat(r.W.CHECKOUT_URL,"&donate=true"),text:o("Donate Subscriptions")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(a))),!0},v=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let a={url:"".concat(r.W.LEADERBOARD_URL,"&utm_source=").concat(s.b3.post),text:o("Refer a friend")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(a))),!0},w=e=>{let{writerReferralCode:t,publication:n,postId:o}=e;return(e,r)=>{let{iString:a,iTemplate:c}=I18N.i({pub:n});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!e.schema.nodes.captionedWriterReferralButton)return console.error("captionedWriterReferralButton node type not found in schema"),!1;if(!e.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let i=c(f()),p={url:"".concat((0,u.Fnz)(t||""),"?utm_source=").concat(s.b3.substack,"&utm_context=").concat(s.gD.post,"&utm_content=").concat(o,"&utm_campaign=").concat(s.VX.writerReferralButton),text:a("Start a Substack")},m=e.schema.nodes.captionedWriterReferralButton.create(p,e.schema.nodes.ctaCaption.create(null,[e.schema.text(i)]));return r&&r((0,l.o4)(e,m)),!0}},C=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let a={url:r.W.HALF_MAGIC_COMMENTS_URL,text:o("Leave a comment")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(a))),!0},x=(e,t,n)=>(o,r)=>{if((0,a.j)(a.FP.READER_SURVEY_LINKED_IN_POST,{editorVersion:"1",surveyId:t.id}),!o.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(o,o.schema.nodes.button))return!1;let u={url:"".concat((0,c.h8g)(e,t.id)),text:n};return r&&r((0,l.o4)(o,o.schema.nodes.button.create(u))),!0},B=e=>(t,n)=>{let{iString:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let a={url:r.W.SHARE_URL,text:o("Share")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(a))),!0},R=e=>(t,n)=>{let{iTemplate:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let a={url:r.W.SHARE_PUB_URL,text:o(p(),e.name)};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(a))),!0},L=e=>{let{couponPub:t,scrollParent:n,parentClass:o,get_coupons:r,insert_coupon:a,SelectField:c,openPrompt:i,closePrompt:s,getNetworkErrorMessage:l}=e;return(e,f,p)=>{let{iString:m}=I18N.i({pub:t});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let h={parentClass:o,root:n?document.querySelector(".".concat(n)):p.dom.parentNode,scrollParent:n,offsetTop:10},b=Object.assign({title:m("Loading..."),no_buttons:!0,language:t.language},h);return i(b),r().then(n=>{s(b);let o=n.map(e=>{var t;return{label:null!==(t=e.name)&&void 0!==t?t:"",value:e}}).concat([{label:m("Create new offer"),value:{create_new:!0}}]),r={coupon:new c({label:m("Select offer..."),required:!0,options:o,onChange:n=>{if(n&&"create_new"in n&&n.create_new){s(l);let n=window.open("".concat((0,u.SVA)(t),"/publish/offers/new?popup=true"),"_blank");n&&n.addEventListener&&n.addEventListener("message",t=>{let{data:n}=t;n&&n.coupon&&a({coupon:n.coupon,state:e,dispatch:f,schema:e.schema})},!1)}}})},l=Object.assign({title:m("Special Offer"),fields:r,language:null==t?void 0:t.language,onSubmit:t=>{let{coupon:n}=t;a({coupon:n,state:e,dispatch:p.dispatch,schema:e.schema})},onClose:()=>{p.focus()}},h);i(l)}).catch(e=>{s(b),alert(l(e))}),!1}},T=e=>{let{scrollParent:t,parentClass:n,TextField:o,openPrompt:r,publication:a}=e;return(e,u,c)=>{let{iString:i}=I18N.i({pub:a});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let s={parentClass:n,title:i("Create a button"),root:t?document.querySelector(".".concat(t)):c.dom.parentNode,scrollParent:t,offsetTop:10,language:null==a?void 0:a.language,fields:{text:new o({label:i("Enter text..."),required:!0,clean:e=>(e||"").trim(),validate:e=>{if(e.length>40)return i("Too long")}}),href:new o({label:i("Enter URL..."),required:!0,clean:e=>(e||"").trim(),validate:e=>{if(!/^%%.*%%$/.test(e)){try{let t=new URL(e);if(["http:","https:","mailto:"].includes(t.protocol))return}catch(e){console.error("Failed to parse URL:",e)}return i("Invalid URL")}}})}};return s.onSubmit=t=>{let n={url:t.href,text:t.text};if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;u&&c.dispatch((0,l.o4)(e,e.schema.nodes.button.create(n)))},s.onClose=()=>{c.focus()},r(s),!0}},I=e=>{let{publication:t}=e;return(e,n)=>{let{iTemplate:o}=I18N.i({pub:t});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let a=t.default_group_coupon,u={url:"".concat(r.W.CHECKOUT_URL,"group=true").concat(a?"&coupon=".concat(a):""),text:(0,i.getSubscriptionSentenceWithCustomWords)(t,()=>{var e;return a&&t.default_group_coupon_percent_off?o(m(),null!==(e=t.default_group_coupon_percent_off.split(".")[0])&&void 0!==e?e:""):o(h())},e=>a&&t.default_group_coupon_percent_off?"Get ".concat(t.default_group_coupon_percent_off.split(".")[0],"% off a group ").concat(e.subscription):"Get a group ".concat(e.subscription))};return n&&n((0,l.o4)(e,e.schema.nodes.button.create(u))),!0}},U=e=>(t,n)=>{let{iTemplate:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let a={url:"".concat(r.W.CHECKOUT_URL,"&gift=true"),text:(0,i.getSubscriptionSentenceWithCustomWords)(e,()=>o(b()),e=>"Give a gift ".concat(e.subscription))};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(a))),!0},E=e=>(t,n)=>{if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o={url:r.W.CHECKOUT_URL,text:(0,i.getSubscribeText)(e,{now:!0}),language:e.language};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(o))),!0},H=e=>(t,n)=>{let{iTemplate:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!t.schema.nodes.subscribeWidget)return console.error("subscribeWidget node type not found in schema"),!1;if(!t.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let a="enabled"!==e.payments_state?o(g(),e.author_name===e.name?"Thanks for reading":"Thanks for reading ".concat(e.name)):o(_(),e.author_name===e.name?"This Substack is reader-supported":"".concat(e.name," is a reader-supported publication")),u={url:r.W.CHECKOUT_URL,text:(0,i.getSubscribeText)(e),language:e.language},c=t.schema.nodes.subscribeWidget.create(u,[t.schema.nodes.ctaCaption.create(null,[t.schema.text(a)])]);return n&&n((0,l.o4)(t,c)),!0},N=e=>(t,n)=>{let{iString:o,iTemplate:a}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!t.schema.nodes.captionedShareButton)return console.error("captionedShareButton node type not found in schema"),!1;if(!t.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let u=a(y(),e.author_name===e.name?"Thanks for reading":"Thanks for reading ".concat(e.name)),c={url:r.W.SHARE_URL,text:o("Share")},i=t.schema.nodes.captionedShareButton.create(c,t.schema.nodes.ctaCaption.create(null,[t.schema.text(u)]));return n&&n((0,l.o4)(t,i)),!0}},57208:function(e,t,n){n.d(t,{f2:()=>a});var o=n(68303);let r=e=>!(0,o.DY)(e.doc.toJSON(),e=>"paywall"===e.type),a=e=>(t,n)=>{if(!r(t))return!1;let{schema:o,tr:a}=t,c=o.nodes.paywall.create();return 1===a.selection.anchor?u(e)(t,n):(a.insert(a.selection.anchor,c),n&&(n(a),e()),!0)},u=e=>(t,n)=>{if(!r(t))return!1;let{schema:o,tr:a}=t,u=o.nodes.paywall.create(),c=0,i=0;for(;c<10&&i<3;){let e=t.doc.resolve(c).nodeAfter;if(!e)break;c+=e.nodeSize,i++}return a.insert(c,u),n&&(n(a),e()),!0}}}]);