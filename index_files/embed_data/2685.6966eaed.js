"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2685"],{347:function(t,e,n){n.d(e,{h:()=>l});var o=n(16584);n(98661);var i=n(4615),s=n(4291);function l(t){let{children:e}=t;return(0,o.tZ)(i.f6,{theme:s.Z.pubTheme,children:e})}},93666:function(t,e,n){n.d(e,{Z:()=>u,p:()=>m});var o=n(27412),i=n(7409),s=n(99282),l=n(16584),r=n(6400),a=n(94184),p=n.n(a),c=n(71375),h=n(98914),d=n(15771);class u extends r.Component{componentDidMount(){document.addEventListener("keydown",this.onDocumentKeyDown),this.props.openByDefault&&this.openImmediately()}componentWillUnmount(){document.removeEventListener("keydown",this.onDocumentKeyDown),this._timeout&&clearTimeout(this._timeout)}openImmediately(t){t&&(this._callback=t);let e=document.getElementsByTagName("html")[0];e&&!(0,h.pv)(e,"modal-in")&&(0,h.cn)(e,"modal-in"),this.setState({display:!0,open:!0})}async open(t){t&&(this._callback=t);let e=document.getElementsByTagName("html")[0];e&&!(0,h.pv)(e,"modal-in")&&(0,h.cn)(e,"modal-in"),this.onBeforeOpen(),this.props.onBeforeOpen&&this.props.onBeforeOpen(),await new Promise(t=>{this.setState({display:!0},()=>{this._timeout&&clearTimeout(this._timeout);let e=setTimeout(()=>{this.setState({open:!0},()=>{this.onOpen(),this.props.onOpen&&this.props.onOpen(),t()})},50);this._timeout=e})})}async close(t){this.isOpen()&&!1!==this.onBeforeClose(t)&&(!this.props.onBeforeClose||!1!==this.props.onBeforeClose(t))&&((0,h.IV)(document.getElementsByTagName("html")[0],"modal-in"),await new Promise(e=>{this.setState({open:!1},()=>{let n=setTimeout(()=>{this.setState({display:!1},()=>{this.onClose(t),this.props.onClose&&this.props.onClose(t),this._callback&&this._callback(t),e()})},750);this._timeout=n})}))}isOpen(){return this.state.open}onClickOuter(t){var e,n;t.stopPropagation(),null===(e=(n=this.props).onClick)||void 0===e||e.call(n,t),!this.props.noExit&&!this.props.noExitOnClick&&this.popup&&(this.noFullscreen||window.innerWidth>540)&&t.target&&this.container&&this.close()}onClickInner(t){var e,n;t.stopPropagation(),null===(e=(n=this.props).onClick)||void 0===e||e.call(n,t)}render(t,e){let n=this.state.open?"in":"out",o=!1===this.state.display?"gone":"",r="structured"===this.props.variant,a=!this.state.open;return(0,l.tZ)("div",{className:p()("modal typography",n,o,this.props.className,this.getClassName(),{"has-close-pill":this.props.closePill,"structured-modal":r,popup:this.popup}),inert:a,onClick:t=>this.onClickOuter(t),"data-testid":this.props.testID,role:"dialog",style:this.props.zIndex?{zIndex:this.props.zIndex}:{},children:(0,l.tZ)("div",{className:"modal-table",children:(0,l.tZ)("div",{className:"modal-row",children:(0,l.tZ)("div",{ref:this.assignContent,className:p()("modal-cell modal-content",{"no-fullscreen":this.noFullscreen}),children:(0,l.BX)("div",(0,s._)((0,i._)({className:p()({container:!r}),ref:this.assignContainer,onClick:t=>this.onClickInner(t)},this.props.trackInputsID&&{"data-track-inputs":this.props.trackInputsID}),{children:[!this.props.noExit&&(!this.props.noCloseButton||(0,h.K1)())&&(r?(0,l.tZ)("div",{className:"structured-modal__close-button",children:(0,l.tZ)(d.hU,{"data-testid":"close-modal",priority:"tertiary",onClick:()=>this.close(),children:(0,l.tZ)(c.Z,{size:20,color:"secondary"})})}):(0,l.tZ)(d.hU,{"data-testid":"close-modal",priority:"tertiary",className:p()("modal-btn modal-exit-btn no-margin",{"button btn btn-secondary btn-pill icon-only":this.props.closePill}),onClick:()=>this.close(),children:(0,l.tZ)(c.Z,{size:20,color:"secondary"})})),r?(0,l.BX)("div",{className:"structured-modal__wrapper",children:[(0,l.tZ)("div",{className:"structured-modal__header",children:this.props.modalTitle?(0,l.tZ)("h3",{children:this.props.modalTitle}):(0,l.tZ)("h3",{children:"\xa0"})}),(0,l.tZ)("div",{className:"structured-modal__body",children:(0,l.tZ)("div",{className:"container",children:this.renderChildren(this.props,this.state)})}),this.props.modalFooter&&(0,l.tZ)("div",{className:"structured-modal__footer",children:this.props.modalFooter})]}):this.renderChildren(this.props,this.state)]}))})})})})}getClassName(){}onBeforeOpen(){}onOpen(t){}onBeforeClose(t){}onClose(t){}renderChildren(t,e){let{children:n}=t;return n}constructor(t,e){super(t,e),(0,o._)(this,"popup",void 0),(0,o._)(this,"_timeout",void 0),(0,o._)(this,"_callback",void 0),(0,o._)(this,"content",void 0),(0,o._)(this,"container",void 0),(0,o._)(this,"assignContent",t=>{this.content=t}),(0,o._)(this,"assignContainer",t=>{this.container=t}),(0,o._)(this,"noFullscreen",void 0),(0,o._)(this,"state",void 0),(0,o._)(this,"onDocumentKeyDown",t=>{"Escape"!==t.key||this.props.noExit||(0,h.$Z)(this.base)||this.close()}),this.open=this.open.bind(this),this.close=this.close.bind(this),this.popup=!1,this.state={open:!1,display:!1,callback:null}}}class m extends u{constructor(t,e){super(t,e),this.popup=!0}}},28771:function(t,e,n){n.d(e,{M$:()=>l}),n(16584);var o=n(6400),i=n(30396);n(94184),n(1852),n(71068),n(70379),n(7149);let s=(0,o.createContext)({initialTab:"settings",isDrawerOpen:()=>!1,openDrawerId:null,setInitialTab:()=>void 0,setIsDrawerOpen:()=>void 0,setPreventChange:()=>void 0});function l(){return(0,i.qp)(s)}},88e3:function(t,e,n){n.d(e,{Q:()=>d,l:()=>u});var o=n(16584),i=n(19425),s=n(12048),l=n(94184),r=n.n(l),a=n(98661),p=n(71068),c=n(91400),h=n(68742);let d=t=>{let{children:e}=t;return(0,o.tZ)(i.u.Child,{as:a.Fragment,enter:h.Z.panelEnter,enterFrom:h.Z.panelEnterFrom,enterTo:h.Z.panelEnterTo,leave:h.Z.panelLeave,leaveFrom:h.Z.panelLeaveFrom,leaveTo:h.Z.panelLeaveTo,children:e})},u=(0,a.forwardRef)((t,e)=>{let{children:n,className:i,position:l="default",fullscreenMobile:a,maxFullscreenMobile:d,width:u=440,overflow:m}=t,y=(0,c.XA)();return(0,o.tZ)(s.V.Panel,{ref:e,className:r()(i,(0,p.oB)({display:"flex",radius:"lg"}),h.Z.panel,h.Z["position-".concat(l)],a&&h.Z.fullscreenMobile,y&&a&&h.Z.fullscreenMobileHeight,y&&d&&h.Z.maxFullscreenMobile),style:{width:y||"full"===l?void 0:u,overflow:m},children:n})})},62092:function(t,e,n){function o(t){let{fragment:e}=t;return"content"in e?e.content:[]}function i(t){let{fragment:e,content:n}=t;e.content=n}function s(t){return"type"in t&&"object"==typeof t.type}function l(t){return"type"in t&&"string"==typeof t.type}n.d(e,{PH:()=>s,f5:()=>l,uR:()=>i,yX:()=>o})},22498:function(t,e,n){n.d(e,{aT:()=>r,cb:()=>s,je:()=>i});var o=n(62092);function i(t,e){let{nodeTypes:n,reverse:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(t,e,{nodeTypes:n,reverse:o})}function s(t,e){let{nodeTypes:n,reverse:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l(t,e,{nodeTypes:n,reverse:o})}function l(t,e){var n;let{nodeTypes:i,reverse:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!t)return;i&&!Array.isArray(i)&&(i=[i]);let p=!1;if("type"in t&&t.type&&(i?"string"==typeof t.type&&i.includes(t.type)?p=!0:"string"!=typeof t.type&&"name"in t.type&&i.includes(t.type.name)&&(p=!0):p=!0),"type"in t&&p){let n=e(t,a);if(!1===n||n===r)return n}let c=[];if((0,o.f5)(t))Array.isArray(t.content)&&(c=t.content);else if((null===(n=t.content)||void 0===n?void 0:n.childCount)&&t.content.childCount>0)for(let e=0;e<t.content.childCount;e++)c.push(t.content.child(e));for(let n of(s&&(c=c.reverse()),c))if(l(n,e,{nodeTypes:i,reverse:s},t)===r)return r}let r=Symbol("done")}}]);