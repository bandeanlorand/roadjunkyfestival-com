"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["5208"],{87900:function(e,t,n){n.d(t,{Z:()=>h});var i=n(7409),o=n(99282),r=n(16584),a=n(6400),l=n(68833),s=n(59176),c=n(98914),u=n(60308),d=n(26111);let m="domain-redirect-time";class h extends a.Component{componentDidMount(){let e=this.loadedWithLikelyLoggedInParam()?"param":null;e&&!this.shouldBlockLoginRedirect()?this.attemptLoginRedirect({source:e}):this.useIframe()&&window.addEventListener("message",e=>this.handleFrameMessage(e)),(0,c.iO)("triedSigningIn")}shouldBlockLoginRedirect(){var e;let t=parseInt((0,s.mM)(m,0));return this.state.block_auto_login||!(null===(e=this.state.pub)||void 0===e?void 0:e.custom_domain)||this.state.user||"undefined"==typeof window||Date.now()-t<=864e5||this.state.triedSigningIn}handleFrameMessage(e){var t,n,i;if((null===(t=e.data)||void 0===t?void 0:t.type)!=="frame-state")return;let o=!this.shouldBlockLoginRedirect()&&(null===(n=e.data)||void 0===n?void 0:n.loggedInAtSubstack);(0,l.j)(l.FP.FRAME_MESSAGE_HANDLED,{loggedInAtSubstack:null===(i=e.data)||void 0===i?void 0:i.loggedInAtSubstack,loggedInAtCustomDomain:!!this.state.user,attemptRedirect:o}),o&&this.attemptLoginRedirect({source:"cookie"})}attemptLoginRedirect(){var e;let{source:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.j)(l.FP.CUSTOM_DOMAIN_LOGIN_REDIRECT_ATTEMPTED,{fromParam:"param"===t,source:t}),(0,s.ex)(m,"".concat(Date.now()));let n=(0,u.YZ5)({useOriginalUrl:!0});this.props.initialData.hide_intro_popup&&(n=(0,u.rhs)(n,{hide_intro_popup:!0})),location.href=(0,u.uXE)({for_pub:null===(e=this.state.pub)||void 0===e?void 0:e.subdomain,justTrying:!0,redirect:n})}loadedWithLikelyLoggedInParam(){return"undefined"!=typeof window&&window._preloads.original_url&&!!(0,d.x)(window._preloads.original_url,"lli")}useIframe(){var e,t,n;return!("undefined"==typeof window||this.loadedWithLikelyLoggedInParam()||!(null===(e=this.state.pub)||void 0===e?void 0:e.custom_domain)||(0,u.fF3)(null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.href))}render(){return this.useIframe()?(0,r.tZ)("iframe",{src:"".concat((0,u.ZJn)(),"/channel-frame"),className:"channel-frame",width:"0",height:"0"}):null}constructor(e,t){super(e,t),this.state=(0,o._)((0,i._)({},e.initialData),{triedSigningIn:(0,d.x)("triedSigningIn")})}}},85095:function(e,t,n){n.d(t,{Un:()=>u,am:()=>c});var i=n(16584),o=n(98661),r=n(60807),a=n(48980),l=n(40121);let s=(0,o.createContext)({viewerProfile:{profile:null,loading:!1},setViewerProfile:()=>void 0,profiles:new Map,setProfile:()=>void 0});function c(e){let{value:t,handle:n,children:r}=e,[a,l]=(0,o.useState)({profile:null,loading:!1}),[c,u]=(0,o.useState)(new Map(t?[[n||t.id,{profile:t,loading:!1}]]:[])),d={viewerProfile:a,setViewerProfile:(0,o.useCallback)((e,t)=>{l(n=>n.profile===e&&n.loading===t?n:{profile:e,loading:t})},[]),profiles:c,setProfile:(0,o.useCallback)((e,t,n)=>{u(i=>{var o,r;if((null===(o=i.get(e))||void 0===o?void 0:o.profile)===t&&(null===(r=i.get(e))||void 0===r?void 0:r.loading)===n)return i;let a=new Map(i);return a.set(e,{profile:t,loading:n}),a})},[])};return(0,i.tZ)(s.Provider,{value:d,children:r})}function u(){let{subjectId:e,subjectName:t,delayLoading:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,r.aF)(),{viewerProfile:c,setViewerProfile:u,profiles:d,setProfile:m}=(0,o.useContext)(s),[h,g]=(0,o.useState)(null);if("string"==typeof e){if(e.includes("-")){let n=e.split("-");e=n[0],t=n.slice(1).join("-")}else e.startsWith("@")&&(e=e.slice(1))}let f=e?d.get(e):null,p=(0,o.useCallback)(async e=>{u(c.profile,!0);let t=(0,l.Hm)(e.name,{hashIfEmpty:!0});try{let n=await (0,a.rd)("/api/v1/user/".concat(e.id,"-").concat(t,"/public_profile/self"));u(n,!1)}catch(e){e instanceof Error&&g(e),u(null,!1)}},[c,u,g]),_=null==f?void 0:f.profile,v=c.profile,w=(0,o.useCallback)(async e=>{!v&&i&&p(i),m(e,_,!0);try{let n=t&&(0,l.Hm)(t,{hashIfEmpty:!0}),i=await (n?(0,a.rd)("/api/v1/user/".concat(e,"-").concat(n,"/public_profile")):(0,a.rd)("/api/v1/user/".concat(e,"/public_profile")));m(e,i,!1)}catch(t){t instanceof Error&&g(t),m(e,_,!1)}},[_,m,t,v,p,i]);return(0,o.useEffect)(()=>{n||(null==f?void 0:f.profile)||(null==f?void 0:f.loading)||h||!e||w(e),n||c.loading||c.profile||h||!i||p(i)},[n,e,w,f,h,c,p,i]),{loading:!!(null==f?void 0:f.loading),viewerProfile:c.profile,subjectProfile:null==f?void 0:f.profile,refetch:w,error:h}}s.displayName="ProfileContext"},44471:function(e,t,n){n.d(t,{m$:()=>g});var i,o,r=n(7409),a=n(99282),l=n(16584),s=n(6400);n(98661);var c=n(30396),u=n(48980);let d="undefined"!=typeof window&&null!==(o=null===(i=window._preloads)||void 0===i?void 0:i.publicationUserSettings)&&void 0!==o?o:{},m=e=>({getSettingForPubUser:t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}),h=(0,s.createContext)((0,a._)((0,r._)({},m(d)),{changeUserSetting:()=>Promise.resolve(void 0)}));function g(e){let{preloadPubUserSettings:t={},children:n}=e,[i,o]=(0,c.eJ)(t),s=(0,c.I4)(async(e,t)=>{o(n=>(0,a._)((0,r._)({},n),{[e]:t}));try{await (0,u.rd)("/api/v1/publication_user_settings/user",{method:"PUT",json:{type:e,value:t}})}catch(e){console.error(e)}},[o]),d=(0,c.Ye)(()=>(0,a._)((0,r._)({},m(i)),{changeUserSetting:s}),[i,s]);return(0,l.tZ)(h.Provider,{value:d,children:n})}h.displayName="PublicationUserSettingsContext"},49762:function(e,t,n){n.d(t,{SiteConfigGate:()=>l,default:()=>a,getConfigFor:()=>r});var i=n(16584),o=n(40647);function r(e){var t;if(!e||"undefined"==typeof window||!(null===(t=window._preloads)||void 0===t?void 0:t.siteConfigs))return null;let n=window._preloads.siteConfigs[e];return void 0===n?null:n}let a=r;function l(e){let{configKey:t,children:n,value:r=!0}=e;return(0,o.xR)().getConfigFor(t)==r?(0,i.tZ)(i.HY,{children:n}):null}},98248:function(e,t,n){n.d(t,{$j:()=>m,Hl:()=>g,jv:()=>h});var i=n(7409),o=n(99282),r=n(98848),a=n(16584),l=n(94184),s=n.n(l);n(98661),n(71068);var c=n(19081),u=n(49391);let d={14:2,20:2.5,24:2,32:1.5,40:1.25},m=e=>{var{size:t=24,theme:n="default",className:l}=e,m=(0,r._)(e,["size","theme","className"]);let h=d[t]||2;return(0,a.tZ)(c.hs,(0,o._)((0,i._)({padding:16,className:s()(u.Z.spinner,u.Z["theme_".concat(n)],l)},m),{children:(0,a.BX)("svg",{width:t,height:t,viewBox:"0 0 24 24","vector-effect":"non-scaling-stroke",children:[(0,a.tZ)("circle",{className:u.Z.bg,cx:12,cy:12,r:11,strokeWidth:h,fill:"none",stroke:"var(--color-utility-detail)"}),(0,a.tZ)("circle",{className:u.Z.fg,cx:12,cy:12,r:11,strokeWidth:h,fill:"none"})]})}))},h=e=>{var{size:t=24,theme:n="default",className:l}=e,d=(0,r._)(e,["size","theme","className"]);let m=Array.from({length:10},(e,t)=>"".concat(36*t," 12 12")).join(";");return(0,a.tZ)(c.hs,(0,o._)((0,i._)({padding:16,className:s()(u.Z.thinker,u.Z["theme_".concat(n)],l)},d),{children:(0,a.tZ)("svg",{width:t,height:t,viewBox:"0 0 24 24",children:(0,a.BX)("g",{children:[Array.from({length:10}).map((e,t)=>(0,a.tZ)("rect",{x:"11",y:"1",width:2,height:6,rx:"1",ry:"1",opacity:(t+1)/10,transform:"rotate(".concat(36*t," 12 12)")},t)),(0,a.tZ)("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"discrete",dur:"0.5s",values:m,repeatCount:"indefinite"})]})})}))},g=e=>{var{size:t=24,theme:n="default",className:l,percent:m}=e,h=(0,r._)(e,["size","theme","className","percent"]);let g=d[t]||2;return(0,a.tZ)(c.hs,(0,o._)((0,i._)({padding:16,className:s()(u.Z.radialProgress,u.Z["theme_".concat(n)],l),style:{"--percent":"".concat(m)}},h),{children:(0,a.BX)("svg",{width:t,height:t,viewBox:"0 0 24 24","vector-effect":"non-scaling-stroke",children:[(0,a.tZ)("circle",{className:u.Z.bg,cx:12,cy:12,r:11,strokeWidth:g,fill:"none",stroke:"var(--color-utility-detail)"}),(0,a.tZ)("circle",{className:u.Z.fg,cx:12,cy:12,r:11,strokeWidth:g,fill:"none"})]})}))}},58175:function(e,t,n){n.d(t,{et:()=>k,hh:()=>M,xv:()=>g});var i=n(7409),o=n(99282),r=n(98848),a=n(16584),l=n(94184),s=n.n(l),c=n(98661),u=n(95441),d=n(5435),m=n(71068),h=n(23648);let g=e=>{var{className:t,align:n,size:l,weight:c,transform:g}=e,f=(0,r._)(e,["className","align","size","weight","transform"]);f=(0,o._)((0,i._)({},f),{textAlign:null!=n?n:f.textAlign,textTransform:null!=g?g:f.textTransform,fontSize:null!=l?l:f.fontSize,fontWeight:null!=c?c:f.fontWeight});let{iString:p,language:_}=(0,u.M1)(),v=f.children;if(f.translated&&"en"!==_){let e=[],t=[],n=(0,d.Fb)(f.children,e,t),i=p(n,...t);if(i&&i!==n)try{v=(0,d.rl)(i,e)}catch(e){console.log("Could not translate ".concat(n),e)}}return(0,a.tZ)(m.xu,(0,o._)((0,i._)({className:s()(h.Z.reset,t)},f),{children:v}))};function f(e){var{className:t,displayName:n}=e,l=(0,r._)(e,["className","displayName"]);let u=(0,c.forwardRef)((e,n)=>{var{className:c}=e,u=(0,r._)(e,["className"]);return(0,a.tZ)(g,(0,o._)((0,i._)({},l,u),{ref:n,className:s()(t,c)}))});return u.displayName=n,u}let p=f({as:"h1",font:"display",size:36,weight:"bold",lineHeight:44}),_=f({as:"h2",font:"display",size:30,lineHeight:36,weight:"bold"}),v=f({as:"h3",font:"display",size:24,lineHeight:28,weight:"bold"}),w=f({as:"h4",font:"display",size:20,lineHeight:24,weight:"bold"}),b=f({font:"text",size:19,lineHeight:26,weight:"regular"}),y=f({font:"text",fontSize:17,lineHeight:24,fontWeight:"regular"}),k={font:"text",fontSize:15,lineHeight:20,fontWeight:"regular"},Z=f(k),x=f({font:"text",fontSize:13,lineHeight:20,fontWeight:"regular"}),N=f({font:"text",size:11,lineHeight:20,weight:"regular"}),S=f((0,o._)((0,i._)({},{font:"meta",fontSize:11,lineHeight:20,fontWeight:"medium",textTransform:"uppercase",color:"secondary"}),{className:h.Z.meta})),H=f({font:"digit",size:12,lineHeight:20,weight:"bold",transform:"uppercase",className:h.Z.digit}),C=f({font:"serif",size:19,lineHeight:30,weight:"regular",className:h.Z.serif}),M=f({as:"a",decoration:"hover-underline"});f({as:"span"});let I=f({font:"text",color:"primary",className:h.Z.marketingBody}),z=f({as:"h1",weight:"regular",className:h.Z.marketingHeading1}),P=f({as:"h2",weight:"medium",className:h.Z.marketingHeading2}),L=f({as:"h3",weight:"medium",className:h.Z.marketingHeading3}),E=f({as:"h4",weight:"medium",className:h.Z.marketingHeading4}),W=f({as:"h5",weight:"bold",className:h.Z.marketingHeading5}),j=f({as:"h4",weight:"regular",textAlign:"center",className:h.Z.marketingQuote}),A=f({as:"h4",size:30,weight:"regular",className:h.Z.marketingSubtitle});g.H1=p,g.H2=_,g.H3=v,g.H4=w,g.B1=b,g.B2=y,g.B3=Z,g.B4=x,g.B5=N,g.Meta=S,g.Digit=H,g.Serif=C,g.MarketingBody=I,g.MarketingHeading1=z,g.MarketingHeading2=P,g.MarketingHeading3=L,g.MarketingHeading4=E,g.MarketingHeading5=W,g.MarketingQuote=j,g.MarketingSubtitle=A},55722:function(e,t,n){n.d(t,{o:()=>d});var i=n(7409),o=n(99282),r=n(16584),a=n(47907),l=n(30302);let s={sm:16,md:20,lg:24},c={100:l.Z,1e3:a.Z,1e4:a.Z},u={1e4:{fill:"var(--color-accent-fg-purple)"}},d=e=>{let{tier:t,size:n="sm"}=e;if(!t)return null;let a=c[t.toString()],l=u[t.toString()],d=s[n];return(0,r.tZ)(a,(0,o._)((0,i._)({},l),{height:d}))}},73943:function(e,t,n){n.d(t,{u:()=>a,us:()=>r,vn:()=>i});let i={test1:"SubstackInc",badnews:"ryangrim",dmortberg:"danielortberg",offthechain:"APompliano",on:"SubstackInc",petition:"petition",popularinformation:"JuddLegum",shane:"shanesnow",signalproblems:"A_W_Gordon",sinocism:"niubi",taibbi:"mtaibbi",thefirstand15th:"tressiemcphd",thenewsletter:"jbouie",numlock:"WaltHickey"};var o,r=((o={}).comments_disabled="comments_disabled",o.free_subscription_required="free_subscription_required",o.paid_subscription_required="paid_subscription_required",o.founding_subscription_required="founding_subscription_required",o);let a=600},31582:function(e,t,n){n.d(t,{$e:()=>i,vq:()=>o}),n(18029),n(98012),n(84864);let i=(e,t)=>{let n;if(t&&t!==e.currency){var i,o,r;if(!(null===(i=e.currency_options)||void 0===i?void 0:i[t]))return;n=null!==(r=null===(o=e.currency_options[t])||void 0===o?void 0:o.unit_amount)&&void 0!==r?r:null}else n="object"in e&&"price"===e.object?e.unit_amount:e.amount;return null!=n?n:0},o=(e,t)=>{var n;return t&&t!==e.currency?null===(n=e.metadata.minimum_local)||void 0===n?void 0:n[t]:e.metadata.minimum}},18967:function(e,t,n){n.d(t,{E4:()=>o,ML:()=>r});var i,o=((i={}).CompOneMonth="comp_one_month",i.CompThreeMonths="comp_three_months",i.CompSixMonths="comp_six_months",i.CompNineMonths="comp_nine_months",i.CompTwelveMonths="comp_twelve_months",i.Custom="custom",i);let r={comp_one_month:"1 month comp",comp_three_months:"3 month comp",comp_six_months:"6 month comp",comp_nine_months:"9 month comp",comp_twelve_months:"12 month comp",custom:"Custom"}},14773:function(e,t,n){n.d(t,{JD:()=>r,L4:()=>o,Q2:()=>h,SV:()=>u,T9:()=>i,Y$:()=>s,ZJ:()=>d,ZX:()=>m,n1:()=>c,pv:()=>l,tE:()=>a});let i="substack.com",o="https://substackcdn.com";function r(e){return"https://"+e}o.replace(/https?:\/\//,"").replace(/\/$/,"");let a=r(i),l=new URL(a);function s(e){return Object.keys(e).filter(t=>void 0!==e[t]&&null!==e[t]).map(t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))).join("&")}function c(e,t){if(!e)return"";if(!t)return e;let n=s(t),i=n?-1===e.indexOf("?")?"?":"&":"";return"".concat(e).concat(i).concat(n)}function u(e){let{forceSubdomain:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&"object"==typeof e&&"base_url"in e&&e.base_url&&!t?e.base_url:r(function(e){let{forceSubdomain:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"object"==typeof e&&"custom_domain"in e&&e.custom_domain&&!e.custom_domain_optional&&!t)return e.custom_domain;let n=i;return e&&"www"!==e.subdomain&&(n="".concat(e.subdomain,".").concat(n)),n}(e,{forceSubdomain:t}))}function d(){return u()}function m(){return r("open.".concat(i))}function h(e){let{noBase:t,urlParams:n,pub:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t?"":u(i);return c("".concat(o).concat(e),n)}},70408:function(e,t,n){n.d(t,{I4:()=>l,SM:()=>r,YL:()=>s,ln:()=>a,zU:()=>c});var i=n(14773),o=n(63651);function r(e,t){let n=a(e,t);return n||c}function a(e){let{preferAuthorPhoto:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t&&(null==e?void 0:e.author_photo_url)&&(0,o.zF4)(e.author_photo_url)?(0,o.zF4)(e.author_photo_url):(null==e?void 0:e.photo_url)&&(0,o.zF4)(e.photo_url)?(0,o.zF4)(e.photo_url):(null==e?void 0:e.id)!=null?l(e.id):null}function l(e){return"".concat((0,i.ZJ)(),"/img/avatars/").concat(["purple","yellow","orange","green","black"][e%5],".png")}function s(e){return e.startsWith("".concat((0,i.ZJ)(),"/img/avatars/"))}let c="".concat((0,i.ZJ)(),"/img/avatars/default-light.png");(0,i.ZJ)()}}]);