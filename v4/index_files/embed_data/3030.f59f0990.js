"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3030"],{15186:function(t,e,i){if(i.d(e,{Z:()=>g,j:()=>v}),2787!=i.j)var n=i(7409);if(2787!=i.j)var r=i(99282);var a=i(16584);if(2787!=i.j)var l=i(49550);var o=i(98661),s=i(95441),d=i(15771),c=i(80026),u=i(17172),h=i(45783),f=i(20346);function g(t){let{tabs:e,value:i,onChange:d,ariaLabel:g}=t,{iString:v}=(0,s.M1)(),Z=(0,o.useRef)(null),w=(0,o.useRef)(null),{props:b,hasOverflow:I}=(0,u.aZ)(Z),{state:x}=(0,h.eK)(Z),C=t=>{let e=w.current,i=Z.current;if(!i||!e||t<0)return;let n=i.getElementsByClassName(f.Z.segment)[t];if(!n)return;let r=n.getBoundingClientRect(),a=i.getBoundingClientRect(),l=parseInt(window.getComputedStyle(i).paddingLeft),o=r.left-a.left-l+i.scrollLeft;requestAnimationFrame(()=>{e.style.setProperty("--highlight-width","".concat(r.width,"px")),e.style.setProperty("--highlight-x","".concat(o,"px"))})},N=e.findIndex(t=>t.value===i);return(0,o.useLayoutEffect)(()=>{C(N)},[e,i,N]),(0,o.useEffect)(()=>{C(N)},[e,i,N]),(0,a.BX)(m,{children:[(0,a.tZ)(l.O.Group,{manual:!0,selectedIndex:-1===N?0:N,onChange:t=>{var i;let n=null===(i=e[t])||void 0===i?void 0:i.value;void 0!==n&&d(n)},children:(0,a.tZ)(l.O.List,(0,r._)((0,n._)({as:c.X2},b),{ref:Z,className:f.Z.container,position:"relative",cursor:I()?"grab":"default",gap:4,padding:4,radius:"sm",overflow:"auto",scrollBar:"hidden",outline:"detail","aria-label":null!=g?g:"".concat(v("Tabs")),children:()=>(0,a.BX)(a.HY,{children:[e.map((t,e)=>(0,a.tZ)(p,{tab:t,index:e,children:t.label},t.value)),(0,a.tZ)(y,{ref:w})]})}))}),(0,a.tZ)(h.R3,{direction:"left",isVisible:x.showLeft}),(0,a.tZ)(h.R3,{direction:"right",isVisible:x.showRight})]})}function p(t){let{tab:e,index:i,children:n}=t;return(0,a.tZ)(l.O,{as:o.Fragment,children:t=>{let{selected:r}=t;return(0,a.tZ)(d.zx,{className:f.Z.segment,leading:e.leadingIcon,trailing:e.trailingIcon,priority:r?"tertiary":"quaternary",size:"sm",children:n},i)}})}let m=(0,c.zo)({display:"flex",direction:"column",position:"relative",bg:"primary",radius:"sm",minWidth:0,overflow:"hidden"}),y=(0,c.zo)({position:"absolute",height:32,radius:"xs",bg:"secondary",sizing:"border-box",className:f.Z.highlight}),v=(0,c.zo)({display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24})},79075:function(t,e,i){i.r(e),i.d(e,{MiniNotificationsStack:()=>N,MiniNotificationsViewer:()=>C});var n=i(16584),r=i(30396),a=i(94184),l=i.n(a),o=i(78796),s=i(48493),d=i(95441),c=i(36518),u=i(42375),h=i(68833),f=i(15771),g=i(61254),p=i(19081),m=i(58175),y=i(74949),v=i(35449),Z=i(27744),w=i(65575),b=i(98012),I=i(63651),x=i(21694);function C(t){var e;let{resource:i,bellCount:a}=t,{iString:c}=(0,d.M1)(),{result:y,error:b}=i,C="".concat((0,I.SVA)(),"/activity"),[R,k]=(0,Z.d6)();(0,r.d4)(()=>{y&&k({type:"update_paused_notifications",payload:y.feedItemComments.filter(t=>t.isMuted)})},[y,k]);let z=null==y?void 0:null===(e=y.activityItems[0])||void 0===e?void 0:e.id;return(0,r.d4)(()=>{y&&(0,h.j)(h.FP.NOTIFICATIONS_DROPDOWN_VIEWED,{count:y.activityItems.length,bellCount:a})},[z]),(0,n.tZ)(u.$U,{surface:"mini-notifications-viewer",dispatch:k,state:R,children:(0,n.BX)(p.tu,{className:l()("notifications-root",x.Z.root),color:"primary",style:{width:"360px",maxHeight:"80vh"},children:[(0,n.BX)(p.hs,{padding:16,gap:8,alignItems:"center",children:[(0,n.tZ)(p.hs,{flex:"grow",children:(0,n.tZ)(m.xv.H3,{weight:"heavy",children:(0,n.tZ)(w.EU,{href:C,children:c("Activity")})})}),(0,n.tZ)(f.hU,{"aria-label":"Settings",size:"md",href:"".concat((0,I.SVA)(),"/settings"),priority:"tertiary",newTab:!0,children:(0,n.tZ)(o.Z,{size:20,"aria-hidden":!0})})]}),(0,n.tZ)(g.iz,{}),(0,n.tZ)(p.tu,{overflowY:"auto",children:b?"Error":y?y.activityItems.length>0?(0,n.tZ)(w.pe,{gap:0,children:(0,n.tZ)(N,{result:y})}):(0,n.tZ)(p.tu,{style:{minHeight:"240px"},paddingBottom:32,justifyContent:"center",children:(0,n.tZ)(w._Y,{icon:(0,n.tZ)(s.Z,{}),title:"You donâ€™t have any activity yet.",text:"Likes and replies will appear here."})}):(0,n.tZ)(v.f,{})}),(0,n.tZ)(p.X2,{borderTop:"detail",height:48,alignItems:"center",justifyContent:"center",children:(0,n.tZ)(f.zx,{priority:"tertiary",href:C,newTab:!0,localNavigation:!1,justifyContent:"center",children:"See all"})})]})})}function N(t){let{result:e,isReadOnly:i=!1}=t,a=(0,c.lR)(),l=(0,r.Ye)(()=>{var t;return null!==(t=a.lastViewedAt)&&void 0!==t?t:new Date(0).toISOString()},[]);(0,r.d4)(()=>{i||a.markAllAsRead()},[]);let o=(0,Z.I0)(),s=(0,Z.kc)(),d=(0,y.IC)(e);return(0,r.d4)(()=>{o({type:"comments_load",payload:{comments:(null==e?void 0:e.comments)||[]}})},[o,e]),(0,n.tZ)(n.HY,{children:e.activityItems.filter(t=>y.gG.has(t.type)).map((t,r)=>(0,n.tZ)(y.P_,{item:(0,y.Xn)({activityResult:e,activityResultMaps:d,feedState:s,item:t,idx:r}),isUnread:null==l||(0,b.Z)(l).isBefore(t.updated_at),readOnly:i},r))})}}}]);