"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3145"],{20392:function(t,e,i){i.d(e,{Z:()=>n});let n={container:"container-AejwGn",tab:"tab-FhVbMD",highlight:"highlight-rZ7aQJ"}},26522:function(t,e,i){i.d(e,{Y:()=>g,c:()=>Z});var n=i(16584),a=i(94184),o=i.n(a),s=i(19691),r=i(13723),l=i(57336),c=i(20888),d=i(90099),h=i(71068),p=i(19081),m=i(58175),u=i(71075);let Z=t=>{var e,i,a;let{disableLinks:d,isEditingCaption:Z,post:g,caption:v,onEditCaption:_,onSaveCaption:b,onCancelCaption:k}=t,{publishedBylines:f,title:C,canonical_url:N,post_date:x,section_name:y,cover_image:w,cover_image_alt:S}=g;return(0,n.BX)(p.tu,{children:[y&&(0,n.tZ)("a",{className:o()({[null!==(e=u.Z.disableLink)&&void 0!==e?e:""]:d}),href:N,rel:"noopener",target:"_blank",children:(0,n.tZ)(m.xv.Meta,{color:"pub-primary-text",paddingBottom:8,children:y})}),(0,n.tZ)("a",{className:o()({[null!==(i=u.Z.disableLink)&&void 0!==i?i:""]:d}),href:N,rel:"noopener",target:"_blank",children:(0,n.tZ)(m.xv.H2,{color:"pub-primary-text",children:C})}),(0,n.tZ)(l.h,{bylines:f,date:x,disableLinks:d}),w&&(0,n.tZ)(h.xu,{paddingTop:24,children:(0,n.tZ)("a",{className:o()({[null!==(a=u.Z.disableLink)&&void 0!==a?a:""]:d}),href:N,rel:"noopener",target:"_blank",children:(0,n.tZ)(c.e,{alt:null!=S?S:C,className:u.Z.fullWidth,imageProps:{height:Math.round(650),smartCrop:!0},maxWidth:1300,src:w})})}),(0,n.tZ)(p.hs,{flex:"grow",paddingTop:16,children:Z&&b&&k?(0,n.tZ)(s.Z,{initialCaption:v,onCancel:k,onSave:b}):(0,n.tZ)("p",{className:u.Z.caption,dangerouslySetInnerHTML:{__html:v},onClick:_||void 0})}),(0,n.tZ)(r.$,{disableLinks:d,href:N,includeUfi:!1,post:g})]})},g=t=>{let{post:e,children:i}=t,{publishedBylines:a,title:o,canonical_url:s,post_date:p,section_name:Z,cover_image:g,cover_image_alt:v}=e;return(0,n.BX)(d.i$,{children:[Z&&(0,n.tZ)("a",{href:s,children:(0,n.tZ)(m.xv.Meta,{color:"pub-primary-text",paddingBottom:8,children:Z})}),(0,n.tZ)("a",{href:s,children:(0,n.tZ)(m.xv.H2,{color:"pub-primary-text",children:o})}),(0,n.tZ)(l.I,{bylines:a,date:p}),g&&(0,n.tZ)(h.xu,{paddingTop:24,children:(0,n.tZ)("a",{href:s,children:(0,n.tZ)(c.e,{alt:null!=v?v:o,className:u.Z.fullWidth,imageProps:{height:Math.round(650),smartCrop:!0},maxWidth:1300,src:g})})}),(0,n.tZ)("a",{href:s,children:(0,n.tZ)(h.xu,{as:"p",children:i})}),(0,n.tZ)(r.c,{href:s})]})}},72708:function(t,e,i){i.d(e,{Z:()=>r});var n=i(7409),a=i(99282),o=i(16584),s=i(64515);let r=t=>(0,o.BX)(s.l,(0,a._)((0,n._)({},t),{name:"VoiceoverIcon",svgParams:{height:24,width:24,viewBox:"0 0 24 24"},fill:"none",children:[(0,o.tZ)("path",{d:"M11.8518 3.31518C12.2459 4.26329 13.551 7.10985 14.4542 8.3467C15.3764 9.60967 12.8285 9.95184 12 10.5",strokeWidth:"1.5",strokeLinecap:"round"}),(0,o.tZ)("path",{d:"M12 10.5C12 10.5 12.4662 11.2332 12.7627 11.7326C13.0592 12.232 13 12.5 11.5 13C10.7772 13.2409 9.5 13.5 9.5 13.5C10.3447 13.9272 12.2664 14.1393 12.4041 14.3167C12.763 14.779 12.3241 15.4618 11.8617 15.8208C11.3994 16.1797 12.0724 18.7353 10.5 19.5C8.9276 20.2647 5.70772 19.432 3 18",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.tZ)("path",{d:"M18.5 6.5L20.3544 4.8526",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.tZ)("path",{d:"M18.5 15.5L20.3544 17.2545",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.tZ)("path",{d:"M19.5 11.0326L22 11.0326",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}))},90311:function(t,e,i){i.d(e,{SP:()=>V,fB:()=>J,hp:()=>$});var n=i(27412),a=i(7409),o=i(99282),s=i(16584),r=i(6400),l=i(30396),c=i(94184),d=i.n(c),h=i(39693),p=i.n(h),m=i(26224),u=i(60826),Z=i(33112),g=i(39432),v=i(64579),_=i(21286),b=i(25265),k=i(21206),f=i(39929),C=i(54688),N=i(48917),x=i(94922),y=i(94442),w=i(85685),S=i(30329),M=i(95441),L=i(40647),B=i(90099),P=i(68833),W=i(7882),A=i(94874),X=i(24547),U=i(19081),I=i(58175),F=i(2009),T=i(98012),z=i(24791),R=i(31377),O=i(60308),E=i(33884),H=i(63651),D=i(84864),K=i(47929);class j extends r.Component{componentWillUnmount(){this.unmounted=!0}render(t){let{pub:e,post:i,showAuthor:n,showPhoto:r,fromPostPage:l}=t;return(0,y.F6)({pub:e,post:i,showAuthor:n,showPhoto:r})||(0,y.Cz)({pub:e,post:i,showAuthor:n})||(0,y.z5)({pub:e,post:i,showAuthor:n})?this.withAuthorLine(this.props,this.state):(0,s.tZ)(Q,(0,o._)((0,a._)({},this.props),{editOnRightSide:this.props.showUpdatedIcons,className:this.props.showUpdatedIcons?"alternative-meta":this.props.className,isMobileWidth:this.state.isMobileWidth,actionBarStyle:l?"post-header-compact":"post-preview"}))}constructor(t,e){var i;if(super(t,e),(0,n._)(this,"unmounted",void 0),(0,n._)(this,"withAuthorLine",(t,e)=>{let{pub:i,post:n,showAuthor:a,showPhoto:o,getConfigFor:r,isAppMode:l}=t,c="adhoc_email"===n.type,h=(0,D.getBylineUsers)(n).length,p=1===h&&(0,D.getBylineUsers)(n)[0],u=p&&p.is_guest&&!r("dont_show_guest_byline")&&!c,Z=t.showDate||t.showDatetime,g=!n.is_published&&!t.inThreadHead&&Z&&!c,v=t.isFreePreview&&t.showAudience&&Z&&!c,_=(0,R.isFoundingAudience)(n.audience)&&t.showAudience&&!v&&Z&&!c&&!(0,z.sv)({post:n}),b=(0,R.isPaidAudience)(n.audience)&&t.showAudience&&!_&&!v&&Z&&!c&&!(0,z.sv)({post:n}),k=(0,y.F6)({pub:i,post:n,showAuthor:a,showPhoto:o});return(0,s.tZ)(B.YF,{width:"100%",className:d()("post-meta"),children:(0,s.BX)("tr",{children:[(0,s.tZ)("td",{children:(0,s.BX)(B.i$,{children:[(0,s.tZ)(B.zK,{gap:4,children:(0,s.tZ)(I.xv.Meta,{color:"primary",className:m.A.postAuthor,children:h>0?(0,D.oxfordComma)((0,D.getBylineUsers)(n).map(t=>(0,s.tZ)(I.xv.Meta,{as:"a",href:l?(0,H.FA)({user_id:t.id,user_name:t.name,redirect:"app-store-no-desktop"}):(0,O.LwU)(t,i),color:"primary",style:"text-decoration: none",children:t.name}))):(0,D.getPrintedByline)(i,n)})}),(0,s.BX)(B.zK,{gap:4,children:[(0,s.tZ)(I.xv.Meta,{children:(t.showDate||t.showDatetime)&&n.post_date&&(0,s.tZ)("time",{dateTime:(0,T.Z)(n.post_date).toISOString(),children:(0,T.Z)(n.post_date).locale(this.context.language).standardDate()})}),b&&(0,s.BX)(B.zK,{gap:4,children:[(0,s.tZ)(I.xv.Meta,{children:"∙"}),(0,s.tZ)(I.xv.Meta,{color:"paid",translated:!0,children:"Paid"})]}),_&&(0,s.BX)(B.zK,{gap:4,children:[(0,s.tZ)(I.xv.Meta,{children:"∙"}),(0,s.tZ)(I.xv.Meta,{color:"paid",children:this.context.iString((0,z.a_)(i,n))})]}),v&&(0,s.BX)(B.zK,{gap:4,children:[(0,s.tZ)(I.xv.Meta,{children:"∙"}),(0,s.tZ)(I.xv.Meta,{color:"paid",translated:!0,children:"Preview"})]}),u&&(0,s.BX)(B.zK,{gap:4,children:[(0,s.tZ)(I.xv.Meta,{children:"∙"}),(0,s.tZ)(I.xv.Meta,{translated:!0,children:"Guest post"})]}),g&&(0,s.BX)(B.zK,{gap:4,children:[(0,s.tZ)(I.xv.Meta,{children:"∙"}),(0,s.tZ)(I.xv.Meta,{translated:!0,children:"Draft"})]})]})]})}),k&&(0,s.tZ)("td",{align:"right",children:(0,s.tZ)(B.zK,{gap:4,children:h>0&&(0,D.getBylineUsers)(n).map((t,e)=>{var n;return e<4&&(0,s.tZ)("a",{href:l?(0,H.FA)({user_id:t.id,user_name:t.name,redirect:"app-store-no-desktop"}):(0,O.LwU)(t,i),children:(0,s.tZ)(B.NS,{src:null!==(n=t.photo_url)&&void 0!==n?n:"",size:h>1?32:40})})})})})]})})}),"undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:i.matchMedia)){let t=window.matchMedia("screen and (max-width: 650px)");this.state={isMobileWidth:t.matches};let e=t=>{this.unmounted||this.setState({isMobileWidth:t.matches})};t.addEventListener?t.addEventListener("change",e):t.addListener&&t.addListener(e)}}}(0,n._)(j,"contextType",M.wj);let V=(0,L.xY)(j);function J(t){var e,i;let{pub:n,post:o,user:c,reactors:d,secondaryFaces:h,mediaClipId:p}=t,[m,u]=(0,l.eJ)(null),[g,v]=(0,l.eJ)(!1),_=(0,W.ib)({pathname:"primary"===m?"/api/v1/post/".concat(o.id,"/reactors"):"/api/v1/".concat(p?"media_clip":"post","/").concat(null!=p?p:o.id,"/restackers"),auto:!!m,deps:[o.id,m]}),b=q(d,c,!!o.reaction,n),k=q(h,c,!!o.restacked,n),f=b.concat(k.filter(t=>!!t.photo_url&&!b.find(e=>e.id===t.id))),C=Math.max(null!==(e=o.reactions["❤"])&&void 0!==e?e:0,(null!=b?b:[]).length),N=n.hide_post_restacks?0:null!==(i=o.restacks)&&void 0!==i?i:0,x=C>0?(0,D.pluralize)(C,"Like"):"",y="";return N>0&&(y="".concat((0,D.pluralize)(N,"Restack"))),(0,s.BX)(s.HY,{children:[(0,s.BX)(U.X2,{gap:16,alignItems:"center",color:"secondary",children:[(0,s.tZ)(X.H,{users:f,renderAvatar:t=>(0,s.tZ)(A.xV,(0,a._)({},t)),direction:"rtl",renderCount:()=>(0,s.tZ)(r.Fragment,{})}),(0,s.tZ)(I.xv.B4,{color:"secondary",children:(0,s.BX)(U.X2,{gap:4,alignItems:"center",children:[(0,s.tZ)(Y,{label:x,onClick:()=>{C&&((0,P.j)(P.FP.POST_REACTIONS_MODAL_VIEWED,{post_id:o.id}),u("primary"),v(!0))}}),x&&y&&"∙",(0,s.tZ)(G,{post:o,label:y})]})})]}),_.result&&(0,s.tZ)(Z.F,{isOpen:g,modalLabel:x,faces:_.result,totalCount:C,onClose:()=>{v(!1),u(null)},utmSource:"post-reactions-modal"})]})}let Y=t=>{let{label:e,onClick:i}=t;return(0,s.tZ)(I.hh,{onClick:i,color:"secondary",cursor:"pointer",children:e})},G=t=>{let{label:e,post:i}=t;return(0,s.tZ)(I.xv.B4,{color:"secondary",children:(0,s.tZ)(I.hh,{href:(0,E.Oi)(i.id,{noBase:F.L,urlParams:{utm_source:K.b3.substack,utm_content:K.fZ.facepileRestacks}}),color:"secondary",children:e})})};function $(t){var e,i;let{post:n,user:o,pub:r,mediaClipId:l}=t,c=(0,W.ib)({pathname:"/api/v1/post/".concat(n.id,"/facepile"),auto:!0,deps:[n.id,l],query:{media_clip_id:l}});return(0,s.tZ)(J,(0,a._)({reactors:q(null===(e=c.result)||void 0===e?void 0:e.reactors,o,!!n.reaction,r),secondaryFaces:q(null===(i=c.result)||void 0===i?void 0:i.restackers,o,!!n.restacked,r)},t))}function q(t,e,i,n){if(!t)return[];if(e){let a=t.findIndex(t=>t.id===e.id);i&&("private"!==e.subscription_visibility||46438===n.id)&&e.activity_likes_enabled&&a<0?t.splice(0,0,{id:e.id,name:e.name,photo_url:e.photo_url}):!i&&a>=0&&t.splice(a,1)}return t}function Q(t){var e;let i,{additionalCommentCount:n=0,className:a,user:o,pub:r,post:l,showAudience:c=!1,showDate:h=!1,showEmailSent:m=!1,showDatetime:Z=!1,showReactions:_=!0,showComments:M=!0,showShare:L=!1,showRestack:B=!1,showPublicationName:P=!1,hidePinning:W=!1,reaction_token:A,onClick:X,onChange:U,isStatic:F=!1,isFreePreview:z=!1,allowSendEmail:E=!1,allowEdit:H=!1,shareTooltipText:j,showPins:V,sharedShareDialog:J,showUpdatedIcons:Y,editOnRightSide:G=!1,onClickCommentButton:$,showAuthor:q,showPhoto:Q,fromPostPage:te,isMobileWidth:ti,actionBarStyle:tn="post-header-compact"}=t,ta=r.id===l.publication_id?r:void 0,to="post-footer"===tn,ts=to?20:"post-preview"===tn?14:18,tr="post-header-large"===tn?20:"post-preview"===tn?16:"thread-head"===tn||to?14:18;i=l.comment_url_override?l.comment_url_override:F?"".concat(u.W.HALF_MAGIC_COMMENTS_URL,"&utm_source=").concat(K.b3.substack,"&utm_medium=").concat(K.lP.email):(0,O.uRy)(r,l,{comments:!0});let tl=n+(null!==(e=l.comment_count)&&void 0!==e?e:0),tc=M&&!z&&(0,D.showCommentsOnPost)({publication:r,post:l})&&"restack"!==l.type,td=_&&!z&&!["adhoc_email","restack"].includes(l.type),th=(h||Z)&&l.post_date&&!l.is_draft,tp=m?!!l.email_sent_at:null,tm=p()([m&&tp&&{className:"email-sent",title:"This post was sent as an email",content:(0,s.tZ)(g.Z,{className:"post-meta-icon",height:ts,isStatic:F})},V&&l.is_section_pinned&&{className:"icon pinned",content:(0,s.tZ)(f.Z,{className:"post-meta-icon",isStatic:F})},"adhoc_email"===l.type?{className:"audience-adhoc",content:(0,s.tZ)(C.Z,{className:"post-meta-icon",isStatic:F})}:c&&(0,R.isPaidAudience)(l.audience)&&{className:"audience-lock",content:(0,s.tZ)(v.Z,{color:"#666666",height:ts,isStatic:F})},(0,y.Er)({pub:r,post:l,showAuthor:q,showPhoto:Q,isMobileWidth:ti})&&{className:"author",content:(0,D.getBylineUsers)(l).length>0?(0,D.oxfordComma)((0,D.getBylineUsers)(l).map(t=>(0,s.tZ)(w.ProfileHoverCard,{disabled:F,subject:t,utmSource:"byline",children:(0,s.tZ)("a",{href:(0,O.LwU)(t,r),onClick:t=>t.stopPropagation(),children:t.name})}))):(0,D.getPrintedByline)(r,l)},P&&{className:"post-publication-name",content:r.name},Y&&!G&&H&&!F&&o&&o.is_contributor&&{className:"post-meta-item icon edit-icon",onClick:t=>t.stopPropagation(),content:(0,s.tZ)(N.l,{pub:r,post:l,iconHeight:ts,hidePinning:W,user:o,emailSent:tp,allowSendEmail:E,showUpdatedIcons:Y})},th&&{className:"post-date",title:(0,T.Z)(l.post_date).toISOString(),content:(0,s.tZ)(I.xv.Meta,{children:(0,s.tZ)("time",{dateTime:(0,T.Z)(l.post_date).toISOString(),children:(0,y.fh)({post:l,showDatetime:Z,isStatic:F,fromPostPage:te,showReactions:td})})})},(null==ta?void 0:ta.community_enabled)&&l.slug&&td&&!l.is_draft&&{className:"icon",onClick:t=>t.stopPropagation(),content:(0,s.tZ)(S.dJ,{user:o,pub:r,post:l,token:A,onChange:t=>{null==U||U(t)},height:tr,isStatic:F,buttonStyle:to,className:"post-meta-icon like-reaction-button",hideReactionCount:to&&!F})},o&&{className:"icon",onClick:t=>t.stopPropagation(),content:(0,s.tZ)(tt,{post:l,isPostFooter:to,isStatic:F,lucideIconHeight:tr,onChange:U})},(null==ta?void 0:ta.community_enabled)&&l.slug&&tc&&!l.is_draft&&{className:"icon",onClick:t=>t.stopPropagation(),content:(0,s.BX)("a",{className:to?"post-meta-button button":"",href:i,native:ta&&(0,O.Fdd)(document.location.pathname),onClick:$,children:[(0,s.tZ)(b.Z,{className:"comment-icon post-meta-icon",isStatic:F,height:tr,alt:"Comment",stroke:"#757575",fill:"transparent",strokeWidth:F?1:1.5,ampProps:{layout:"fixed"}}),!tl&&to&&(0,s.tZ)("span",{className:"meta-button-label",children:"Comment"}),tl>0&&(0,s.tZ)("span",{className:"comment-count",children:(0,D.numberToString)(tl)})]})},B&&!to&&{className:"icon",onClick:t=>t.stopPropagation(),content:(0,s.BX)("a",{href:u.W.RESTACK_URL,className:to?"button post-meta-button":void 0,children:[(0,s.tZ)(k.Z,{className:"recommend-icon post-meta-icon",isStatic:F,height:tr,alt:"Recommend",stroke:"#757575",fill:"transparent",strokeWidth:F?1:1.5,ampProps:{layout:"fixed"}}),to&&(0,s.tZ)("span",{className:"meta-button-label",children:"Recommend"})]})},L&&"only_free"!==l.audience&&!l.is_draft&&!z&&{className:"icon",onClick:t=>t.stopPropagation(),content:(0,s.BX)(x.v,{user:o,pub:ta,post:l,reaction_token:A,height:tr,onChange:U,isStatic:F,sharedShareDialog:J,position:"post-footer"===tn?"post-footer":"post-header",linkClassName:to?"button post-meta-button":void 0,children:[to&&(0,s.tZ)("span",{className:"meta-button-label",children:"Share"}),j&&(0,s.tZ)("div",{className:"share-tooltip-wrap",children:(0,s.tZ)("div",{className:"share-tooltip",children:j})})]})},(!Y||G)&&H&&!F&&o&&o.is_contributor&&{className:"icon edit-icon",onClick:t=>t.stopPropagation(),content:(0,s.tZ)(N.l,{pub:r,post:l,iconHeight:ts,hidePinning:W,user:o,emailSent:tp,allowSendEmail:E,showUpdatedIcons:Y})}]);return F?(0,s.tZ)("table",{className:d()("post-meta custom",{big:to},a),cellpadding:"0",cellspacing:"0",onClick:X,children:(0,s.tZ)("tr",{children:tm.map(t=>{let{className:e,title:i,onClick:n,content:a}=t;return(0,s.tZ)("td",{className:d()("post-meta-item",e),title:i,onClick:n,children:a})})})}):(0,s.tZ)("div",{className:d()("post-meta post-meta-actions-web custom",{big:to},a),onClick:X,children:tm.map(t=>{let{className:e,title:i,onClick:n,content:a}=t;return(0,s.tZ)("div",{className:d()("post-meta-item",e),title:i,onClick:n,children:a})})})}function tt(t){let{post:e,isPostFooter:i,isStatic:n,lucideIconHeight:r,onChange:l}=t,{onSave:c,isSaved:h}=(0,y.vk)({post:e,isSaved:e.is_saved});return(0,s.BX)("a",{className:d()("post-meta-save-button",i?"post-meta-button button":"",{isSaved:h}),href:n&&u.W.SAVE_POST_URL||void 0,onClick:()=>{let t=c();null==l||l({post:(0,o._)((0,a._)({},e),{is_saved:t})})},children:[(0,s.tZ)(_.Z,{isStatic:n,height:r,stroke:"#757575",strokeWidth:n?1:1.5}),i&&(0,s.tZ)("span",{className:"meta-button-label",children:"Save"})]})}}}]);