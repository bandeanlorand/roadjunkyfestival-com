"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7254"],{87900:function(e,t,i){i.d(t,{Z:()=>h});var n=i(7409),o=i(99282),r=i(16584),a=i(6400),l=i(68833),s=i(59176),c=i(98914),u=i(60308),d=i(26111);let m="domain-redirect-time";class h extends a.Component{componentDidMount(){let e=this.loadedWithLikelyLoggedInParam()?"param":null;e&&!this.shouldBlockLoginRedirect()?this.attemptLoginRedirect({source:e}):this.useIframe()&&window.addEventListener("message",e=>this.handleFrameMessage(e)),(0,c.iO)("triedSigningIn")}shouldBlockLoginRedirect(){var e;let t=parseInt((0,s.mM)(m,0));return this.state.block_auto_login||!(null===(e=this.state.pub)||void 0===e?void 0:e.custom_domain)||this.state.user||"undefined"==typeof window||Date.now()-t<=864e5||this.state.triedSigningIn}handleFrameMessage(e){var t,i,n;if((null===(t=e.data)||void 0===t?void 0:t.type)!=="frame-state")return;let o=!this.shouldBlockLoginRedirect()&&(null===(i=e.data)||void 0===i?void 0:i.loggedInAtSubstack);(0,l.j)(l.FP.FRAME_MESSAGE_HANDLED,{loggedInAtSubstack:null===(n=e.data)||void 0===n?void 0:n.loggedInAtSubstack,loggedInAtCustomDomain:!!this.state.user,attemptRedirect:o}),o&&this.attemptLoginRedirect({source:"cookie"})}attemptLoginRedirect(){var e;let{source:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,l.j)(l.FP.CUSTOM_DOMAIN_LOGIN_REDIRECT_ATTEMPTED,{fromParam:"param"===t,source:t}),(0,s.ex)(m,"".concat(Date.now()));let i=(0,u.YZ5)({useOriginalUrl:!0});this.props.initialData.hide_intro_popup&&(i=(0,u.rhs)(i,{hide_intro_popup:!0})),location.href=(0,u.uXE)({for_pub:null===(e=this.state.pub)||void 0===e?void 0:e.subdomain,justTrying:!0,redirect:i})}loadedWithLikelyLoggedInParam(){return"undefined"!=typeof window&&window._preloads.original_url&&!!(0,d.x)(window._preloads.original_url,"lli")}useIframe(){var e,t,i;return!("undefined"==typeof window||this.loadedWithLikelyLoggedInParam()||!(null===(e=this.state.pub)||void 0===e?void 0:e.custom_domain)||(0,u.fF3)(null===(i=window)||void 0===i?void 0:null===(t=i.location)||void 0===t?void 0:t.href))}render(){return this.useIframe()?(0,r.tZ)("iframe",{src:"".concat((0,u.ZJn)(),"/channel-frame"),className:"channel-frame",width:"0",height:"0"}):null}constructor(e,t){super(e,t),this.state=(0,o._)((0,n._)({},e.initialData),{triedSigningIn:(0,d.x)("triedSigningIn")})}}},85095:function(e,t,i){i.d(t,{Un:()=>u,am:()=>c});var n=i(16584),o=i(98661),r=i(60807),a=i(48980),l=i(40121);let s=(0,o.createContext)({viewerProfile:{profile:null,loading:!1},setViewerProfile:()=>void 0,profiles:new Map,setProfile:()=>void 0});function c(e){let{value:t,handle:i,children:r}=e,[a,l]=(0,o.useState)({profile:null,loading:!1}),[c,u]=(0,o.useState)(new Map(t?[[i||t.id,{profile:t,loading:!1}]]:[])),d={viewerProfile:a,setViewerProfile:(0,o.useCallback)((e,t)=>{l(i=>i.profile===e&&i.loading===t?i:{profile:e,loading:t})},[]),profiles:c,setProfile:(0,o.useCallback)((e,t,i)=>{u(n=>{var o,r;if((null===(o=n.get(e))||void 0===o?void 0:o.profile)===t&&(null===(r=n.get(e))||void 0===r?void 0:r.loading)===i)return n;let a=new Map(n);return a.set(e,{profile:t,loading:i}),a})},[])};return(0,n.tZ)(s.Provider,{value:d,children:r})}function u(){let{subjectId:e,subjectName:t,delayLoading:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,r.aF)(),{viewerProfile:c,setViewerProfile:u,profiles:d,setProfile:m}=(0,o.useContext)(s),[h,g]=(0,o.useState)(null);if("string"==typeof e){if(e.includes("-")){let i=e.split("-");e=i[0],t=i.slice(1).join("-")}else e.startsWith("@")&&(e=e.slice(1))}let f=e?d.get(e):null,p=(0,o.useCallback)(async e=>{u(c.profile,!0);let t=(0,l.Hm)(e.name,{hashIfEmpty:!0});try{let i=await (0,a.rd)("/api/v1/user/".concat(e.id,"-").concat(t,"/public_profile/self"));u(i,!1)}catch(e){e instanceof Error&&g(e),u(null,!1)}},[c,u,g]),v=null==f?void 0:f.profile,_=c.profile,b=(0,o.useCallback)(async e=>{!_&&n&&p(n),m(e,v,!0);try{let i=t&&(0,l.Hm)(t,{hashIfEmpty:!0}),n=await (i?(0,a.rd)("/api/v1/user/".concat(e,"-").concat(i,"/public_profile")):(0,a.rd)("/api/v1/user/".concat(e,"/public_profile")));m(e,n,!1)}catch(t){t instanceof Error&&g(t),m(e,v,!1)}},[v,m,t,_,p,n]);return(0,o.useEffect)(()=>{i||(null==f?void 0:f.profile)||(null==f?void 0:f.loading)||h||!e||b(e),i||c.loading||c.profile||h||!n||p(n)},[i,e,b,f,h,c,p,n]),{loading:!!(null==f?void 0:f.loading),viewerProfile:c.profile,subjectProfile:null==f?void 0:f.profile,refetch:b,error:h}}s.displayName="ProfileContext"},44471:function(e,t,i){i.d(t,{m$:()=>g});var n,o,r=i(7409),a=i(99282),l=i(16584),s=i(6400);i(98661);var c=i(30396),u=i(48980);let d="undefined"!=typeof window&&null!==(o=null===(n=window._preloads)||void 0===n?void 0:n.publicationUserSettings)&&void 0!==o?o:{},m=e=>({getSettingForPubUser:t=>{if(!t||!e)return null;let i=e[t];return void 0===i?null:i}}),h=(0,s.createContext)((0,a._)((0,r._)({},m(d)),{changeUserSetting:()=>Promise.resolve(void 0)}));function g(e){let{preloadPubUserSettings:t={},children:i}=e,[n,o]=(0,c.eJ)(t),s=(0,c.I4)(async(e,t)=>{o(i=>(0,a._)((0,r._)({},i),{[e]:t}));try{await (0,u.rd)("/api/v1/publication_user_settings/user",{method:"PUT",json:{type:e,value:t}})}catch(e){console.error(e)}},[o]),d=(0,c.Ye)(()=>(0,a._)((0,r._)({},m(n)),{changeUserSetting:s}),[n,s]);return(0,l.tZ)(h.Provider,{value:d,children:i})}h.displayName="PublicationUserSettingsContext"},49762:function(e,t,i){i.d(t,{SiteConfigGate:()=>l,default:()=>a,getConfigFor:()=>r});var n=i(16584),o=i(40647);function r(e){var t;if(!e||"undefined"==typeof window||!(null===(t=window._preloads)||void 0===t?void 0:t.siteConfigs))return null;let i=window._preloads.siteConfigs[e];return void 0===i?null:i}let a=r;function l(e){let{configKey:t,children:i,value:r=!0}=e;return(0,o.xR)().getConfigFor(t)==r?(0,n.tZ)(n.HY,{children:i}):null}},98248:function(e,t,i){i.d(t,{$j:()=>m,Hl:()=>g,jv:()=>h});var n=i(7409),o=i(99282),r=i(98848),a=i(16584),l=i(94184),s=i.n(l);i(98661),i(71068);var c=i(19081),u=i(49391);let d={14:2,20:2.5,24:2,32:1.5,40:1.25},m=e=>{var{size:t=24,theme:i="default",className:l}=e,m=(0,r._)(e,["size","theme","className"]);let h=d[t]||2;return(0,a.tZ)(c.hs,(0,o._)((0,n._)({padding:16,className:s()(u.Z.spinner,u.Z["theme_".concat(i)],l)},m),{children:(0,a.BX)("svg",{width:t,height:t,viewBox:"0 0 24 24",vectorEffect:"non-scaling-stroke",children:[(0,a.tZ)("circle",{className:u.Z.bg,cx:12,cy:12,r:11,strokeWidth:h,fill:"none",stroke:"var(--color-utility-detail)"}),(0,a.tZ)("circle",{className:u.Z.fg,cx:12,cy:12,r:11,strokeWidth:h,fill:"none"})]})}))},h=e=>{var{size:t=24,theme:i="default",className:l}=e,d=(0,r._)(e,["size","theme","className"]);let m=Array.from({length:10},(e,t)=>"".concat(36*t," 12 12")).join(";");return(0,a.tZ)(c.hs,(0,o._)((0,n._)({padding:16,className:s()(u.Z.thinker,u.Z["theme_".concat(i)],l)},d),{children:(0,a.tZ)("svg",{width:t,height:t,viewBox:"0 0 24 24",children:(0,a.BX)("g",{children:[Array.from({length:10}).map((e,t)=>(0,a.tZ)("rect",{x:"11",y:"1",width:2,height:6,rx:"1",ry:"1",opacity:(t+1)/10,transform:"rotate(".concat(36*t," 12 12)")},t)),(0,a.tZ)("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"discrete",dur:"0.5s",values:m,repeatCount:"indefinite"})]})})}))},g=e=>{var{size:t=24,theme:i="default",className:l,percent:m}=e,h=(0,r._)(e,["size","theme","className","percent"]);let g=d[t]||2;return(0,a.tZ)(c.hs,(0,o._)((0,n._)({padding:16,className:s()(u.Z.radialProgress,u.Z["theme_".concat(i)],l),style:{"--percent":"".concat(m)}},h),{children:(0,a.BX)("svg",{width:t,height:t,viewBox:"0 0 24 24","vector-effect":"non-scaling-stroke",children:[(0,a.tZ)("circle",{className:u.Z.bg,cx:12,cy:12,r:11,strokeWidth:g,fill:"none",stroke:"var(--color-utility-detail)"}),(0,a.tZ)("circle",{className:u.Z.fg,cx:12,cy:12,r:11,strokeWidth:g,fill:"none"})]})}))}},58175:function(e,t,i){i.d(t,{et:()=>k,hh:()=>C,xv:()=>g});var n=i(7409),o=i(99282),r=i(98848),a=i(16584),l=i(94184),s=i.n(l),c=i(98661),u=i(95441),d=i(5435),m=i(71068),h=i(23648);let g=e=>{var{className:t,align:i,size:l,weight:c,transform:g}=e,f=(0,r._)(e,["className","align","size","weight","transform"]);f=(0,o._)((0,n._)({},f),{textAlign:null!=i?i:f.textAlign,textTransform:null!=g?g:f.textTransform,fontSize:null!=l?l:f.fontSize,fontWeight:null!=c?c:f.fontWeight});let{iString:p,language:v}=(0,u.M1)(),_=f.children;if(f.translated&&"en"!==v){let e=[],t=[],i=(0,d.Fb)(f.children,e,t),n=p(i,...t);if(n&&n!==i)try{_=(0,d.rl)(n,e)}catch(e){console.log("Could not translate ".concat(i),e)}}return(0,a.tZ)(m.xu,(0,o._)((0,n._)({className:s()(h.Z.reset,t)},f),{children:_}))};function f(e){var{className:t,displayName:i}=e,l=(0,r._)(e,["className","displayName"]);let u=(0,c.forwardRef)((e,i)=>{var{className:c}=e,u=(0,r._)(e,["className"]);return(0,a.tZ)(g,(0,o._)((0,n._)({},l,u),{ref:i,className:s()(t,c)}))});return u.displayName=i,u}let p=f({as:"h1",font:"display",size:36,weight:"bold",lineHeight:44}),v=f({as:"h2",font:"display",size:30,lineHeight:36,weight:"bold"}),_=f({as:"h3",font:"display",size:24,lineHeight:28,weight:"bold"}),b=f({as:"h4",font:"display",size:20,lineHeight:24,weight:"bold"}),w=f({font:"text",size:19,lineHeight:26,weight:"regular"}),y=f({font:"text",fontSize:17,lineHeight:24,fontWeight:"regular"}),k={font:"text",fontSize:15,lineHeight:20,fontWeight:"regular"},Z=f(k),x=f({font:"text",fontSize:13,lineHeight:20,fontWeight:"regular"}),N=f({font:"text",size:11,lineHeight:20,weight:"regular"}),H=f((0,o._)((0,n._)({},{font:"meta",fontSize:11,lineHeight:20,fontWeight:"medium",textTransform:"uppercase",color:"secondary"}),{className:h.Z.meta})),S=f({font:"digit",size:12,lineHeight:20,weight:"bold",transform:"uppercase",className:h.Z.digit}),C=f({as:"a",decoration:"hover-underline"});f({as:"span"});let M=f({font:"text",color:"primary",className:h.Z.marketingBody}),I=f({as:"h1",weight:"regular",className:h.Z.marketingHeading1}),P=f({as:"h2",weight:"medium",className:h.Z.marketingHeading2}),E=f({as:"h3",weight:"medium",className:h.Z.marketingHeading3}),L=f({as:"h4",weight:"medium",className:h.Z.marketingHeading4}),z=f({as:"h5",weight:"bold",className:h.Z.marketingHeading5}),j=f({as:"h4",weight:"regular",textAlign:"center",className:h.Z.marketingQuote}),B=f({as:"h4",size:30,weight:"regular",className:h.Z.marketingSubtitle});g.H1=p,g.H2=v,g.H3=_,g.H4=b,g.B1=w,g.B2=y,g.B3=Z,g.B4=x,g.B5=N,g.Meta=H,g.Digit=S,g.MarketingBody=M,g.MarketingHeading1=I,g.MarketingHeading2=P,g.MarketingHeading3=E,g.MarketingHeading4=L,g.MarketingHeading5=z,g.MarketingQuote=j,g.MarketingSubtitle=B},55722:function(e,t,i){i.d(t,{o:()=>d});var n=i(7409),o=i(99282),r=i(16584),a=i(47907),l=i(30302);let s={sm:16,md:20,lg:24},c={100:l.Z,1e3:a.Z,1e4:a.Z},u={1e4:{fill:"var(--color-accent-fg-purple)"}},d=e=>{let{tier:t,size:i="sm"}=e;if(!t)return null;let a=c[t.toString()],l=u[t.toString()],d=s[i];return(0,r.tZ)(a,(0,o._)((0,n._)({},l),{height:d}))}},73943:function(e,t,i){i.d(t,{u:()=>a,us:()=>r,vn:()=>n});let n={test1:"SubstackInc",badnews:"ryangrim",dmortberg:"danielortberg",offthechain:"APompliano",on:"SubstackInc",petition:"petition",popularinformation:"JuddLegum",shane:"shanesnow",signalproblems:"A_W_Gordon",sinocism:"niubi",taibbi:"mtaibbi",thefirstand15th:"tressiemcphd",thenewsletter:"jbouie",numlock:"WaltHickey"};var o,r=((o={}).comments_disabled="comments_disabled",o.free_subscription_required="free_subscription_required",o.paid_subscription_required="paid_subscription_required",o.founding_subscription_required="founding_subscription_required",o);let a=600},86458:function(e,t,i){i(84864)},31582:function(e,t,i){i.d(t,{$e:()=>n,vq:()=>o}),i(18029),i(98012),i(84864);let n=(e,t)=>{let i;if(t&&t!==e.currency){var n,o,r;if(!(null===(n=e.currency_options)||void 0===n?void 0:n[t]))return;i=null!==(r=null===(o=e.currency_options[t])||void 0===o?void 0:o.unit_amount)&&void 0!==r?r:null}else i="object"in e&&"price"===e.object?e.unit_amount:e.amount;return null!=i?i:0},o=(e,t)=>{var i;return t&&t!==e.currency?null===(i=e.metadata.minimum_local)||void 0===i?void 0:i[t]:e.metadata.minimum}},18967:function(e,t,i){i.d(t,{E4:()=>o,ML:()=>r});var n,o=((n={}).CompOneMonth="comp_one_month",n.CompThreeMonths="comp_three_months",n.CompSixMonths="comp_six_months",n.CompNineMonths="comp_nine_months",n.CompTwelveMonths="comp_twelve_months",n.Custom="custom",n);let r={comp_one_month:"1 month comp",comp_three_months:"3 month comp",comp_six_months:"6 month comp",comp_nine_months:"9 month comp",comp_twelve_months:"12 month comp",custom:"Custom"}},14773:function(e,t,i){i.d(t,{JD:()=>r,L4:()=>o,Q2:()=>h,SV:()=>u,T9:()=>n,Y$:()=>s,ZJ:()=>d,ZX:()=>m,n1:()=>c,pv:()=>l,tE:()=>a});let n="substack.com",o="https://substackcdn.com";function r(e){return"https://"+e}o.replace(/https?:\/\//,"").replace(/\/$/,"");let a=r(n),l=new URL(a);function s(e){return Object.keys(e).filter(t=>void 0!==e[t]&&null!==e[t]).map(t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))).join("&")}function c(e,t){if(!e)return"";if(!t)return e;let i=s(t),n=i?-1===e.indexOf("?")?"?":"&":"";return"".concat(e).concat(n).concat(i)}function u(e){let{forceSubdomain:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&"object"==typeof e&&"base_url"in e&&e.base_url&&!t?e.base_url:r(function(e){let{forceSubdomain:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"object"==typeof e&&"custom_domain"in e&&e.custom_domain&&!e.custom_domain_optional&&!t)return e.custom_domain;let i=n;return e&&"www"!==e.subdomain&&(i="".concat(e.subdomain,".").concat(i)),i}(e,{forceSubdomain:t}))}function d(){return u()}function m(){return r("open.".concat(n))}function h(e){let{noBase:t,urlParams:i,pub:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t?"":u(n);return c("".concat(o).concat(e),i)}},35934:function(e,t,i){i.d(t,{gz:()=>o});var n=i(27412);class o extends Error{constructor(e,t={},i=!1,o=null){let r,a;super(e),(0,n._)(this,"status",void 0),(0,n._)(this,"userVisible",void 0),(0,n._)(this,"messageHtml",void 0),(0,n._)(this,"response",void 0),(0,n._)(this,"type",void 0),(0,n._)(this,"metadata",void 0),this.name=this.constructor.name;let l=null,s=null,c=null;if("object"==typeof t){var u,d,m,h,g,f;r=null!==(u=t.status)&&void 0!==u?u:500,i=null!==(d=t.userVisible)&&void 0!==d&&d,o=null!==(m=t.messageHtml)&&void 0!==m?m:null,l=null!==(h=t.responseBody)&&void 0!==h?h:null,s=null!==(g=t.type)&&void 0!==g?g:null,c=null!==(f=t.metadata)&&void 0!==f?f:null}else r=t;this.status=r,this.userVisible=!!l||i,this.messageHtml=o,this.type=s,this.metadata=c,l?a=l:this.userVisible?o?a={errors:[{msg:e,msgHTML:o}],type:"list"}:(a={error:e,type:"single"},this.type&&(a.type=this.type),this.metadata&&(a.metadata=this.metadata)):a={error:""},this.response={body:a},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}}]);