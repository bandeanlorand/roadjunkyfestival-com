"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["4751"],{86657:function(e,t,i){i.d(t,{Z:()=>D});var a=i(27412),s=i(7409),r=i(99282),n=i(16584),o=i(6400),l=i(94184),d=i.n(l),p=i(14293),h=i.n(p),c=i(36081),u=i(36813),y=i(36181),m=i(18389),g=i(97742),v=i(95441),b=i(30372),_=i(68833),f=i(55480),k=i(59176),T=i(98914),P=i(15771),M=i(24791),E=i(60308),Z=i(84864),w=i(47929);let N="AudioPlayer.playbackRate",C={utm_source:w.b3.twitter,utm_medium:w.lP.social,utm_campaign:w.VX.twitterEmbed};class B extends o.Component{shouldComponentUpdate(e){return this.props.currentPlaybackRate!==e.currentPlaybackRate||this.props.setPlaybackRate!==e.setPlaybackRate}render(){let{currentPlaybackRate:e,setPlaybackRate:t}=this.props;return(0,n.BX)("select",{className:"audio-player-playback-rate",dir:"rtl",onInput:e=>t(Number(e.target.value)),children:[(0,n.tZ)("option",{value:"1",selected:1===e,children:"1x"}),(0,n.tZ)("option",{value:"1.25",selected:1.25===e,children:"1.25x"}),(0,n.tZ)("option",{value:"1.5",selected:1.5===e,children:"1.5x"}),(0,n.tZ)("option",{value:"1.75",selected:1.75===e,children:"1.75x"}),(0,n.tZ)("option",{value:"2",selected:2===e,children:"2x"})]})}}class D extends o.Component{componentDidMount(){var e;null===T.sz||void 0===T.sz||T.sz.on("play",this._onGlobalPlay),document.body&&(document.body.addEventListener("mousemove",this._onMouseMove,!1),document.body.addEventListener("mouseup",this._onDragEnd,!1),document.body.addEventListener("touchmove",this._onTouchMove,{passive:!1}),document.body.addEventListener("touchend",this._onDragEnd,!1),document.body.addEventListener("touchcancel",this._onDragEnd,!1)),this.player&&(this.player.volume=1,this.player.playbackRate=this.state.playbackRate,this.player.addEventListener("canplay",this._onCanPlay),this.player.addEventListener("play",this._onPlay),this.player.addEventListener("pause",this._onPause),this.player.addEventListener("ended",this.onEnded),this.player.addEventListener("timeupdate",this._onTimeUpdate),this.player.addEventListener("ratechange",this._onRateChange),this.player.addEventListener("waiting",this._onWaiting),this.player.addEventListener("playing",this._onPlaying),this.player.addEventListener("seeked",this.onSeeked)),this.progressBar.current&&this.progressBar.current.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.onTimeUpdate();let t=null===(e=this.player)||void 0===e?void 0:e.duration;!this.props.onGetDuration||h()(t)||isNaN(Number(t))||this.props.onGetDuration(t),(0,T.pt)((0,E.zF4)("/img/audio-player-pause.png",96))}componentWillUnmount(){null===T.sz||void 0===T.sz||T.sz.off("play",this._onGlobalPlay),document.body&&(document.body.removeEventListener("mousemove",this._onMouseMove,!1),document.body.removeEventListener("mouseup",this._onDragEnd,!1),document.body.removeEventListener("touchmove",this._onTouchMove,!1),document.body.removeEventListener("touchend",this._onDragEnd,!1),document.body.removeEventListener("touchcancel",this._onDragEnd,!1)),this.player&&(this.player.removeEventListener("canplay",this._onCanPlay),this.player.removeEventListener("play",this._onPlay),this.player.removeEventListener("pause",this._onPause),this.player.removeEventListener("ended",this.onEnded),this.player.removeEventListener("timeupdate",this._onTimeUpdate),this.player.removeEventListener("ratechange",this._onRateChange),this.player.removeEventListener("waiting",this._onWaiting),this.player.removeEventListener("playing",this._onPlaying)),this.progressBar.current&&this.progressBar.current.removeEventListener("touchstart",this._onTouchStart)}componentDidUpdate(e,t){if(this.state.playing||"number"!=typeof this.state.waiting||"number"==typeof t.waiting||this.track(_.FP.AUDIO_BUFFERING_STARTED),!this.state.playing||t.playing||this.state.waiting||"number"!=typeof t.waiting||this.track(_.FP.AUDIO_BUFFERING_COMPLETED,{buffering_duration:Date.now()-t.waiting}),this.state.playing&&Math.floor(this.state.currentTime)!==Math.floor(t.currentTime)&&Math.floor(this.state.currentTime)%5==0){var i;if(this.trackMedia(_.FP.MEDIA_PLAYBACK_CONTINUED),(null===(i=this.props.metricsPost)||void 0===i?void 0:i.id)&&this.state.duration&&!this.props.feature){let e=Math.min(Math.max(0,this.state.currentTime/this.state.duration),1);(0,b.UO)(this.props.metricsPost.id,"audio",e)}}if(!this.state.playing&&t.playing&&this.player&&this.player.ended&&(this.props.onFinishAudio&&this.props.onFinishAudio(),this.trackMedia(_.FP.MEDIA_PLAYBACK_COMPLETED)),this.props.updateOnEveryFrame&&this.state.playing&&!t.playing){let e=()=>{this.onTimeUpdate(),this.loopId=requestAnimationFrame(e)};this.loopId=requestAnimationFrame(e)}this.props.updateOnEveryFrame&&!this.state.playing&&t.playing&&(h()(this.loopId)||cancelAnimationFrame(this.loopId)),this.progressBar.current&&(this.progressBar.current.removeEventListener("touchstart",this._onTouchStart),this.progressBar.current.addEventListener("touchstart",this._onTouchStart,{passive:!0}))}onCanPlay(){this.props.onGetDuration&&this.player&&this.props.onGetDuration(this.player.duration),this.onTimeUpdate()}onPlay(){null===T.sz||void 0===T.sz||T.sz.emit("play",this),this.setState({playing:!0}),this.trackMedia(_.FP.MEDIA_PLAYBACK_STARTED)}onPause(){var e;this.setState({playing:!1,waiting:!1}),(null===(e=this.player)||void 0===e?void 0:e.ended)||this.trackMedia(_.FP.MEDIA_PLAYBACK_PAUSED)}onTimeUpdate(){if(this.player&&isFinite(this.player.duration)){if(this.player.currentTime>this.player.duration){this.player.currentTime=this.player.duration;return}this.state.duration!==this.player.duration||this.state.currentTime!==this.player.currentTime?(this.setState({duration:this.player.duration||this.props.duration,currentTime:this.player.currentTime,waiting:!1}),this.props.onTimeUpdate&&this.props.onTimeUpdate({duration:Math.max(this.state.duration||0,this.player.duration||this.props.duration||0),currentTime:this.player.currentTime})):this.setState({waiting:!1})}}onRateChange(){this.player&&this.state.playbackRate!==this.player.playbackRate&&this.setState({playbackRate:this.player.playbackRate})}onWaiting(){this.setState({waiting:Date.now()})}onPlaying(){this.setState({playing:!0,waiting:!1})}onMouseDown(e){this.onDragStart(e.clientX)}onMouseMove(e){this.onDragMove(e.clientX)}onTouchStart(e){e.touches&&e.touches[0]&&this.onDragStart(e.touches[0].pageX)}onTouchMove(e){"number"==typeof this.state.dragTime&&e.preventDefault(),e.touches&&e.touches[0]&&this.onDragMove(e.touches[0].pageX)}onDragStart(e){"number"!=typeof this.state.dragTime&&this.setDragTime(e)}onDragMove(e){"number"==typeof this.state.dragTime&&this.setDragTime(e)}onDragEnd(){this.clearDragTime()}onGlobalPlay(e){if(this!==e&&this.player&&!this.player.paused){let t=e.player;t instanceof HTMLVideoElement&&t.muted||(this.track(_.FP.CLICKED_PAUSE_BUTTON,{implicit:!0,feature:this.props.feature}),this.player.pause())}}async togglePlayback(){let{iString:e}=this.context;if(this.player){if(this.player.paused){this.track(_.FP.CLICKED_PLAY_BUTTON,{feature:this.props.feature});try{await this.player.play()}catch(t){if("NotSupportedError"===t.name)alert(e("Failed to play this media: it may not be supported by this browser."));else throw t}}else this.track(_.FP.CLICKED_PAUSE_BUTTON,{feature:this.props.feature}),await this.player.pause()}}skipBack(){if(this.player){let e=Math.max(0,this.state.currentTime-15);this.player.currentTime=e}}skipForward(){if(this.player){var e;let t=Math.min(null!==(e=this.state.duration)&&void 0!==e?e:0,this.state.currentTime+30);this.player.currentTime=t}}setDragTime(e){if(!this.props.src||!this.state.duration||!this.player||!this.progressBar.current||!document.body||!document.body.getBoundingClientRect)return;let t=document.body.getBoundingClientRect(),i=this.progressBar.current.getBoundingClientRect(),a=i.left-t.left,s=i.right,r=(Math.max(a,Math.min(s,e))-a)/(s-a)*this.state.duration;this.isDragTimeCloseToCurrentTime(r)&&(r=this.state.currentTime),this.setState({dragTime:r})}clearDragTime(){if("number"!=typeof this.state.dragTime)return;let e=this.state.dragTime;this.isDragTimeCloseToCurrentTime(e)?this.setState({dragTime:null}):(this.setState({currentTime:e,dragTime:null,lastDragClearedAt:performance.now()}),this.player&&(this.player.currentTime=e))}isDragTimeCloseToCurrentTime(e){let t;return!this.props.preventSnappingToCurrentTime&&"number"==typeof this.state.currentTime&&(t=!h()(this.state.duration)&&this.state.duration<10?0:!h()(this.state.duration)&&this.state.duration<30?3:5,Math.abs(this.state.currentTime-e)<t)}track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.props.metricsPost;i&&(0,_.j)(e,Object.assign({post_id:i.id,publication_id:i.publication_id,is_podcast_free_preview:(0,M.dq)(i),current_time:this.state.currentTime?Math.floor(this.state.currentTime):0,duration:this.state.duration?Math.floor(this.state.duration):0,playback_rate:this.state.playbackRate},t))}trackMedia(e){var t,i,a,n,o;let{pub:l,mediaUpload:d,src:p,trackingProps:{feedItemTrackingParameters:h,surface:c,contentType:u,entityKey:y,entityType:m,primaryEntityKey:g,primaryEntityType:v}={}}=this.props;(0,_.j)(e,(0,r._)((0,s._)({},h),{media_type:"audio",video_upload_id:null!==(i=null==d?void 0:d.id)&&void 0!==i?i:"unknown",src_video_upload_id:null==d?void 0:d.src_media_upload_id,surface:c,content_type:u,primary_entity_key:String(null!==(a=null!=g?g:y)&&void 0!==a?a:"unknown"),primary_entity_type:null!=v?v:m,entity_key:String(y),entity_type:m,publication_id:null==l?void 0:l.id,display:"inline",muted:null===(t=this.player)||void 0===t?void 0:t.muted,captions_enabled:null,autoplay:!1,is_preview:!1,current_time:Math.floor(null!==(n=this.state.currentTime)&&void 0!==n?n:0),duration:Math.floor(null!==(o=this.state.duration)&&void 0!==o?o:0),src:p}))}render(e){let{addToPodcastLink:t,autoPlay:i,isFancy:a,isPaywalled:s,post:r,pub:o,render:l,showCTAs:d,skipPreloading:p,src:h}=e,{iString:c}=this.context;if(l){let{dragTime:e,duration:t,currentTime:a,playbackRate:r}=this.state,o="number"==typeof e?e:a;return(0,n.BX)(n.HY,{children:[l({isPaywalled:s,progress:t?("number"==typeof e?e:a)/t:0,currentTime:t?(0,Z.secondsToHHMMSS)(o):"--:--",dragTime:"number"==typeof e?(0,Z.secondsToHHMMSS)(e):null,duration:t,remainingTime:t?"-".concat((0,Z.secondsToHHMMSS)(t-Math.min(o,t))):"--:--",isPlaying:this.state.playing,playbackRate:r,progressBarOnMouseDown:e=>{this.onMouseDown(e)},progressBarRef:this.progressBar,setPlaybackRate:e=>{this.setPlaybackRate(e)},skipBack:()=>{this.skipBack()},skipForward:()=>{this.skipForward()},togglePlayback:()=>{this.togglePlayback()}}),h&&!s&&(0,n.tZ)("audio",{ref:this.assignPlayer,src:h,autoPlay:i,preload:p?"none":"auto",children:c("Audio playback is not supported on your browser. Please upgrade.")})]})}return a?this.renderFancy({src:h,autoPlay:i,pub:o,post:r,showCTAs:d}):this.renderOriginal({src:h,autoPlay:i,pub:o,addToPodcastLink:t})}renderFancy(e){var t,i;let{src:a,autoPlay:o,pub:l,post:d,showCTAs:p}=e,{iString:h}=this.context,c=(0,f.Tn)(l,d);return(0,n.tZ)(n.HY,{children:(0,n.tZ)("div",{className:"audio-player-wrapper-fancy",children:(0,n.BX)("div",{className:"audio-player",children:[(0,n.tZ)("div",{className:"audio-player-substack-logo audio-player-clickable",onClick:this.openEpisodePage,children:(0,n.tZ)(g.Z,{color:"#F8F8F8"})}),(0,n.tZ)("div",{className:"audio-player-hero-image-container audio-player-clickable",onClick:this.openEpisodePage,children:c&&(0,n.tZ)("img",{className:"audio-player-hero-image audio-player-clickable",src:(0,E.zF4)(c,500,{height:500,crop:"fill"}),onClick:this.openEpisodePage})}),(0,n.tZ)("div",{className:"audio-player-title audio-player-clickable",onClick:this.openEpisodePage,children:null!==(t=null==d?void 0:d.title)&&void 0!==t?t:""}),(0,n.tZ)("div",{className:"audio-player-subtitle audio-player-clickable",onClick:this.openEpisodePage,children:null!==(i=null==d?void 0:d.subtitle)&&void 0!==i?i:""}),a&&(0,n.tZ)("audio",{"data-testid":"audio-element",ref:this.assignPlayer,src:a,autoPlay:o,children:h("Audio playback is not supported on your browser. Please upgrade.")}),this.renderProgressFancy(this.props,this.state),this.renderButtonsFancy(this.props,this.state),p&&(0,n.BX)("div",{className:"btn-group",children:[(0,n.tZ)(P.zx,{priority:"secondary",newTab:!0,onClick:this.openEpisodePage,children:h("View post")}),(0,n.tZ)(P.zx,{priority:"primary",href:l?this.maybeAppendIframeVisitId((0,E.W1P)(l,(0,r._)((0,s._)({},C),{simple:!0,next:(0,E.uRy)(l,d)}))):void 0,newTab:!0,children:(0,Z.getSubscribeText)(l)})]})]})})})}renderOriginal(e){let{src:t,autoPlay:i,pub:a,addToPodcastLink:s}=e,{iString:r}=this.context;return(0,n.BX)("div",{className:"audio-player-wrapper",children:[(0,n.BX)("div",{className:"audio-player",children:[t&&(0,n.tZ)("audio",{ref:this.assignPlayer,src:t,autoPlay:i,children:r("Audio playback is not supported on your browser. Please upgrade.")}),this.renderButtons(this.props,this.state),this.renderProgress(this.props,this.state)]}),s&&a&&!a.hide_podcast_feed_link&&(0,n.tZ)("div",{className:"audio-player-add-to-podcast-link",children:(0,n.tZ)("a",{href:s,target:"_blank",rel:"noopener",children:r("Listen in podcast app")})})]})}renderButtonsFancy(e,t){let{playing:i,waiting:a}=t;return(0,n.BX)("div",{className:"audio-player-buttons",children:[(0,n.tZ)("button",{className:"audio-player-backward","aria-pressed":"false",onClick:()=>this.skipBack(),children:(0,n.tZ)(c.Z,{className:"skip-icon"})}),(0,n.tZ)("button",{className:d()("audio-player-play",{pause:"playing",waiting:a}),"aria-pressed":"false",onClick:()=>this.togglePlayback(),children:i?(0,n.tZ)(y.Z,{className:"playback-icon pause",fill:"#1C110B"}):(0,n.tZ)(m.Z,{className:"playback-icon play",fill:"#1C110B"})}),(0,n.tZ)("button",{className:"audio-player-forward","aria-pressed":"false",onClick:()=>this.skipForward(),children:(0,n.tZ)(u.Z,{className:"skip-icon"})})]})}renderButtons(e,t){let{src:i,href:a,isStatic:s}=e,{playing:r,waiting:o,playbackRate:l}=t;return(0,n.BX)("div",{className:"audio-player-buttons",children:[(0,n.tZ)("table",{className:"custom",children:(0,n.BX)("tr",{children:[(0,n.tZ)("td",{className:"audio-player-buttons-spacing",children:"\xa0"}),(0,n.tZ)("td",{className:"audio-player-backward",children:(0,n.tZ)("a",{role:"button",className:"button",tabIndex:0,"aria-pressed":"false",href:a||"javascript:void(0)",onClick:()=>this.skipBack(),children:(0,n.tZ)(c.Z,{className:"skip-icon",fill:"#3c3c3c",height:30,isStatic:s})})}),(0,n.tZ)("td",{className:"audio-player-play ".concat(r?"pause":""," ").concat(o?"waiting":""),children:(0,n.tZ)("a",{className:"button",role:"button",tabIndex:0,"aria-pressed":"false",href:a||"javascript:void(0)",onClick:()=>this.togglePlayback(),children:(0,n.tZ)("img",{src:(0,E.zF4)(r?"/img/audio-player-pause.png":"/img/audio-player-play.png",96)})})}),(0,n.tZ)("td",{className:"audio-player-forward",children:(0,n.tZ)("a",{role:"button",className:"button",tabIndex:0,"aria-pressed":"false",href:a||"javascript:void(0)",onClick:()=>this.skipForward(),children:(0,n.tZ)(u.Z,{className:"skip-icon",fill:"#3c3c3c",height:30,isStatic:s})})}),(0,n.tZ)("td",{className:"audio-player-buttons-spacing",children:"\xa0"})]})}),i&&(0,n.tZ)(B,{currentPlaybackRate:l,setPlaybackRate:this.setPlaybackRate})]})}renderProgress(e,t){let{duration:i,currentTime:a,dragTime:s}=t;return(0,n.tZ)("div",{className:"audio-player-progress",children:(0,n.tZ)("table",{className:"custom",children:(0,n.BX)("tr",{children:[(0,n.tZ)("td",{className:"audio-player-progress-past",children:i?(0,Z.secondsToHHMMSS)(a):"--:--"}),(0,n.BX)("td",{ref:this.progressBar,className:"audio-player-progress-bar",onMouseDown:e=>this.onMouseDown(e),children:[(0,n.tZ)("div",{className:"audio-player-progress-bar-track"}),(0,n.tZ)("div",{className:"audio-player-progress-bar-filled",style:"width:".concat(i?100*("number"==typeof s?s:a)/i:0,"%")}),(0,n.tZ)("div",{className:"audio-player-progress-bar-current",style:"left:".concat(i?100*a/i:0,"%")}),(0,n.tZ)("div",{className:"audio-player-progress-bar-button",style:"left:".concat(i?100*("number"==typeof s?s:a)/i:0,"%")}),"number"==typeof s&&(0,n.tZ)("div",{className:"audio-player-progress-bar-popup",style:"left:".concat(i?100*s/i:0,"%"),children:(0,Z.secondsToHHMMSS)(s)})]}),(0,n.tZ)("td",{className:"audio-player-progress-left",children:i?"-".concat((0,Z.secondsToHHMMSS)(i-Math.min(a,i))):"--:--"})]})})})}renderProgressFancy(e,t){let{duration:i,currentTime:a,dragTime:s,lastDragClearedAt:r}=t,o="number"==typeof s,l=!!r&&performance.now()-r<50;return(0,n.BX)(n.HY,{children:[(0,n.tZ)("div",{className:"audio-player-progress",children:(0,n.BX)("div",{ref:this.progressBar,className:"audio-player-progress-bar",onMouseDown:e=>this.onMouseDown(e),children:[(0,n.tZ)("div",{className:"audio-player-progress-bar-track"}),(0,n.tZ)("div",{className:"audio-player-progress-bar-filled",style:{width:"".concat(i?100*(o?s:a)/i:0,"%")}}),(0,n.tZ)("div",{className:d()("audio-player-progress-bar-current",{"audio-player-progress-bar-current-placeholder":o,"audio-player-progress-bar-current-disable-animations":l}),style:"left:".concat(i?100*a/i:0,"%")}),o&&(0,n.tZ)("div",{className:"audio-player-progress-bar-current audio-player-progress-bar-current-dragging",style:"left:".concat(i?100*s/i:0,"%")}),o&&(0,n.tZ)("div",{className:"audio-player-progress-bar-popup",style:"left:".concat(i?100*s/i:0,"%"),children:(0,Z.secondsToHHMMSS)(s)})]})}),(0,n.BX)("div",{className:"audio-player-time-wrapper",children:[(0,n.tZ)("div",{className:"audio-player-progress-past",children:i?(0,Z.secondsToHHMMSS)(a):"--:--"}),(0,n.tZ)("div",{className:"audio-player-progress-left",children:i?"-".concat((0,Z.secondsToHHMMSS)(i-Math.min(a,i))):"--:--"})]})]})}constructor(e,t){super(e,t),(0,a._)(this,"player",void 0),(0,a._)(this,"progressBar",(0,o.createRef)()),(0,a._)(this,"loopId",void 0),(0,a._)(this,"isShowingCaptionsElsewhere",!1),(0,a._)(this,"_onGlobalPlay",void 0),(0,a._)(this,"_onMouseMove",void 0),(0,a._)(this,"_onTouchStart",void 0),(0,a._)(this,"_onTouchMove",void 0),(0,a._)(this,"_onDragEnd",void 0),(0,a._)(this,"_onCanPlay",void 0),(0,a._)(this,"_onPlay",void 0),(0,a._)(this,"_onPause",void 0),(0,a._)(this,"_onTimeUpdate",void 0),(0,a._)(this,"_onRateChange",void 0),(0,a._)(this,"_onWaiting",void 0),(0,a._)(this,"_onPlaying",void 0),(0,a._)(this,"assignPlayer",e=>{this.player=e}),(0,a._)(this,"onEnded",()=>{this.setState({playing:!1,waiting:!1}),this.trackMedia(_.FP.MEDIA_PLAYBACK_PAUSED)}),(0,a._)(this,"onSeeked",()=>{this.trackMedia(_.FP.MEDIA_SEEKED)}),(0,a._)(this,"setPlaybackRate",e=>{this.state.playbackRate!==e&&(this.player&&(this.player.playbackRate=e),this.setState({playbackRate:e}),(0,k.ex)(N,e))}),(0,a._)(this,"maybeAppendIframeVisitId",e=>{let t=(0,_.A)(),i=t?t.id:null;return i&&(e=(0,E.rhs)(e,{src_iid:i})),e}),(0,a._)(this,"openEpisodePage",()=>{if(!this.props.post)return;let e=this.props.post.canonical_url;e=this.maybeAppendIframeVisitId(e),e=(0,E.rhs)(e,C),(0,T.uX)(e,{newTab:!0})}),this._onGlobalPlay=this.onGlobalPlay.bind(this),this._onMouseMove=this.onMouseMove.bind(this),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onDragEnd=this.onDragEnd.bind(this),this._onCanPlay=this.onCanPlay.bind(this),this._onPlay=this.onPlay.bind(this),this._onPause=this.onPause.bind(this),this._onTimeUpdate=this.onTimeUpdate.bind(this),this._onRateChange=this.onRateChange.bind(this),this._onWaiting=this.onWaiting.bind(this),this._onPlaying=this.onPlaying.bind(this),this.state={playbackRate:e.playbackRate||(0,k.mM)(N,1),currentTime:0,waiting:!0,duration:e.duration||void 0,lastDragClearedAt:null}}}(0,a._)(D,"contextType",v.wj)},30218:function(e,t,i){i.d(t,{Z:()=>h});var a=i(16584),s=i(30396),r=i(20253),n=i(15771),o=i(19081),l=i(58175),d=i(51776),p=i(26111);let h=e=>{let{allowAllDay:t,redirect:i,onCancel:h,requiresMfa:c}=e,[u,y]=(0,s.eJ)(!1),[m,g]=(0,s.eJ)(""),[v,b]=(0,s.eJ)(!c),_=(0,s.sO)(null),f=i||(0,p.x)("redirect")||"/",k=(0,p.x)("for_pub")||"";return(0,s.d4)(()=>{_.current&&_.current.focus()},[]),(0,s.d4)(()=>{6===m.length&&b(!0)},[m]),(0,a.tZ)(r.ZP,{className:"customer-support-mode-form",analyticsName:"Customer Support Mode Form",action:"/api/v1/customer_support_mode",onSuccess:e=>{var t;let i=null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.redirect;i?document.location.href=i:document.location.href=f||"/"},autoLock:!0,children:(0,a.BX)(o.tu,{children:[(0,a.BX)(o.tu,{gap:8,children:[(0,a.tZ)(l.xv.Meta,{className:"danger",weight:"semibold",color:"error",children:"Danger"}),(0,a.tZ)(l.xv.H2,{children:"Support Mode"}),(0,a.tZ)(l.xv.B3,{children:"Be absolutely respectful to the writers on whose behalf you are working."}),c&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(l.xv.B3,{paddingTop:12,weight:"bold",children:"Enter your MFA code"}),(0,a.tZ)(d.oi,{ref:_,name:"code",inputMode:"numeric",maxLength:6,placeholder:"Code",value:m,width:300,autoComplete:"off",onChange:e=>g(e.target.value)})]}),t&&(0,a.tZ)("label",{children:(0,a.BX)(o.gq,{gap:8,children:[(0,a.tZ)("input",{type:"checkbox",defaultChecked:!1,onInput:e=>y(e.target.checked)})," ",(0,a.tZ)(l.xv.B3,{children:"Allow access for the day"})]})}),u&&(0,a.tZ)("input",{type:"hidden",name:"all_pubs",value:"true"}),(0,a.tZ)("input",{type:"hidden",name:"minutes",value:u?600:30}),(0,a.tZ)("input",{type:"hidden",name:"for_pub",value:k}),(0,a.tZ)("input",{type:"hidden",name:"redirect",value:f}),(0,a.BX)(o.gq,{gap:8,paddingTop:8,children:[(0,a.tZ)(n.zx,{priority:"destructive",type:"submit",id:"enter-support-mode",disabled:!v,children:"Enter support mode"}),h&&(0,a.tZ)(n.zx,{priority:"secondary",onClick:h,children:"Cancel"})]})]}),(0,a.tZ)("div",{id:"error-container"})]})})}}}]);