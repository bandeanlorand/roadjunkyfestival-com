"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["8695"],{19548:function(e,t,r){if(r.d(t,{CH:()=>y,Jv:()=>_,KG:()=>b,Y_:()=>g,Yq:()=>x,fQ:()=>N,gc:()=>k}),/^(2[79]87|3154|4716|5288|6909)$/.test(r.j))var n=r(7409);if(/^(2[79]87|3154|4716|5288|6909)$/.test(r.j))var a=r(99282);var i=r(16584),o=r(6400),l=r(30396);if(/^(2[79]87|3154|4716|5288|6909)$/.test(r.j))var s=r(10844);if(/^(2[79]87|3154|4716|5288|6909)$/.test(r.j))var c=r(88812);var d=r(60807),u=r(48980),h=r(7882),f=r(98914),p=r(44424),m=r(70379);let Z={mutes:[],blocks:[],blocked:[]},v=(0,o.createContext)({result:Z,refetch:async()=>null,isBlockingUser:()=>!1,isMutedByUser:()=>!1,isBlockedByUser:()=>!1});function g(e){let{user:t,children:r}=e,n=(0,h.ib)({pathname:"/api/v1/blocks/ids",deps:[t],auto:!!t}),a=(0,l.Ye)(()=>{let{result:e,refetch:t}=n;if(e){let{blocked:r,mutes:n,blocks:a}=e,i=new Set(r),o=new Set(n),l=new Set(a);return{result:e,refetch:t,isBlockingUser:e=>i.has(e),isMutedByUser:e=>o.has(e),isBlockedByUser:e=>l.has(e)}}return{result:Z,refetch:t,isBlockingUser:()=>!1,isMutedByUser:()=>!1,isBlockedByUser:()=>!1}},[n.result]);return(0,i.tZ)(v.Provider,{value:a,children:r})}function _(){return(0,l.qp)(v)}function b(e){let{isBlockingUser:t,isBlockedByUser:r}=(0,l.qp)(v);return e?r(e)?"blocking":t(e)?"blocked":null:null}function k(e){let{isBlockingUser:t,isBlockedByUser:r,isMutedByUser:n}=(0,l.qp)(v);return e?n(e)?"muting":r(e)?"blocking":t(e)?"blocked":null:null}function y(e,t){let{surface:r,noteId:o,onClick:l}=t,h=(0,d.aF)(),Z=!!(h&&e&&h.id!==e.id),v=_(),g=k(null==e?void 0:e.id),b=(0,m.pm)(),y=async()=>{if(e){try{await (0,u.rd)("/api/v1/blocks/".concat(e.id),{method:"POST",json:{type:"mute",surface:r,noteId:o}})}catch(e){b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:(0,f.zx)(e)})));return}v.refetch(),b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:"".concat(e.name||"User"," muted"),Icon:s.Z}))),null==l||l("mute")}},w=async()=>{if(e){try{await (0,u.rd)("/api/v1/blocks/".concat(e.id),{method:"DELETE",query:{surface:r,noteId:o}})}catch(e){b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:(0,f.zx)(e)})));return}v.refetch(),b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:"".concat(e.name||"User"," unmuted"),Icon:s.Z}))),null==l||l("unmute")}},N=async()=>{if(e){try{await (0,u.rd)("/api/v1/blocks/".concat(e.id),{method:"POST",json:{type:"block",surface:r,noteId:o}})}catch(e){b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:(0,f.zx)(e)})));return}v.refetch(),b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:"".concat(e.name||"User"," blocked"),Icon:c.Z}))),null==l||l("block")}},x=async()=>{if(e){try{await (0,u.rd)("/api/v1/blocks/".concat(e.id),{method:"DELETE",query:{surface:r,noteId:o}})}catch(e){b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:(0,f.zx)(e)})));return}v.refetch(),b.popToast(t=>(0,i.tZ)(m.FN,(0,a._)((0,n._)({},t),{text:"".concat(e.name||"User"," unblocked"),Icon:c.Z}))),null==l||l("unblock")}},C=[];return Z&&("blocking"!==g&&C.push((0,i.tZ)(p.sN,{leading:(0,i.tZ)(s.Z,{}),priority:"destructive",onClick:"muting"===g?w:y,children:"muting"===g?"Unmute":"Mute"})),C.push((0,i.tZ)(p.sN,{leading:(0,i.tZ)(c.Z,{}),priority:"destructive",onClick:"blocking"===g?x:N,children:"blocking"===g?"Unblock":"Block"}))),C}v.displayName="UserBlockContext";let w=(0,o.createContext)(!1);function N(e){let{muteFree:t=!0,children:r}=e;return(0,i.tZ)(w.Provider,{value:t,children:r})}function x(){return(0,l.qp)(w)}w.displayName="MuteFreeZone"},45783:function(e,t,r){if(r.d(t,{De:()=>m,R3:()=>_,eK:()=>p,nD:()=>v,rQ:()=>Z}),!/^(1588|1691|2536|4457)$/.test(r.j))var n=r(7409);if(!/^(1588|1691|2536|4457)$/.test(r.j))var a=r(99282);if(/^(2987|3270)$/.test(r.j))var i=r(98848);var o=r(16584),l=r(94184),s=r.n(l);if(/^(2987|3154|4716|5288|6909)$/.test(r.j))var c=r(56743);if(/^(2987|3154|4716|5288|6909)$/.test(r.j))var d=r(2564);var u=r(98661),h=r(80026),f=r(68857);let p=function(e){let{inset:t=0,pageSizeAdjust:r=0,initialState:i,scrollFullPage:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[l,s]=(0,u.useState)(i||{showLeft:!1,showRight:!1});return(0,u.useEffect)(()=>{let{current:r}=e;if(r){let e=()=>{s(e=>{let i=e;!i.showLeft&&r.scrollLeft>t?i=(0,a._)((0,n._)({},e),{showLeft:!0}):i.showLeft&&r.scrollLeft<=t&&(i=(0,a._)((0,n._)({},e),{showLeft:!1}));let o=r.scrollWidth-r.offsetWidth-4-t;return!i.showRight&&r.scrollLeft<o?i=(0,a._)((0,n._)({},e),{showRight:!0}):i.showRight&&r.scrollLeft>=o&&(i=(0,a._)((0,n._)({},e),{showRight:!1})),i})};return r.addEventListener("scroll",e),setTimeout(()=>{e()},50),()=>{r.removeEventListener("scroll",e)}}},[]),{state:l,handleArrowClick:t=>()=>{let{current:n}=e;n&&n.scrollBy({left:t*(o?n.offsetWidth:n.offsetWidth/2-r),behavior:"smooth"})}}};function m(e){var{className:t,scrollRef:r}=e,l=(0,i._)(e,["className","scrollRef"]);return(0,o.tZ)(h.hs,(0,a._)((0,n._)({},l),{className:s()(f.Z.scrollBox,t),ref:r,overflowX:"auto",scrollBar:"hidden",minWidth:0,onTouchStart:e=>{let{pageX:t}=e;void 0!==t&&(!(t>10)||!(t<window.innerWidth-10))&&e.preventDefault()}}))}function Z(e){let{direction:t,isVisible:r=!0,onClick:n}=e;return(0,o.tZ)(h.hs,{alignItems:"center",justifyContent:"center",position:"absolute",className:s()(f.Z.arrowButtonContainer,f.Z.arrowButtonOffsetContainer,r&&f.Z.visible,f.Z[t]),children:(0,o.tZ)(g,{direction:t,isVisible:r,onClick:n})})}function v(e){let{direction:t,isVisible:r=!0,onClick:n}=e;return(0,o.tZ)(_,{direction:t,isVisible:r,children:(0,o.tZ)(g,{direction:t,isVisible:r,onClick:n,className:f.Z.arrowButtonOverlaid})})}function g(e){let{direction:t,isVisible:r=!0,onClick:n,className:a}=e;return(0,o.tZ)(h.hU,{size:"sm",priority:"quaternary",disabled:!r,className:a,onClick:n,"aria-hidden":!r,"aria-label":r?"left"===t?"Previous":"Next":void 0,children:"left"===t?(0,o.tZ)(c.Z,{}):(0,o.tZ)(d.Z,{})})}function _(e){let{direction:t,isVisible:r=!0,children:n,bg:a="primary"}=e;return(0,o.BX)(h.hs,{alignItems:"center",className:s()(f.Z.arrowButtonContainer,f.Z.arrowButtonOverlaidContainer,r&&f.Z.visible,f.Z[t]),children:[(0,o.tZ)("div",{className:s()(f.Z.overlay,f.Z[a])}),n]})}},76566:function(e,t,r){r.d(t,{S:()=>u,m:()=>f});var n=r(27412),a=r(16584),i=r(20042),o=r(98661),l=r(20888),s=r(9682),c=r(19081),d=r(58175);class u extends o.Component{static getDerivedStateFromError(e){return{error:e}}componentDidMount(){Promise.all([r.e("7152"),r.e("6993")]).then(r.bind(r,91985)).then(e=>{this.Sentry=e.Sentry})}componentDidCatch(e){console.error(e),this.Sentry&&this.Sentry.captureException(e)}render(){let{error:e}=this.state;return(0,a.tZ)(h,{onReset:()=>this.setState({error:null}),error:e,children:e?(0,a.tZ)(f,{}):this.props.children})}constructor(e){super(e),(0,n._)(this,"Sentry",null),this.state={error:null}}}function h(e){let{onReset:t,error:r,children:n}=e,l=(0,o.useRef)((0,i.getCurrentUrl)());return(0,s.js)(e=>{r&&l.current!==e&&t(),l.current=e},[]),r?(0,a.tZ)(f,{}):n}function f(){return(0,a.BX)(c.tu,{flex:"grow",justifyContent:"center",alignItems:"center",gap:32,padding:20,children:[(0,a.tZ)(l.e,{src:"/img/reader/toad.png",maxWidth:200}),(0,a.BX)(c.tu,{gap:8,children:[(0,a.tZ)(d.xv.H3,{weight:"semibold",align:"center",children:"Oh noâ€”this page croaked."}),(0,a.tZ)(d.xv.B3,{color:"secondary",align:"center",children:"Try again, or hop to another page."})]})]})}},65575:function(e,t,r){r.d(t,{$l:()=>F,CQ:()=>q,ET:()=>H,EU:()=>ee,Ex:()=>P,Hd:()=>Q,Hn:()=>j,II:()=>X,K_:()=>z,NP:()=>x,NZ:()=>C,P2:()=>Y,QE:()=>G,SC:()=>K,T3:()=>U,Uj:()=>B,V1:()=>N,Vm:()=>w.V,Wo:()=>I,Xq:()=>A,YE:()=>$,Z0:()=>J,_Y:()=>S,eK:()=>m.eK,fG:()=>L,gq:()=>f.gq,mE:()=>V,mb:()=>W,nv:()=>T,nw:()=>R,ox:()=>E,pe:()=>D,t5:()=>y.t,tu:()=>f.tu,xV:()=>O,zr:()=>et});var n=r(7409),a=r(99282),i=r(98848),o=r(16584),l=r(98661),s=r(94184),c=r.n(s),d=r(1852),u=r(80878),h=r(98914),f=r(19081),p=r(58175),m=r(45783),Z=r(66611),v=r(76566),g=r(91400),_=r(63651),b=r(47929),k=r(28840),y=r(38202),w=r(36889);function N(e){let{children:t}=e,r=(0,g.XA)();return(0,o.tZ)(M,{children:r?(0,o.tZ)(p.xv.H2,{children:t}):(0,o.tZ)(p.xv.H1,{children:t})})}function x(e){let{className:t,children:r,title:n,hasTitle:a}=e;return(0,o.BX)("div",{className:c()("reader2-page-section",(n||a)&&"withTitle",t),children:[n&&(0,o.tZ)(C,{children:n}),r]})}function C(e){let{children:t,className:r,actions:n}=e;return(0,o.BX)("div",{className:c()("reader2-section-title",r),children:[(0,o.tZ)("span",{className:"reader2-text-h3 reader2-section-title",children:t}),n&&(0,o.tZ)("div",{className:"reader2-header-actions",children:n})]})}let B=(0,l.forwardRef)((e,t)=>{var{isPadded:r=!0,className:l,linkClassName:s}=e,d=(0,i._)(e,["isPadded","className","linkClassName"]);return(0,o.tZ)("div",{ref:t,className:c()(k.Z.linkRow,r&&k.Z.isPadded,l),children:(0,o.tZ)(L,(0,a._)((0,n._)({},d),{className:s}))})});function L(e){var{children:t,className:r,href:l,newTab:s,onClick:d,noAnchor:h,native:p,utmCampaign:m,utmSource:Z,isSelected:v}=e,g=(0,i._)(e,["children","className","href","newTab","onClick","noAnchor","native","utmCampaign","utmSource","isSelected"]);let y="undefined"!=typeof location?location.pathname:"",w=h||null==l?"div":"a",N=l&&(0,_.n1t)(l,{utm_source:Z||y,utm_medium:b.lP.reader2,utm_campaign:m});return(0,o.tZ)(f.hs,(0,a._)((0,n._)({as:w,className:c()(k.Z.linkRowA,r,(N||d)&&null==v&&k.Z.isClickable,v&&k.Z.isSelected,null!=v&&k.Z.isSelectable),"data-selected":v,href:N,target:s?"_blank":void 0,onClick:e=>{d&&d(e),!e.defaultPrevented&&h&&N&&(0,u.Q)(e,N,{native:p,newTab:s})},showFocus:!0,animate:!0},g),{children:t}))}function S(e){let{icon:t,title:r,text:n,action:a,className:i}=e;return(0,o.BX)(f.tu,{gap:16,alignItems:"center",justifyContent:"center",flex:"grow",className:c()(k.Z.zero,i),children:[t,(0,o.BX)(f.tu,{gap:4,children:[(0,o.tZ)(p.xv.B4,{weight:"semibold",color:"primary",children:r}),(0,o.tZ)(p.xv.B4,{color:"secondary",children:n})]}),a]})}function T(e){var{className:t,variant:r,size:a,serif:l,isConstrained:s,maxLines:d=3}=e,u=(0,i._)(e,["className","variant","size","serif","isConstrained","maxLines"]);return(0,o.tZ)("div",(0,n._)({className:c()("reader2-paragraph",r&&"reader2-".concat(r),a&&"reader2-font-".concat(a),l&&"reader2-font-serif",s&&"reader2-clamp-lines reader2-".concat(d,"-lines"),t)},u))}function E(e){let{className:t,children:r}=e;return(0,o.tZ)("div",{className:c()("reader-nav-center",t),children:(0,o.tZ)("div",{className:"reader2-page reader2-font-base",children:r})})}function U(e){let{className:t,scrollRef:r,children:n}=e;return(0,o.tZ)(I,{ref:r,children:(0,o.tZ)(E,{className:t,children:n})})}function j(e){var{scrollRef:t}=e,r=(0,i._)(e,["scrollRef"]);return(0,o.tZ)(I,{ref:t,children:(0,o.tZ)(f.hs,(0,a._)((0,n._)({},r),{flex:"grow",paddingX:{mobile:0,desktop:20},minWidth:0}))})}function R(e){return(0,d.useMediaQuery)({minWidth:1100})?(0,o.tZ)(f.tu,(0,n._)({className:"reader2-inbox-sidebar",paddingTop:20},e)):null}function F(e){return(0,o.tZ)(f.hs,(0,n._)({alignItems:"center",justifyContent:"space-between",paddingX:8},e))}function P(e){return(0,o.tZ)(f.tu,(0,n._)({gap:8},e))}let I=(0,l.forwardRef)((e,t)=>(0,o.tZ)(v.S,{children:(0,o.tZ)("div",(0,n._)({id:"reader-nav-page-scroll",className:c()("reader-nav-page-scroll",e.className),ref:t},e))})),X=(0,l.forwardRef)((e,t)=>{var{className:r,hasError:l}=e,s=(0,i._)(e,["className","hasError"]);return(0,o.tZ)("input",(0,a._)((0,n._)({className:c()(k.Z.input,l&&k.Z.error,r)},s),{ref:t}))});function q(e){let{error:t}=e;return(0,o.tZ)(A,{children:(0,h.zx)(t)})}let z=e=>{let{header:t,icon:r,title:n,text:a,action:i}=e;return(0,o.tZ)(x,{title:t,children:(0,o.tZ)(W,{icon:r,title:n,text:a,action:i})})};function W(e){return(0,o.tZ)(f.tu,{bg:"secondary",border:"detail",radius:"md",paddingX:20,paddingY:64,justifyContent:"center",alignItems:"center",flex:"grow",children:(0,o.tZ)(S,(0,n._)({},e))})}function $(e){let{children:t}=e;return(0,o.tZ)(f.tu,{className:"reader2-inbox-sidebar-fixed",children:t})}function D(e){var{gap:t=16}=e,r=(0,i._)(e,["gap"]);return(0,o.tZ)(f.tu,(0,a._)((0,n._)({},r),{className:c()(k.Z.pageStack,k.Z["gap_".concat(t)])}))}let M=(0,Z.L)("reader2-page-top");(0,Z.L)(k.Z.pageTopFixed);let O=(0,Z.L)("reader2-page-body"),V=(0,Z.L)(k.Z.pageStack),H=(0,Z.L)("reader2-page-center");(0,Z.L)("reader2-modal-title-text"),(0,Z.L)("reader2-column");let Q=(0,Z.L)("reader2-text-h3 reader2-section-title"),Y=(0,Z.L)("reader2-text-h4");(0,Z.L)("reader2-item-title");let K=(0,Z.L)("reader2-item-meta"),A=(0,Z.L)("reader2-form-error"),G=(0,Z.L)("reader2-subtitle"),J=(0,Z.L)("reader2-separator","hr");(0,Z.L)("reader2-page-section withTitle"),(0,Z.L)("reader2-row reader2-split-row");let ee=(0,Z.L)(c()(k.Z.hoverLink,"pencraft"),"a");function et(e){return(0,o.tZ)(ee,(0,n._)({target:"_blank"},e))}},65958:function(e,t,r){r.d(t,{s:()=>p,z:()=>m});var n=r(7409),a=r(99282),i=r(16584),o=r(48980),l=r(80878),s=r(7882),c=r(70379),d=r(97842),u=r(95551),h=r(62515),f=r(36186);function p(e){let{source:t}=e,r=m({source:t}),s=(0,u.d)(),d=(0,c.pm)(),p=async e=>{var t;let u=await r.handleStart(e);return u instanceof Error?(u instanceof o.kp&&(null===(t=u.body)||void 0===t?void 0:t.type)==="profile_not_set_up"?d.popToast(e=>(0,i.tZ)(c.FN,(0,a._)((0,n._)({},e),{text:"Please set up your profile before sending a message.",cta:"Set up profile",href:(0,f.Nh)({utm_source:"substack",utm_campaign:"chat_dm_button",redirect:window.location}),localNavigation:!1}))):s(u,"Could not start conversation."),!1):((0,l._)((0,h.Rm)(u.thread.id)),!0)};return(0,a._)((0,n._)({},r),{handleStart:p})}function m(e){let{source:t}=e,r=(0,d.I0)(),i=(0,s.ib)({pathname:"/api/v1/messages/dm/start",method:"POST"}),o=async e=>{let n=await i.refetch({json:{user_ids:e,source:t}});return n instanceof Error||r({type:"conversation-load_more",payload:{edge:"before",cursor:null,page:n}}),n};return(0,a._)((0,n._)({},i),{handleStart:o})}}}]);